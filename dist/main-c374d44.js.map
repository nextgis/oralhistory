{"version":3,"sources":["webpack:///./src/components/NgwMap/NgwMap.vue?2ea8","webpack:///./src/components/NgwMap/NgwMap.vue?da67","webpack:///./src/components/Detail/Detail.vue?4eb6","webpack:///./src/components/Detail/Detail.vue?cce1","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?3b1d","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?ef77","webpack:///./src/Main.vue?691f","webpack:///./src/Main.vue?664d","webpack:///./src/App.vue?126f","webpack:///./src/App.vue?46ec","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/CancelablePromise.ts","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/utils.ts","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/NgwConnector.ts","webpack:///./src/api/ngw.ts","webpack:///./src/store/modules/bd_main.ts","webpack:///./src/store/modules/app.ts","webpack:///./src/store/index.ts","webpack:///./src/App.vue?4d14","webpack:///./src/components/NextGIS/About.vue?ba22","webpack:///./src/components/NextGIS/About.vue?6ee7","webpack:///./src/components/NextGIS/About.ts","webpack:///./src/components/NextGIS/About.vue","webpack:///./src/components/Table/Table.vue?8e73","webpack:///./src/components/ShowMoreField/ShowMoreField.vue?1361","webpack:///./src/components/ShowMoreField/ShowMoreField.vue?d671","webpack:///./src/components/ShowMoreField/ShowMoreField.ts","webpack:///./src/components/ShowMoreField/ShowMoreField.vue","webpack:///./src/components/Table/Table.vue?7235","webpack:///./src/components/Table/Table.ts","webpack:///./src/components/Table/Table.vue","webpack:///./src/Main.vue?28a0","webpack:///./src/components/List/List.vue?8e53","webpack:///./src/components/List/List.vue?26f3","webpack:///./src/components/List/List.ts","webpack:///./src/components/List/List.vue","webpack:///./src/components/NgwMap/NgwMap.vue?8f18","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/BaseAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/util/image_icons.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/MvtAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/TileAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/OsmAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/ZoomControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/CompassControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/AttributionControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/GeoJsonAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/createControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/MapboxglMapAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/index.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/createButtonControl.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/keys/KeysCodes.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/keys/Keys.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/decorators.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/deepmerge.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/preparePaint.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/geometryTypes.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/controls/ButtonControl.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/WebMap.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/index.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/controls/ToggleControl.ts","webpack:///./nextgisweb_frontend/packages/qms-kit/src/utility.ts","webpack:///./nextgisweb_frontend/packages/qms-kit/src/index.ts","webpack:///./nextgisweb_frontend/packages/qms-kit/src/QmsKit.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createGeoJsonAdapter.ts","webpack:///./nextgisweb_frontend/packages/item/src/TreeUtil.ts","webpack:///./nextgisweb_frontend/packages/item/src/TreeHelper.ts","webpack:///./nextgisweb_frontend/packages/item/src/properties/BaseProperty.ts","webpack:///./nextgisweb_frontend/packages/item/src/Item.ts","webpack:///./nextgisweb_frontend/packages/item/src/properties/CheckProperty.ts","webpack:///./nextgisweb_frontend/packages/item/src/properties/ItemProperties.ts","webpack:///./nextgisweb_frontend/packages/item/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/WebMapLayerItem.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/utils.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/WebMapLayerAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createAsyncAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createWebMapAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createRasterAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/NgwKit.ts","webpack:///./nextgisweb_frontend/packages/icons/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/decorators.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/utils.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/NgwMap.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/index.ts","webpack:///./src/components/NgwMap/NgwMap.vue?8bbe","webpack:///./src/components/NgwMap/NgwMap.ts","webpack:///./src/components/NgwMap/NgwMap.vue","webpack:///./src/components/ItemsFilter/ItemsFilter.vue?0bf8","webpack:///./src/components/ItemsFilter/ItemsFilter.vue?c8b5","webpack:///./src/components/ItemsFilter/ItemsFilter.ts","webpack:///./src/components/ItemsFilter/ItemsFilter.vue","webpack:///./src/components/Detail/Detail.vue?ee2e","webpack:///./src/components/Detail/Detail.vue?31c3","webpack:///./src/components/Detail/Detail.ts","webpack:///./src/components/Detail/Detail.vue","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?dee7","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?0b97","webpack:///./src/components/DrawerContainer/DrawerContainer.ts","webpack:///./src/components/DrawerContainer/DrawerContainer.vue","webpack:///./src/components/NgwMap/controls/Panel.vue?43be","webpack:///./src/components/NgwMap/controls/utils/propsBinder.ts","webpack:///./src/components/NgwMap/controls/utils/optionsUtils.ts","webpack:///./src/components/NgwMap/controls/mixins/Control.ts","webpack:///./src/components/NgwMap/controls/PanelControl.ts","webpack:///./src/components/NgwMap/controls/Panel.vue?c1e4","webpack:///./src/components/NgwMap/controls/Panel.ts","webpack:///./src/components/NgwMap/controls/utils/findRealParent.ts","webpack:///./src/components/NgwMap/controls/Panel.vue","webpack:///./src/Main.vue?4f76","webpack:///./src/Main.ts","webpack:///./src/store/utils/throttle.ts","webpack:///./src/Main.vue","webpack:///./src/App.vue?3799","webpack:///./src/App.ts","webpack:///./src/App.vue","webpack:///./src/index.ts","webpack:///./src/components/NextGIS/About.vue?5f9c","webpack:///./src/components/Table/Table.vue?7f54","webpack:///./src/components/NgwMap/NgwMap.vue?b0c2","webpack:///./src/components/Detail/Detail.vue?5831","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?cd80","webpack:///./src/Main.vue?cd22","webpack:///./src/App.vue?13e8","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/polyfills.ts","webpack:///./src/components/NextGIS/About.vue?8cda","webpack:///./src/components/NextGIS/About.vue?1cf2","webpack:///./src/components/Table/Table.vue?0c36","webpack:///./src/components/Table/Table.vue?0397"],"names":["_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_NgwMap_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","module","exports","push","i","version","sources","names","mappings","file","sourcesContent","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Detail_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_DrawerContainer_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Main_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","handleCallback","resolve","reject","callback","r","e","CancelablePromise","executor","onCancel","this","_canceled","_promise","Promise","prototype","then","onfulfilled","onrejected","_this","p","cancel","catch","undefined","errorCallback","_destroy","finally","onfinally","templateRe","template","str","data","replace","s","key","value","Error","src","NgwConnector","options","emitter","events","routeStr","_loadingQueue","_loadingStatus","route","connect","auth","_a","login","password","getUserInfo","_b","sent","makeQuery","credentials","headers","getAuthorizationHeaders","user","emit","er","client","makeClientId","Authorization","window","btoa","unescape","encodeURIComponent","request","name","params","apiItems","apiItem","slice","url","shift","length","replaceParams","fry","arg","paramArray","hasOwnProperty","indexOf","join","post","method","nocache","get","baseUrl","_getJson","_executeLoadingQueue","_setLoadingQueue","waiting","timestamp","Date","isError","queue","wait","error","xhr","XMLHttpRequest","open","processingResponce","forError","cb","responseText","JSON","parse","message","onreadystatechange","readyState","status","statusText","onerror","upload","onprogress","lengthComputable","percentComplete","loaded","total","onProgress","h","header","setRequestHeader","withCredentials","FormData","append","d","stringify","abort","send","loadJSON","forEach","x","ngw_url","config","location","protocol","ngw_connector","ngw","id","ngwMarkerLayerId","features","properties","Number","layerWithPhotos","map","text","noHide","type","bd_main","namespaced","state","items","photos","meta","filtered","detailItem","getters","rootState","sortFeatures","sort","a","b","toUpperCase","actions","getAllItems","commit","getPhotos","setFilter","detail","find","setDetail","item","mutations","setItems","setMeta","setPhotos","app","drawer","page","center","listSearchText","showDrawer","hideDrawer","setListSearchText","toggleDrawer","setPage","zoomTo","setCenter","vue_esm","use","vuex_esm","store","Store","modules","bdMain","strict","render","_vm","_h","$createElement","_c","_self","_v","attrs","fullscreen","scrollable","transition","staticClass","dark","color","icon","nativeOn","click","$event","solo-inverted","flat","hide-details","label","prepend-inner-icon","model","tableSearch","$$v","expression","search","paginationSync","_e","pagination","pages","total-visible","$set","_withStripped","Aboutvue_type_template_id_5e667ffc_render","align-center","justify-center","column","fill-height","on","openNextGIS","staticStyle","enable-background","xmlns","xmlns:xlink","y","viewBox","xml:space","Aboutvue_type_script_lang_ts_","_super","About","__extends","href","__decorate","vue_class_component_common_default","component","Object","componentNormalizer","installComponents_default","VApp","VLayout","__file","NextGIS_About","Tablevue_type_template_id_647119ad_render","hide-actions","update:pagination","scopedSlots","_u","fn","props","bottom","slot","_s","_l","charCount","ShowMoreFieldvue_type_template_id_051b4be1_render","String","toShow","onClick","expand","ShowMoreFieldvue_type_script_lang_ts_","ShowMoreField","apply","arguments","ShowMoreField_extends","defineProperty","ShowMoreField_decorate","vue_property_decorator","default","ShowMoreField_component","components_ShowMoreField_ShowMoreField","Tablevue_type_script_lang_ts_","Table","rowsPerPage","Table_extends","$store","setPagination","Table_decorate","components","Table_component","VDataTable","VTooltip","components_Table_Table","Mainvue_type_template_id_3ffae6b2_render","zoom","position","justify-start","row","fab","small","class","active","large","stateless","fixed","width","justify-space-between","solo","clearable","indeterminate","absolute","right","Listvue_type_template_id_87fbdfe2_render","dense","portion","title","ripple","style","displayItems","addPortion","Listvue_type_script_lang_ts_","List","portionCount","List_extends","mounted","watch","_items","resetPortions","getDisplayItems","filter","toLowerCase","dispatch","portionsLength","itemsLength","addLength","len","List_decorate","List_component","VBtn","VIcon","VList","VListTile","VListTileAction","VListTileContent","components_VList","VListTileTitle","components_List_List","NgwMapvue_type_template_id_7098f862_render","ready","_t","canvg","ID","BaseAdapter","_layerId","addLayer","MvtAdapter","MvtAdapter_extends","idString","__assign","layerOptions","source-layer","source","tiles","layout","visibility","paint","before","layer","TileAdapter","TileAdapter_extends","sourceOptions","TileAdapter_assign","subdomains","split","tileSize","attribution","OPTIONS","OsmAdapter","OsmAdapter_extends","call","assign","ZoomControl","ZoomControl_assign","showCompass","ZoomControl_extends","_createButton","className","ariaLabel","element","alias","Zoom in","Zoom out","setAttribute","mapbox_gl","CompassControl","showZoom","CompassControl_extends","AttributionControl","AttributionControl_extends","getImageData","img","opt","canvas","document","createElement","context","getContext","height","HTMLImageElement","drawImage","allowedByType","circle","line","fill","concat","typeAlias","Point","LineString","MultiPoint","Polygon","MultiLineString","MultiPolygon","GeometryCollection","typeAliasForFilter","backAliases","layerType","backAlias","PAINT","opacity","radius","GeoJsonAdapter_ID","GeoJsonAdapter_GeoJsonAdapter","GeoJsonAdapter","selected","_features","_selectedFeatureIds","_filteredFeatureIds","_types","_sourceId","_selectionName","$onLayerClick","_onLayerClick","bind","GeoJsonAdapter_extends","GeoJsonAdapter_assign","addSource","types","types_1","_i","t","geomType","_detectPaintType","_getLayerNameFromType","geomFilter","_addLayer","selectedPaint","selectionLayer","_getSelectionLayerNameFromType","addData","_addEventsListeners","removeLayer","layerId","removeSource","clearLayer","getSource","setData","detectedType","geojson","geometry","featuresTypes","f","findMostFrequentGeomType","geometryTypes","geometries","g","detectType","filterGeometries","rendromId","_rendrom_id","_filterFun","_filter","_updateLayerPaint","getLayers","feature","visible","_getRendromId","fun","removeFilter","_updateFilter","getSelected","select","findFeatureFun","_selectFeature","unselect","_unselectFeature","ok","layerOpt","layerName","layers","selName","layers_1","name_1","_createPaintForType","_paint","setLayoutProperty","setPaintProperty","newFeatures","geometryFilter","geomCollection","_getPaintFromCallback","mapboxPaint","html","_registerImage","icon-image","allowed","allowedType","Array","isArray","paramName","toSave","hasImage","iconSize","svgStr","svgImage_1","Image","crossOrigin","onload","imageData","image","addImage","preventDefault","queryRenderedFeatures","point","isSelected","unselectOnSecondClick","onLayerClick","multiselect","index","splice","selectionArray","filteredArray","selLayerName","falsePaint","selectable","onLayerClick_1","getCanvas","cursor","backType","arr","counts","maxName","c","maxCount","createControl","control","Control","getDefaultPosition","onAdd","content","classList","add","bar","addClass","appendChild","_container","onRemove","parent_1","parentNode","removeChild","remove","fitBoundsOptions","padding","mapboxgl_map_adapter_src","MapboxglMapAdapter","layerAdapters","controlAdapters","isLoaded","_universalEvents","_sourceDataLoading","create","target","mapOpt","container","attributionControl","bounds","MapboxglMapAdapter_assign","fitOptions","once","getContainer","setView","jumpTo","latLng","getCenter","lng","lat","setZoom","getZoom","fit","fitBounds","linear","setRotation","angle","showLayer","layerIds","_toggleLayer","hideLayer","_map_1","setLayerOrder","order","_sortTimerId","clearTimeout","setTimeout","_setLayerOrder","setLayerOpacity","_map","_onMapLoad","getLayer","createButtonControl","link","HTMLElement","innerHTML","child","firstElementChild","lineHeight","offsetHeight","stopPropagation","addEventListener","parent","removeEventListener","addControl","removeControl","onMapClick","evt","lngLat","pixel","top","left","_resolve","baseLayers","orderedLayers","l","baseLayer","nextLayer","nextLayerId","mem","this_1","_getLayerIds","moveLayer","firstRealLayer","firstLayerId_1","_layers","getDependLayers","_onMapSourceData","dataType","isSourceLoaded","_onDataLoad","_onMapError","sourceId","keys","tile","TILE","MVT","OSM","GEOJSON","ZOOM","COMPASS","ATTRIBUTION","KeyCodes","Keys_Keys","Keys","keyCodeAlias","_windowOnFocus","windowOnFocus","_keysPressed","keysPressed","_keysReleased","keysReleased","addKeyboardEventsListener","pressed","keyName","code","removeKeyboardEventsListener","keyCode","decorators_onLoad","event","propertyKey","descriptor","originalMethod","args","origin","getEventStatus","deepmerge","mergeArray","array","dst","preparePaint","defaultPaint","getPaintFunctions","newPaint","getPaint","from","updatePaintOptionFromCallback","preparePaint_assign","stroke","strokeColor","strokeOpacity","fillColor","fillOpacity","detectGeometryType","geometryTypes_findMostFrequentGeomType","count","ButtonControl_createButtonControl","webMap","mapAdapter","WebMap_OPTIONS","minZoom","maxZoom","weight","WebMap_typeAlias","webmap_src","WebMap","appOptions","runtimeParams","_eventsStatus","_layersIds","_baseLayers","_selectedLayers","_starterKits","starterKits","mapOptions","_setupMap","_emitStatusEvent","getElementById","setCursor","fitLayer","layerDef","getExtent","extent","isBaseLayer","getLayerAdapters","getLayerAdapter","getLayerId","isLayerVisible","addBaseLayer","adapter","WebMap_assign","_order","adapterEngine","geoJsonOptions","_updateGeoJsonOptions","_adapter","onMapLoad","filterLayer","addLayerFromAsyncAdapter","removeLayers","allowCb","allow","removeOverlays","beforeRemove","addGeoJsonLayer","_updateGeojsonAdapterOptions","toggleLayer","onMap","toStatus","action","preEventName","eventName","selectLayer","unSelectLayer","removeLayerFilter","setLayerData","addLayerData","clearLayerData","createToggleControl","getStatus","setTitle","off","_setHtml","htmlDef","setHtml","_setClass","impact","setClass","addClassOn","addClassOff","_status","buttonControl","getControl","engine","controlDef","_control","getAttributions","attributions","layerMem","onlyVisible","attr","_eventName","onLoad","res","_zoomToInitialExtent","_addLayerProviders","_onLoadSync","_extent","__asyncValues","kit","_d","adapters","adapters_1","adapters_1_1","createAdapter","newAdapter","er_1","onLoadSync","console","er_2","onLayerClickFromOpt","utils","decorators","WebMap_decorate","tms","utility_loadJSON","xmlHttp","fixUrlStr","qms_kit_src","QmsKit","QmsKit_assign","webmap","_createAdapter","QmsAdapter","qmsId","service","webMapAdapter","serviceUrl","copyright_text","utility_assign","createQmsAdapter","createGeoJsonAdapter","connector","geoJsonAdapterCb","resourceId","toWgs84","Adapter","createGeoJsonAdapter_extends","_opt","createGeoJsonAdapter_assign","filterIn","filterFunc","relationFunc","_filtered","children","relChild","BaseProperty_events","TreeHelper_TreeHelper","TreeHelper","_children","setParent","_parent","addChild","getParent","getParents","tree","getChildren","all","getDescendants","Item_events","EventEmitter","BaseProperty","_blocked","_value","getProperty","isGroup","isBlocked","parents","parentProp","property","set","_prepareValue","update","_fireChangeEvent","getValue","_callOnSet","destroy","_removeEventsListener","onSet","prop","CheckProperty","CheckProperty_assign","CheckProperty_extends","bubble","unBlock","propagation","_turnOn","_turnOff","_propagation","getHierarchyValue","every","turnOff","hierarchy","blockChilds","turnOn","unblockChilds","block","_block","_unBlock","_blockChild","_unBlockChild","ItemProperties_ItemProperties","ItemProperties","propertiesList","_properties","_propertiesList","_setPropertyHandler","propOpt","handlers","handler","ItemProperties_assign","list","Item_EventEmitter","item_src","Item","Item_assign","initProperties","WebMapLayerItem_WebMapLayerItem","WebMapLayerItem","WebMapLayerItem_assign","_pixelsInMeter","div","cssText","body","px","offsetWidth","pixelsInMeterWidth","_init","WebMapLayerItem_extends","initItem","newLayer","_layer","item_type","reverse","draw_order_position","layer_adapter","layer_max_scale_denom","_mapScaleToZoomLevel","layer_min_scale_denom","layer_enabled","bringToFront","log","scale","_setScaleRatio","_getMapWidthForLanInMeters","Math","PI","cos","LN2","centerLat","crsScale","round","WebMapLayerAdapter_WebMapLayerAdapter","WebMapLayerAdapter","pixelRadius","_dependsLayers","_webmapLayersIds","isLoading","ids","WebMapLayerAdapter_assign","_getWebMapLayerItem","identification","_getWebmapIds","resource","$$onMapClick","ev","_onMapClick","response","extent_bottom","extent_left","extent_top","extent_right","getWebMapConfig","webmap_1","root_item","_updateItemsParams","utils_fixUrlStr","resourceId_1","layer_style_id","updateWmsParams","getLayerAdapterOptions","webMapItem","promises_1","_sendIdentifyRequest","geom","points","rlat","earthsradius","r2d","rlng","d2r","extp","theta","ex","ey","sin","getCirclePoly","polygon","tan","degrees2meters","srs","resp","styles","createAsyncAdapter","createWebMapAdapter_extends","createWebMapAdapter","cls","parentOptions","createAsyncAdapter_assign","IMAGE","_options","layerAdapterOptions","createRasterAdapter_assign","tileAdapterOptions","createRasterAdapter_extends","addOptions","createRasterAdapter","createAdapterFromFirstStyle","resourceAdapter","getWebMapExtent","getNgwLayerExtent","getNgwResourceExtent","childrenStyles","firstStyle","epsg","EPSG:3857","reproject","bbox","size","now","isImageAllowed","addNgwLayer","maxLat","maxLon","minLat","minLon","ngw_kit_src","NgwKit","resourceIds","resourceIds_1","NgwKit_assign","_getLayerAdapter","A","utils_assign","utils_extends","svgPath","brill","rect","marker","cross","star","triangle","plus","minus","asterisk","STROKE","getIcon","shape","anchor","pathAlias","svg","DOMParser","parseFromString","documentElement","insertSvg","fistChild","firstChild","transform","iconAnchor","XMLSerializer","serializeToString","src_utils_fixUrlStr","utils_deepmerge","NgwMap_OPTIONS","controls","controlsOptions","customAttribution","ngw_map_src","NgwMap","kits","webmapId","prepareWebMapOptions","_ngwLayers","_createWebMap","_addControls","NgwMap_extends","adapterOptions","zoomToLayer","ngwLayer","_fitNgwLayerExtend","NgwMap_assign","qmsLayerName","qmsLayerOptions","controlOptions","__rest","NgwMap_decorate","NgwMapvue_type_script_lang_ts_","NgwMapComponent","markers","NgwMap_NgwMap_extends","$el","createWebMap","addMarkers","zoomToFiltered","setSelected","NgwMap_NgwMap_assign","ngwMap","mapObject","districtsLayer","findFirsVueParent","firstVueParent","found","$parent","collection","some","getHistoryIcon","coordinates","geojson_extent_default","featureStyles","водоем","ландшафт","памятник","строение","улица","зона","населенный пункт","район","другой","метро","метро-2","другие подземные объекты","featureType_1","styleId","NgwMap_NgwMap_decorate","NgwMap_component","components_NgwMap_NgwMap","ItemsFiltervue_type_template_id_39e05881_render","ref","form","areas","no-data-text","change","updateFilter","rayon","ItemsFiltervue_type_script_lang_ts_","ItemsFilter","years","minYear","maxYear","moscow","param","ItemsFilter_extends","updateFilterAreas","ItemsFilter_decorate","ItemsFilter_component","VAutocomplete","VForm","components_ItemsFilter_ItemsFilter","Detailvue_type_template_id_0f60746f_render","photo","dialog","bigImgSrc","link_big","link_small","content-class","contain","more","tag","getText","domProps","needMore","Detailvue_type_script_lang_ts_","Detail","Story","Detail_extends","id_obj","id1","trim","links_1","nar_codes","Detail_decorate","Detail_component","VDialog","VImg","VListTileSubTitle","components_Detail_Detail","DrawerContainervue_type_template_id_42acd271_render","hasHeaderSlot","hasFooterSlot","DrawerContainervue_type_script_lang_ts_","DrawerContainer","DrawerContainer_extends","hasSlot","$slots","$scopedSlots","DrawerContainer_decorate","DrawerContainer_component","VDivider","VFooter","VToolbar","VToolbarTitle","components_VToolbar","components_DrawerContainer_DrawerContainer","Panelvue_type_template_id_90301248_render","collectionCleaner","result","beforeDestroy","PanelControl_PanelControl","PanelControl","_header","_body","_createContainer","setElement","el","removeFrom","updateBody","_cleanBody","hide","show","headerText","_createHeader","_createBody","Panelvue_type_script_lang_ts_","mixins","parentContainer","findRealParent","instance","constructor","optionsUtils_assign","defaultProps","$options","def","Symbol","warn","optionsMerger","vueElement","leafletElement","setMethodName","charAt","deepValue","custom","$watch","newVal","oldVal","deep","propsBinder_assign","propsBinder","Panel_component","Panel","Mainvue_type_script_lang_ts_","Main","Main_extends","throtleSave","time","lock","wrapperFn","later","created","Main_decorate","MapControl","Main_component","VContent","VItemGroup","VNavigationDrawer","VProgressCircular","VTextField","src_Main","Appvue_type_script_lang_ts_","App","App_extends","totalItems","ceil","App_decorate","MainComponent","TableComponent","AboutComponent","App_component","VCard","VPagination","VSpacer","VGrid","VToolbarItems","src_App","lib","$mount","package_0","locals","setImmediate","global","TypeError","_state","_handled","_deferreds","u","o","_immediateFn","onFulfilled","onRejected","promise","_unhandledRejectionFn","race","self","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Table_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"main-c374d44.js","sourcesContent":["import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"#map, .map-container {\\n  position: relative;\\n  top: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 10;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"C:/Users/rendr/nextgis/oralhistory/src/components/NgwMap/NgwMap.vue\"],\"names\":[],\"mappings\":\"AAWA;EACE,kBAAkB;EAClB,MAAM;EACN,SAAS;EACT,WAAW;EACX,YAAY;EACZ,WAAW;AAAA\",\"file\":\"NgwMap.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#map, .map-container {\\n  position: relative;\\n  top: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 10;\\n}\\n\"]}]);\n\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".detail-prop-list .v-list__tile {\\n  height: auto !important;\\n}\\n.show-photo-card .v-card__text {\\n  padding: 0;\\n}\\n.photo-dialog {\\n  box-shadow: none;\\n  max-height: 100% !important;\\n  margin: 0 !important;\\n}\\n.close-img-dialog-btn {\\n  position: absolute !important;\\n  right: 0;\\n  z-index: 500;\\n  overflow: visible;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"C:/Users/rendr/nextgis/oralhistory/src/components/Detail/Detail.vue\"],\"names\":[],\"mappings\":\"AA2DA;EACE,uBAAsB;AAAA;AAGxB;EACE,UAAU;AAAA;AAGZ;EACE,gBAAgB;EAChB,2BAA2B;EAC3B,oBAAoB;AAAA;AAGtB;EACE,6BAA6B;EAC7B,QAAQ;EACR,YAAY;EACZ,iBAAiB;AAAA\",\"file\":\"Detail.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n\\r\\n.detail-prop-list .v-list__tile {\\r\\n  height: auto!important;\\r\\n}\\r\\n\\r\\n.show-photo-card .v-card__text {\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.photo-dialog {\\r\\n  box-shadow: none;\\r\\n  max-height: 100% !important;\\r\\n  margin: 0 !important;\\r\\n}\\r\\n\\r\\n.close-img-dialog-btn {\\r\\n  position: absolute !important;\\r\\n  right: 0;\\r\\n  z-index: 500;\\r\\n  overflow: visible;\\r\\n}\\r\\n\\r\\n\"]}]);\n\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".drawer-container {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n}\\n.drawer-titlebar {\\n  flex-shrink: 0;\\n}\\n.drawer-content {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n}\\n.drawer-title {\\n  width: 100%;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"C:/Users/rendr/nextgis/oralhistory/src/components/DrawerContainer/DrawerContainer.vue\"],\"names\":[],\"mappings\":\"AA4BA;EACE,WAAW;EACX,YAAY;EACZ,aAAa;EACb,sBAAsB;AAAA;AAGxB;EAEE,cAAc;AAAA;AAGhB;EACE,YAAY;EACZ,gBAAgB;EAChB,kBAAkB;AAAA;AAGpB;EACE,WACF;AAAA\",\"file\":\"DrawerContainer.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.drawer-container {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.drawer-titlebar {\\n  // height: 35px;\\n  flex-shrink: 0;\\n}\\n\\n.drawer-content {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n}\\n\\n.drawer-title {\\n  width: 100%\\n}\\n\"]}]);\n\n","import mod from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".drawe-icon.active {\\n  -webkit-transform: rotate(-180deg);\\n  transform: rotate(-180deg);\\n}\\n.bottom-button {\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-around;\\n}\\n.bottom-button .v-btn {\\n    flex-grow: 1;\\n    margin: 0;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"C:/Users/rendr/nextgis/oralhistory/src/Main.vue\"],\"names\":[],\"mappings\":\"AAiIA;EAEI,kCAAkC;EAClC,0BAA0B;AAAA;AAI9B;EACE,WAAW;EACX,aAAa;EACb,6BAA6B;AAAA;AAH/B;IAKI,YAAY;IACZ,SAAS;AAAA\",\"file\":\"Main.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.drawe-icon {\\r\\n  &.active {\\r\\n    -webkit-transform: rotate(-180deg);\\r\\n    transform: rotate(-180deg);\\r\\n  }\\r\\n}\\r\\n\\r\\n.bottom-button {\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  justify-content: space-around;\\r\\n  .v-btn {\\r\\n    flex-grow: 1;\\r\\n    margin: 0;\\r\\n  }\\r\\n}\\r\\n\"]}]);\n\n","import mod from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"* {\\n  padding: 0;\\n  margin: 0;\\n}\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden !important;\\n}\\n.fullscreen-dialog .dialog-titlebar {\\n  flex-shrink: 0;\\n}\\n.fullscreen-dialog .dialog-body {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  overflow-x: auto;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"C:/Users/rendr/nextgis/oralhistory/src/App.vue\"],\"names\":[],\"mappings\":\"AAmDA;EACE,UAAU;EACV,SAAS;AAAA;AAGX;EACE,WAAW;EACX,YAAY;EACZ,2BAA2B;AAAA;AAG7B;EAGI,cAAc;AAAA;AAHlB;EAOI,YAAY;EACZ,gBAAgB;EAChB,gBAAgB;AAAA\",\"file\":\"App.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n* {\\n  padding: 0;\\n  margin: 0;\\n}\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden !important;\\n}\\n\\n.fullscreen-dialog {\\n\\n  .dialog-titlebar {\\n    flex-shrink: 0;\\n  }\\n\\n  .dialog-body {\\n    flex-grow: 1;\\n    overflow-y: auto;\\n    overflow-x: auto;\\n  }\\n}\\n\\n\"]}]);\n\n","type Reject = (reason?: any) => void;\r\ntype Resolve = (value?: any) => void;\r\n\r\nconst handleCallback = <T = never>(\r\n  resolve: Resolve,\r\n  reject: Reject,\r\n  callback: Resolve,\r\n  r: T) => {\r\n  try {\r\n    resolve(callback(r));\r\n  } catch (e) {\r\n    reject(e);\r\n  }\r\n};\r\n\r\nexport class CancelablePromise<T> implements Promise<T> {\r\n\r\n  readonly [Symbol.toStringTag]: string;\r\n\r\n  private _canceled = false;\r\n\r\n  private _promise?: Promise<T>;\r\n\r\n  constructor(\r\n    executor: (\r\n      resolve: (value?: T | PromiseLike<T>) => void,\r\n      reject: (reason?: any) => void\r\n    ) => void,\r\n    private onCancel?: (...args: any[]) => void\r\n  ) {\r\n    this._promise = new Promise(executor);\r\n  }\r\n\r\n  then<TResult1 = T, TResult2 = never>(\r\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\r\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null):\r\n    CancelablePromise<TResult1 | TResult2> {\r\n\r\n    const p = new CancelablePromise((resolve, reject) => {\r\n      if (this._promise) {\r\n        this._promise.then((r) => {\r\n          if (this._canceled) {\r\n            p.cancel();\r\n          }\r\n          if (onfulfilled && !this._canceled) {\r\n            handleCallback(resolve, reject, onfulfilled, r);\r\n          } else {\r\n            resolve(r);\r\n          }\r\n        }, (r) => {\r\n          if (this._canceled) {\r\n            p.cancel();\r\n          }\r\n          if (onrejected && !this._canceled) {\r\n            handleCallback(resolve, reject, onrejected, r);\r\n          } else {\r\n            reject(r);\r\n          }\r\n        });\r\n      }\r\n    }, () => {\r\n      this.cancel();\r\n    });\r\n    return p as CancelablePromise<TResult1 | TResult2>;\r\n  }\r\n\r\n  catch<TResult = never>(onrejected?: (\r\n    (reason: any) => TResult | PromiseLike<TResult>) | undefined | null\r\n  ): CancelablePromise<T | TResult> {\r\n    return this.then(undefined, onrejected);\r\n  }\r\n\r\n  cancel(errorCallback?: (...args: any[]) => void) {\r\n    this._canceled = true;\r\n    if (errorCallback && this._promise) {\r\n      this._promise.catch(errorCallback);\r\n    }\r\n    if (this.onCancel) {\r\n      this.onCancel();\r\n    }\r\n    this._destroy();\r\n    return this;\r\n  }\r\n\r\n  finally(onfinally?: (() => void) | undefined | null): Promise<T> {\r\n    if (this._promise) {\r\n      return this._promise.finally(onfinally);\r\n    }\r\n    return Promise.reject<T>(onfinally);\r\n  }\r\n\r\n  private _destroy() {\r\n    this.onCancel = undefined;\r\n    this._promise = undefined;\r\n  }\r\n}\r\n","// readyState\r\n// Holds the status of the XMLHttpRequest.\r\n// 0: request not initialized\r\n// 1: server connection established\r\n// 2: request received\r\n// 3: processing request\r\n// 4: request finished and response is ready\r\n\r\n// status\r\n// 200: \"OK\"\r\n// 201 \"Created\"\tThe request has been fulfilled, and a new resource is created\r\n// 403: \"Forbidden\"\r\n// 404: \"Page not found\"\r\n// 500: \"Internal Server Error\"\r\n// For a complete list go to the Http Messages Reference\r\n\r\nimport { RequestOptions } from './interfaces';\r\n\r\nexport function loadJSON(\r\n  url: string,\r\n  callback: (...args: any[]) => any,\r\n  options: RequestOptions = {},\r\n  error: (reason?: any) => void,\r\n  onCancel: Array<() => void>) {\r\n\r\n  options.method = options.method || 'GET';\r\n  let xhr: XMLHttpRequest;\r\n\r\n  xhr = new XMLHttpRequest();\r\n  xhr.open(options.method || 'GET', url, true); // true for asynchronous\r\n\r\n  const processingResponce = (forError: boolean = false) => {\r\n    const cb = forError ? error : callback;\r\n    if (xhr.responseText) {\r\n      try {\r\n        cb(JSON.parse(xhr.responseText));\r\n      } catch (er) {\r\n        error({ message: '' });\r\n      }\r\n    } else {\r\n      error({ message: '' });\r\n    }\r\n  };\r\n\r\n  xhr.onreadystatechange = () => {\r\n    if ((xhr.readyState === 4 && xhr.status === 200) || (xhr.readyState === 3 && xhr.status === 201)) {\r\n      processingResponce();\r\n    } else if (xhr.readyState === 3 && xhr.status === 400) {\r\n      processingResponce();\r\n    } else if (xhr.readyState === 4 && xhr.status === 500) {\r\n      processingResponce();\r\n    } else if (xhr.readyState === 4 && xhr.status === 401) {\r\n      error(xhr.statusText);\r\n    } else if (xhr.readyState === 4) {\r\n      error('request error');\r\n    }\r\n  };\r\n\r\n  xhr.onerror = (er) => {\r\n    error(er);\r\n  };\r\n\r\n  xhr.upload.onprogress = function (e) {\r\n    if (e.lengthComputable) {\r\n      const percentComplete = (e.loaded / e.total) * 100;\r\n      if (options.onProgress) {\r\n        options.onProgress(percentComplete);\r\n      }\r\n      // console.log(percentComplete + '% uploaded');\r\n    }\r\n  };\r\n\r\n  const headers = options.headers;\r\n  if (headers) {\r\n    for (const h in headers) {\r\n      if (headers.hasOwnProperty(h)) {\r\n        const header = headers[h];\r\n        if (typeof header === 'string') {\r\n          xhr.setRequestHeader(h, header);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  if (options.withCredentials !== undefined) {\r\n    xhr.withCredentials = options.withCredentials;\r\n  }\r\n\r\n  let data: FormData | any;\r\n  if (options.file) {\r\n    data = new FormData();\r\n    data.append('file', options.file);\r\n    if (options.data) {\r\n      for (const d in data) {\r\n        if (data.hasOwnProperty(d)) {\r\n          data.append(d, data[d]);\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    data = options.data ? JSON.stringify(options.data) : null;\r\n  }\r\n  if (onCancel) {\r\n    onCancel.push(() => {\r\n      xhr.abort();\r\n    });\r\n  }\r\n  xhr.send(data);\r\n}\r\n\r\n// https://github.com/Leaflet/Leaflet/blob/b507e21c510b53cd704fb8d3f89bb46ea925c8eb/src/core/Util.js#L165\r\nconst templateRe = /\\{ *([\\w_-]+) *\\}/g;\r\n\r\nexport function template(str: string, data: { [param: string]: any }) {\r\n  return str.replace(templateRe, (s, key) => {\r\n    let value = data[key];\r\n\r\n    if (value === undefined) {\r\n      throw new Error('No value provided for letiable ' + s);\r\n    } else if (typeof value === 'function') {\r\n      value = value(data);\r\n    }\r\n    return value;\r\n  });\r\n}\r\n","/**\r\n * @module ngw-connector\r\n */\r\n\r\nimport { NgwConnector } from './NgwConnector';\r\n\r\nexport { CancelablePromise } from './CancelablePromise';\r\n\r\nexport * from './interfaces';\r\nexport * from './types/ResourceItem';\r\nexport * from './types/FeatureLayer';\r\nexport * from './types/RequestItemsParamsMap';\r\n\r\nexport { NgwConnector };\r\nexport default NgwConnector;\r\n","/**\r\n * @module ngw-connector\r\n */\r\nimport './polyfills';\r\n\r\nimport { CancelablePromise } from './CancelablePromise';\r\n\r\nimport { RequestItemsParamsMap } from './types/RequestItemsParamsMap';\r\nimport {\r\n  NgwConnectorOptions, Router,\r\n  GetRequestItemsResponseMap, RequestOptions,\r\n  Params, LoadingQueue, UserInfo, Credentials,\r\n  PyramidRoute, RequestHeaders, PostRequestItemsResponseMap\r\n} from './interfaces';\r\nimport { loadJSON, template } from './utils';\r\nimport { EventEmitter } from 'events';\r\n\r\nexport class NgwConnector {\r\n\r\n  emitter = new EventEmitter();\r\n  user?: UserInfo;\r\n  private routeStr = '/api/component/pyramid/route';\r\n  private route?: PyramidRoute;\r\n  private _loadingQueue: { [name: string]: LoadingQueue } = {};\r\n  private _loadingStatus: { [url: string]: boolean } = {};\r\n\r\n  constructor(public options: NgwConnectorOptions = {}) {\r\n    if (this.options.route) {\r\n      this.routeStr = this.options.route;\r\n    }\r\n  }\r\n\r\n  async connect(): CancelablePromise<Router> {\r\n    if (this.route) {\r\n      return Promise.resolve(this.route);\r\n    } else {\r\n      if (this.options.auth) {\r\n        const { login, password } = this.options.auth;\r\n        if (login && password) {\r\n          await this.getUserInfo({ login, password });\r\n        }\r\n      }\r\n\r\n      return await this.makeQuery(this.routeStr, {}, {}).then((route: PyramidRoute) => {\r\n        this.route = route;\r\n        return route;\r\n      });\r\n    }\r\n  }\r\n\r\n  getUserInfo(credentials: Credentials): CancelablePromise<UserInfo> {\r\n    if (credentials) {\r\n      this.options.auth = credentials;\r\n    }\r\n    const options: RequestOptions = {\r\n      headers: this.getAuthorizationHeaders(credentials)\r\n      // withCredentials: true\r\n    };\r\n\r\n    // Do not use request('auth.current_user') to avoid circular-references\r\n    return this.makeQuery('/api/component/auth/current_user', {}, options).then((data: UserInfo) => {\r\n      this.user = data;\r\n      this.emitter.emit('login', data);\r\n      return data;\r\n    }).catch((er) => {\r\n      this.emitter.emit('login:error', er);\r\n      throw er;\r\n    });\r\n  }\r\n\r\n  getAuthorizationHeaders(credentials?: Credentials): RequestHeaders | undefined {\r\n    const client = this.makeClientId(credentials);\r\n    if (client) {\r\n      return {\r\n        'Authorization': 'Basic ' + client\r\n      };\r\n    }\r\n  }\r\n\r\n  makeClientId(credentials?: Credentials) {\r\n    credentials = credentials || this.options.auth;\r\n    if (credentials) {\r\n      const { login, password } = credentials;\r\n      return window.btoa(unescape(encodeURIComponent(`${login}:${password}`)));\r\n    }\r\n  }\r\n\r\n  async request<K extends keyof RequestItemsParamsMap>(\r\n    name: K,\r\n    params: RequestItemsParamsMap[K] & { [name: string]: any } = {},\r\n    options?: RequestOptions): CancelablePromise<GetRequestItemsResponseMap[K] | PostRequestItemsResponseMap[K]> {\r\n\r\n    const apiItems = await this.connect();\r\n    let apiItem = apiItems && apiItems[name];\r\n    if (apiItem) {\r\n      apiItem = [...apiItem];\r\n      let url = apiItem.shift();\r\n      if (apiItem.length) {\r\n        const replaceParams: {\r\n          [num: number]: string;\r\n        } = {};\r\n        for (let fry = 0; fry < apiItem.length; fry++) {\r\n          const arg = apiItem[fry];\r\n          replaceParams[fry] = '{' + arg + '}';\r\n          if (params[arg] === undefined) {\r\n            throw new Error('`' + arg + '`' + ' url api argument is not specified');\r\n          }\r\n        }\r\n        if (url) {\r\n          url = template(url, replaceParams);\r\n        }\r\n      }\r\n      // Transfer part of the parameters from `params` to the URL string\r\n      if (params) {\r\n        const paramArray = [];\r\n        for (const p in params) {\r\n          if (params.hasOwnProperty(p) && apiItem.indexOf(p) === -1) {\r\n            paramArray.push(`${p}=${params[p]}`);\r\n          }\r\n        }\r\n        if (paramArray.length) {\r\n          url = url + '/?' + paramArray.join('&');\r\n        }\r\n      }\r\n      if (url) {\r\n        return this.makeQuery(url, params, options);\r\n      } else {\r\n        throw new Error('request url is not set');\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  post<K extends keyof RequestItemsParamsMap>(\r\n    name: K,\r\n    options?: RequestOptions,\r\n    params?: RequestItemsParamsMap[K] & { [name: string]: any }): CancelablePromise<PostRequestItemsResponseMap[K]> {\r\n\r\n    options = options || {};\r\n    options.method = 'POST';\r\n    options.nocache = true;\r\n    return this.request(name, params, options);\r\n  }\r\n\r\n  get<K extends keyof RequestItemsParamsMap>(\r\n    name: K,\r\n    options?: RequestOptions | undefined | null,\r\n    params?: RequestItemsParamsMap[K] & { [name: string]: any }): CancelablePromise<GetRequestItemsResponseMap[K]> {\r\n\r\n    options = options || {};\r\n    options.method = 'GET';\r\n    options.nocache = true;\r\n    return this.request(name, params, options);\r\n  }\r\n\r\n  makeQuery(\r\n    url: string,\r\n    params: Params,\r\n    options: RequestOptions = {}): CancelablePromise<any> {\r\n\r\n    url = (this.options.baseUrl ? this.options.baseUrl : '') + url;\r\n    if (url) {\r\n      if (params) {\r\n        url = template(url, params);\r\n      }\r\n      // remove double slash\r\n      url = url.replace(/([^:]\\/)\\/+/g, '$1');\r\n      if (!this._loadingStatus[url] || options.nocache) {\r\n        this._loadingStatus[url] = true;\r\n\r\n        return this._getJson(url, options).then((data) => {\r\n          this._loadingStatus[url] = false;\r\n          this._executeLoadingQueue(url, data);\r\n          return data;\r\n        }).catch((er) => {\r\n          this._loadingStatus[url] = false;\r\n          this._executeLoadingQueue(url, er, true);\r\n          this.emitter.emit('error', er);\r\n          throw er;\r\n        });\r\n      } else {\r\n        this._loadingStatus[url] = false;\r\n        return new CancelablePromise((resolve, reject) => {\r\n          this._setLoadingQueue(url, resolve, reject);\r\n        });\r\n      }\r\n    } else {\r\n      throw new Error('No `url` parameter set for option ' + name);\r\n    }\r\n\r\n  }\r\n\r\n  _setLoadingQueue(name: string, resolve: (...args: any[]) => any, reject: (...args: any[]) => any) {\r\n    this._loadingQueue[name] = this._loadingQueue[name] || {\r\n      name,\r\n      waiting: [],\r\n    };\r\n    this._loadingQueue[name].waiting.push({\r\n      resolve,\r\n      reject,\r\n      timestamp: new Date(),\r\n    });\r\n  }\r\n\r\n  _executeLoadingQueue(name: string, data: any, isError?: boolean) {\r\n    const queue = this._loadingQueue[name];\r\n    if (queue) {\r\n      for (let fry = 0; fry < queue.waiting.length; fry++) {\r\n        const wait = queue.waiting[fry];\r\n        if (isError) {\r\n          if (wait.reject) {\r\n            wait.reject();\r\n          }\r\n        } else {\r\n          wait.resolve(data);\r\n        }\r\n      }\r\n      queue.waiting = [];\r\n    }\r\n  }\r\n\r\n  _getJson(url: string, options: RequestOptions): CancelablePromise<any> {\r\n    const onCancel: Array<() => void> = [];\r\n    return new CancelablePromise((resolve, reject) => {\r\n      if (this.user) {\r\n        options = options || {};\r\n        // options.withCredentials = true;\r\n        options.headers = this.getAuthorizationHeaders();\r\n      }\r\n      loadJSON(url, resolve, options, reject, onCancel);\r\n    }, () => {\r\n      onCancel.forEach((x) => x());\r\n    });\r\n  }\r\n}\r\n","import NgwConnector from '@nextgis/ngw-connector';\nimport { FeatureCollection, Point, Feature } from 'geojson';\n// @ts-ignore\nimport config from '../../config.json';\n\nexport const url = config.baseUrl.replace(\n  /^(https?|ftp):\\/\\//,\n  (location.protocol === 'https:' ? 'https' : 'http') + '://'\n);\n\nconst connector = new NgwConnector({ baseUrl: url });\n\nexport interface BdMainItemProperties {\n\n  id: number;\n\n  id1: number;\n\n  status: string;\n  narrator: string;\n  nar_codes: string;\n  description?: string;\n  mos2?: string;\n  mos5?: string;\n  mos4?: string;\n  visual?: string;\n  mos6?: string;\n  mos1?: string;\n  unoff: string;\n  mos3?: string;\n  descript2?: string;\n  lat: number;\n  rayon: string;\n  geo?: string;\n  name?: string;\n  narrativ_b?: string;\n  addr?: string;\n  narrativ_l: string;\n  lon: number;\n  narrativ_p?: string;\n  type: string;\n}\n\nexport interface BdPhotoProperties {\n  id: number;\n\n  link_big: string;\n  link_small: string;\n  id_obj: number;\n  descript: string;\n  link: string;\n  details: string;\n}\n\nexport type BdMainItem = Feature<Point, BdMainItemProperties>;\n\nexport default {\n  getLayerGeoJson(cb) {\n    connector.request('feature_layer.geojson', {\n      id: config.ngwMarkerLayerId\n    }).then((data: FeatureCollection<Point, BdMainItemProperties>) => {\n      data.features.forEach((x, i) => {\n        x.properties.id = Number(x.id || i);\n      });\n      cb(data.features);\n    });\n  },\n\n  getPhotos(cb) {\n    connector.request('feature_layer.geojson', {\n      id: config.layerWithPhotos\n    }).then((data: FeatureCollection<Point, BdPhotoProperties>) => {\n      cb(data.features.map((x) => {\n        x.properties.id = Number(x.id);\n        return x.properties;\n      }));\n    });\n  },\n\n  getLayerMeta(cb) {\n    cb([\n      // { text: 'Идентификатор', value: 'id1', noHide: true },\n      // { text: 'долгота', value: 'lat', noHide: true },\n      // { text: 'широта', value: 'lon', noHide: true },\n      { text: 'Адрес', value: 'addr', noHide: true },\n      { text: 'Название объекта', value: 'name', noHide: true },\n      // { text: 'Тип объекта', value: 'type', noHide: true },\n      { text: 'Статус объекта', value: 'status', noHide: true },\n      { text: 'Район', value: 'rayon', noHide: true },\n      { text: 'Неофициальное название', value: 'unoff', noHide: true },\n      { text: 'ОПИСАНИЕ', value: 'description', noHide: true },\n      { text: 'Истории о прошлом', value: 'narrativ_l', type: 'Story' },\n      { text: 'Семейные истории', value: 'narrativ_b', type: 'Story' },\n      { text: 'Практики горожан', value: 'narrativ_p', type: 'Story' },\n      { text: 'Характеристика места', value: 'descript2', type: 'Story' },\n      { text: 'Рассказчик', value: 'narrator', type: 'NarratorLink' },\n      { text: 'Визуальные материалы', value: 'visual' },\n      { text: 'Москва дворовая', value: 'mos1', type: 'Mos' },\n      { text: 'Москва церковная', value: 'mos2', type: 'Mos' },\n      { text: 'Москва бездомная', value: 'mos3', type: 'Mos' },\n      { text: 'Москва подземная', value: 'mos4', type: 'Mos' },\n      { text: 'Москва субкультурная', value: 'mos5', type: 'Mos' },\n      { text: 'Москва легендарная', value: 'mos6', type: 'Mos' }\n    ]);\n  }\n};\n","import ngw, { BdMainItem } from '../../api/ngw';\r\n\r\n// initial state\r\n// shape: [{ id, quantity }]\r\nconst _state = {\r\n  items: [],\r\n  photos: [],\r\n  meta: false,\r\n  filtered: [],\r\n  detailItem: false,\r\n};\r\n\r\n// getters\r\nconst _getters = {\r\n  features: (state, getters, rootState) => state.filtered,\r\n  sortFeatures: (state, getters, rootState) => {\r\n    const filtered = [...state.filtered] as BdMainItem[];\r\n    return filtered.sort((a, b) => {\r\n      return a.properties.name.toUpperCase() > b.properties.name.toUpperCase() ? 1 : -1;\r\n    });\r\n  }\r\n};\r\n\r\n// actions\r\nconst actions = {\r\n\r\n  getAllItems({ commit }) {\r\n    ngw.getLayerMeta(meta => {\r\n      commit('setMeta', meta);\r\n      ngw.getLayerGeoJson(items => {\r\n        commit('setItems', items);\r\n      });\r\n    });\r\n  },\r\n\r\n  getPhotos({ commit }) {\r\n    ngw.getPhotos((photos) => {\r\n      commit('setPhotos', photos);\r\n    });\r\n  },\r\n\r\n  setFilter({ commit, state }, items) {\r\n    commit('setFilter', items);\r\n    const detail = state.detailItem;\r\n    if (detail) {\r\n      const item = items.find((x: BdMainItem) => x.id === detail.id);\r\n      if (!item) {\r\n        commit('setDetail', false);\r\n      }\r\n    }\r\n  },\r\n\r\n  setDetail({ commit, state }, id: number) {\r\n    let item = state.filtered.find((x: BdMainItem) => x.id === id);\r\n    const detail = state.detailItem;\r\n    if (detail && detail.id === id) {\r\n      item = false;\r\n    }\r\n    commit('setDetail', item);\r\n  }\r\n};\r\n\r\n// mutations\r\nconst mutations = {\r\n\r\n  setItems(state, items) {\r\n    state.items = items;\r\n    state.filtered = items;\r\n  },\r\n\r\n  setFilter(state, items) {\r\n    state.filtered = items;\r\n  },\r\n\r\n  setDetail(state, item) {\r\n    state.detailItem = item;\r\n  },\r\n\r\n  setMeta(state, meta) {\r\n    state.meta = meta;\r\n  },\r\n\r\n  setPhotos(state, photos) {\r\n    state.photos = photos;\r\n  }\r\n\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: _state,\r\n  getters: _getters,\r\n  actions,\r\n  mutations\r\n};\r\n","// initial state\n// shape: [{ id, quantity }]\n\nexport type AppPages = 'main' | 'table' | 'about';\nexport interface AppState {\n  drawer?: boolean;\n  page?: AppPages;\n  center?: [number, number];\n  listSearchText?: string;\n}\n\nconst _state: AppState = {\n  drawer: true,\n  page: 'main',\n  center: null,\n  listSearchText: ''\n};\n\n// getters\nconst _getters = {};\n\n// actions\nconst actions = {\n\n\n  showDrawer({ commit }) {\n    commit('showDrawer');\n  },\n\n  hideDrawer({ commit }) {\n    commit('hideDrawer');\n  },\n\n  setListSearchText({ commit }, value: string) {\n    return commit('setListSearchText', value);\n  },\n\n  toggleDrawer({ commit }, value: boolean) {\n    if (value) {\n      commit('showDrawer');\n    } else {\n      commit('hideDrawer');\n    }\n  },\n\n  setPage({ commit }, page: AppPages) {\n    commit('setPage', page);\n  },\n\n  zoomTo({ commit }, id: number) {\n    commit('setCenter', id);\n  }\n\n};\n\n// mutations\nconst mutations = {\n\n  showDrawer(state) {\n    state.drawer = true;\n  },\n\n  hideDrawer(state) {\n    state.drawer = false;\n  },\n\n  setPage(state, page: AppPages) {\n    state.page = page;\n  },\n\n  setCenter(state, id: number) {\n    state.center = id;\n  },\n\n  setListSearchText(state, value: string) {\n    state.listSearchText = value;\n  }\n\n};\n\nexport default {\n  namespaced: true,\n  state: _state,\n  getters: _getters,\n  actions,\n  mutations\n};\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport bdMain from './modules/bd_main';\r\nimport app from './modules/app';\r\n// import createLogger from '../../../src/plugins/logger';\r\n\r\n// Example projects\r\n// https://github.com/vuejs/vuex/tree/dev/examples/\r\n// Vuex and typescript\r\n// https://github.com/utahta/vue-vuex-typescript-example\r\n\r\nVue.use(Vuex);\r\n// @ts-ignore\r\nconst debug = process.env.NODE_ENV !== 'production';\r\n\r\nexport default new Vuex.Store({\r\n  modules: {\r\n    bdMain,\r\n    app,\r\n  },\r\n  strict: debug,\r\n  // plugins: debug ? [createLogger()] : []\r\n});\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\"main-component\"),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: {\n            value: _vm.page === \"table\",\n            fullscreen: \"\",\n            scrollable: \"\",\n            transition: \"dialog-bottom-transition\"\n          }\n        },\n        [\n          _c(\n            \"v-card\",\n            { staticClass: \"fullscreen-dialog\" },\n            [\n              _c(\n                \"v-toolbar\",\n                {\n                  staticClass: \"dialog-titlebar\",\n                  attrs: { dark: \"\", color: \"primary\" }\n                },\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { icon: \"\", dark: \"\" },\n                      nativeOn: {\n                        click: function($event) {\n                          _vm.page = \"main\"\n                        }\n                      }\n                    },\n                    [_c(\"v-icon\", [_vm._v(\"close\")])],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"span\", { staticClass: \"title ml-3 mr-5\" }, [\n                    _vm._v(\"Устная память Москвы \"),\n                    _c(\"span\", { staticClass: \"font-weight-light\" }, [\n                      _vm._v(\"Таблица\")\n                    ])\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"v-text-field\", {\n                    attrs: {\n                      \"solo-inverted\": \"\",\n                      flat: \"\",\n                      \"hide-details\": \"\",\n                      label: \"Поиск\",\n                      \"prepend-inner-icon\": \"search\"\n                    },\n                    model: {\n                      value: _vm.tableSearch,\n                      callback: function($$v) {\n                        _vm.tableSearch = $$v\n                      },\n                      expression: \"tableSearch\"\n                    }\n                  }),\n                  _vm._v(\" \"),\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-toolbar-items\",\n                    [\n                      _c(\"v-btn\", { attrs: { dark: \"\", flat: \"\" } }, [\n                        _vm._v(\"Сохранить\")\n                      ])\n                    ],\n                    1\n                  )\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"div\",\n                { staticClass: \"dialog-body\" },\n                [\n                  _vm.page === \"table\"\n                    ? _c(\"table-component\", {\n                        attrs: {\n                          search: _vm.tableSearch,\n                          paginationSync: _vm.paginationSync\n                        }\n                      })\n                    : _vm.page === \"about\"\n                    ? _c(\"about-component\")\n                    : _vm._e()\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _vm.pagination && _vm.pagination.page\n                ? _c(\"v-footer\", { staticClass: \"pt-3 pb-4\" }, [\n                    _c(\n                      \"div\",\n                      { staticClass: \"text-xs-center pt-1\" },\n                      [\n                        _c(\"v-pagination\", {\n                          attrs: { length: _vm.pages, \"total-visible\": 7 },\n                          model: {\n                            value: _vm.pagination.page,\n                            callback: function($$v) {\n                              _vm.$set(_vm.pagination, \"page\", $$v)\n                            },\n                            expression: \"pagination.page\"\n                          }\n                        })\n                      ],\n                      1\n                    )\n                  ])\n                : _vm._e()\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\n        \"v-layout\",\n        {\n          attrs: {\n            \"align-center\": \"\",\n            \"justify-center\": \"\",\n            column: \"\",\n            \"fill-height\": \"\"\n          }\n        },\n        [\n          _c(\"div\", { staticClass: \"title font-weight-thin pa-3\" }, [\n            _vm._v(\"Разработано в\")\n          ]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"logo\", on: { click: _vm.openNextGIS } }, [\n            _c(\n              \"svg\",\n              {\n                staticClass: \"logo hidden-xs\",\n                staticStyle: { \"enable-background\": \"new 0 0 818.8 111.5\" },\n                attrs: {\n                  version: \"1.1\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\n                  x: \"0px\",\n                  y: \"0px\",\n                  viewBox: \"0 0 818.8 111.5\",\n                  \"xml:space\": \"preserve\"\n                }\n              },\n              [\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d:\n                      \"M0,111.5V0.1h7.4l69.9,69.8V0.1h22.3v111.4h-8.2L22.3,42.4v69.1\\n              H0\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d:\n                      \"M225.8,111.5V0.1l-81.9-0.1v20.8h59.6v23.8h-34v20.7h34v25.3H144\\n              v20.8L225.8,111.5\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d:\n                      \"M502.3,0.1v20.8h-37.1v90.6h-22.3V20.9h-37.1V0.1L502.3,0.1\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: {\n                    d:\n                      \"M550.4,95.5c-10.7-10.6-16-23.9-16-39.9\\n              c0.1-15.7,5.4-28.8,16-39.5c10.6-10.7,23.9-16,39.6-16c15.9,0,29.5,5,40.9,14.9l-14.9,16.3c-7.6-5.9-16.3-8.9-26.1-8.9\\n              c-10,0-18.1,3.2-24.2,9.4c-6.1,6.2-9.2,14.1-9.2,23.8c0.1,10.4,3.2,18.6,9.3,24.7c6.1,6.1,14.2,9.1,24.2,9.1c8,0,14.2-1.6,18.5-4.8\\n              V65.4l-14.9,0.1V44.7H631v52c-11.3,9.9-25,14.9-40.9,14.9C574.3,111.5,561,106.1,550.4,95.5\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: { d: \"M674.9,111.5h22.2V0h-22.2V111.5z\" }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: {\n                    d:\n                      \"M801.4,3.8c5.7,2.5,11,6.2,16,11.2l-14.9,14.9\\n              c-5-6-11.9-8.9-20.8-8.9c-8.9,0-14.6,2.1-17.1,6.3c-2.5,4.2-2.5,7.8,0,10.8c2.5,3,8.2,5.2,17.1,6.7c9.4,1,18,4.1,25.6,9.3\\n              c7.7,5.2,11.5,13.5,11.5,24.9c0,8.9-4.1,16.6-12.3,23c-8.2,6.4-17.7,9.7-28.6,9.7c-10.3,0-19-1.5-25.9-4.4\\n              c-6.9-3-12.9-6.9-17.8-11.9L749,80.3c5,6,13.4,9.4,25.3,10.4c9.9,0,16.1-2.1,18.5-6.3c2.5-4.2,2.5-8.4,0-12.6\\n              c-2.4-4.2-8.6-6.8-18.5-7.8c-8.9-1-17.1-3.7-24.5-8.2c-7.4-4.5-11.2-12.1-11.2-23c0-9.9,4.2-17.8,12.7-23.7c8.4-6,17.1-9,26-9\\n              C787.6,0.1,795.7,1.3,801.4,3.8\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d: \"M340.2,43.3l31.6-43.2h-26.2L327,25.4L340.2,43.3\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: {\n                    d:\n                      \"M332.8,53.5L293.6,0.1h-26.2l39,53.4l-42.6,58h26.5L332.8,53.5\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: { d: \"M340.2,63.6l-13.2,18l21.9,29.9h26.4L340.2,63.6\" }\n                })\n              ]\n            )\n          ])\n        ]\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=ts&\"","import Vue from 'vue';\r\nimport Component from 'vue-class-component';\r\n\r\n@Component\r\nexport class About extends Vue {\r\n\r\n  openNextGIS() {\r\n    window.location.href = 'http://nextgis.com/';\r\n  }\r\n\r\n}\r\n","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=5e667ffc&\"\nimport script from \"./About.vue?vue&type=script&lang=ts&\"\nexport * from \"./About.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\ninstallComponents(component, {VApp,VLayout})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('5e667ffc', component.options)\n    } else {\n      api.reload('5e667ffc', component.options)\n    }\n    module.hot.accept(\"./About.vue?vue&type=template&id=5e667ffc&\", function () {\n      api.rerender('5e667ffc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/NextGIS/About.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\"v-data-table\", {\n        attrs: {\n          headers: _vm.headers,\n          items: _vm.items,\n          search: _vm.search,\n          pagination: _vm.pagination,\n          \"hide-actions\": \"\"\n        },\n        on: {\n          \"update:pagination\": function($event) {\n            _vm.pagination = $event\n          }\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"headerCell\",\n            fn: function(props) {\n              return [\n                _c(\"v-tooltip\", { attrs: { bottom: \"\" } }, [\n                  _c(\n                    \"span\",\n                    { attrs: { slot: \"activator\" }, slot: \"activator\" },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(props.header.text) +\n                          \"\\n        \"\n                      )\n                    ]\n                  )\n                ])\n              ]\n            }\n          },\n          {\n            key: \"items\",\n            fn: function(props) {\n              return _vm._l(_vm.headers, function(h) {\n                return _c(\"td\", { key: h.value }, [\n                  props.item[h.value] && props.item[h.value].length < 40\n                    ? _c(\"span\", [_vm._v(_vm._s(props.item[h.value]))])\n                    : _c(\n                        \"span\",\n                        [\n                          _c(\"show-more-field\", {\n                            attrs: { text: props.item[h.value], charCount: 40 }\n                          })\n                        ],\n                        1\n                      )\n                ])\n              })\n            }\n          }\n        ])\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"span\", [\n    _vm.text && String(_vm.text).length > _vm.charCount\n      ? _c(\"span\", [\n          _c(\"span\", [_vm._v(_vm._s(_vm.toShow))]),\n          _vm._v(\" \"),\n          _c(\"a\", { on: { click: _vm.onClick } }, [\n            !_vm.expand\n              ? _c(\"span\", [_vm._v(\">>>\")])\n              : _c(\"span\", [_vm._v(\"<<<\")])\n          ])\n        ])\n      : _c(\"span\", [_vm._v(_vm._s(_vm.text))])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowMoreField.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowMoreField.vue?vue&type=script&lang=ts&\"","import { Vue, Component, Prop } from 'vue-property-decorator';\r\n\r\n@Component\r\nexport class ShowMoreField extends Vue {\r\n\r\n  @Prop({default: ''}) text: string;\r\n  @Prop({default: 40}) charCount: number;\r\n\r\n  expand = false;\r\n\r\n  get toShow() {\r\n    if (this.expand) {\r\n      return this.text;\r\n    } else {\r\n      return this.text.slice(0, this.charCount) + '...';\r\n    }\r\n  }\r\n\r\n  onClick() {\r\n    this.expand = !this.expand;\r\n  }\r\n}\r\n","import { render, staticRenderFns } from \"./ShowMoreField.vue?vue&type=template&id=051b4be1&\"\nimport script from \"./ShowMoreField.vue?vue&type=script&lang=ts&\"\nexport * from \"./ShowMoreField.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('051b4be1', component.options)\n    } else {\n      api.reload('051b4be1', component.options)\n    }\n    module.hot.accept(\"./ShowMoreField.vue?vue&type=template&id=051b4be1&\", function () {\n      api.rerender('051b4be1', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/ShowMoreField/ShowMoreField.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=ts&\"","import { Vue, Component, Prop, Watch } from 'vue-property-decorator';\r\nimport { BdMainItemProperties } from '../../api/ngw';\r\nimport ShowMoreField from '../ShowMoreField/ShowMoreField.vue';\r\n\r\n\r\n@Component({\r\n  components: {ShowMoreField}\r\n})\r\nexport class Table extends Vue {\r\n\r\n  @Prop() search: string;\r\n  @Prop() paginationSync;\r\n\r\n  pagination = {\r\n    rowsPerPage: 20\r\n  };\r\n\r\n  headers = [\r\n    { text: 'Адрес', value: 'addr' },\r\n    { text: 'долгота', value: 'lat' },\r\n    { text: 'широта', value: 'lon' },\r\n    { text: 'Название объекта', value: 'name' },\r\n    { text: 'Тип объекта', value: 'type' },\r\n    { text: 'Статус объекта', value: 'status' },\r\n    { text: 'Район', value: 'rayon' },\r\n    { text: 'Неофициальное название', value: 'unoff' },\r\n    { text: 'ОПИСАНИЕ', value: 'description' },\r\n    { text: 'Локальный нарратив', value: 'narrativ_l' },\r\n    { text: 'Биографический нарратив', value: 'narrativ_b' },\r\n    { text: 'Нарратив о практиках', value: 'narrativ_p' },\r\n    { text: 'Описание места', value: 'descript2' },\r\n    { text: 'Рассказчик', value: 'narrator' },\r\n    { text: 'Визуальные материалы', value: 'visual' },\r\n    { text: 'Москва дворовая', value: 'mos1' },\r\n    { text: 'Москва церковная', value: 'mos2' },\r\n    { text: 'Москва бездомная', value: 'mos3' },\r\n    { text: 'Москва подземная', value: 'mos4' },\r\n    { text: 'Москва субкультурная', value: 'mos5' },\r\n    { text: 'Москва легендарная', value: 'mos6' },\r\n  ];\r\n\r\n  get items(): BdMainItemProperties[] {\r\n    return this.$store.getters['bdMain/sortFeatures'].map((x) => x.properties);\r\n  }\r\n\r\n  @Watch('pagination')\r\n  setPagination(value) {\r\n    this.paginationSync(value);\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","import { render, staticRenderFns } from \"./Table.vue?vue&type=template&id=647119ad&\"\nimport script from \"./Table.vue?vue&type=script&lang=ts&\"\nexport * from \"./Table.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Table.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VDataTable } from 'vuetify/lib'\nimport { VTooltip } from 'vuetify/lib'\ninstallComponents(component, {VApp,VDataTable,VTooltip})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('647119ad', component.options)\n    } else {\n      api.reload('647119ad', component.options)\n    }\n    module.hot.accept(\"./Table.vue?vue&type=template&id=647119ad&\", function () {\n      api.rerender('647119ad', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/Table/Table.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\n        \"v-content\",\n        [\n          _c(\n            \"ngw-map\",\n            { attrs: { center: [37.63, 55.75], zoom: 10 } },\n            [\n              _c(\"map-control\", { attrs: { position: \"top-left\" } }, [\n                !_vm.drawer\n                  ? _c(\n                      \"div\",\n                      [\n                        _c(\n                          \"v-layout\",\n                          {\n                            attrs: {\n                              \"align-center\": \"\",\n                              \"justify-start\": \"\",\n                              row: \"\",\n                              \"fill-height\": \"\"\n                            }\n                          },\n                          [\n                            _c(\n                              \"v-btn\",\n                              {\n                                attrs: { fab: \"\", small: \"\" },\n                                on: {\n                                  click: function($event) {\n                                    _vm.drawer = !_vm.drawer\n                                  }\n                                }\n                              },\n                              [\n                                _c(\n                                  \"v-icon\",\n                                  {\n                                    staticClass: \"drawe-icon\",\n                                    class: { active: _vm.drawer },\n                                    attrs: { large: \"\" }\n                                  },\n                                  [_vm._v(\"chevron_right\")]\n                                )\n                              ],\n                              1\n                            ),\n                            _vm._v(\" \"),\n                            _c(\"span\", { staticClass: \"title\" }, [\n                              _vm._v(\"Устная память Москвы\")\n                            ])\n                          ],\n                          1\n                        )\n                      ],\n                      1\n                    )\n                  : _vm._e()\n              ])\n            ],\n            1\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-navigation-drawer\",\n        {\n          attrs: { stateless: \"\", fixed: \"\", app: \"\", width: \"350\" },\n          model: {\n            value: _vm.drawer,\n            callback: function($$v) {\n              _vm.drawer = $$v\n            },\n            expression: \"drawer\"\n          }\n        },\n        [\n          _c(\n            \"drawer-container\",\n            [\n              _c(\n                \"div\",\n                { attrs: { slot: \"header\" }, slot: \"header\" },\n                [\n                  _c(\n                    \"v-layout\",\n                    { attrs: { \"justify-space-between\": \"\" } },\n                    [\n                      _vm._v(\"\\n          Устная память Москвы\\n          \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          staticClass: \"pa-0 ma-0\",\n                          attrs: { flat: \"\", icon: \"\" },\n                          on: {\n                            click: function($event) {\n                              _vm.drawer = false\n                            }\n                          }\n                        },\n                        [_c(\"v-icon\", [_vm._v(\"close\")])],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _vm.items && _vm.items.length\n                ? _c(\"div\", [\n                    _c(\n                      \"div\",\n                      [\n                        _c(\"items-filter\"),\n                        _vm._v(\" \"),\n                        _c(\n                          \"div\",\n                          { staticClass: \"pl-3 pr-3\" },\n                          [\n                            _c(\"v-text-field\", {\n                              staticClass: \"pa-0\",\n                              attrs: {\n                                \"hide-details\": \"\",\n                                solo: \"\",\n                                clearable: \"\",\n                                label: \"Поиск\",\n                                \"prepend-inner-icon\": \"search\"\n                              },\n                              model: {\n                                value: _vm.listSearchText,\n                                callback: function($$v) {\n                                  _vm.listSearchText = $$v\n                                },\n                                expression: \"listSearchText\"\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _c(\"div\", [_c(\"list\")], 1)\n                  ])\n                : _c(\"div\", [\n                    _c(\n                      \"div\",\n                      { staticClass: \"pa-3 text-xs-center\" },\n                      [\n                        _c(\"v-progress-circular\", {\n                          attrs: { indeterminate: \"\", color: \"primary\" }\n                        })\n                      ],\n                      1\n                    )\n                  ]),\n              _vm._v(\" \"),\n              _c(\n                \"template\",\n                { slot: \"footer\" },\n                [\n                  _c(\n                    \"v-item-group\",\n                    { staticClass: \"bottom-button\" },\n                    [\n                      _c(\n                        \"v-btn\",\n                        { attrs: { flat: \"\", color: \"grey\" } },\n                        [_c(\"v-icon\", [_vm._v(\"save_alt\")])],\n                        1\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { flat: \"\", color: \"grey\" },\n                          on: {\n                            click: function($event) {\n                              _vm.page = \"table\"\n                            }\n                          }\n                        },\n                        [\n                          _c(\n                            \"v-icon\",\n                            {\n                              on: {\n                                click: function($event) {\n                                  _vm.page = \"table\"\n                                }\n                              }\n                            },\n                            [_vm._v(\"table_chart\")]\n                          )\n                        ],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            2\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-navigation-drawer\",\n        {\n          attrs: {\n            value: !!_vm.detail,\n            stateless: \"\",\n            width: \"400\",\n            absolute: \"\",\n            app: \"\",\n            right: \"\"\n          }\n        },\n        [\n          _vm.detail\n            ? _c(\n                \"drawer-container\",\n                [\n                  _c(\n                    \"template\",\n                    { slot: \"header\" },\n                    [\n                      _c(\n                        \"v-btn\",\n                        {\n                          staticClass: \"pa-0 ma-0\",\n                          attrs: { flat: \"\", icon: \"\" },\n                          on: {\n                            click: function($event) {\n                              _vm.detail = false\n                            }\n                          }\n                        },\n                        [_c(\"v-icon\", [_vm._v(\"close\")])],\n                        1\n                      ),\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(_vm.detail.properties.name) +\n                          \"\\n      \"\n                      )\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"detail\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"footer\" },\n                    [\n                      _c(\n                        \"v-item-group\",\n                        { staticClass: \"bottom-button\" },\n                        [\n                          _c(\n                            \"v-btn\",\n                            { attrs: { flat: \"\", color: \"grey\" } },\n                            [_c(\"v-icon\", [_vm._v(\"feedback\")])],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-btn\",\n                            { attrs: { flat: \"\", color: \"grey\" } },\n                            [_c(\"v-icon\", [_vm._v(\"save_alt\")])],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-btn\",\n                            {\n                              attrs: { flat: \"\", color: \"grey\" },\n                              on: {\n                                click: function($event) {\n                                  _vm.zoomTo = _vm.detail.id\n                                }\n                              }\n                            },\n                            [_c(\"v-icon\", [_vm._v(\"place\")])],\n                            1\n                          )\n                        ],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                ],\n                2\n              )\n            : _vm._e()\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"v-list\",\n        { attrs: { dense: \"\" } },\n        _vm._l(_vm.portion, function(item) {\n          return _c(\n            \"v-list-tile\",\n            { key: item.id },\n            [\n              _c(\n                \"v-list-tile-content\",\n                [\n                  _c(\"v-list-tile-title\", { attrs: { title: item.name } }, [\n                    _vm._v(_vm._s(item.name))\n                  ])\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-list-tile-action\",\n                { staticClass: \"pa-0\" },\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { icon: \"\", ripple: \"\" },\n                      on: {\n                        click: function($event) {\n                          return _vm.setDetail(item.id)\n                        }\n                      }\n                    },\n                    [\n                      _c(\n                        \"v-icon\",\n                        {\n                          style: {\n                            color:\n                              item.id === (_vm.detail && _vm.detail.id)\n                                ? \"orange\"\n                                : \"grey\"\n                          },\n                          attrs: { color: \"lighten-1\" }\n                        },\n                        [_vm._v(\"\\n            info\\n          \")]\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          )\n        }),\n        1\n      ),\n      _vm._v(\" \"),\n      _vm.displayItems.length > _vm.portion.length\n        ? _c(\n            \"div\",\n            { staticClass: \"text-xs-center\" },\n            [\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { flat: \"\", small: \"\" },\n                  on: { click: _vm.addPortion }\n                },\n                [_vm._v(\"Показать ещё\")]\n              )\n            ],\n            1\n          )\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"","import { BdMainItem, BdMainItemProperties } from '../../api/ngw';\r\nimport { Vue, Component, Prop } from 'vue-property-decorator';\r\n\r\n@Component\r\nexport class List extends Vue {\r\n\r\n  portionCount = 30;\r\n\r\n  portion = [];\r\n\r\n  get listSearchText(): string {\r\n    return this.$store.state.app.listSearchText;\r\n  }\r\n\r\n  get items(): BdMainItemProperties[] {\r\n    return this.$store.getters['bdMain/sortFeatures'].map((x) => x.properties);\r\n  }\r\n\r\n  get detail(): BdMainItem {\r\n    return this.$store.state.bdMain.detailItem;\r\n  }\r\n\r\n  mounted() {\r\n    this.addPortion();\r\n    this.$store.watch((state) => state.bdMain.filtered, (_items) => {\r\n      this.resetPortions();\r\n    });\r\n    this.$store.watch((state) => state.app.listSearchText, (value) => {\r\n      this.resetPortions();\r\n    });\r\n  }\r\n\r\n  get displayItems() {\r\n    return this.getDisplayItems();\r\n  }\r\n\r\n  getDisplayItems(): BdMainItemProperties[] {\r\n    if (this.listSearchText && this.listSearchText.length > 1) {\r\n      const filteredItems = this.items.filter((item) => {\r\n        for (const p in item) {\r\n          if (item.hasOwnProperty(p)) {\r\n            const ok = String(item[p]).toLowerCase().indexOf(this.listSearchText.toLowerCase()) !== -1;\r\n            if (ok) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n        return false;\r\n      });\r\n      return filteredItems;\r\n    } else {\r\n      return this.items;\r\n    }\r\n  }\r\n\r\n  setDetail(id: string) {\r\n    this.$store.dispatch('bdMain/setDetail', id);\r\n    this.$store.dispatch('app/zoomTo', id);\r\n  }\r\n\r\n  resetPortions() {\r\n    this.portion = [];\r\n    this.addPortion();\r\n  }\r\n\r\n  addPortion() {\r\n    const items = this.getDisplayItems();\r\n    const portionsLength = this.portion.length;\r\n    const itemsLength = items.length;\r\n    if (portionsLength < itemsLength) {\r\n      const addLength = portionsLength + this.portionCount;\r\n      const len = addLength > itemsLength ? itemsLength : addLength;\r\n      for (let fry = portionsLength; fry < len; fry++) {\r\n        this.portion.push(items[fry]);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=87fbdfe2&\"\nimport script from \"./List.vue?vue&type=script&lang=ts&\"\nexport * from \"./List.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VList } from 'vuetify/lib'\nimport { VListTile } from 'vuetify/lib'\nimport { VListTileAction } from 'vuetify/lib'\nimport { VListTileContent } from 'vuetify/lib'\nimport { VListTileTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VIcon,VList,VListTile,VListTileAction,VListTileContent,VListTileTitle})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('87fbdfe2', component.options)\n    } else {\n      api.reload('87fbdfe2', component.options)\n    }\n    module.hot.accept(\"./List.vue?vue&type=template&id=87fbdfe2&\", function () {\n      api.rerender('87fbdfe2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/List/List.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { attrs: { id: \"map\" } },\n    [_vm.ready ? _vm._t(\"default\") : _vm._e()],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { BaseLayerAdapter, AdapterOptions } from '@nextgis/webmap';\r\nimport { Map } from 'mapbox-gl';\r\nimport { TLayer } from '../MapboxglMapAdapter';\r\n\r\nlet ID = 0;\r\n\r\nexport abstract class BaseAdapter<O extends AdapterOptions = AdapterOptions>\r\n  implements BaseLayerAdapter<Map, TLayer, O> {\r\n\r\n  layer?: TLayer;\r\n  protected readonly _layerId: string;\r\n\r\n  constructor(public map: Map, public options: O) {\r\n    this._layerId = `layer-${ID++}`;\r\n  }\r\n\r\n  addLayer(options?: any): string[] | Promise<string[]> | undefined {\r\n    return [''];\r\n  }\r\n}\r\n","let canvg: any;\r\ntry {\r\n  canvg = require('canvg');\r\n} catch (er) {\r\n  // ignore\r\n}\r\ninterface GetImgOpt {\r\n  width: number;\r\n  height: number;\r\n  x?: number;\r\n  y?: number;\r\n  sdf?: string;\r\n  pixelRatio?: number;\r\n}\r\n\r\nconst defAddImgOpt = {\r\n  width: 12,\r\n  height: 12,\r\n  x: 0,\r\n  y: 0,\r\n  sdf: undefined,\r\n  pixelRatio: 2\r\n};\r\n\r\nexport function getImage(svgStr: string, opt: GetImgOpt): Promise<ImageData> {\r\n  return new Promise((resolve) => {\r\n    if (canvg) {\r\n      resolve(getImageData(svgStr, opt));\r\n    } else {\r\n      const svgImage = new Image();\r\n      svgImage.crossOrigin = 'Anonymous';\r\n      svgImage.src = 'data:image/svg+xml;base64,' + btoa(svgStr);\r\n\r\n      svgImage.onload = () => {\r\n        const imageData = getImageData(svgImage, opt);\r\n        resolve(imageData);\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\n// // from /mapbox-gl/src/util/browser.js\r\nexport function getImageData(img: string | HTMLImageElement, opt: GetImgOpt): ImageData {\r\n  const canvas = window.document.createElement('canvas');\r\n  const context = canvas.getContext('2d');\r\n  if (!context) {\r\n    throw new Error('failed to create canvas 2d context');\r\n  }\r\n  canvas.setAttribute('width', String(opt.width));\r\n  canvas.setAttribute('height', String(opt.height));\r\n  if (!canvg && img instanceof HTMLImageElement) {\r\n    context.drawImage(img, 0, 0, opt.width, opt.height);\r\n  } else if (typeof img === 'string') {\r\n    canvg(canvas, img);\r\n  }\r\n  return context.getImageData(0, 0, opt.width, opt.height);\r\n}\r\n","import { BaseLayerAdapter } from '@nextgis/webmap';\r\nimport { BaseAdapter } from './BaseAdapter';\r\nimport { Layer } from 'mapbox-gl';\r\n\r\nexport class MvtAdapter extends BaseAdapter implements BaseLayerAdapter {\r\n\r\n  addLayer(options: any): string[] {\r\n    options = this.options = { ...this.options, ...(options || {}) };\r\n    // read about https://blog.mapbox.com/vector-tile-specification-version-2-whats-changed-259d4cd73df6\r\n    const idString = options.id || this._layerId;\r\n\r\n    const layerOptions: Layer = {\r\n      'id': idString,\r\n      'type': options.type || 'fill',\r\n      'source-layer': options['source-layer'] || idString,\r\n      'source': {\r\n        type: 'vector',\r\n        tiles: [options.url],\r\n      },\r\n      'layout': {\r\n        visibility: 'none',\r\n      },\r\n    };\r\n\r\n    if (options.paint) {\r\n      layerOptions.paint = options.paint;\r\n    }\r\n\r\n    this.map.addLayer(layerOptions, options.before);\r\n    this.layer = [idString];\r\n    return this.layer;\r\n  }\r\n}\r\n","import { BaseLayerAdapter, TileAdapterOptions } from '@nextgis/webmap';\r\nimport { BaseAdapter } from './BaseAdapter';\r\nimport { RasterSource } from 'mapbox-gl';\r\n\r\nexport class TileAdapter extends BaseAdapter<TileAdapterOptions> implements BaseLayerAdapter {\r\n\r\n  addLayer(options: TileAdapterOptions): string[] {\r\n    options = { ...this.options, ...(options || {}) };\r\n\r\n    let tiles: string[];\r\n    if (options && options.subdomains) {\r\n      tiles = options.subdomains.split('').map((x) => {\r\n        const subUrl = options.url.replace('{s}', x);\r\n        return subUrl;\r\n      },\r\n      );\r\n    } else {\r\n      tiles = [options.url];\r\n    }\r\n\r\n    const sourceOptions: RasterSource = {\r\n      type: 'raster',\r\n      // point to our third-party tiles. Note that some examples\r\n      // show a \"url\" property. This only applies to tilesets with\r\n      // corresponding TileJSON (such as mapbox tiles).\r\n      tiles,\r\n      tileSize: 256, // opt && opt.tileSize ||\r\n    };\r\n    if (options.attribution) {\r\n      sourceOptions.attribution = options.attribution;\r\n    }\r\n\r\n    this.map.addLayer({\r\n      id: this._layerId,\r\n      type: 'raster',\r\n      layout: {\r\n        visibility: 'none',\r\n      },\r\n      source: sourceOptions,\r\n      // TODO: clean remove before options from all existing apps\r\n      // @ts-ignore\r\n    }, options.before);\r\n    const layer = this.layer = [this._layerId];\r\n    return layer;\r\n  }\r\n}\r\n","import { BaseLayerAdapter, TileAdapterOptions } from '@nextgis/webmap';\r\nimport { TileAdapter } from './TileAdapter';\r\n\r\nconst OPTIONS = {\r\n  url: 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\r\n  attribution: '&copy; <a href=\"http://osm.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors',\r\n  subdomains: 'abc',\r\n};\r\n\r\nexport class OsmAdapter extends TileAdapter implements BaseLayerAdapter {\r\n\r\n  addLayer(options: TileAdapterOptions): string[] {\r\n    return super.addLayer(Object.assign({}, OPTIONS, options));\r\n  }\r\n}\r\n","import { NavigationControl } from 'mapbox-gl';\r\nimport { ZoomControlOptions } from '@nextgis/webmap';\r\n\r\nexport class ZoomControl extends NavigationControl {\r\n\r\n  options: ZoomControlOptions & any;\r\n\r\n  constructor(options: ZoomControlOptions & any = {}) {\r\n    options = {...options, showCompass: false };\r\n    super(options);\r\n  }\r\n\r\n  _createButton(className: string, ariaLabel: string, fn: () => any) {\r\n    // @ts-ignore\r\n    const element = super._createButton(className, ariaLabel, fn);\r\n    const aliases: any = {\r\n      'Zoom in': 'zoomInTitle',\r\n      'Zoom out': 'zoomOutTitle'\r\n    };\r\n    const alias = aliases[ariaLabel];\r\n    const label = alias && this.options[alias];\r\n    if (label) {\r\n      element.title = label;\r\n      element.setAttribute('aria-label', label);\r\n    }\r\n\r\n    return element;\r\n  }\r\n}\r\n","import { NavigationControl } from 'mapbox-gl';\r\n\r\nexport class CompassControl extends NavigationControl {\r\n    constructor(options = {}) {\r\n        options = Object.assign({}, options, {showZoom: false});\r\n        super(options);\r\n    }\r\n}\r\n","// import { MapControl } from '@nextgis/webmap';\r\nimport { AttributionControl as AC } from 'mapbox-gl';\r\n\r\nexport class AttributionControl extends AC {\r\n\r\n}\r\n","import {\n  GeoJsonAdapterOptions,\n  GeoJsonAdapterLayerType,\n  GeoJsonAdapterLayerPaint,\n  GetPaintCallback,\n  IconOptions,\n  DataLayerFilter,\n  LayerDefinition,\n  VectorLayerAdapter,\n} from '@nextgis/webmap';\nimport {\n  GeoJsonObject,\n  GeoJsonGeometryTypes,\n  Feature as F,\n  FeatureCollection,\n  GeometryCollection,\n  GeometryObject,\n  Geometry,\n  GeoJsonProperties\n} from 'geojson';\nimport {\n  Map, MapLayerMouseEvent, GeoJSONSource,\n  // BackgroundPaint, FillPaint, FillExtrusionPaint, LinePaint, SymbolPaint,\n  // RasterPaint, CirclePaint, HeatmapPaint, HillshadePaint,\n} from 'mapbox-gl';\n\n// type MapboxPaint = BackgroundPaint | FillPaint | FillExtrusionPaint | LinePaint | SymbolPaint |\n//   RasterPaint | CirclePaint | HeatmapPaint | HillshadePaint;\n\nimport { getImage } from '../util/image_icons';\nimport { TLayer } from '../MapboxglMapAdapter';\nimport { BaseAdapter } from './BaseAdapter';\n\ninterface Feature<G extends GeometryObject | null = Geometry, P = GeoJsonProperties> extends F<G, P> {\n  _rendrom_id?: string;\n}\n\nconst allowedParams: Array<[string, string] | string> = ['color', 'opacity'];\nconst allowedByType = {\n  circle: [\n    ['fillColor', 'color'],\n    ['fillOpacity', 'opacity'],\n    ['strokeColor', 'stroke-color'],\n    ['strokeOpacity', 'stroke-opacity'],\n    ['weight', 'stroke-width'],\n    'radius'\n  ],\n  line: [['strokeColor', 'color'], ['strokeOpacity', 'opacity'], ['weight', 'width']],\n  fill: [['fillColor', 'color'], ['fillOpacity', 'opacity']],\n  icon: allowedParams.concat([])\n};\n\nconst typeAlias: { [key in GeoJsonGeometryTypes]: GeoJsonAdapterLayerType } = {\n  'Point': 'circle',\n  'LineString': 'line',\n  'MultiPoint': 'circle',\n  'Polygon': 'fill',\n  'MultiLineString': 'line',\n  'MultiPolygon': 'fill',\n  'GeometryCollection': 'fill'\n};\n\nconst typeAliasForFilter: { [key in GeoJsonAdapterLayerType]: GeoJsonGeometryTypes } = {\n  circle: 'Point',\n  line: 'LineString',\n  fill: 'Polygon',\n  icon: 'Point'\n};\n\nconst backAliases: { [key in GeoJsonAdapterLayerType]?: GeoJsonGeometryTypes[] } = {\n  'icon': ['Point']\n};\n\nfor (const a in typeAlias) {\n  if (typeAlias.hasOwnProperty(a)) {\n    const layerType = typeAlias[a as GeoJsonGeometryTypes];\n    const backAlias = backAliases[layerType] || [];\n    backAlias.push(a as GeoJsonGeometryTypes);\n    backAliases[layerType] = backAlias;\n  }\n}\n\nconst PAINT = {\n  color: 'blue',\n  opacity: 1,\n  radius: 10\n};\n\nlet ID = 0;\n\ntype MapboxLayerType = 'fill' | 'line' | 'symbol' | 'circle';\n\nexport class GeoJsonAdapter extends BaseAdapter<GeoJsonAdapterOptions>\n  implements VectorLayerAdapter<Map, TLayer, GeoJsonAdapterOptions, Feature> {\n\n  selected: boolean = false;\n\n  private _features: Feature[] = [];\n  private readonly _sourceId: string;\n  private readonly _selectionName: string;\n  private _selectedFeatureIds: string[] = [];\n  private _filteredFeatureIds: string[] = [];\n  private _types: GeoJsonAdapterLayerType[] = ['fill', 'circle', 'line'];\n  private _filterFun?: DataLayerFilter<Feature>;\n  private $onLayerClick?: (e: MapLayerMouseEvent) => void;\n\n  constructor(public map: Map, public options: GeoJsonAdapterOptions) {\n    super(map, options);\n    this._sourceId = `source-${this._layerId}`;\n    this._selectionName = this._layerId + '-highlighted';\n    this.$onLayerClick = this._onLayerClick.bind(this);\n  }\n\n  async addLayer(options: GeoJsonAdapterOptions): Promise<any> {\n    options = this.options = { ...this.options, ...(options || {}) };\n\n    this.map.addSource(this._sourceId, {\n      'type': 'geojson',\n      'data': {\n        'type': 'FeatureCollection',\n        'features': []\n      }\n    });\n    this.layer = [];\n    const types = this._types = options.type ? [options.type] : this._types;\n    // const types = this._types;\n    for (const t of types) {\n      if (options.paint) {\n\n        const geomType = typeAliasForFilter[t];\n        if (geomType) {\n          let type = t;\n          if (t === 'circle') {\n            const paintType = this._detectPaintType(options.paint);\n            if (paintType === 'icon') {\n              type = 'icon';\n            }\n          }\n          const layer = this._getLayerNameFromType(t);\n          const geomFilter = ['==', '$type', geomType];\n          await this._addLayer(layer, type, geomFilter);\n          this.layer.push(layer);\n          if (options.selectedPaint) {\n            const selectionLayer = this._getSelectionLayerNameFromType(t);\n            await this._addLayer(selectionLayer, type, ['all', geomFilter, ['in', '_rendrom_id', '']]);\n            this.layer.push(selectionLayer);\n          }\n        }\n      }\n    }\n\n    if (this.options.data) {\n      this.addData(this.options.data);\n    }\n\n    this._addEventsListeners();\n\n    return this.layer;\n  }\n\n  removeLayer() {\n    const map = this.map;\n    if (this.layer) {\n      this.layer.forEach((layerId) => {\n        map.removeLayer(layerId);\n      });\n      map.removeSource(this._sourceId);\n    }\n  }\n\n  clearLayer(cb?: (feature: Feature) => boolean) {\n    let features: Feature[] = [];\n    const source = this.map.getSource(this._sourceId) as GeoJSONSource;\n    if (cb) {\n      features = this._features = this._features.filter((x) => !cb(x));\n    }\n    source.setData({ type: 'FeatureCollection', features });\n  }\n\n  async addData(data: GeoJsonObject) {\n    let type: GeoJsonAdapterLayerType | undefined;\n    if (this.options.type) {\n      type = this.options.type;\n    }\n    if (!type && data) {\n      const detectedType = detectType(data);\n      type = typeAlias[detectedType];\n    }\n    if (data && type) {\n      const features = this.filterGeometries(data, type);\n      features.forEach((x) => {\n        // to avoid id = 0 is false\n        const rendromId = '_' + ID++;\n        x._rendrom_id = rendromId;\n        if (x.properties) {\n          x.properties._rendrom_id = rendromId;\n        }\n      });\n      if (this._filterFun) {\n        this._filter(this._filterFun);\n      }\n      await this._updateLayerPaint(type);\n      const source = this.map.getSource(this._sourceId) as GeoJSONSource;\n      source.setData({ type: 'FeatureCollection', features: this._features });\n    }\n  }\n\n  getLayers() {\n    const filtered = this._filteredFeatureIds.length;\n    return this._features.map((feature) => {\n      let visible: boolean = false;\n      if (filtered) {\n        const id = this._getRendromId(feature);\n        if (id !== undefined) {\n          visible = this._filteredFeatureIds.indexOf(id) !== -1;\n        }\n      }\n      return {\n        feature,\n        visible\n      };\n    });\n  }\n\n  filter(fun: DataLayerFilter<Feature, TLayer>) {\n    this._filterFun = fun;\n    this._filter(fun);\n  }\n\n  removeFilter() {\n    this._filterFun = undefined;\n    this._filteredFeatureIds = [];\n    this._updateFilter();\n  }\n\n  getSelected() {\n    const features: Array<LayerDefinition<Feature, TLayer>> = [];\n    this._features.forEach((x) => {\n      const id = this._getRendromId(x);\n      if (id && this._selectedFeatureIds.indexOf(id) !== -1) {\n        features.push({ feature: x });\n      }\n    });\n    return features;\n  }\n\n  select(findFeatureFun?: (opt: { feature: Feature }) => boolean) {\n    if (findFeatureFun) {\n      const features = this._features.filter((x) => findFeatureFun({ feature: x }));\n      this._selectFeature(features);\n    } else if (!this.selected) {\n      this._selectFeature(this._features);\n    }\n    this.selected = true;\n  }\n\n  unselect(findFeatureFun?: (opt: { feature: Feature }) => boolean) {\n    if (findFeatureFun) {\n      const features = this._features.filter((x) => findFeatureFun({ feature: x }));\n      this._unselectFeature(features);\n    } else if (this.selected) {\n      this._unselectFeature(this._features);\n    }\n    this.selected = !!this._selectedFeatureIds.length;\n  }\n\n  private _filter(fun: DataLayerFilter<Feature, TLayer>) {\n    this._filteredFeatureIds = [];\n    this._features.forEach((feature) => {\n      const ok = fun({ feature });\n      const id = this._getRendromId(feature);\n      if (ok && id) {\n        this._filteredFeatureIds.push(id);\n      }\n    });\n    this._updateFilter();\n  }\n\n  private _getLayerNameFromType(type: GeoJsonAdapterLayerType) {\n    return type + '-' + this._layerId;\n  }\n\n  private _getSelectionLayerNameFromType(type: GeoJsonAdapterLayerType) {\n    return type + '-' + this._selectionName;\n  }\n\n  private async _addLayer(name: string, type: GeoJsonAdapterLayerType, filter?: any) {\n    let mType: MapboxLayerType;\n    if (type === 'icon') {\n      mType = 'symbol';\n    } else {\n      mType = type;\n    }\n\n    const layerOpt: mapboxgl.Layer = {\n      id: name,\n      type: mType,\n      source: this._sourceId,\n      layout: {\n        visibility: 'none',\n      },\n      filter\n    };\n\n    this.map.addLayer(layerOpt);\n  }\n\n  private async _updateLayerPaint(type: GeoJsonAdapterLayerType) {\n\n    const layerName = this._getLayerNameFromType(type);\n\n    if (this.options.paint) {\n      const layers: Array<[string, GeoJsonAdapterLayerPaint | GetPaintCallback]> = [[layerName, this.options.paint]];\n      if (this.options.selectedPaint) {\n        const selName = this._getSelectionLayerNameFromType(type);\n        layers.push([selName, this.options.selectedPaint]);\n      }\n\n      for (const [name, paint] of layers) {\n        const _paint: any = await this._createPaintForType(paint, type, name);\n\n        if ('icon-image' in _paint) {\n          // If true, the icon will be visible even if it collides with other previously drawn symbols.\n          _paint['icon-allow-overlap'] = true;\n          for (const p in _paint) {\n            if (_paint.hasOwnProperty(p)) {\n              this.map.setLayoutProperty(name, p, _paint[p]);\n            }\n          }\n        } else {\n          for (const p in _paint) {\n            if (_paint.hasOwnProperty(p)) {\n              this.map.setPaintProperty(name, p, _paint[p]);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  private filterGeometries(data: GeoJsonObject, type: GeoJsonAdapterLayerType): Feature[] {\n    let newFeatures: Feature[] = [];\n    if (data.type === 'FeatureCollection') {\n      const features = (data as FeatureCollection).features = (data as FeatureCollection).features\n        .filter((f) => geometryFilter(f.geometry.type, type)) as Feature[];\n      newFeatures = features;\n    } else if (data.type === 'Feature') {\n      const allow = geometryFilter((data as Feature).geometry.type, type);\n      if (!allow) {\n        return [];\n      }\n      newFeatures.push((data as Feature));\n    } else if (data.type === 'GeometryCollection') {\n      const geomCollection = data as GeometryCollection;\n      geomCollection.geometries = geomCollection.geometries.filter((g) => geometryFilter(g.type, type));\n      newFeatures = geomCollection.geometries.map((x) => {\n        const f: Feature = { type: 'Feature', geometry: x as GeometryObject, properties: {} };\n        return f;\n      });\n    } else if (typeAlias[data.type]) {\n      const obj: Feature = { type: 'Feature', geometry: data as GeometryObject, properties: {} };\n      newFeatures = [obj];\n    }\n    this._features = this._features.concat(newFeatures);\n    return newFeatures;\n  }\n\n  private async _createPaintForType(\n    paint: GeoJsonAdapterLayerPaint | GetPaintCallback,\n    type: GeoJsonAdapterLayerType,\n    name: string): Promise<any> {\n\n    if (typeof paint === 'function') {\n      return await this._getPaintFromCallback(paint, type, name);\n    } else {\n      const mapboxPaint: any = {};\n      const _paint = { ...PAINT, ...(paint || {}) };\n      if (paint.type === 'icon' && paint.html) {\n        await this._registerImage(paint);\n        return {\n          'icon-image': paint.html\n        };\n      } else {\n        for (const p in _paint) {\n          if (_paint.hasOwnProperty(p)) {\n            const allowed = allowedByType[type];\n            if (allowed) {\n              const allowedType = allowed.find((x) => {\n                if (typeof x === 'string') {\n                  return x === p;\n                } else if (Array.isArray(x)) {\n                  return x[0] === p;\n                }\n                return false;\n              });\n              if (allowedType) {\n                const paramName = Array.isArray(allowedType) ? allowedType[1] : allowedType;\n                // @ts-ignore\n                mapboxPaint[type + '-' + paramName] = _paint[p];\n              }\n            }\n          }\n        }\n        return mapboxPaint;\n      }\n    }\n  }\n\n  private async _getPaintFromCallback(paint: GetPaintCallback, type: GeoJsonAdapterLayerType, name: string) {\n    const style: any = {};\n    for (const feature of this._features) {\n      const _paint = paint(feature);\n      if (_paint.type === 'icon') {\n        await this._registerImage(_paint);\n        if (feature.properties) {\n          feature.properties['_icon-image-' + name] = _paint.html;\n        }\n        style['icon-image'] = `{_icon-image-${name}}`;\n      } else {\n        for (const p in _paint) {\n          if (_paint.hasOwnProperty(p)) {\n            // @ts-ignore\n            const toSave = _paint[p];\n            if (feature.properties) {\n              feature.properties[`_paint_${p}_${name}`] = toSave;\n            }\n            style[p] = ['get', `_paint_${p}_${name}`];\n          }\n        }\n      }\n    }\n    if ('icon-image' in style) {\n      return style;\n    }\n    const styleFromCb = this._createPaintForType(style, type, name);\n    return styleFromCb;\n  }\n\n  private async _registerImage(paint: IconOptions) {\n    if (paint.html) {\n      const imageExist = this.map.hasImage(paint.html);\n      if (!imageExist) {\n        let width = 12;\n        let height = 12;\n        if (paint.iconSize) {\n          width = paint.iconSize[0];\n          height = paint.iconSize[1];\n        }\n        const image = await getImage(paint.html, {\n          width,\n          height\n        });\n\n        this.map.addImage(paint.html, image);\n      }\n    }\n  }\n\n  private _onLayerClick(e: mapboxgl.MapLayerMouseEvent) {\n    e.preventDefault();\n    const features = this.map.queryRenderedFeatures(e.point, { layers: this.layer });\n    const feature = features[0] as Feature;\n    if (feature) {\n      const id = this._getRendromId(feature);\n      if (id !== undefined) {\n        let isSelected = this._selectedFeatureIds.indexOf(id) !== -1;\n        if (isSelected) {\n          if (this.options && this.options.unselectOnSecondClick) {\n            this._unselectFeature(feature);\n            isSelected = false;\n          }\n        } else {\n          this._selectFeature(feature);\n          isSelected = true;\n        }\n        if (this.options.onLayerClick) {\n          this.options.onLayerClick({\n            layer: this,\n            feature,\n            selected: isSelected\n          });\n        }\n      }\n    }\n  }\n\n  private _selectFeature(feature: Feature | Feature[]) {\n    if (this.options && !this.options.multiselect) {\n      this._selectedFeatureIds = [];\n    }\n    let features: Feature[] = [];\n    if (Array.isArray(feature)) {\n      features = feature;\n    } else {\n      features = [feature];\n    }\n    features.forEach((f) => {\n      const id = this._getRendromId(f);\n      if (id !== undefined) {\n        this._selectedFeatureIds.push(id);\n      }\n    });\n    this._updateFilter();\n  }\n\n  private _unselectFeature(feature: Feature | Feature[]) {\n    let features: Feature[] = [];\n    if (Array.isArray(feature)) {\n      features = feature;\n    } else {\n      features = [feature];\n    }\n    features.forEach((f) => {\n      const id = this._getRendromId(f);\n      if (id !== undefined) {\n        const index = this._selectedFeatureIds.indexOf(id);\n        if (index !== -1) {\n          this._selectedFeatureIds.splice(index, 1);\n        }\n      }\n    });\n    this._updateFilter();\n  }\n\n  private _updateFilter() {\n    let selectionArray: string[] = [];\n    const filteredArray: string[] = [];\n\n    if (this._filteredFeatureIds.length) {\n      this._features.forEach((x) => {\n        const id = this._getRendromId(x);\n        if (id !== undefined && this._filteredFeatureIds.indexOf(id) !== -1) {\n          if (this._selectedFeatureIds.indexOf(id) !== -1) {\n            selectionArray.push(id);\n          } else {\n            filteredArray.push(id);\n          }\n        }\n      });\n    } else {\n      selectionArray = this._selectedFeatureIds;\n    }\n\n    const layers = this.layer;\n    if (layers) {\n      this._types.forEach((t) => {\n        const geomType = typeAliasForFilter[t];\n        if (geomType) {\n          const geomFilter = ['==', '$type', geomType];\n          const layerName = this._getLayerNameFromType(t);\n          const selLayerName = this._getSelectionLayerNameFromType(t);\n          if (layers.indexOf(selLayerName) !== -1) {\n            if (this._selectionName) {\n              this.map.setFilter(selLayerName, ['all', geomFilter, ['in', '_rendrom_id', ...selectionArray]]);\n            }\n          }\n          if (layers.indexOf(layerName) !== -1) {\n            if (this._filteredFeatureIds.length) {\n              this.map.setFilter(layerName, ['all', geomFilter, ['in', '_rendrom_id', ...filteredArray]]);\n            } else {\n              this.map.setFilter(layerName, ['all', geomFilter, ['!in', '_rendrom_id', ...selectionArray]]);\n            }\n          }\n        }\n      });\n    }\n  }\n\n  private _detectPaintType(paint: GeoJsonAdapterLayerPaint | GetPaintCallback): string | undefined {\n    if ('type' in paint) {\n      return paint.type;\n    } else if (typeof paint === 'function') {\n      try {\n        const falsePaint = paint({ type: 'Feature', properties: {}, geometry: {} });\n        return this._detectPaintType(falsePaint);\n      } catch (er) {\n        //\n      }\n    }\n  }\n\n  private _addEventsListeners() {\n    if (this.layer && this.options && this.options.selectable) {\n      this.layer.forEach((x) => {\n        if (this.$onLayerClick) {\n          const onLayerClick = this.$onLayerClick;\n          this.map.on('click', x, (e: MapLayerMouseEvent) => {\n            onLayerClick(e);\n          });\n        }\n\n        this.map.on('mousemove', x, () => {\n          this.map.getCanvas().style.cursor = 'pointer';\n        });\n        this.map.on('mouseleave', x, () => {\n          this.map.getCanvas().style.cursor = '';\n        });\n      });\n    }\n  }\n\n  private _getRendromId(feature: Feature): string | undefined {\n    // @ts-ignore\n    const id = feature._rendrom_id;\n    if (id !== undefined) {\n      return id;\n    } else if (feature.properties && feature.properties._rendrom_id !== undefined) {\n      return feature.properties._rendrom_id;\n    }\n  }\n}\n\n// Static functions\nfunction geometryFilter(geometry: GeoJsonGeometryTypes, type: GeoJsonAdapterLayerType): boolean {\n  const backType = backAliases[type];\n  if (backType) {\n    return backType.indexOf(geometry) !== -1;\n  }\n  return false;\n}\n\nfunction detectType(geojson: GeoJsonObject): GeoJsonGeometryTypes {\n  let geometry: GeoJsonGeometryTypes;\n  if (geojson.type === 'FeatureCollection') {\n    const featuresTypes = (geojson as FeatureCollection).features.map((f) => f.geometry.type);\n    geometry = findMostFrequentGeomType(featuresTypes);\n  } else if (geojson.type === 'GeometryCollection') {\n    const geometryTypes = (geojson as GeometryCollection).geometries.map((g) => g.type);\n    geometry = findMostFrequentGeomType(geometryTypes);\n  } else if (geojson.type === 'Feature') {\n    geometry = (geojson as Feature).geometry.type;\n  } else {\n    geometry = geojson.type;\n  }\n  return geometry;\n}\n\nfunction findMostFrequentGeomType(arr: GeoJsonGeometryTypes[]): GeoJsonGeometryTypes {\n  const counts: { [x: string]: number } = {};\n  for (let fry = 0; fry < arr.length; fry++) {\n    counts[arr[fry]] = 1 + (counts[arr[fry]] || 0);\n  }\n  let maxName: string = '';\n  for (const c in counts) {\n    if (counts.hasOwnProperty(c)) {\n      const maxCount = maxName ? counts[maxName] : 0;\n      if (counts[c] > maxCount) {\n        maxName = c;\n      }\n    }\n  }\n  return maxName as GeoJsonGeometryTypes;\n}\n","import { MapControl, CreateControlOptions } from '@nextgis/webmap';\r\nimport { IControl, Map } from 'mapbox-gl';\r\n\r\nexport function createControl(control: MapControl, options: CreateControlOptions = {}): IControl {\r\n\r\n  class Control implements IControl {\r\n\r\n    private _container?: HTMLElement;\r\n\r\n    getDefaultPosition() {\r\n      return 'top-left';\r\n    }\r\n\r\n    onAdd(map: Map) {\r\n\r\n      const element = document.createElement('div');\r\n      const content: HTMLElement = control.onAdd();\r\n      element.classList.add('mapboxgl-ctrl');\r\n      if (options.bar) {\r\n        // add custom css for boarder style\r\n        element.classList.add('mapboxgl-bar');\r\n      }\r\n      if (options.addClass) {\r\n        element.classList.add(options.addClass);\r\n      }\r\n      element.appendChild(content);\r\n      this._container = element;\r\n      return this._container;\r\n    }\r\n\r\n    onRemove() {\r\n      if (this._container) {\r\n        const parent = this._container.parentNode;\r\n        if (parent) {\r\n          parent.removeChild(this._container);\r\n        }\r\n      }\r\n      return control.onRemove();\r\n    }\r\n\r\n    remove() {\r\n      this.onRemove();\r\n    }\r\n  }\r\n\r\n  return new Control();\r\n  // return control;\r\n}\r\n","/**\r\n * @module mapboxgl-map-adapter\r\n */\r\nimport {\r\n  MapAdapter,\r\n  FitOptions,\r\n  MapControl,\r\n  ControlPositions,\r\n  ButtonControlOptions,\r\n  LngLatArray,\r\n  MapOptions,\r\n  LayerAdapter,\r\n  LngLatBoundsArray,\r\n  WebMapEvents\r\n} from '@nextgis/webmap';\r\nimport { MvtAdapter } from './layer-adapters/MvtAdapter';\r\nimport { Map, IControl, MapEventType, EventData, MapboxOptions } from 'mapbox-gl';\r\nimport { OsmAdapter } from './layer-adapters/OsmAdapter';\r\nimport { TileAdapter } from './layer-adapters/TileAdapter';\r\nimport { EventEmitter } from 'events';\r\nimport { ZoomControl } from './controls/ZoomControl';\r\nimport { CompassControl } from './controls/CompassControl';\r\nimport { AttributionControl } from './controls/AttributionControl';\r\nimport { GeoJsonAdapter } from './layer-adapters/GeoJsonAdapter';\r\nimport { createControl } from './controls/createControl';\r\nimport { createButtonControl } from './controls/createButtonControl';\r\nimport { map } from 'leaflet';\r\n\r\nexport type TLayer = string[];\r\ntype TLayerAdapter = LayerAdapter<Map, TLayer>;\r\n\r\nconst fitBoundsOptions: FitOptions = {\r\n  padding: 100\r\n};\r\n\r\nexport class MapboxglMapAdapter implements MapAdapter<Map, TLayer, IControl> {\r\n\r\n  static layerAdapters = {\r\n    TILE: TileAdapter,\r\n    // IMAGE: ImageAdapter,\r\n    MVT: MvtAdapter,\r\n    OSM: OsmAdapter,\r\n    GEOJSON: GeoJsonAdapter,\r\n  };\r\n\r\n  static controlAdapters: { [name: string]: any } = {\r\n    ZOOM: ZoomControl,\r\n    COMPASS: CompassControl,\r\n    ATTRIBUTION: AttributionControl,\r\n  };\r\n\r\n  options: MapOptions = {};\r\n  map!: Map;\r\n\r\n  emitter = new EventEmitter();\r\n\r\n  layerAdapters = MapboxglMapAdapter.layerAdapters;\r\n  controlAdapters = MapboxglMapAdapter.controlAdapters;\r\n  isLoaded = false;\r\n\r\n  private _universalEvents: Array<keyof WebMapEvents> = [\r\n    'zoomstart',\r\n    'zoom',\r\n    'zoomend',\r\n    'movestart',\r\n    'move',\r\n    'moveend',\r\n  ];\r\n\r\n  private _sourceDataLoading: { [name: string]: any[] } = {};\r\n  private _sortTimerId?: number;\r\n\r\n  // create(options: MapOptions = {target: 'map'}) {\r\n  create(options: MapOptions) {\r\n    if (!this.map) {\r\n      this.options = options;\r\n      if (options.target) {\r\n        const mapOpt: MapboxOptions = {\r\n          container: options.target,\r\n          attributionControl: false,\r\n          // @ts-ignore\r\n          bounds: options.bounds,\r\n          fitBoundsOptions: {...options.fitOptions, ...fitBoundsOptions},\r\n          // center: options.center,\r\n          // zoom: options.zoom,\r\n          style: {\r\n            version: 8,\r\n            name: 'Empty style',\r\n            sources: {},\r\n            layers: [],\r\n          },\r\n        };\r\n        if (options.center !== undefined) {\r\n          mapOpt.center = options.center;\r\n        }\r\n        if (options.zoom) {\r\n          mapOpt.zoom = options.zoom;\r\n        }\r\n        this.map = new Map(mapOpt);\r\n        this._addEventsListeners();\r\n        this.map.once('load', () => {\r\n          this.isLoaded = true;\r\n          this.emitter.emit('create', { map: this.map });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  getContainer() {\r\n    return this.map && this.map.getContainer();\r\n  }\r\n\r\n  setView(center: LngLatArray, zoom: number) {\r\n    if (this.map) {\r\n      this.map.jumpTo({ center, zoom: zoom - 1 });\r\n    }\r\n  }\r\n\r\n  setCenter(latLng: LngLatArray): void {\r\n    if (this.map) {\r\n      this.map.setCenter(latLng);\r\n    }\r\n  }\r\n\r\n  getCenter(): LngLatArray | undefined {\r\n    if (this.map) {\r\n      const center = this.map.getCenter();\r\n      return [center.lng, center.lat];\r\n    }\r\n  }\r\n\r\n  setZoom(zoom: number): void {\r\n    if (this.map) {\r\n      this.map.setZoom(zoom - 1);\r\n    }\r\n  }\r\n\r\n  getZoom(): number | undefined {\r\n    if (this.map) {\r\n      const zoom = this.map.getZoom();\r\n      return zoom + 1;\r\n    }\r\n  }\r\n\r\n  // [extent_left, extent_bottom, extent_right, extent_top];\r\n  fit(e: LngLatBoundsArray, options: FitOptions = {}): void {\r\n    if (this.map) {\r\n      this.map.fitBounds(\r\n        [[e[0], e[1]], [e[2], e[3]]], {\r\n          linear: true,\r\n          ...options,\r\n          ...fitBoundsOptions\r\n        });\r\n    }\r\n  }\r\n\r\n  setRotation(angle: number): void {\r\n    // ignore\r\n  }\r\n\r\n  showLayer(layerIds: string[]): void {\r\n    layerIds.forEach((layerId) => {\r\n      this._toggleLayer(layerId, true);\r\n    });\r\n  }\r\n\r\n  hideLayer(layerIds: string[]): void {\r\n    layerIds.forEach((layerId) => {\r\n      this._toggleLayer(layerId, false);\r\n    });\r\n  }\r\n\r\n  removeLayer(layerIds: string[]): void {\r\n    if (this.map) {\r\n      const _map = this.map;\r\n      layerIds.forEach((layerId) => {\r\n        _map.removeLayer(layerId);\r\n        _map.removeSource(layerId);\r\n      });\r\n    }\r\n  }\r\n\r\n  setLayerOrder(layerIds: string[], order: number, layers: { [x: string]: TLayerAdapter }): void {\r\n    if (this._sortTimerId) {\r\n      window.clearTimeout(this._sortTimerId);\r\n    }\r\n    this._sortTimerId = window.setTimeout(() => this._setLayerOrder(layers));\r\n  }\r\n\r\n  setLayerOpacity(layerIds: string[], opacity: number): void {\r\n    const _map = this.map;\r\n    if (_map) {\r\n      layerIds.forEach((layerId) => {\r\n        this._onMapLoad().then(() => {\r\n          const layer = _map.getLayer(layerId);\r\n          if (layer) {\r\n            _map.setPaintProperty(layerId, layer.type + '-opacity', opacity);\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  createControl(control: MapControl): IControl {\r\n    return createControl(control);\r\n  }\r\n\r\n  createButtonControl(options: ButtonControlOptions): IControl {\r\n    return createButtonControl(options);\r\n  }\r\n\r\n  addControl(control: IControl, position: ControlPositions): IControl | undefined {\r\n    if (this.map) {\r\n      this.map.addControl(control, position);\r\n      return control;\r\n    }\r\n  }\r\n\r\n  removeControl(control: IControl): void {\r\n    if (this.map) {\r\n      this.map.removeControl(control);\r\n    }\r\n  }\r\n\r\n  onMapClick(evt: MapEventType['click'] & EventData): void {\r\n\r\n    const latLng = evt.lngLat;\r\n    const { x, y } = evt.point;\r\n\r\n    this.emitter.emit('click', { latLng, pixel: { top: y, left: x } });\r\n  }\r\n\r\n  private _onMapLoad(cb?: () => any): Promise<Map> {\r\n    return new Promise<Map>((resolve) => {\r\n      const _resolve = () => {\r\n        if (cb) {\r\n          cb();\r\n        }\r\n        if (this.map) {\r\n          resolve(this.map);\r\n        }\r\n      };\r\n      if (this.isLoaded) { // map.loaded()\r\n        _resolve();\r\n      } else if (this.map) {\r\n        this.emitter.once('create', () => {\r\n          _resolve();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private _setLayerOrder(layers: { [x: string]: TLayerAdapter }): void {\r\n    const _map = this.map;\r\n    if (_map) {\r\n      const baseLayers: TLayerAdapter[] = [];\r\n      let orderedLayers: TLayerAdapter[] = [];\r\n      for (const l in layers) {\r\n        if (layers.hasOwnProperty(l)) {\r\n          const layer = layers[l];\r\n          if (layer.options.baseLayer) {\r\n            baseLayers.push(layer);\r\n          } else {\r\n            orderedLayers.push(layer);\r\n          }\r\n        }\r\n      }\r\n\r\n      orderedLayers = orderedLayers.sort((a, b) => {\r\n        return a.options.order !== undefined && b.options.order !== undefined ? a.options.order - b.options.order : 0;\r\n      });\r\n\r\n      for (let fry = 0; fry < orderedLayers.length; fry++) {\r\n        const nextLayer = orderedLayers[fry + 1];\r\n        const nextLayerId = nextLayer && nextLayer.layer && nextLayer.layer[0];\r\n        const mem = orderedLayers[fry];\r\n        const _layers = this._getLayerIds(mem);\r\n        _layers.forEach((x) => {\r\n          _map.moveLayer(x, nextLayerId);\r\n        });\r\n      }\r\n      const firstRealLayer = orderedLayers.find((x) => Array.isArray(x.layer));\r\n      if (firstRealLayer) {\r\n        const firstLayerId = this._getLayerIds(firstRealLayer)[0];\r\n        // normalize layer ordering\r\n        baseLayers.forEach((x) => {\r\n          if (x.layer) {\r\n            x.layer.forEach((y) => {\r\n              _map.moveLayer(y, firstLayerId);\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private _getLayerIds(mem: TLayerAdapter): string[] {\r\n    let _layers: TLayer = [];\r\n    if (mem) {\r\n      if (Array.isArray(mem.layer)) {\r\n        _layers = mem.layer;\r\n      } else if (mem.getDependLayers) {\r\n        mem.getDependLayers().forEach((x) => {\r\n          x.forEach((y) => {\r\n            _layers.push(y);\r\n          });\r\n        });\r\n      }\r\n    }\r\n    return _layers;\r\n  }\r\n\r\n  private _toggleLayer(layerId: string, status: boolean): void {\r\n    this._onMapLoad().then((_map) => {\r\n      _map.setLayoutProperty(layerId, 'visibility', status ? 'visible' : 'none');\r\n    });\r\n  }\r\n\r\n  private _onMapSourceData(data: mapboxgl.MapSourceDataEvent & EventData) {\r\n    if (data.dataType === 'source') {\r\n      const isLoaded = data.isSourceLoaded;\r\n      const emit = (target: string) => {\r\n        this.emitter.emit('data-loaded', { target });\r\n      };\r\n      this._onDataLoad(data, isLoaded, emit);\r\n    }\r\n  }\r\n\r\n  private _onMapError(data: mapboxgl.ErrorEvent & mapboxgl.MapSourceDataEvent & EventData) {\r\n    if (this._sourceDataLoading[data.sourceId]) {\r\n      const isLoaded = data.isSourceLoaded;\r\n      const emit = (target: string) => {\r\n        this.emitter.emit('data-error', { target });\r\n      };\r\n      this._onDataLoad(data, isLoaded, emit);\r\n    }\r\n  }\r\n\r\n  private _onDataLoad(data: { sourceId: string, tile: any }, isLoaded = false, emit: (sourceId: string) => void) {\r\n    // if all sources is loaded emmit event for all and clean mem\r\n    if (isLoaded) {\r\n      Object.keys(this._sourceDataLoading).forEach((x) => {\r\n        emit(x);\r\n      });\r\n      this._sourceDataLoading = {};\r\n    } else {\r\n      // check if all tiles in layer is loaded\r\n      const tiles = this._sourceDataLoading[data.sourceId];\r\n      if (tiles && data.tile) {\r\n        const index = tiles.indexOf(data.tile);\r\n        if (index !== -1) {\r\n          this._sourceDataLoading[data.sourceId].splice(index, 1);\r\n        }\r\n        // if no more loaded tiles in layer emit event and clean mem only for this layer\r\n        if (!tiles.length) {\r\n          emit(data.sourceId);\r\n          delete this._sourceDataLoading[data.sourceId];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private _addEventsListeners(): void {\r\n    const _map = this.map;\r\n    if (_map) {\r\n      // write mem for start loaded layers\r\n      _map.on('sourcedataloading', (data) => {\r\n        this._sourceDataLoading[data.sourceId] = this._sourceDataLoading[data.sourceId] || [];\r\n        if (data.tile) {\r\n          this._sourceDataLoading[data.sourceId].push(data.tile);\r\n        }\r\n      });\r\n      // emmit data-loaded for each layer or all sources is loaded\r\n      _map.on('sourcedata', this._onMapSourceData.bind(this));\r\n      _map.on('error', this._onMapError.bind(this));\r\n      _map.on('click', (evt) => {\r\n        this.onMapClick(evt);\r\n      });\r\n\r\n      this._universalEvents.forEach((e) => {\r\n        _map.on(e, () => this.emitter.emit(e, this));\r\n      });\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @module mapboxgl-map-adapter\r\n */\r\n\r\nimport { MapboxglMapAdapter } from './MapboxglMapAdapter';\r\n\r\nexport { MapboxglMapAdapter };\r\nexport default MapboxglMapAdapter;\r\n","import { ButtonControlOptions } from '@nextgis/webmap';\r\nimport { createControl } from './createControl';\r\n\r\nexport function createButtonControl(options: ButtonControlOptions) {\r\n  const link = document.createElement('button');\r\n  link.className = 'mapboxgl-ctrl-icon';\r\n\r\n  link.setAttribute('role', 'button');\r\n  if (options.title) {\r\n    link.title = options.title;\r\n    link.setAttribute('aria-label', options.title);\r\n  }\r\n\r\n  if (options.html) {\r\n    if (options.html instanceof HTMLElement) {\r\n      link.appendChild(options.html);\r\n    } else {\r\n      link.innerHTML = options.html;\r\n    }\r\n    const child = link.firstElementChild as HTMLElement;\r\n    child.style.width = '100%';\r\n    child.style.height = '100%';\r\n    child.style.lineHeight = (link.offsetHeight || 30) + 'px';\r\n  }\r\n  if (options.addClass) {\r\n    options.addClass.split(' ').forEach((x) => link.classList.add(x));\r\n  }\r\n\r\n  const onClick = (e: Event) => {\r\n    e.stopPropagation();\r\n    options.onClick();\r\n  };\r\n  if (options.onClick) {\r\n    link.addEventListener('click', onClick);\r\n  }\r\n\r\n  return createControl({\r\n    onAdd() {\r\n      return link;\r\n    },\r\n    onRemove() {\r\n      const parent = link.parentNode;\r\n      if (parent) {\r\n        parent.removeChild(link);\r\n      }\r\n      if (options.onClick) {\r\n        link.removeEventListener('click', onClick);\r\n      }\r\n    }\r\n  }, { bar: true, addClass: 'mapboxgl-ctrl-group' });\r\n}\r\n","export class KeyCodes {\r\n  'backspace' = 8;\r\n  'tab' = 9;\r\n  'enter' = 13;\r\n  'shift' = 16;\r\n  'ctrl' = 17;\r\n  'alt' = 18;\r\n  'pause/break' = 19;\r\n  'caps_lock' = 20;\r\n  'escape' = 27;\r\n  'page_up' = 33;\r\n  'page_down' = 34;\r\n  'end' = 35;\r\n  'home' = 36;\r\n  'left_arrow' = 37;\r\n  'up_arrow' = 38;\r\n  'right_arrow' = 39;\r\n  'down_arrow' = 40;\r\n  'insert' = 45;\r\n  'delete' = 46;\r\n  'left_window_key' = 91;\r\n  'right_window_key' = 92;\r\n  'select_key' = 93;\r\n  'numpad_0' = 96;\r\n  'numpad_1' = 97;\r\n  'numpad_2' = 98;\r\n  'numpad_3' = 99;\r\n  'numpad_4' = 100;\r\n  'numpad_5' = 101;\r\n  'numpad_6' = 102;\r\n  'numpad_7' = 103;\r\n  'numpad_8' = 104;\r\n  'numpad_9' = 105;\r\n  'multiply' = 106;\r\n  'add' = 107;\r\n  'subtract' = 109;\r\n  'decimal_point' = 110;\r\n  'divide' = 111;\r\n  'f1' = 112;\r\n  'f2' = 113;\r\n  'f3' = 114;\r\n  'f4' = 115;\r\n  'f5' = 116;\r\n  'f6' = 117;\r\n  'f7' = 118;\r\n  'f8' = 119;\r\n  'f9' = 120;\r\n  'f10' = 121;\r\n  'f11' = 122;\r\n  'f12' = 123;\r\n  'num_lock' = 144;\r\n  'scroll_lock' = 145;\r\n  'semi-colon' = 186;\r\n  'equal_sign' = 187;\r\n  ',' = 188; // \"comma\";\r\n  '-' = 189; // \"dash\";\r\n  '.' = 190; // \"period\";\r\n  '/' = 191; // \"forward slash\";\r\n  '`' = 192; // \"grave accent\";\r\n  '[' = 219; // \"open bracket\";\r\n  '\\\\' = 220; // \"back slash\";\r\n  ']' = 221; // \"close braket\";\r\n  '\\'' = 222; // \"single quote\"\r\n}\r\n","import {KeyCodes} from './KeysCodes';\r\n\r\n/**\r\n * @param {string} key - key symbol\r\n * @param {string} func - action on key press\r\n * @param {number} [keyCode] - key code for special button like tab\r\n *\r\n * @export\r\n * @interface IKeyControl\r\n */\r\nexport interface IKeyControl {\r\n  key?: string;\r\n  keyCode?: number;\r\n  func: () => void;\r\n}\r\n\r\nexport class Keys {\r\n\r\n  keyCodeAlias = new KeyCodes();\r\n\r\n  keys: {[keyCode: number]: boolean} = {};\r\n\r\n  private _windowOnFocus: () => void;\r\n  private _keysPressed: (e: KeyboardEvent) => void;\r\n  private _keysReleased: (e: KeyboardEvent) => void;\r\n\r\n  constructor() {\r\n    this._windowOnFocus = this.windowOnFocus.bind(this);\r\n    this._keysPressed = this.keysPressed.bind(this);\r\n    this._keysReleased = this.keysReleased.bind(this);\r\n    this.addKeyboardEventsListener();\r\n  }\r\n\r\n  pressed(keyName: keyof KeyCodes): boolean {\r\n    const code = this.keyCodeAlias[keyName];\r\n    return !!code && this.keys[code];\r\n  }\r\n\r\n  addKeyboardEventsListener() {\r\n    window.addEventListener('focus', this._windowOnFocus, false);\r\n    window.addEventListener('keydown', this._keysPressed, false);\r\n    window.addEventListener('keyup', this._keysReleased, false);\r\n  }\r\n\r\n  removeKeyboardEventsListener() {\r\n    window.removeEventListener('focus', this._windowOnFocus, false);\r\n    window.removeEventListener('keydown', this._keysPressed, false);\r\n    window.removeEventListener('keyup', this._keysReleased, false);\r\n  }\r\n\r\n  private keysPressed(e: KeyboardEvent) {\r\n    e.stopPropagation();\r\n    if (!this.keys[e.keyCode]) {\r\n      this.keys[e.keyCode] = true;\r\n    }\r\n  }\r\n\r\n  private keysReleased(e: KeyboardEvent) {\r\n    e.stopPropagation();\r\n    this.keys[e.keyCode] = false;\r\n  }\r\n\r\n  private windowOnFocus() {\r\n    this.keys = {};\r\n  }\r\n}\r\n","import { WebMap } from '../WebMap';\r\nimport { WebMapEvents } from '../interfaces/Events';\r\n\r\nexport function onLoad<E extends WebMapEvents = WebMapEvents>(event: keyof E) {\r\n  return function (target: WebMap, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    const originalMethod = descriptor.value;\r\n\r\n    descriptor.value = function (this: WebMap<any, any, any, E>, ...args: any[]) {\r\n\r\n      return new Promise((resolve, reject) => {\r\n        const _resolve = () => {\r\n          const origin = originalMethod.apply(this, args);\r\n          origin && origin.then ? origin.then(resolve).catch(reject) : resolve(origin);\r\n        };\r\n        const isLoaded = this.getEventStatus(event);\r\n        if (isLoaded) {\r\n          _resolve();\r\n        } else {\r\n          this.emitter.once(event as keyof WebMapEvents, () => {\r\n            _resolve();\r\n          });\r\n        }\r\n      });\r\n    };\r\n    return descriptor;\r\n  };\r\n}\r\n","export function deepmerge(target: any, src: any, mergeArray = false) {\r\n  const array = Array.isArray(src);\r\n  let dst: any = array && [] || {};\r\n\r\n  if (array) {\r\n\r\n    if (mergeArray) {\r\n      target = target || [];\r\n      dst = dst.concat(target);\r\n      src.forEach(function(e: any, i: any) {\r\n        if (typeof dst[i] === 'undefined') {\r\n          dst[i] = e;\r\n        } else if (typeof e === 'object') {\r\n          dst[i] = deepmerge(target[i], e, mergeArray);\r\n        } else {\r\n          if (target.indexOf(e) === -1) {\r\n            dst.push(e);\r\n          }\r\n        }\r\n      });\r\n    } else { // Replace array. Do not merge by default\r\n      dst = src;\r\n    }\r\n\r\n  } else {\r\n    if (target && typeof target === 'object') {\r\n      Object.keys(target).forEach(function(key) {\r\n        dst[key] = target[key];\r\n      });\r\n    }\r\n    Object.keys(src).forEach(function(key) {\r\n      if (typeof src[key] !== 'object' || !src[key]) {\r\n        dst[key] = src[key];\r\n      } else {\r\n        if (!target[key]) {\r\n          dst[key] = src[key];\r\n        } else {\r\n          dst[key] = deepmerge(target[key], src[key], mergeArray);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return dst;\r\n}\r\n","import {\r\n  Paint,\r\n  GeoJsonAdapterLayerPaint,\r\n  GeometryPaint,\r\n  GetPaintFunction,\r\n  GetCustomPaintOptions\r\n} from '../interfaces/LayerAdapter';\r\n\r\nexport function preparePaint(\r\n  paint: Paint,\r\n  defaultPaint: GeometryPaint,\r\n  getPaintFunctions: { [name: string]: GetPaintFunction }): Paint {\r\n\r\n  let newPaint: Paint | undefined;\r\n  if (typeof paint === 'function') {\r\n    return (opt: any) => {\r\n      return preparePaint(paint(opt), defaultPaint, getPaintFunctions) as GeoJsonAdapterLayerPaint;\r\n    };\r\n  } else if (paint.type === 'get-paint') {\r\n    const getPaint = updatePaintOptionFromCallback(paint, getPaintFunctions);\r\n    if (getPaint) {\r\n      newPaint = preparePaint(getPaint, defaultPaint, getPaintFunctions);\r\n    }\r\n  } else if (paint.type === 'icon') {\r\n    return paint;\r\n  } else {\r\n    newPaint = { ...paint };\r\n    newPaint.fill = newPaint.fill !== undefined ? newPaint.fill : true;\r\n    newPaint.stroke = newPaint.stroke !== undefined ?\r\n      newPaint.stroke : !newPaint.fill || !!(newPaint.strokeColor || newPaint.strokeOpacity);\r\n  }\r\n  if (newPaint) {\r\n    if (typeof newPaint === 'function') {\r\n      return newPaint;\r\n    } else {\r\n      newPaint = { ...defaultPaint, ...newPaint };\r\n\r\n    }\r\n  } else {\r\n    newPaint = { ...defaultPaint };\r\n  }\r\n\r\n  if ('color' in newPaint) {\r\n    if (!newPaint.strokeColor) {\r\n      newPaint.strokeColor = newPaint.color;\r\n    }\r\n    if (!newPaint.fillColor) {\r\n      newPaint.fillColor = newPaint.color;\r\n    }\r\n  }\r\n  if ('opacity' in newPaint) {\r\n    if (newPaint.strokeOpacity === undefined) {\r\n      newPaint.strokeOpacity = newPaint.opacity;\r\n    }\r\n    if (newPaint.fillOpacity === undefined) {\r\n      newPaint.fillOpacity = newPaint.opacity;\r\n    }\r\n  }\r\n\r\n  return newPaint;\r\n}\r\n\r\nfunction updatePaintOptionFromCallback(\r\n  paint: GetCustomPaintOptions,\r\n  getPaintFunctions: { [name: string]: GetPaintFunction }): GeoJsonAdapterLayerPaint | undefined {\r\n\r\n  if (typeof paint.from === 'function') {\r\n    return paint.from(paint.options);\r\n  } else if (typeof paint.from === 'string' && getPaintFunctions) {\r\n    const from = getPaintFunctions[paint.from];\r\n    if (from) {\r\n      return from(paint.options);\r\n    }\r\n  }\r\n\r\n}\r\n","import {\r\n  GeoJsonObject,\r\n  GeoJsonGeometryTypes,\r\n  FeatureCollection,\r\n  GeometryCollection,\r\n  Feature\r\n} from 'geojson';\r\n\r\nexport function detectGeometryType(geojson: GeoJsonObject): GeoJsonGeometryTypes {\r\n  let geometry: GeoJsonGeometryTypes;\r\n  if (geojson.type === 'FeatureCollection') {\r\n    const featuresTypes = (geojson as FeatureCollection).features.map((f) => f.geometry.type);\r\n    geometry = findMostFrequentGeomType(featuresTypes);\r\n  } else if (geojson.type === 'GeometryCollection') {\r\n    const geometryTypes = (geojson as GeometryCollection).geometries.map((g) => g.type);\r\n    geometry = findMostFrequentGeomType(geometryTypes);\r\n  } else if (geojson.type === 'Feature') {\r\n    geometry = (geojson as Feature).geometry.type;\r\n  } else {\r\n    geometry = geojson.type;\r\n  }\r\n  return geometry;\r\n}\r\n\r\nexport function findMostFrequentGeomType(arr: GeoJsonGeometryTypes[]): GeoJsonGeometryTypes {\r\n  const counts: { [x: string]: number } = {};\r\n  for (let fry = 0; fry < arr.length; fry++) {\r\n    counts[arr[fry]] = 1 + (counts[arr[fry]] || 0);\r\n  }\r\n  let maxName;\r\n  for (const c in counts) {\r\n    if (counts.hasOwnProperty(c)) {\r\n      const count = maxName !== undefined ? counts[maxName] : 0;\r\n      if (counts[c] > (count || 0)) {\r\n        maxName = c;\r\n      }\r\n    }\r\n  }\r\n  return maxName as GeoJsonGeometryTypes;\r\n}\r\n","import { WebMap } from '../../WebMap';\r\nimport { ButtonControlOptions } from '../../interfaces/MapControl';\r\n\r\nexport function createButtonControl(webMap: WebMap, options: ButtonControlOptions) {\r\n  if (webMap.mapAdapter.createButtonControl) {\r\n    return webMap.mapAdapter.createButtonControl(options);\r\n  }\r\n}\r\n","/**\r\n * @module webmap\r\n */\r\n\r\nimport {\r\n  AdapterOptions,\r\n  DataLayerFilter,\r\n  VectorLayerAdapter,\r\n  LayerAdapters,\r\n  GetPaintFunction,\r\n  GeoJsonAdapterOptions,\r\n  GeoJsonAdapterLayerType,\r\n  AdapterConstructor\r\n} from './interfaces/LayerAdapter';\r\nimport { LayerAdaptersOptions, LayerAdapter, OnLayerClickOptions } from './interfaces/LayerAdapter';\r\nimport { MapAdapter, MapClickEvent, ControlPositions, FitOptions } from './interfaces/MapAdapter';\r\nimport { MapOptions, AppOptions, GetAttributionsOptions } from './interfaces/WebMapApp';\r\nimport { LngLatBoundsArray, Type, Cursor, LngLatArray, LayerDef } from './interfaces/BaseTypes';\r\nimport { RuntimeParams } from './interfaces/RuntimeParams';\r\nimport { StarterKit } from './interfaces/StarterKit';\r\n\r\nimport {\r\n  MapControl,\r\n  MapControls,\r\n  CreateControlOptions,\r\n  ButtonControlOptions,\r\n  ToggleControlOptions,\r\n  ToggleControl\r\n} from './interfaces/MapControl';\r\n\r\nimport { Keys } from './components/keys/Keys';\r\nimport { Feature, GeoJsonObject } from 'geojson';\r\n\r\nimport StrictEventEmitter from 'strict-event-emitter-types';\r\nimport { EventEmitter } from 'events';\r\nimport { WebMapEvents } from './interfaces/Events';\r\n\r\nimport { onLoad } from './util/decorators';\r\nimport { deepmerge } from './util/deepmerge';\r\nimport { preparePaint } from './util/preparePaint';\r\nimport { detectGeometryType, findMostFrequentGeomType } from './util/geometryTypes';\r\n\r\nimport { createButtonControl } from './components/controls/ButtonControl';\r\nimport { createToggleControl } from './components/controls/ToggleControl';\r\n\r\nconst OPTIONS: MapOptions = {\r\n  minZoom: 0,\r\n  maxZoom: 21,\r\n  paint: {\r\n    color: 'blue',\r\n    opacity: 1,\r\n    radius: 8,\r\n    weight: 1\r\n  },\r\n  selectedPaint: {\r\n    color: 'darkblue',\r\n    opacity: 1,\r\n    radius: 12,\r\n    weight: 1\r\n  }\r\n};\r\n\r\nconst typeAlias: { [x: string]: GeoJsonAdapterLayerType } = {\r\n  'Point': 'circle',\r\n  'LineString': 'line',\r\n  'MultiPoint': 'circle',\r\n  'Polygon': 'fill',\r\n  'MultiLineString': 'line',\r\n  'MultiPolygon': 'fill'\r\n};\r\n\r\n/**\r\n * @class WebMap\r\n */\r\nexport class WebMap<M = any, L = any, C = any, E extends WebMapEvents = WebMapEvents> {\r\n\r\n  static keys: Keys = new Keys();\r\n  static utils = {\r\n    detectGeometryType,\r\n    findMostFrequentGeomType\r\n  };\r\n  static getPaintFunctions: { [name: string]: GetPaintFunction };\r\n  static decorators = { onLoad };\r\n\r\n  options: MapOptions = OPTIONS;\r\n  // `WebMapEvents` must be `E` but its not work correct\r\n  // readonly emitter: StrictEventEmitter<EventEmitter, WebMapEvents> = new EventEmitter();\r\n  readonly emitter: StrictEventEmitter<EventEmitter, WebMapEvents> = new EventEmitter();\r\n  readonly keys = WebMap.keys;\r\n  readonly mapAdapter: MapAdapter<M>;\r\n  readonly runtimeParams: RuntimeParams[] = [];\r\n\r\n  getPaintFunctions = WebMap.getPaintFunctions;\r\n\r\n  private readonly _eventsStatus: { [key in keyof E]?: boolean } = {};\r\n\r\n  private _layersIds: number = 1;\r\n  private _extent?: LngLatBoundsArray;\r\n  private readonly _starterKits: StarterKit[];\r\n  private readonly _baseLayers: string[] = [];\r\n  private readonly _layers: { [x: string]: LayerAdapter } = {};\r\n  private readonly _selectedLayers: string[] = [];\r\n\r\n  constructor(appOptions: AppOptions) {\r\n    this.mapAdapter = appOptions.mapAdapter;\r\n    this._starterKits = appOptions.starterKits || [];\r\n    if (appOptions.mapOptions) {\r\n      this.options = deepmerge(OPTIONS || {}, appOptions.mapOptions);\r\n    }\r\n    this._addEventsListeners();\r\n    if (appOptions.create) {\r\n      this.create(this.options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Manual way to create a map. On default\r\n   * @example\r\n   * ```javascript\r\n   * const webMap = new WebMap(options);\r\n   * // options.create === false\r\n   * webMap.create(mapOptions).then(() => doSomething());\r\n   * ```\r\n   */\r\n  async create(options?: MapOptions): Promise<this> {\r\n    if (!this.getEventStatus('create')) {\r\n      this.options = deepmerge(OPTIONS || {}, options);\r\n      await this._setupMap();\r\n      this._emitStatusEvent('create', this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the HTML element that contains the map.\r\n   * @returns The map's container\r\n   */\r\n  getContainer(): HTMLElement | undefined {\r\n    if (this.mapAdapter.getContainer) {\r\n      return this.mapAdapter.getContainer();\r\n    } else if (this.options.target) {\r\n      if (this.options.target instanceof HTMLElement) {\r\n        return this.options.target;\r\n      } else if (typeof this.options.target === 'string') {\r\n        const element = document.getElementById(this.options.target);\r\n        if (element) {\r\n          return element;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the cursor icon to be displayed when hover icon on the map container.\r\n   * @param cursor available cursor name from https://developer.mozilla.org/ru/docs/Web/CSS/cursor\r\n   */\r\n  setCursor(cursor: Cursor) {\r\n    if (this.mapAdapter.setCursor) {\r\n      this.mapAdapter.setCursor(cursor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the center of the current view.\r\n   * @param lngLat Array of two numbers representing longitude and latitude of the center of the map view.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\r\n   * webMap.setCenter([86.925278, 27.988056]);\r\n   * ```\r\n   */\r\n  setCenter(lngLat: LngLatArray): this {\r\n    this.mapAdapter.setCenter(lngLat);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the map's geographical centerpoint.\r\n   * @return lngLat Array of two numbers representing longitude and latitude of the center of the map view.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\r\n   * webMap.getCenter(); // [86.925278, 27.988056]\r\n   * ```\r\n   */\r\n  getCenter(): LngLatArray | undefined {\r\n    return this.mapAdapter.getCenter();\r\n  }\r\n\r\n  /**\r\n   * Zoom to a specific zoom level.\r\n   * @param zoom The zoom level to set (0-24).\r\n   */\r\n  setZoom(zoom: number): this {\r\n    this.mapAdapter.setZoom(zoom);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the map's current zoom level.\r\n   * @return The map's current zoom level (0-24).\r\n   */\r\n  getZoom(): number | undefined {\r\n    return this.mapAdapter.getZoom();\r\n  }\r\n\r\n  /**\r\n   * Sets the view of the map geographical center and zoom\r\n   * @param lngLat Array of two numbers representing longitude and latitude of the center of the map view.\r\n   * @param zoom The zoom level to set (0-24).\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\r\n   * webMap.setView([86.925278, 27.988056], 12)\r\n   * ```\r\n   */\r\n  setView(lngLat?: LngLatArray, zoom?: number) {\r\n    if (this.mapAdapter.setView && lngLat && zoom) {\r\n      this.mapAdapter.setView(lngLat, zoom);\r\n    } else {\r\n      if (lngLat) {\r\n        this.mapAdapter.setCenter(lngLat);\r\n      }\r\n      if (zoom) {\r\n        this.mapAdapter.setZoom(zoom);\r\n      }\r\n    }\r\n  }\r\n\r\n  // [west, south, east, north];\r\n  /**\r\n   * Sets a map view that contains the given geographical bounds.\r\n   * @param bounds Array of coordinates, measured in degrees, in [west, south, east, north] order.\r\n   * @param options\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // Whall world\r\n   * webMap.fitBounds([0, -90, 180, 90]);\r\n   * ```\r\n   */\r\n  fitBounds(bounds: LngLatBoundsArray, options?: FitOptions): this {\r\n    this.mapAdapter.fit(bounds, options);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Try to fit map view by given layer bounds.\r\n   * But not all layers have borders\r\n   * @param layerDef\r\n   */\r\n  async fitLayer(layerDef: LayerDef) {\r\n    const layer = this.getLayer(layerDef);\r\n    if (layer && layer.getExtent) {\r\n      const extent = await layer.getExtent();\r\n      if (extent) {\r\n        this.fitBounds(extent);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if given layer is baselayer\r\n   * @param layerName Check\r\n   */\r\n  isBaseLayer(layerDef: LayerDef): boolean | undefined {\r\n    const layer = this.getLayer(layerDef);\r\n    if (layer && layer.id) {\r\n      return this._baseLayers.indexOf(layer.id) !== -1;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  getLayerAdapters(): { [name: string]: Type<LayerAdapter> } {\r\n    return this.mapAdapter.layerAdapters;\r\n  }\r\n\r\n  getLayerAdapter(name: string): Type<LayerAdapter> {\r\n    return this.mapAdapter.layerAdapters[name];\r\n  }\r\n\r\n  /**\r\n   * Helper method to return added layer object by any definition type.\r\n   */\r\n  getLayer(layerDef: LayerDef): LayerAdapter | undefined {\r\n    if (typeof layerDef === 'string') {\r\n      return this._layers[layerDef];\r\n    }\r\n    return layerDef;\r\n  }\r\n\r\n  /**\r\n   * Helper method to return added layer identificator by any definition type.\r\n   */\r\n  getLayerId(layerDef: LayerDef): string | undefined {\r\n    const layer = this.getLayer(layerDef);\r\n    if (layer && layer.options) {\r\n      return layer.options.id;\r\n    } else {\r\n      throw new Error('No id for layer');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return array of all added layer identificators.\r\n   */\r\n  getLayers(): string[] {\r\n    return Object.keys(this._layers);\r\n  }\r\n\r\n  /**\r\n   * Check if the given layer on the map\r\n   */\r\n  isLayerVisible(layerDef: LayerDef): boolean {\r\n    const layer = this.getLayer(layerDef);\r\n    return layer && layer.options.visibility !== undefined ? layer.options.visibility : false;\r\n  }\r\n\r\n  /**\r\n   * Shortcut method to create base layer\r\n   * @param adapter\r\n   * @param options\r\n   */\r\n  async addBaseLayer<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\r\n    adapter: K | Type<LayerAdapters[K]>,\r\n    options: O | LayerAdaptersOptions[K]): Promise<LayerAdapter> {\r\n\r\n    const layer = await this.addLayer(adapter, {\r\n      ...options,\r\n      baseLayer: true\r\n    });\r\n\r\n    return layer;\r\n  }\r\n\r\n  /**\r\n   * Registration of map layer.\r\n   *\r\n   * @param adapter The name of layer adapter from [MapAdapter.layerAdapters](webmap#MapAdapter.layerAdapters).\r\n   *                May be custom object or class implemented by [BaseLayerAdapter](webmap#BaseLayerAdapter).\r\n   * @param options Specific options for given adapter\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * webMap.addLayer('TILE', options).then((layer) => webMap.showLayer(layer));\r\n   *\r\n   * webMap.addLayer(CustomLayerAdapter, options);\r\n   * ```\r\n   */\r\n  async addLayer<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\r\n    adapter: K | Type<LayerAdapters[K]> | Promise<Type<LayerAdapters[K]> | undefined>,\r\n    options: O | LayerAdaptersOptions[K],\r\n    order?: number): Promise<LayerAdapter> {\r\n\r\n    const _order = order || this._layersIds++;\r\n    let adapterEngine: Type<LayerAdapter> | undefined;\r\n    if (typeof adapter === 'string') {\r\n      adapterEngine = this.getLayerAdapter(adapter);\r\n    } else if (typeof adapter === 'function') {\r\n      adapterEngine = adapter as Type<LayerAdapter>;\r\n    } else if ((adapter as Promise<Type<LayerAdapters[K]> | undefined>).then) {\r\n      adapterEngine = await adapter as Type<LayerAdapters[K]>;\r\n    }\r\n    if (adapterEngine !== undefined) {\r\n      const geoJsonOptions = options as GeoJsonAdapterOptions;\r\n      this._updateGeoJsonOptions(geoJsonOptions);\r\n\r\n      const { maxZoom, minZoom } = this.options;\r\n\r\n      options = {\r\n        id: String(_order),\r\n        order: _order,\r\n        maxZoom,\r\n        minZoom,\r\n        ...options\r\n      };\r\n      // options.visibility is a layer global state, but each layer on init is not visible\r\n      const visibility = options.visibility;\r\n      options.visibility = false;\r\n\r\n      if (options.baseLayer) {\r\n        options.order = 0;\r\n      }\r\n\r\n      const _adapter = new adapterEngine(this.mapAdapter.map, options);\r\n      let layerId = _adapter.options.id;\r\n      if (layerId) {\r\n        this._layers[layerId] = _adapter;\r\n      }\r\n      this.emitter.emit('layer:preadd', _adapter);\r\n      await this.onMapLoad();\r\n      const layer = await _adapter.addLayer(options);\r\n\r\n      // checking that the original layer was inserted into the adapter anyway\r\n      _adapter.layer = layer;\r\n      // think about how to move `id` to the adapter's constructor,\r\n      // but that it is not required in the options\r\n      _adapter.id = _adapter.options.id;\r\n\r\n      layerId = _adapter.options.id;\r\n      if (layerId) {\r\n        if (geoJsonOptions.filter) {\r\n          this.filterLayer(_adapter, geoJsonOptions.filter);\r\n        }\r\n        if (options.baseLayer) {\r\n          this._baseLayers.push(layerId);\r\n        }\r\n        this._layers[layerId] = _adapter;\r\n\r\n        if (visibility) {\r\n          this.showLayer(layerId);\r\n        }\r\n      }\r\n      if (options.fit && _adapter.getExtent) {\r\n        const extent = await _adapter.getExtent();\r\n        if (extent) {\r\n          this.fitBounds(extent);\r\n        }\r\n      }\r\n      this.emitter.emit('layer:add', _adapter);\r\n      return _adapter;\r\n\r\n    }\r\n    return Promise.reject('No adapter');\r\n  }\r\n\r\n  async addLayerFromAsyncAdapter<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\r\n    adapter: AdapterConstructor,\r\n    options: O | LayerAdaptersOptions[K],\r\n    order?: number\r\n  ): Promise<LayerAdapter> {\r\n    const _order = order || this._layersIds++;\r\n    const adapterConstructor = adapter as AdapterConstructor;\r\n    const adapterConstructorPromise = adapterConstructor();\r\n    const adapterEngine = await adapterConstructorPromise;\r\n    if (adapterEngine) {\r\n      return this.addLayer(adapterEngine, options, _order);\r\n    }\r\n    return Promise.reject('No adapter');\r\n  }\r\n\r\n  /**\r\n   * Remove all layer from map and memory.\r\n   */\r\n  removeLayers(allowCb?: (layer: string, adapter: LayerAdapter) => boolean) {\r\n    for (const l in this._layers) {\r\n      if (this._layers.hasOwnProperty(l)) {\r\n        let allow = true;\r\n        if (allowCb) {\r\n          allow = allowCb(l, this._layers[l]);\r\n        }\r\n        if (allow) {\r\n          this.removeLayer(l);\r\n          delete this._layers[l];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove all layers but not remove basemap.\r\n   */\r\n  removeOverlays() {\r\n    this.removeLayers((layerId, layer) => !layer.options.baseLayer);\r\n  }\r\n\r\n  /**\r\n   * Remove specific layer from map and memory by its definition.\r\n   * @param layerDef\r\n   */\r\n  removeLayer(layerDef: LayerDef) {\r\n    const layer = this.getLayer(layerDef);\r\n    const layerId = layer && this.getLayerId(layer);\r\n    if (layer && layerId) {\r\n      this.emitter.emit('layer:preremove', layer);\r\n      if (layer.beforeRemove) {\r\n        layer.beforeRemove();\r\n      }\r\n      if (layer.beforeRemove) {\r\n        layer.beforeRemove();\r\n      }\r\n      if (layer.removeLayer) {\r\n        layer.removeLayer();\r\n      } else {\r\n        this.mapAdapter.removeLayer(layer.layer);\r\n      }\r\n      if (layer.options && layer.options.baseLayer) {\r\n        const index = this._baseLayers.indexOf(layerId);\r\n        if (index) {\r\n          this._baseLayers.splice(index, 1);\r\n        }\r\n      }\r\n      delete this._layers[layerId];\r\n      this.emitter.emit('layer:remove', layer);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create layer from GeoJson data. Set style and behavior for selection.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // Add simple layer\r\n   * ngwMap.addGeoJsonLayer({ data: geojson, paint: { color: 'red' } });\r\n   *\r\n   * // Add styled by feature property layer with selection behavior\r\n   * ngwMap.addGeoJsonLayer({\r\n   *   data: geojson,\r\n   *   paint: function (feature) {\r\n   *     return { color: feature.properties.color, opacity: 0.5 }\r\n   *   },\r\n   *  selectedPaint: function (feature) {\r\n   *    return { color: feature.properties.selcolor, opacity: 1 }\r\n   *  },\r\n   *  selectable: true,\r\n   *  multiselect: true\r\n   * });\r\n   *\r\n   * // Add marker layer styled with use [Icons](icons)\r\n   * ngwMap.addGeoJsonLayer({ data: geojson, paint: NgwMap.getIcon({ color: 'orange' })});\r\n   *\r\n   * // work with added layer\r\n   * const layer = ngwMap.addGeoJsonLayer({ data: geojson, id: 'my_layer_name'});\r\n   * // access layer by id\r\n   * ngwMap.showLayer('my_layer_name');\r\n   * // or access layer by instance\r\n   * ngwMap.showLayer(layer);\r\n   * ```\r\n   */\r\n  // @onMapLoad()\r\n  async addGeoJsonLayer<K extends keyof LayerAdaptersOptions>(\r\n    opt: GeoJsonAdapterOptions,\r\n    adapter?: K | Type<LayerAdapter>) {\r\n\r\n    opt = opt || {};\r\n    opt.multiselect = opt.multiselect !== undefined ? opt.multiselect : false;\r\n    opt.unselectOnSecondClick = opt.unselectOnSecondClick !== undefined ? opt.unselectOnSecondClick : true;\r\n    if (!adapter) {\r\n      opt = this._updateGeojsonAdapterOptions(opt);\r\n    }\r\n    opt.paint = opt.paint || {};\r\n    const layer = await this.addLayer(adapter || 'GEOJSON', opt);\r\n    this.showLayer(layer);\r\n    return layer;\r\n  }\r\n\r\n  _updateGeojsonAdapterOptions(opt: GeoJsonAdapterOptions): GeoJsonAdapterOptions {\r\n    if (opt.data) {\r\n      const geomType = typeAlias[detectGeometryType(opt.data)];\r\n      const p = opt.paint;\r\n      if (typeof p === 'object') {\r\n        // define parameter if not specified\r\n        p.type = p.type ? p.type :\r\n          (geomType === 'fill' || geomType === 'line') ?\r\n            'path' :\r\n            ('html' in p || 'className' in p) ?\r\n              'icon' :\r\n              geomType;\r\n      }\r\n      opt.type = geomType;\r\n    }\r\n    return opt;\r\n  }\r\n\r\n  /**\r\n   * Show added layer on the map by it definition.\r\n   */\r\n  showLayer(layerDef: LayerDef) {\r\n    this.toggleLayer(layerDef, true);\r\n  }\r\n\r\n  /**\r\n   * Hide added layer on the map by it definition.\r\n   */\r\n  hideLayer(layerDef: LayerDef) {\r\n    this.toggleLayer(layerDef, false);\r\n  }\r\n\r\n  /**\r\n   * Change added layer visibility on the map by given status or inverse current status.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * webMap.addLayer('TILE', {id: 'my_layer', url: ''}).then((layer) => {\r\n   *   webMap.toggleLayer(layer, true);\r\n   *   webMap.toggleLayer('my_layer', false);\r\n   *   webMap.toggleLayer('my_layer');\r\n   *   webMap.isLayerVisible(layer); // true\r\n   * });\r\n   * ```\r\n   */\r\n  toggleLayer(layerDef: LayerDef, status?: boolean) {\r\n    const layer = this.getLayer(layerDef);\r\n    const onMap = layer && layer.options.visibility;\r\n    const toStatus = status !== undefined ? status : !onMap;\r\n\r\n    const action = (source: any, l: LayerAdapter) => {\r\n      l.options.visibility = toStatus;\r\n\r\n      const preEventName = toStatus ? 'layer:preshow' : 'layer:prehide';\r\n      const eventName = toStatus ? 'layer:show' : 'layer:hide';\r\n\r\n      this.emitter.emit(preEventName, l);\r\n      if (toStatus && source) {\r\n        const order = l.options.baseLayer ? 0 : l.options.order;\r\n        if (l.showLayer) {\r\n          l.showLayer.call(l, l.layer);\r\n        } else {\r\n          this.mapAdapter.showLayer(l.layer);\r\n        }\r\n        if (order !== undefined) {\r\n          this.mapAdapter.setLayerOrder(l.layer, order, this._layers);\r\n        }\r\n      } else {\r\n        if (l.hideLayer) {\r\n          l.hideLayer.call(l, l.layer);\r\n        } else {\r\n          this.mapAdapter.hideLayer(l.layer);\r\n        }\r\n      }\r\n      this.emitter.emit(eventName, l);\r\n    };\r\n    if (layer && layer.options.visibility !== toStatus) {\r\n      if (this.mapAdapter.map) {\r\n        action(this.mapAdapter, layer);\r\n      } else {\r\n        this.mapAdapter.emitter.once('create', (data) => {\r\n          action(data.map, layer);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set transparency for a given layer by number from 0 to 1\r\n   */\r\n  setLayerOpacity(layerDef: LayerDef, value: number) {\r\n    const layer = this.getLayer(layerDef);\r\n    if (layer) {\r\n      if (this.mapAdapter.setLayerOpacity) {\r\n        if (layer) {\r\n          this.mapAdapter.setLayerOpacity(layer.layer, value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // requestGeomString(pixel: Pixel, pixelRadius: number) {\r\n  //   if (this.mapAdapter.requestGeomString) {\r\n  //     return this.mapAdapter.requestGeomString(pixel, pixelRadius);\r\n  //   }\r\n  // }\r\n\r\n  /**\r\n   * Mark the layer as selected.\r\n   * If the adapter is a vector layer and supports data selection,\r\n   * you can pass a callback function to specify which data will be selected.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\r\n   *   webMap.selectLayer(layer, ({feature}) => feature.id === '42');\r\n   * });\r\n   * ```\r\n   * @param layerDef\r\n   * @param findFeatureFun\r\n   */\r\n  selectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\r\n    const layer = this.getLayer(layerDef);\r\n    if (layer) {\r\n      const adapter = layer as VectorLayerAdapter;\r\n      if (adapter && adapter.select) {\r\n        adapter.select(findFeatureFun);\r\n      }\r\n      const layerId = this.getLayerId(layer);\r\n      if (layerId) {\r\n        this._selectedLayers.push(layerId);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unselect the given layer.\r\n   * If the adapter is a vector layer and supports data selection,\r\n   * you can pass a callback function to specify which data will be unselected.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\r\n   *   webMap.unSelectLayer(layer, ({feature}) => feature.id === '42');\r\n   * });\r\n   * ```\r\n   *\r\n   * @param layerDef\r\n   * @param findFeatureFun\r\n   */\r\n  unSelectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\r\n    const layer = this.getLayer(layerDef);\r\n    if (layer) {\r\n      const adapter = layer && layer as VectorLayerAdapter;\r\n      if (adapter.unselect) {\r\n        adapter.unselect(findFeatureFun);\r\n      }\r\n      const layerId = this.getLayerId(layer);\r\n      if (layerId) {\r\n        const index = this._selectedLayers.indexOf(layerId);\r\n        if (index !== -1) {\r\n          this._selectedLayers.splice(index, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide features from a vector layer using a callback function.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\r\n   *   webMap.filterLayer(layer, ({feature}) => feature.id === '42');\r\n   * });\r\n   * ```\r\n   *\r\n   * @param layerDef\r\n   * @param filter\r\n   */\r\n  filterLayer(layerDef: LayerDef, filter: DataLayerFilter<Feature, L>) {\r\n    const layer = this.getLayer(layerDef);\r\n    const adapter = layer as VectorLayerAdapter;\r\n    if (adapter.filter) {\r\n      adapter.filter(filter);\r\n    }\r\n  }\r\n\r\n  removeLayerFilter(layerDef: LayerDef) {\r\n    const layer = this.getLayer(layerDef);\r\n    const adapter = layer as VectorLayerAdapter;\r\n    if (adapter.removeFilter) {\r\n      adapter.removeFilter();\r\n    } else if (adapter.filter) {\r\n      adapter.filter(function () { return true; });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the GeoJSON data for given vector layer.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const layer = webMap.addLayer('GEOJSON').then((layer) => {\r\n   *   webMap.setLayerData(layer, geojson);\r\n   * });\r\n   * ```\r\n   */\r\n  setLayerData(layerDef: LayerDef, data: GeoJsonObject) {\r\n    const layerMem = this.getLayer(layerDef);\r\n    const adapter = layerMem as VectorLayerAdapter;\r\n    if (adapter.setData) {\r\n      adapter.setData(data);\r\n    } else if (adapter.clearLayer && adapter.addData) {\r\n      adapter.clearLayer();\r\n      adapter.addData(data);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Push new the GeoJSON features into given vector layer.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson_features_5}).then((layer) => {\r\n   *   console.log(layer.getLayers().length) // > 5;\r\n   *   webMap.addLayerData(layer, geojson_features_3);\r\n   *   console.log(layer.getLayers().length) // > 8;\r\n   * });\r\n   * ```\r\n   */\r\n  addLayerData(layerDef: LayerDef, data: GeoJsonObject) {\r\n    const layerMem = this.getLayer(layerDef);\r\n    const adapter = layerMem as VectorLayerAdapter;\r\n    if (adapter.addData) {\r\n      adapter.addData(data);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove from vector layer all features.\r\n   * it is possible to remove only some objects if you specify a callback function.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\r\n   *   webMap.clearLayerData(layer, (feture) => feture.id === 42);\r\n   *   webMap.clearLayerData(layer);\r\n   * });\r\n   * ```\r\n   */\r\n  clearLayerData(layerDef: LayerDef, cb?: (feature: Feature) => boolean) {\r\n    const layerMem = this.getLayer(layerDef);\r\n    const adapter = layerMem as VectorLayerAdapter;\r\n    if (adapter.clearLayer) {\r\n      adapter.clearLayer(cb);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creating a universal map layout control element. Can be used with any map adapter.\r\n   *\r\n   * @example\r\n   * const control = webMap.createControl({\r\n   *   onAdd() {\r\n   *     return document.createElement('div');\r\n   *   }\r\n   * });\r\n   */\r\n  @onLoad('build-map')\r\n  createControl(control: MapControl, options?: CreateControlOptions): C | undefined {\r\n    if (this.mapAdapter.createControl) {\r\n      return this.mapAdapter.createControl(control, options);\r\n    }\r\n  }\r\n\r\n  @onLoad('build-map')\r\n  createButtonControl(options: ButtonControlOptions): C | undefined {\r\n    return createButtonControl(this, options);\r\n  }\r\n\r\n  @onLoad('build-map')\r\n  createToggleControl(options: ToggleControlOptions): (C & ToggleControl) | undefined {\r\n    if (this.mapAdapter.createToggleControl) {\r\n      return this.mapAdapter.createToggleControl(options);\r\n    } else {\r\n      return createToggleControl<C>(this, options);\r\n    }\r\n  }\r\n\r\n  removeControl(control: any) {\r\n    if (control.remove) {\r\n      control.remove();\r\n    } else if (this.mapAdapter.removeControl) {\r\n      this.mapAdapter.removeControl(control);\r\n    }\r\n  }\r\n\r\n  getControl<K extends keyof MapControls>(control: K, options?: MapControls[K]): C | undefined {\r\n    const engine = this.mapAdapter.controlAdapters[control];\r\n    if (engine) {\r\n      return new engine(options);\r\n    }\r\n  }\r\n\r\n  async addControl<K extends keyof MapControls>(\r\n    controlDef: K | C,\r\n    position: ControlPositions,\r\n    options?: MapControls[K]) {\r\n\r\n    let control: C | undefined;\r\n    if (typeof controlDef === 'string') {\r\n      control = this.getControl(controlDef, options);\r\n    } else {\r\n      control = controlDef as C;\r\n    }\r\n    if (control) {\r\n      const _control = await control;\r\n      return this.mapAdapter.addControl(_control, position);\r\n    }\r\n  }\r\n\r\n  getAttributions(options: GetAttributionsOptions): string[] {\r\n    const attributions: string[] = [];\r\n    for (const l in this._layers) {\r\n      if (this._layers.hasOwnProperty(l)) {\r\n        const layerMem = this._layers[l];\r\n        const onlyVisible = options.onlyVisible !== undefined ? options.onlyVisible : true;\r\n        const useLayerAttr = onlyVisible ? layerMem.options.visibility : true;\r\n        if (useLayerAttr) {\r\n          const attr = layerMem.options && layerMem.options.attribution;\r\n          if (attr) {\r\n            attributions.push(attr);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return attributions;\r\n  }\r\n\r\n  getEventStatus(eventName: keyof E): boolean {\r\n    // ugly hack to disable type checking error\r\n    const _eventName = eventName as keyof WebMapEvents;\r\n    const status = this._eventsStatus[_eventName];\r\n    return status !== undefined ? status : false;\r\n  }\r\n\r\n  onMapClick(evt: MapClickEvent) {\r\n    this.emitter.emit('click', evt);\r\n  }\r\n\r\n  onLoad(event: keyof WebMapEvents = 'create'): Promise<this> {\r\n    return new Promise((res) => {\r\n      if (this.getEventStatus(event)) {\r\n        res(this);\r\n      } else {\r\n        this.emitter.once(event, () => {\r\n          res(this);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  protected _emitStatusEvent(eventName: keyof E, data?: any) {\r\n    // ugly hack to disable type checking error\r\n    const _eventName = eventName as keyof WebMapEvents;\r\n    this._eventsStatus[_eventName] = true;\r\n    this.emitter.emit(_eventName, data);\r\n  }\r\n\r\n  protected onMapLoad(cb?: (mapAdapter: MapAdapter) => void): Promise<MapAdapter> {\r\n    return new Promise((res) => {\r\n      const _resolve = () => {\r\n        const mapAdapter = this.mapAdapter;\r\n        if (cb) {\r\n          cb(mapAdapter);\r\n        }\r\n        if (mapAdapter) {\r\n          res(mapAdapter);\r\n        }\r\n      };\r\n      const isLoaded = this.mapAdapter.isLoaded !== undefined ? this.mapAdapter.isLoaded : true;\r\n      if (this.mapAdapter.map && isLoaded) {\r\n        _resolve();\r\n      } else {\r\n        this.mapAdapter.emitter.once('create', () => {\r\n          _resolve();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private async _setupMap() {\r\n\r\n    await this.mapAdapter.create(this.options);\r\n    this._zoomToInitialExtent();\r\n\r\n    await this._addLayerProviders();\r\n    await this._onLoadSync();\r\n\r\n    this._emitStatusEvent('build-map', this.mapAdapter);\r\n    return this;\r\n  }\r\n\r\n  private _zoomToInitialExtent() {\r\n    if (this._extent) {\r\n      this.mapAdapter.fit(this._extent);\r\n    } else if (this.options.bounds) {\r\n      this.fitBounds(this.options.bounds);\r\n    } else {\r\n      const { center, zoom } = this.options;\r\n      this.setView(center, zoom);\r\n    }\r\n  }\r\n\r\n  private async _addLayerProviders() {\r\n    try {\r\n      for await (const kit of this._starterKits) {\r\n        if (kit.getLayerAdapters) {\r\n          const adapters = await kit.getLayerAdapters.call(kit);\r\n          if (adapters) {\r\n            for await (const adapter of adapters) {\r\n              const newAdapter = await adapter.createAdapter(this);\r\n              if (newAdapter) {\r\n                this.mapAdapter.layerAdapters[adapter.name] = newAdapter;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (er) {\r\n      throw new Error(er);\r\n    }\r\n  }\r\n\r\n  private async _onLoadSync() {\r\n    for await (const kit of this._starterKits) {\r\n      if (kit.onLoadSync) {\r\n        try {\r\n          await kit.onLoadSync.call(kit, this);\r\n        } catch (er) {\r\n          console.error(er);\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  private _updateGeoJsonOptions(options: GeoJsonAdapterOptions) {\r\n    const onLayerClickFromOpt = options.onLayerClick;\r\n    options.onLayerClick = (e) => {\r\n      if (onLayerClickFromOpt) {\r\n        onLayerClickFromOpt(e);\r\n      }\r\n      return this._onLayerClick(e);\r\n    };\r\n    if (options.paint && this.options.paint) {\r\n      options.paint = preparePaint(options.paint, this.options.paint, this.getPaintFunctions);\r\n    }\r\n    if (options.selectedPaint && this.options.selectedPaint) {\r\n      options.selectedPaint = preparePaint(\r\n        options.selectedPaint, this.options.selectedPaint, this.getPaintFunctions\r\n      );\r\n    }\r\n  }\r\n\r\n  private async _onLayerClick(options: OnLayerClickOptions) {\r\n    this.emitter.emit('layer:click', options);\r\n    return Promise.resolve(options);\r\n  }\r\n\r\n  private _addEventsListeners() {\r\n    // propagate map click event\r\n    const events: Array<keyof WebMapEvents> = [\r\n      'click',\r\n      'zoomstart',\r\n      'zoom',\r\n      'zoomend',\r\n      'movestart',\r\n      'move',\r\n      'moveend'\r\n    ];\r\n\r\n    events.forEach((x) => {\r\n      this.mapAdapter.emitter.on(x, (data) => {\r\n        this.emitter.emit(x, data);\r\n      });\r\n    });\r\n    this.onMapLoad().then(() => {\r\n      // universal events\r\n\r\n    });\r\n  }\r\n\r\n}\r\n","/**\r\n * @module webmap\r\n * @preferred\r\n */\r\n\r\nimport { WebMap } from './WebMap';\r\n\r\nexport * from './WebMap';\r\nexport * from './interfaces/BaseTypes';\r\nexport * from './interfaces/WebMapApp';\r\nexport * from './interfaces/MapAdapter';\r\nexport * from './interfaces/DialogAdapter';\r\nexport * from './interfaces/MapControl';\r\nexport * from './interfaces/LayerAdapter';\r\nexport * from './interfaces/StarterKit';\r\nexport * from './interfaces/RuntimeParams';\r\nexport * from './interfaces/Events';\r\n\r\nexport { WebMap };\r\nexport default WebMap;\r\n","import { WebMap } from '../../WebMap';\r\nimport { ToggleControlOptions, ToggleControl } from '../../interfaces/MapControl';\r\nimport { createButtonControl } from './ButtonControl';\r\n\r\nexport function createToggleControl<C = any>(webMap: WebMap, options: ToggleControlOptions): (C & ToggleControl) {\r\n\r\n  const link = document.createElement('div');\r\n\r\n  let status = false;\r\n  if (options.getStatus) {\r\n    status = options.getStatus();\r\n  } else if (options.status) {\r\n    status = options.status;\r\n  }\r\n\r\n  const title = options.title || '';\r\n  const html = options.html;\r\n\r\n  function setTitle() {\r\n    if (title) {\r\n      if (typeof title === 'string') {\r\n        link.title = title;\r\n      } else {\r\n        link.title = status ? title.on : title.off;\r\n      }\r\n      link.setAttribute('aria-label', link.title);\r\n    }\r\n  }\r\n  setTitle();\r\n\r\n  // DomEvent.disableClickPropagation(link);\r\n  // DomEvent.on(link, 'click', DomEvent.stop);\r\n\r\n  function _setHtml(htmlDef: string | HTMLElement) {\r\n    if (htmlDef instanceof HTMLElement) {\r\n      link.innerHTML = '';\r\n      link.appendChild(htmlDef);\r\n    } else if (typeof htmlDef === 'string') {\r\n      link.innerHTML = htmlDef;\r\n    }\r\n  }\r\n  function setHtml() {\r\n    if (html) {\r\n      if (typeof html === 'string' || html instanceof HTMLElement) {\r\n        _setHtml(html);\r\n      } else {\r\n        _setHtml(status ? html.on : html.off);\r\n      }\r\n      link.setAttribute('aria-label', link.title);\r\n    }\r\n  }\r\n  setHtml();\r\n\r\n  function _setClass(addClass: string, impact: boolean) {\r\n    addClass.split(' ').forEach((x) => {\r\n      if (impact) {\r\n        link.classList.add(x);\r\n      } else {\r\n        link.classList.remove(x);\r\n      }\r\n    });\r\n  }\r\n\r\n  function setClass() {\r\n    if (options.addClassOn) {\r\n      _setClass(options.addClassOn, status);\r\n    }\r\n    if (options.addClassOff) {\r\n      _setClass(options.addClassOff, !status);\r\n    }\r\n  }\r\n\r\n  if (options.addClass) {\r\n    _setClass(options.addClass, true);\r\n  }\r\n  setClass();\r\n\r\n  const onClick = (_status?: boolean) => {\r\n    status = _status !== undefined ? _status : !status;\r\n    setHtml();\r\n    setTitle();\r\n    setClass();\r\n    options.onClick(status);\r\n  };\r\n\r\n  const buttonControl = createButtonControl(webMap, {\r\n    html: link,\r\n    onClick\r\n  });\r\n  buttonControl.onClick = onClick;\r\n  return buttonControl;\r\n}\r\n","import { WebMap, BaseLayerAdapter, LayerAdaptersOptions, Type } from '@nextgis/webmap';\r\nimport { QmsAdapterOptions, Geoservice, QmsLayerType } from './interfaces';\r\n\r\nconst alias: { [key in QmsLayerType]: keyof LayerAdaptersOptions } = {\r\n  tms: 'TILE',\r\n};\r\n\r\nexport function createQmsAdapter(webMap: WebMap, url: string): Type<BaseLayerAdapter> {\r\n\r\n  class QmsAdapter implements BaseLayerAdapter {\r\n    constructor(public map: any, public options: QmsAdapterOptions) {\r\n      this.options = options;\r\n    }\r\n\r\n    async addLayer(options: QmsAdapterOptions) {\r\n\r\n      // qmsId for request, id for store\r\n      const service = await loadJSON<Geoservice>(url + '/api/v1/geoservices/' + options.qmsId);\r\n      if (service) {\r\n        const type = alias[service.type];\r\n        const webMapAdapter = webMap.mapAdapter.layerAdapters[type];\r\n        if (webMapAdapter) {\r\n          if (type === 'TILE') {\r\n            const protocol = (location.protocol === 'https:' ? 'https' : 'http') + '://';\r\n            const serviceUrl = service.url.replace(/^(https?|ftp):\\/\\//, protocol);\r\n\r\n            options.url = serviceUrl;\r\n            options.name = service.name;\r\n            options.attribution = service.copyright_text;\r\n\r\n            options.maxZoom = webMap.options.maxZoom;\r\n            options.minZoom = webMap.options.minZoom;\r\n            this.options = { ...this.options, ...options, baseLayer: true };\r\n            const adapter = new webMapAdapter(this.map, options);\r\n            return adapter.addLayer(options);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return QmsAdapter;\r\n}\r\n\r\nexport function loadJSON<T = any>(url: string): Promise<T> {\r\n  return new Promise<T>((resolve, reject) => {\r\n    const xmlHttp = new XMLHttpRequest();\r\n    xmlHttp.onreadystatechange = () => {\r\n      if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {\r\n        if (xmlHttp.responseText) {\r\n          try {\r\n            resolve(JSON.parse(xmlHttp.responseText));\r\n          } catch (er) {\r\n            reject(er);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    xmlHttp.open('GET', fixUrlStr(url), true); // true for asynchronous\r\n    xmlHttp.send();\r\n  });\r\n}\r\n\r\nexport function fixUrlStr(url: string): string {\r\n  // remove double slash\r\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\r\n}\r\n","/**\r\n * @module qms-kit\r\n */\r\n\r\nimport { QmsKit } from './QmsKit';\r\n\r\nexport * from './interfaces';\r\n\r\nexport { QmsKit };\r\nexport default QmsKit;\r\n","/**\r\n * @module qms-kit\r\n */\r\n\r\nimport WebMap, { StarterKit, Type, BaseLayerAdapter } from '@nextgis/webmap';\r\nimport { QmsOptions } from './interfaces';\r\nimport { createQmsAdapter } from './utility';\r\n\r\nexport class QmsKit implements StarterKit {\r\n\r\n  options: QmsOptions = {\r\n    url: 'https://qms.nextgis.com',\r\n  };\r\n\r\n  url: string;\r\n\r\n  constructor(options?: QmsOptions) {\r\n    this.options = { ...this.options, ...options };\r\n    this.url = this.options.url;\r\n  }\r\n\r\n  getLayerAdapters() {\r\n    return Promise.resolve([{\r\n      name: 'QMS',\r\n      createAdapter: (webmap: WebMap) => Promise.resolve(this._createAdapter(webmap)),\r\n    }]);\r\n  }\r\n\r\n  // async getQmsServices() {\r\n  //   return loadJSON<GeoserviceInList[]>(this.url + '/api/v1/geoservices/');\r\n  // }\r\n\r\n  private _createAdapter(webMap: WebMap): Type<BaseLayerAdapter> {\r\n    return createQmsAdapter(webMap, this.url);\r\n  }\r\n}\r\n","import { NgwLayerOptions } from './interfaces';\r\nimport WebMap, { VectorLayerAdapter, Type, GeoJsonAdapterOptions } from '@nextgis/webmap';\r\nimport NgwConnector from '@nextgis/ngw-connector';\r\nimport { GeoJsonObject } from 'geojson';\r\nimport { toWgs84 } from './utils';\r\n\r\nexport async function createGeoJsonAdapter(\r\n  options: NgwLayerOptions,\r\n  webMap: WebMap,\r\n  connector: NgwConnector) {\r\n\r\n  const adapter = webMap.mapAdapter.layerAdapters.GEOJSON as Type<VectorLayerAdapter>;\r\n\r\n  const geoJsonAdapterCb = connector.makeQuery('/api/resource/{id}/geojson', {\r\n    id: options.resourceId\r\n  });\r\n\r\n  const onLoad = (data: GeoJsonObject) => {\r\n    data = toWgs84(data);\r\n    const geoJsonOptions: GeoJsonAdapterOptions = {\r\n      data,\r\n    };\r\n    if (options.id) {\r\n      geoJsonOptions.id = options.id;\r\n    }\r\n    return webMap._updateGeojsonAdapterOptions(geoJsonOptions);\r\n  };\r\n  return class Adapter extends adapter {\r\n    async addLayer(_opt: any) {\r\n      const data = await geoJsonAdapterCb;\r\n      const opt = onLoad(data);\r\n      return super.addLayer({ ..._opt, ...opt });\r\n    }\r\n    beforeRemove() {\r\n      geoJsonAdapterCb.cancel();\r\n    }\r\n  };\r\n}\r\n","export type SelfFilter<X extends any> = (x: X) => boolean;\r\nexport type RelationFunction<X extends any> = (x: X) => X | X[] | undefined;\r\n\r\nexport function filterIn<F extends any = any>(\r\n  item: F | F[],\r\n  filterFunc: SelfFilter<F> = (x: F) => !!x,\r\n  relationFunc: RelationFunction<F>,\r\n  _filtered: F[] = []): F[] {\r\n\r\n  let children: F[] = [];\r\n  if (Array.isArray(item)) {\r\n    children = item;\r\n  } else {\r\n    const filter = filterFunc(item);\r\n    if (filter) {\r\n      _filtered.push(item);\r\n    }\r\n    const relChild = relationFunc(item);\r\n    if (relChild) {\r\n      if (Array.isArray(relChild)) {\r\n        children = relChild;\r\n      } else {\r\n        children.push(relChild);\r\n      }\r\n    }\r\n  }\r\n\r\n  for (let fry = 0; fry < children.length; fry++) {\r\n    if (children[fry]) {\r\n      filterIn(children[fry], filterFunc, relationFunc, _filtered);\r\n    }\r\n  }\r\n\r\n  return _filtered;\r\n}\r\n","/**\r\n * @module item\r\n */\r\n\r\nimport { Item } from './Item';\r\nimport { filterIn } from './TreeUtil';\r\n\r\nexport class TreeHelper {\r\n\r\n  item: Item;\r\n\r\n  private _children: Item[] = [];\r\n  private _parent?: Item;\r\n\r\n  constructor(item: Item) {\r\n    this.item = item;\r\n  }\r\n\r\n  // region Parents\r\n  setParent(parent: Item) {\r\n    this._parent = parent;\r\n  }\r\n\r\n  addChild(child: Item) {\r\n    this._children.push(child);\r\n  }\r\n\r\n  getParent(): Item | undefined {\r\n    return this._parent;\r\n  }\r\n\r\n  getParents(filterFunc?: (item: Item) => boolean): Item[] {\r\n    const parent = this.getParent();\r\n    if (parent) {\r\n      return filterIn(parent, filterFunc, (x: Item) => x.tree.getParent());\r\n    }\r\n    return [];\r\n  }\r\n  // endregion\r\n\r\n  // region Child\r\n  find(filterFunc?: (item: Item) => boolean) {\r\n    return filterIn(this._children, filterFunc, (x) => {\r\n      return x.tree.getChildren();\r\n    })[0];\r\n  }\r\n\r\n  // getDescendants shortcut\r\n  all(filterFunc?: (item: Item) => boolean): any[] {\r\n    return this.getDescendants(filterFunc);\r\n  }\r\n\r\n  getDescendants(filterFunc?: (item: Item) => boolean): any[] {\r\n    return filterIn(this._children, filterFunc, (x) => {\r\n      return x.tree.getChildren();\r\n    });\r\n  }\r\n\r\n  getChildren(): Item[] {\r\n    return this._children;\r\n  }\r\n}\r\n","import { Item } from '../Item';\r\nimport { ItemBasePropertyOptions } from '../interfaces';\r\n\r\nlet events;\r\ntry {\r\n  events = require('events');\r\n} catch (er) {\r\n  // ignore\r\n}\r\n// tslint:disable-next-line:variable-name\r\nconst EventEmitter = events && events.EventEmitter;\r\n\r\n// import StrictEventEmitter from 'strict-event-emitter-types/types/src';\r\n\r\n// export interface BasePropertyEvents<V, O> {\r\n//   'change': {value: V, options: O};\r\n//   'change-tree': {value: V, options: O, item: Item};\r\n// }\r\n\r\nexport abstract class BaseProperty<V = any, O extends ItemBasePropertyOptions<V> = ItemBasePropertyOptions<V>> {\r\n\r\n  options: O;\r\n\r\n  // emitter: StrictEventEmitter<EventEmitter, BasePropertyEvents<V, O>> = new EventEmitter();\r\n  emitter = EventEmitter && new EventEmitter();\r\n  name: string;\r\n\r\n  item: Item;\r\n  protected _blocked: boolean = false;\r\n  protected _container?: HTMLElement;\r\n  protected _value?: V;\r\n\r\n  private _removeEventsListener?: () => void;\r\n\r\n  constructor(name: string, item: Item, options: O) {\r\n    this.item = item;\r\n    this.options = Object.assign({}, options);\r\n    this.name = name;\r\n    this._value = this.getProperty();\r\n  }\r\n\r\n  getProperty() {\r\n    if (typeof this.options.getProperty === 'function') {\r\n      return this.options.getProperty.call(this, this.item);\r\n    }\r\n    return this.options.value;\r\n  }\r\n\r\n  getParents(): Item[] {\r\n    return this.item.tree.getParents() || [];\r\n  }\r\n\r\n  getParent() {\r\n    return this.item.tree.getParent();\r\n  }\r\n\r\n  isGroup() {\r\n    const children = this.item.tree.getDescendants();\r\n    return children.length;\r\n  }\r\n\r\n  isBlocked() {\r\n    if (this._blocked === undefined) {\r\n      const parents = this.item.tree.getParents();\r\n      if (parents) {\r\n        const isBlocked = parents.find((x: Item) => {\r\n          const parentProp = x.properties && x.properties.property(this.name);\r\n          if (parentProp) {\r\n            return !parentProp.get();\r\n          }\r\n          return false;\r\n        });\r\n        this._blocked = !!isBlocked;\r\n      } else {\r\n        this._blocked = false;\r\n      }\r\n    }\r\n    return this._blocked;\r\n  }\r\n\r\n  set(value?: V, options?: O) {\r\n    this._value = this._prepareValue(value);\r\n\r\n    this.update(this._value, options);\r\n    this._fireChangeEvent(this._value, options);\r\n  }\r\n\r\n  // shortcut for getValue\r\n  get(): V | undefined {\r\n    return this.getValue();\r\n  }\r\n\r\n  update(value?: V, options?: O) {\r\n    this._callOnSet(value, options);\r\n  }\r\n\r\n  getContainer() {\r\n    return this._container;\r\n  }\r\n\r\n  destroy() {\r\n    if (this._container) {\r\n      const parentNode = this._container.parentNode;\r\n      if (parentNode) {\r\n      parentNode.removeChild(this._container);\r\n      }\r\n    }\r\n    if (this._removeEventsListener) {\r\n      this._removeEventsListener();\r\n    }\r\n  }\r\n\r\n  getValue(): V | undefined {\r\n    return this._value !== undefined ? this._value : this.getProperty();\r\n  }\r\n\r\n  protected _prepareValue(value?: V): V | undefined {\r\n    return value;\r\n  }\r\n\r\n  protected _callOnSet<W extends V = V>(value?: W, options?: O) {\r\n    if (this.options.onSet) {\r\n      this.options.onSet.call(this, value, options, this.item);\r\n    }\r\n  }\r\n\r\n  protected _fireChangeEvent(value?: V, options?: O) {\r\n    if (this.emitter) {\r\n      value = value !== undefined ? value : this.getValue();\r\n      this.emitter.emit('change', { value, options });\r\n      const parents = this.item.tree.getParents();\r\n      parents.forEach((x) => {\r\n        const prop = x.properties && x.properties.property(this.name);\r\n        if (prop) {\r\n          prop.emitter.emit('change-tree', { value, options, item: this.item });\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @module item\r\n */\r\n\r\nimport { TreeHelper } from './TreeHelper';\r\nimport { ItemProperties } from './properties/ItemProperties';\r\nimport { ItemOptions } from './interfaces';\r\n\r\nlet events;\r\ntry {\r\n  events = require('events');\r\n} catch (er) {\r\n  // ignore\r\n}\r\n// tslint:disable-next-line:variable-name\r\nconst EventEmitter = events && events.EventEmitter;\r\n\r\nexport class Item<O extends ItemOptions = ItemOptions> {\r\n\r\n  options: O = {} as O;\r\n\r\n  properties: ItemProperties | undefined;\r\n  tree: TreeHelper;\r\n\r\n  emitter = EventEmitter && new EventEmitter();\r\n\r\n  constructor(options?: O) {\r\n    this.options = {  ...options } as O;\r\n    this.tree = new TreeHelper(this);\r\n  }\r\n\r\n  initProperties() {\r\n    this.properties = new ItemProperties(this, this.options.properties);\r\n  }\r\n}\r\n","import { BaseProperty } from './BaseProperty';\r\nimport { Item } from '../Item';\r\n\r\nimport { ICheckOptions } from '../interfaces';\r\n\r\ntype VAL = boolean;\r\n\r\nexport class CheckProperty\r\n  <V extends VAL = VAL, O extends ICheckOptions<VAL> =  ICheckOptions<VAL>>\r\n  extends BaseProperty<VAL, ICheckOptions<VAL>> {\r\n\r\n  static options: ICheckOptions = {\r\n    hierarchy: true,\r\n    bubble: false,\r\n    propagation: false,\r\n    label: 'Toggle',\r\n    // PropertyContainer: IndicatorContainer\r\n  };\r\n\r\n  constructor(name: string, item: Item, options: O) {\r\n    super(name, item, {...CheckProperty.options, ...options});\r\n    this.set(this.get());\r\n  }\r\n\r\n  update(value?: V, options?: O) {\r\n    if (value) {\r\n      const bubble = (options && options.bubble) || this.options.bubble;\r\n      if (bubble) {\r\n        this.unBlock(options);\r\n        const parent = this.getParent();\r\n        const property = parent &&  parent.properties && parent.properties.property(this.name);\r\n        if (property) {\r\n          property.set(value, Object.assign({}, options, { bubble: true, propagation: false }));\r\n        }\r\n      }\r\n      if (!this.isBlocked()) {\r\n        this._turnOn(options);\r\n      }\r\n    } else {\r\n      this._turnOff(options);\r\n    }\r\n    const propagation = (options && options.propagation) || this.options.propagation;\r\n    if (propagation) {\r\n      this._propagation(value, options);\r\n    }\r\n  }\r\n\r\n  getHierarchyValue() {\r\n    return this.get() && this.getParents().every((x) => {\r\n      const property = x.properties && x.properties.get(this.name);\r\n      return property && property.get();\r\n    });\r\n  }\r\n\r\n  _prepareValue(value?: any): V | undefined {\r\n    return value;\r\n  }\r\n\r\n  _turnOff(options?: O) {\r\n    if (this.options.turnOff) {\r\n      this.options.turnOff.call(this, options);\r\n    }\r\n    this._callOnSet(false, options);\r\n    if (this.options.hierarchy && this.isGroup()) {\r\n      this.blockChilds(options);\r\n    }\r\n  }\r\n\r\n  _turnOn(options?: O) {\r\n    if (this.options.turnOn) {\r\n      this.options.turnOn.call(this, options);\r\n    }\r\n    this._callOnSet(true, options);\r\n    if (this.options.hierarchy && this.isGroup()) {\r\n      this.unblockChilds(options);\r\n    }\r\n  }\r\n\r\n  block(options?: O) {\r\n    this._blocked = true;\r\n    this._block(options);\r\n  }\r\n\r\n  _block(options?: O) {\r\n    this._turnOff(options);\r\n  }\r\n\r\n  unBlock(options?: O) {\r\n    this._blocked = false;\r\n    if (this.getValue()) {\r\n      this._unBlock(options);\r\n    }\r\n  }\r\n\r\n  _unBlock(options?: O) {\r\n    this._turnOn(options);\r\n  }\r\n\r\n  blockChilds(options?: O) {\r\n    this.item.tree.getDescendants().forEach((x) => this._blockChild(x, options));\r\n  }\r\n\r\n  unblockChilds(options?: O) {\r\n    this.item.tree.getChildren().forEach((x) => this._unBlockChild(x, options));\r\n  }\r\n\r\n  _blockChild(item: Item, options?: O) {\r\n    const prop = item.properties && item.properties.property(this.name) as CheckProperty<V, O>;\r\n    if (prop && prop.block) {\r\n      prop.block(options);\r\n    }\r\n  }\r\n\r\n  _unBlockChild(item: Item, options?: O) {\r\n    const prop = item.properties && item.properties.property(this.name) as CheckProperty<V, O>;\r\n    if (prop && prop.unBlock) {\r\n      prop.unBlock(options);\r\n    }\r\n  }\r\n\r\n  _propagation(value?: V, options?: O) {\r\n    if (this.isGroup()) {\r\n      const children = this.item.tree.getChildren();\r\n      for (let fry = 0; fry < children.length; fry++) {\r\n        const child = children[fry];\r\n        const property = child.properties && child.properties.property(this.name) as CheckProperty<V, O>;\r\n        if (property) {\r\n          property.set(value, {\r\n            ...options, ...{\r\n              propagation: true,\r\n              bubble: false,\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @module item\r\n */\r\n\r\nimport { BaseProperty } from './BaseProperty';\r\nimport { CheckProperty } from './CheckProperty';\r\nimport { Item } from '../Item';\r\n\r\nimport { ItemBasePropertyOptions, Type, ItemPropertyConfig, ItemPropertyTypes } from '../interfaces';\r\n\r\nexport class ItemProperties {\r\n\r\n  static handlers: { [name: string]: Type<BaseProperty> } = {\r\n    CheckProperty,\r\n  };\r\n\r\n  options = {};\r\n\r\n  private _properties: { [propName: string]: BaseProperty } = {};\r\n  private _propertiesList: string[];\r\n\r\n  constructor(public item: Item, propertiesList?: Array<ItemPropertyConfig<keyof ItemPropertyTypes>>) {\r\n\r\n    this._propertiesList = []; // ordered list\r\n    if (propertiesList) {\r\n      propertiesList.forEach(this._setPropertyHandler.bind(this));\r\n    }\r\n  }\r\n\r\n  add(propOpt: ItemPropertyConfig<keyof ItemPropertyTypes>) {\r\n    this._setPropertyHandler(propOpt);\r\n  }\r\n\r\n  _setPropertyHandler(propOpt: ItemPropertyConfig<keyof ItemPropertyTypes>) {\r\n    const handlers = ItemProperties.handlers;\r\n    let handler = propOpt.handler;\r\n    if (!handler && propOpt.type) {\r\n      switch (propOpt.type) {\r\n        case 'boolean':\r\n          handler = handlers.CheckProperty;\r\n          break;\r\n        case 'string':\r\n          handler = handlers.BaseProperty;\r\n          break;\r\n        default:\r\n          handler = handlers.BaseProperty;\r\n      }\r\n    }\r\n    if (handler && propOpt.name) {\r\n      const options = { ...propOpt || {} };\r\n      this._properties[propOpt.name] = new handler(\r\n        propOpt.name,\r\n        this.item,\r\n        options,\r\n      );\r\n      this._propertiesList.push(propOpt.name);\r\n    }\r\n  }\r\n\r\n  update() {\r\n    this.list().forEach((x) => {\r\n      x.update();\r\n    });\r\n  }\r\n\r\n  get(name: string) {\r\n    const prop = this.property(name);\r\n    if (prop) {\r\n      return prop.get();\r\n    }\r\n  }\r\n\r\n  set<K extends keyof ItemPropertyTypes>(\r\n    name: string,\r\n    value: ItemPropertyTypes[K],\r\n    options?: ItemBasePropertyOptions<ItemPropertyTypes[K]>) {\r\n    const prop = this.property(name);\r\n    if (prop) {\r\n      return prop.set(value, options);\r\n    }\r\n  }\r\n\r\n  property(name: string) {\r\n    return this._properties[name];\r\n  }\r\n\r\n  list() {\r\n    return this._propertiesList.map((x) => this._properties[x]);\r\n  }\r\n\r\n  destroy() {\r\n    for (const p in this._properties) {\r\n      if (this._properties.hasOwnProperty(p)) {\r\n        const prop = this.property(p);\r\n        if (prop && prop.destroy) {\r\n          prop.destroy();\r\n        }\r\n      }\r\n    }\r\n    this._properties = {};\r\n    this._propertiesList = [];\r\n  }\r\n}\r\n","/**\r\n * @module item\r\n */\r\n\r\nimport { Item } from './Item';\r\n\r\nexport * from './interfaces';\r\nexport * from './properties/BaseProperty';\r\nexport * from './properties/CheckProperty';\r\nexport * from './properties/ItemProperties';\r\n\r\nexport { Item };\r\nexport default Item;\r\n","/**\r\n * @module ngw-kit\r\n */\r\n\r\nimport Item, { ItemOptions } from '@nextgis/item';\r\n\r\nimport WebMap, { LayerAdaptersOptions, LayerAdapter } from '@nextgis/webmap';\r\nimport { TreeGroup, TreeLayer } from './interfaces';\r\nimport { pixelsInMeterWidth } from './utils';\r\n\r\nexport class WebMapLayerItem extends Item<ItemOptions> {\r\n  static options: ItemOptions = {\r\n    properties: [\r\n      {\r\n        type: 'boolean',\r\n        name: 'visibility',\r\n        getProperty(item?: WebMapLayerItem) {\r\n          if (item) {\r\n            if (item.item.item_type === 'group') {\r\n              return true;\r\n            } else if (item.item.item_type === 'layer') {\r\n              return item.item.layer_enabled;\r\n            } else if (item.item.item_type === 'root') {\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        },\r\n        onSet(value: boolean, options?: any, item?: WebMapLayerItem) {\r\n          if (item && item.layer && item.item.item_type === 'layer') {\r\n            if (value) {\r\n              item.webMap.showLayer(item.layer);\r\n            } else {\r\n              item.webMap.hideLayer(item.layer);\r\n            }\r\n            item.item.layer_enabled = value;\r\n          }\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  item: TreeGroup | TreeLayer;\r\n  layer?: LayerAdapter;\r\n  private _pixelsInMeter: number = pixelsInMeterWidth();\r\n\r\n  constructor(public webMap: WebMap,\r\n              item: TreeGroup | TreeLayer,\r\n              options?: ItemOptions,\r\n              parent?: WebMapLayerItem) {\r\n\r\n    super({ ...WebMapLayerItem.options, ...options });\r\n\r\n    this.item = item;\r\n    if (parent) {\r\n      this.tree.setParent(parent);\r\n    }\r\n    this.initProperties();\r\n    this._init(item);\r\n  }\r\n\r\n  async initItem(item: TreeGroup | TreeLayer) {\r\n    let newLayer = item._layer;\r\n    if (item.item_type === 'group' || item.item_type === 'root') {\r\n      if (item.children && item.children.length) {\r\n\r\n        item.children.reverse().sort((a, b) => {\r\n          if (a.item_type === 'layer' && b.item_type === 'layer') {\r\n            return b.draw_order_position - a.draw_order_position;\r\n          }\r\n          return 0;\r\n        }).forEach((x) => {\r\n          const children = new WebMapLayerItem(this.webMap, x, this.options, this);\r\n          this.tree.addChild(children);\r\n        });\r\n      }\r\n    } else if (item.item_type === 'layer') {\r\n      const adapter = (item.adapter || item.layer_adapter.toUpperCase()) as keyof LayerAdaptersOptions;\r\n      const maxZoom = item.layer_max_scale_denom ?\r\n        this._mapScaleToZoomLevel(item.layer_max_scale_denom) : this.webMap.options.maxZoom;\r\n      const minZoom = item.layer_min_scale_denom ?\r\n        this._mapScaleToZoomLevel(item.layer_min_scale_denom) : this.webMap.options.minZoom;\r\n      const options: any = {\r\n        maxZoom,\r\n        minZoom,\r\n        ...item,\r\n        headers: this.options.headers,\r\n\r\n      };\r\n      newLayer = await this.webMap.addLayer(adapter, options);\r\n    }\r\n    if (newLayer) {\r\n      item._layer = newLayer;\r\n      this.layer = newLayer;\r\n      if (this.properties && item.item_type === 'layer' && item.layer_enabled) {\r\n        this.properties.property('visibility').set(true);\r\n      }\r\n    } else {\r\n      // this.properties.get('visibility').set(true);\r\n    }\r\n  }\r\n\r\n  bringToFront() {\r\n    //\r\n  }\r\n\r\n  fit(): void {\r\n    if (this.item.item_type === 'layer') {\r\n      console.log(this.item);\r\n    }\r\n  }\r\n\r\n  private _mapScaleToZoomLevel(scale: number) {\r\n    return this._setScaleRatio(scale);\r\n  }\r\n\r\n  // Returns width of map in meters on specified latitude.\r\n  private _getMapWidthForLanInMeters(lat: number): number {\r\n    return 6378137 * 2 * Math.PI * Math.cos(lat * Math.PI / 180);\r\n  }\r\n\r\n  private zoom(scale: number) {\r\n    return Math.log(scale / 256) / Math.LN2;\r\n  }\r\n\r\n  private _setScaleRatio(scale: number) {\r\n\r\n    // TODO: get real center\r\n    // webmap does not contain center yet\r\n    const center = [104, 45]; // this.webMap.getCenter();\r\n    if (center) {\r\n      const centerLat = center[1];\r\n      const crsScale = this._pixelsInMeter * this._getMapWidthForLanInMeters(centerLat) / scale;\r\n      const zoom = this.zoom(crsScale);\r\n      return zoom;\r\n    }\r\n    return Math.round(Math.log(591657550.500000 / (scale / 2)) / Math.log(2));\r\n\r\n  }\r\n\r\n  private async _init(item: TreeGroup | TreeLayer) {\r\n    await this.initItem(item);\r\n    this.emitter.emit('init');\r\n  }\r\n\r\n}\r\n","import WebMap, {\r\n  Type,\r\n  LayerAdapter,\r\n  LngLatBoundsArray\r\n} from '@nextgis/webmap';\r\nimport NgwConnector, { WebmapResource, ResourceItem } from '@nextgis/ngw-connector';\r\nimport { createAsyncAdapter } from './createAsyncAdapter';\r\nimport { NgwLayerOptions, WebMapAdapterOptions } from './interfaces';\r\nimport { WebMapLayerAdapter } from './WebMapLayerAdapter';\r\n// @ts-ignore\r\nimport { toWgs84 as WGS84 } from 'reproject';\r\nimport { GeoJsonObject } from 'geojson';\r\n\r\nconst epsg = {\r\n  // tslint:disable-next-line:max-line-length\r\n  'EPSG:3857': '+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs'\r\n};\r\n\r\nexport function toWgs84(geojson: GeoJsonObject) {\r\n  return WGS84(geojson, epsg['EPSG:3857'], epsg);\r\n}\r\n\r\nexport function fixUrlStr(url: string) {\r\n  // remove double slash\r\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\r\n}\r\n\r\nexport function updateWmsParams(params: any, resourceId: number) {\r\n  const { bbox, width, height } = params;\r\n  return {\r\n    resource: resourceId,\r\n    extent: bbox,\r\n    size: width + ',' + height,\r\n    timestamp: Date.now(),\r\n  };\r\n}\r\n\r\nexport function getLayerAdapterOptions(options: NgwLayerOptions, webMap: WebMap, baseUrl: string) {\r\n  let adapter = options.adapter || 'IMAGE';\r\n  let url: string;\r\n  const layerAdapters = webMap.getLayerAdapters();\r\n  const isImageAllowed = layerAdapters ? layerAdapters.IMAGE : true;\r\n  if (adapter === 'IMAGE') {\r\n    if (isImageAllowed) {\r\n      url = baseUrl + '/api/component/render/image';\r\n      return {\r\n        url,\r\n        resourceId: options.resourceId,\r\n        headers: options.headers,\r\n        updateWmsParams: (params: any) => updateWmsParams(params, options.resourceId)\r\n      };\r\n    } else {\r\n      adapter = 'TILE';\r\n    }\r\n  }\r\n  if (adapter === 'TILE') {\r\n    url = baseUrl + '/api/component/render/tile?z={z}&x={x}&y={y}&resource=' + options.resourceId;\r\n    return { url, adapter };\r\n  }\r\n}\r\n\r\nexport function addNgwLayer(options: NgwLayerOptions,\r\n  webMap: WebMap,\r\n  baseUrl: string,\r\n  connector: NgwConnector): Promise<Type<LayerAdapter> | undefined> {\r\n\r\n  const headers = connector.getAuthorizationHeaders();\r\n  if (headers) {\r\n    options.headers = headers;\r\n  }\r\n\r\n  return createAsyncAdapter(options, webMap, baseUrl, connector);\r\n}\r\n\r\nexport function getWebMapExtent(webmap: WebmapResource): LngLatBoundsArray | undefined {\r\n  const { extent_bottom, extent_left, extent_top, extent_right } = webmap;\r\n  if (extent_bottom && extent_left && extent_top && extent_right) {\r\n    const extent: LngLatBoundsArray = [extent_left, extent_bottom, extent_right, extent_top];\r\n    if (extent[3] > 82) {\r\n      extent[3] = 82;\r\n    }\r\n    if (extent[1] < -82) {\r\n      extent[1] = -82;\r\n    }\r\n    return extent;\r\n  }\r\n}\r\n\r\nexport function getNgwLayerExtent(id: number, connector: NgwConnector) {\r\n  return connector.get('layer.extent', name, { id }).then((resp) => {\r\n    if (resp) {\r\n      const { maxLat, maxLon, minLat, minLon } = resp.extent;\r\n     return [minLon, minLat, maxLon, maxLat];\r\n    }\r\n  });\r\n}\r\n\r\nexport async function getNgwResourceExtent(item: ResourceItem, connector: NgwConnector) {\r\n  if (item.webmap) {\r\n    return getWebMapExtent(item.webmap);\r\n  } else {\r\n    const resource = item.resource;\r\n    if (resource.cls.indexOf('style') !== -1) {\r\n      return connector.get('resource.item', null, {\r\n        id: resource.parent.id\r\n      }).then((res) => {\r\n        return getNgwLayerExtent(res.resource.id, connector);\r\n      });\r\n    } else {\r\n      return getNgwLayerExtent(resource.id, connector);\r\n    }\r\n  }\r\n}\r\n\r\nconst d2r = Math.PI / 180; // degrees to radians\r\nconst r2d = 180 / Math.PI; // radians to degrees\r\nconst earthsradius = 3963; // 3963 is the radius of the earth in miles\r\n\r\nexport function getCirclePoly(lng: number, lat: number, radius = 10, points = 6) {\r\n\r\n  // find the radius in lat/lon\r\n  const rlat = (radius / earthsradius) * r2d;\r\n  const rlng = rlat / Math.cos(lat * d2r);\r\n\r\n  const extp = [];\r\n  for (let i = 0; i < points + 1; i++) {// one extra here makes sure we connect the\r\n\r\n    const theta = Math.PI * (i / (points / 2));\r\n    const ex = lng + (rlng * Math.cos(theta)); // center a + radius x * cos(theta)\r\n    const ey = lat + (rlat * Math.sin(theta)); // center b + radius y * sin(theta)\r\n    extp.push([ex, ey]);\r\n  }\r\n\r\n  // add the circle to the map\r\n  return extp;\r\n}\r\n\r\nexport function degrees2meters(lng: number, lat: number): [number, number] {\r\n  const x = lng * 20037508.34 / 180;\r\n  let y = Math.log(Math.tan((90 + lat) * Math.PI / 360)) / (Math.PI / 180);\r\n  y = y * 20037508.34 / 180;\r\n  return [x, y];\r\n}\r\n\r\ninterface ExtendWebMapLayerAdapterOptions {\r\n  webMap: WebMap;\r\n  connector: NgwConnector;\r\n  baseUrl?: string;\r\n}\r\n\r\nexport function extendWebMapLayerAdapter(opt: ExtendWebMapLayerAdapterOptions): Type<WebMapLayerAdapter> {\r\n  class A extends WebMapLayerAdapter {\r\n    constructor(map: any, options: WebMapAdapterOptions) {\r\n      options = { ...opt, ...options };\r\n      super(map, options);\r\n    }\r\n  }\r\n  return A;\r\n}\r\n\r\nlet _pixelsInMeter: number;\r\n\r\nexport function pixelsInMeterWidth() {\r\n  if (_pixelsInMeter === undefined) {\r\n    const div = document.createElement('div');\r\n    div.style.cssText = 'position: absolute;  left: -100%;  top: -100%;  width: 100cm;';\r\n    document.body.appendChild(div);\r\n    const px = div.offsetWidth;\r\n    document.body.removeChild(div);\r\n    _pixelsInMeter = px;\r\n  }\r\n  return _pixelsInMeter;\r\n}\r\n","import WebMap, { BaseLayerAdapter, LngLatBoundsArray, MapClickEvent } from '@nextgis/webmap';\r\nimport { ResourceItem, CancelablePromise } from '@nextgis/ngw-connector';\r\nimport {\r\n  fixUrlStr,\r\n  getLayerAdapterOptions,\r\n  updateWmsParams,\r\n  getCirclePoly,\r\n  degrees2meters\r\n} from './utils';\r\nimport { WebMapLayerItem } from './WebMapLayerItem';\r\nimport { ItemOptions } from '@nextgis/item';\r\n\r\nimport StrictEventEmitter from 'strict-event-emitter-types';\r\nimport { EventEmitter } from 'events';\r\n\r\nimport {\r\n  TreeGroup,\r\n  TreeLayer,\r\n  NgwLayerAdapterType,\r\n  WebMapAdapterOptions,\r\n  IdentifyRequestOptions,\r\n  WebMapLayerAdapterEvents\r\n} from './interfaces';\r\n\r\nexport class WebMapLayerAdapter implements BaseLayerAdapter {\r\n\r\n  layer?: WebMapLayerItem;\r\n\r\n  /**\r\n   * Radius for searching objects in pixels\r\n   */\r\n  pixelRadius = 10; // webmapSettings.identify_radius,\r\n  readonly emitter: StrictEventEmitter<EventEmitter, WebMapLayerAdapterEvents> = new EventEmitter();\r\n  private resourceId?: number;\r\n  private _dependsLayers: Array<TreeGroup | TreeLayer> = [];\r\n  private response?: ResourceItem;\r\n  private _webmapLayersIds: { isLoading: boolean, ids: string[] } = { isLoading: false, ids: [] };\r\n\r\n  private $$onMapClick?: (ev: MapClickEvent) => void;\r\n\r\n  constructor(public map: any, public options: WebMapAdapterOptions) {\r\n    const r = options.resourceId;\r\n    if (Array.isArray(r)) {\r\n      this.resourceId = r[0];\r\n      this.options.id = r[1];\r\n    } else {\r\n      this.resourceId = r;\r\n    }\r\n\r\n    if (!this.resourceId) {\r\n      throw new Error('NGW `resourceId` is not defined');\r\n    }\r\n  }\r\n\r\n  async addLayer(options: WebMapAdapterOptions): Promise<any> {\r\n    this.options = { ...this.options, ...options };\r\n\r\n    this.layer = await this._getWebMapLayerItem();\r\n\r\n    if (this.options.identification) {\r\n      const ids = await this._getWebmapIds();\r\n      if (ids) {\r\n        this._webmapLayersIds.ids = ids.filter((x) => x !== undefined).map((x) => x.resource.parent.id);\r\n        this.$$onMapClick = (ev: MapClickEvent) => this._onMapClick(ev);\r\n        this.options.webMap.emitter.on('click', this.$$onMapClick);\r\n      }\r\n    }\r\n    return this.layer;\r\n  }\r\n\r\n  removeLayer() {\r\n    const mapAdapter = this.options.webMap.mapAdapter;\r\n    if (this.$$onMapClick) {\r\n      this.options.webMap.emitter.off('click', this.$$onMapClick);\r\n    }\r\n    this.getDependLayers().forEach((x) => {\r\n      mapAdapter.removeLayer(x._layer);\r\n    });\r\n    this.$$onMapClick = undefined;\r\n    delete this.options;\r\n    delete this.layer;\r\n    this._dependsLayers = [];\r\n    delete this.response;\r\n    delete this._webmapLayersIds;\r\n\r\n  }\r\n\r\n  showLayer() {\r\n    if (this.layer && this.layer.properties) {\r\n      this.layer.properties.property('visibility').set(true);\r\n    }\r\n  }\r\n\r\n  hideLayer() {\r\n    if (this.layer && this.layer.properties) {\r\n      this.layer.properties.property('visibility').set(false);\r\n    }\r\n  }\r\n\r\n  getExtent(): LngLatBoundsArray | undefined {\r\n    const webmap = this.response && this.response.webmap;\r\n    if (webmap) {\r\n      const { extent_bottom, extent_left, extent_top, extent_right } = webmap;\r\n      if (extent_bottom && extent_left && extent_top && extent_right) {\r\n        const extent: LngLatBoundsArray = [extent_left, extent_bottom, extent_right, extent_top];\r\n        if (extent[3] > 82) {\r\n          extent[3] = 82;\r\n        }\r\n        if (extent[1] < -82) {\r\n          extent[1] = -82;\r\n        }\r\n        return extent;\r\n      }\r\n    }\r\n  }\r\n\r\n  getDependLayers() {\r\n    if (!this._dependsLayers && this.layer) {\r\n      this._dependsLayers = [];\r\n      this.layer.tree.getDescendants().forEach((x) => {\r\n        if (x.adapter) {\r\n          this._dependsLayers.push(x.adapter.layer);\r\n        }\r\n      });\r\n    }\r\n    return this._dependsLayers;\r\n  }\r\n\r\n  private async _getWebMapLayerItem(): Promise<WebMapLayerItem | undefined> {\r\n    if (this.resourceId) {\r\n      const webmap = await this.getWebMapConfig(this.resourceId);\r\n      if (webmap && webmap.root_item) {\r\n        return new Promise<WebMapLayerItem>((resolve) => {\r\n          const options: ItemOptions = {};\r\n          if (this.options.connector && this.options.connector.options.auth) {\r\n            const headers = this.options.connector.getAuthorizationHeaders();\r\n            if (headers) {\r\n              options.headers = headers;\r\n            }\r\n          }\r\n\r\n          const layer = new WebMapLayerItem(this.options.webMap, webmap.root_item, options);\r\n          layer.emitter.on('init', () => resolve(layer));\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private async getWebMapConfig(id: number) {\r\n    try {\r\n      const data = await this.options.connector.get('resource.item', null, { id });\r\n      this.response = data;\r\n      const webmap = data.webmap;\r\n      if (webmap) {\r\n        this._updateItemsParams(webmap.root_item, this.options.webMap);\r\n        return webmap;\r\n      } else {\r\n        // TODO: resource is no webmap\r\n      }\r\n    } catch (er) {\r\n      throw er;\r\n    }\r\n  }\r\n\r\n  private _updateItemsParams(item: TreeGroup | TreeLayer, webMap: WebMap) {\r\n    if (item) {\r\n      if (item.item_type === 'group' || item.item_type === 'root') {\r\n        if (item.children) {\r\n          item.children = item.children.map((x) => this._updateItemsParams(x, webMap));\r\n        }\r\n      } else if (item.item_type === 'layer') {\r\n        const url = fixUrlStr(this.options.baseUrl + '/api/component/render/image');\r\n        const resourceId = item.layer_style_id;\r\n        item.url = url;\r\n        item.resourceId = resourceId;\r\n        item.updateWmsParams = (params) => updateWmsParams(params, resourceId);\r\n        item = {\r\n          ...item,\r\n          ...getLayerAdapterOptions({\r\n            adapter: item.layer_adapter.toUpperCase() as NgwLayerAdapterType,\r\n            resourceId,\r\n          }, webMap, this.options.baseUrl)\r\n        };\r\n      }\r\n    }\r\n    return item;\r\n  }\r\n\r\n  private async _getWebmapIds() {\r\n    const webMapItem = this.layer;\r\n    if (webMapItem && webMapItem.item.item_type === 'root') {\r\n      const layers = webMapItem.item.children;\r\n      const promises: Array<CancelablePromise<any>> = [];\r\n      layers.forEach((x) => {\r\n        if (x.item_type === 'layer') {\r\n          const id = x.layer_style_id;\r\n          promises.push(this.options.connector.get('resource.item', {}, { id }));\r\n        }\r\n      });\r\n      return Promise.all(promises);\r\n      // const id = item['layer_style_id']\r\n    }\r\n  }\r\n\r\n  // options is temporal to set list of layers id, because layers id is not item parameter now\r\n  private _sendIdentifyRequest(ev: MapClickEvent, options: { layers?: string[] } = {}) {\r\n\r\n    // webMap.emitter.emit('start-identify', { ev });\r\n    const geom = getCirclePoly(ev.latLng.lng, ev.latLng.lat, this.pixelRadius);\r\n\r\n    // create wkt string\r\n    const polygon: string[] = [];\r\n    geom.forEach(([lng, lat]) => {\r\n      const [x, y] = degrees2meters(lng, lat);\r\n      polygon.push(x + ' ' + y);\r\n    });\r\n    const wkt = `POLYGON((${polygon.join(', ')}))`;\r\n\r\n    const layers: string[] = options.layers ? options.layers : this._webmapLayersIds.ids;\r\n\r\n    const data: IdentifyRequestOptions = {\r\n      geom: wkt,\r\n      srs: 3857,\r\n      layers,\r\n    };\r\n\r\n    return this.options.connector.post('feature_layer.identify', { data }).then((resp) => {\r\n      this.emitter.emit('identify', { ev, data: resp });\r\n      return resp;\r\n    });\r\n  }\r\n\r\n  private _onMapClick(ev: MapClickEvent) {\r\n    this._sendIdentifyRequest(ev);\r\n  }\r\n}\r\n","import NgwConnector, { ResourceCls } from '@nextgis/ngw-connector';\r\nimport WebMap, { LayerAdapter, Type } from '@nextgis/webmap';\r\nimport { NgwLayerOptions, ResourceAdapter } from './interfaces';\r\n\r\nimport { createGeoJsonAdapter } from './createGeoJsonAdapter';\r\nimport { createRasterAdapter } from './createRasterAdapter';\r\nimport { createWebMapAdapter } from './createWebMapAdapter';\r\nimport { getNgwResourceExtent } from './utils';\r\n\r\nconst styles: ResourceCls[] = ['mapserver_style', 'qgis_vector_style', 'raster_style'];\r\n\r\nexport async function createAsyncAdapter(\r\n  options: NgwLayerOptions,\r\n  webMap: WebMap,\r\n  baseUrl: string,\r\n  connector: NgwConnector): Promise<Type<ResourceAdapter> | undefined> {\r\n\r\n  const item = await connector.get('resource.item', null, { id: options.resourceId });\r\n  let adapter: Promise<Type<LayerAdapter> | undefined> | undefined;\r\n  if (item.webmap) {\r\n    adapter = createWebMapAdapter(options, webMap, baseUrl, connector);\r\n  } else if (styles.indexOf(item.resource.cls) !== -1) {\r\n    if (options.adapter === 'GEOJSON') {\r\n      const parentOptions: NgwLayerOptions = {\r\n        ...options,\r\n        resourceId: item.resource.parent.id,\r\n      };\r\n      adapter = createGeoJsonAdapter(parentOptions, webMap, connector);\r\n    } else {\r\n      adapter = createRasterAdapter(options, webMap, baseUrl);\r\n    }\r\n  } else if (item.resource.cls === 'vector_layer') {\r\n    if (options.adapter && options.adapter !== 'GEOJSON') {\r\n      return createAdapterFromFirstStyle(item.resource.id, options, webMap, baseUrl, connector);\r\n    } else {\r\n      adapter = createGeoJsonAdapter(options, webMap, connector);\r\n    }\r\n  } else if (item.resource.cls === 'raster_layer') {\r\n    return createAdapterFromFirstStyle(item.resource.id, options, webMap, baseUrl, connector);\r\n  }\r\n  if (adapter) {\r\n    return adapter.then((x) => {\r\n      if (x) {\r\n        const resourceAdapter = x as Type<ResourceAdapter>;\r\n        resourceAdapter.prototype.item = item;\r\n        resourceAdapter.prototype.getExtent = () => getNgwResourceExtent(item, connector);\r\n        return resourceAdapter;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nasync function createAdapterFromFirstStyle(\r\n  parent: number,\r\n  options: NgwLayerOptions,\r\n  webMap: WebMap,\r\n  baseUrl: string,\r\n  connector: NgwConnector) {\r\n  const childrenStyles = await connector.get('resource.collection', null, { parent });\r\n  const firstStyle = childrenStyles && childrenStyles[0];\r\n  if (firstStyle) {\r\n    return createAsyncAdapter(\r\n      { ...options, resourceId: firstStyle.resource.id },\r\n      webMap, baseUrl, connector\r\n    );\r\n  }\r\n}\r\n","import { NgwLayerOptions } from './interfaces';\r\nimport WebMap, { Type } from '@nextgis/webmap';\r\nimport NgwConnector from '@nextgis/ngw-connector';\r\nimport { WebMapLayerAdapter } from './WebMapLayerAdapter';\r\n\r\nexport async function createWebMapAdapter(\r\n  options: NgwLayerOptions,\r\n  webMap: WebMap,\r\n  baseUrl: string,\r\n  connector: NgwConnector): Promise<Type<WebMapLayerAdapter>> {\r\n\r\n  return class Adapter extends WebMapLayerAdapter {\r\n\r\n    constructor(map: any) {\r\n      super(map, {\r\n        webMap,\r\n        resourceId: options.resourceId,\r\n        baseUrl,\r\n        connector\r\n      });\r\n    }\r\n\r\n    // async addLayer(_opt: any) {\r\n    //   const data = await geoJsonAdapterCb;\r\n    //   const opt = onLoad(data);\r\n    //   return super.addLayer({ ..._opt, ...opt });\r\n    // }\r\n    // beforeRemove() {\r\n    //   geoJsonAdapterCb.cancel();\r\n    // }\r\n  };\r\n}\r\n","import { NgwLayerOptions } from './interfaces';\r\nimport WebMap, { BaseLayerAdapter, Type, ImageAdapterOptions, TileAdapterOptions } from '@nextgis/webmap';\r\nimport { getLayerAdapterOptions } from './utils';\r\n\r\nexport async function createRasterAdapter(\r\n  options: NgwLayerOptions,\r\n  webMap: WebMap,\r\n  baseUrl: string): Promise<Type<BaseLayerAdapter> | undefined> {\r\n\r\n  let adapter = options.adapter || 'IMAGE';\r\n  const layerAdapters = webMap.getLayerAdapters();\r\n  const isImageAllowed = layerAdapters ? layerAdapters.IMAGE : true;\r\n  if (!isImageAllowed) {\r\n    adapter = 'TILE';\r\n  }\r\n  if (adapter === 'IMAGE' || adapter === 'TILE') {\r\n\r\n    const adapterClass = webMap.mapAdapter.layerAdapters[adapter] as Type<BaseLayerAdapter>;\r\n\r\n    return class Adapter extends adapterClass {\r\n\r\n      // options = {};\r\n\r\n      constructor(public map: any, _options: any) {\r\n        super(map, _options);\r\n        const opt = getLayerAdapterOptions(options, webMap, baseUrl);\r\n        if (opt) {\r\n          if (opt.resourceId) {\r\n            const layerAdapterOptions: ImageAdapterOptions = { ...opt, resourceId: opt.resourceId };\r\n            this.options = {...this.options, ...layerAdapterOptions};\r\n          } else {\r\n            const tileAdapterOptions: TileAdapterOptions = opt;\r\n            this.options = {...this.options, ...tileAdapterOptions};\r\n          }\r\n        }\r\n      }\r\n      addLayer(addOptions: any) {\r\n        return super.addLayer({...this.options, ...addOptions});\r\n      }\r\n      // beforeRemove() {\r\n\r\n      // }\r\n\r\n    };\r\n  } else {\r\n    throw new Error(adapter + ' not supported yet. Only TILE');\r\n  }\r\n}\r\n","/**\r\n * @module ngw-kit\r\n */\r\n\r\nimport { NgwKit } from './NgwKit';\r\n\r\nexport * from './interfaces';\r\nexport * from './WebMapLayerAdapter';\r\nexport * from './WebMapLayerItem';\r\n\r\nexport { NgwKit };\r\nexport default NgwKit;\r\n","/**\r\n * @module ngw-kit\r\n */\r\n\r\nimport NgwConnector from '@nextgis/ngw-connector';\r\nimport WebMap, { StarterKit, Type } from '@nextgis/webmap';\r\nimport { toWgs84 } from './utils';\r\nimport {\r\n  updateWmsParams,\r\n  getLayerAdapterOptions,\r\n  addNgwLayer,\r\n  extendWebMapLayerAdapter\r\n} from './utils';\r\nimport { NgwKitOptions, WebMapAdapterOptions } from './interfaces';\r\nimport { WebMapLayerAdapter } from './WebMapLayerAdapter';\r\n\r\nexport class NgwKit implements StarterKit {\r\n\r\n  static utils = {\r\n    toWgs84,\r\n    addNgwLayer\r\n  };\r\n\r\n  static updateWmsParams = updateWmsParams;\r\n\r\n  static getLayerAdapterOptions = getLayerAdapterOptions;\r\n\r\n  static addNgwLayer = addNgwLayer;\r\n\r\n  url: string;\r\n  connector: NgwConnector;\r\n  webMap?: WebMap;\r\n\r\n  constructor(public options: NgwKitOptions) {\r\n\r\n    if (this.options.baseUrl) {\r\n      this.url = this.options.baseUrl;\r\n    } else {\r\n      throw new Error('url is not defined');\r\n    }\r\n    this.connector = new NgwConnector({ baseUrl: this.url, auth: this.options.auth });\r\n  }\r\n\r\n  async onLoadSync(webMap: WebMap) {\r\n    if (this.options.resourceId && this.options.baseUrl) {\r\n      // TODO: resources from array\r\n      const resourceIds = [this.options.resourceId];\r\n\r\n      if (resourceIds.length) {\r\n        for (const r of resourceIds) {\r\n          const options: WebMapAdapterOptions = {\r\n            resourceId: r,\r\n            connector: this.connector,\r\n            baseUrl: this.options.baseUrl,\r\n            webMap\r\n          };\r\n          const layer = await webMap.addLayer(WebMapLayerAdapter, {\r\n            visibility: true,\r\n            fit: true,\r\n            identification: this.options.identification,\r\n            pixelRadius: this.options.pixelRadius,\r\n            ...options\r\n          }) as WebMapLayerAdapter;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getLayerAdapters() {\r\n    return Promise.resolve([this._getLayerAdapter()]);\r\n  }\r\n\r\n  private _getLayerAdapter() {\r\n    return {\r\n      name: 'WEBMAP',\r\n      createAdapter: (webmap: WebMap) => Promise.resolve(this._createAdapter(webmap)),\r\n    };\r\n  }\r\n\r\n  private _createAdapter(webMap: WebMap): Type<WebMapLayerAdapter> {\r\n    const connector = this.connector;\r\n    const baseUrl = this.options.baseUrl;\r\n    return extendWebMapLayerAdapter({\r\n      webMap, connector, baseUrl\r\n    });\r\n  }\r\n\r\n}\r\n","/**\r\n * @module icons\r\n */\r\n\r\n// tslint:disable:max-line-length\r\nimport { IconOptions as WebmapIcoOptions } from '@nextgis/webmap';\r\n\r\nconst svgPath: { [name: string]: string | GetPathCallback } = {\r\n  brill: '<path d=\"m6 0-5 6 5 6 5-6z\"/>',\r\n  circle: '<circle cx=\"6\" cy=\"6\" r=\"6\"/>',\r\n  rect: '<rect width=\"12\" height=\"12\"/>',\r\n  marker: '<path d=\"m6 0c-1.85 0-4 1.19-4 4.22 0 2.05 3.08 6.59 4 7.78 0.821-1.19 4-5.62 4-7.78 0-3.03-2.15-4.22-4-4.22z\"/>',\r\n  cross: '<path d=\"M 2.4,12 6,8.4 9.6,12 12,9.6 8.4,6 12,2.4 9.6,0 6,3.6 2.4,0 0,2.4 3.6,6 0,9.6 Z\"/>',\r\n  star: '<path d=\"m6 0.25 1.71 4.18 4.29-1.04e-4 -3.43 3.14 0.857 4.18-3.43-3.14-3.43 3.14 0.857-4.18-3.43-3.14 4.29-0.209z\"/>',\r\n  triangle: '<path d=\"m12 11.7h-12l6-11.2z\"/>',\r\n  plus: '<path d=\"m7.5 12v-4.5h4.5v-3h-4.5v-4.5h-3v4.5h-4.5v3h4.5v4.5z\"/>',\r\n  minus: '<path d=\"m12 7.5v-3h-12v3z\"/>',\r\n  asterisk: '<path d=\"m7.59 12v-3.27l2.83 1.64 1.58-2.74-2.85-1.64 2.83-1.64-1.56-2.74-2.83 1.64v-3.24h-3.17v3.24l-2.85-1.64-1.57 2.74 2.84 1.64-2.84 1.64 1.57 2.74 2.85-1.64v3.27z\"/>',\r\n};\r\n\r\nexport interface IconOptions {\r\n  shape?: 'circle' | 'brill' | 'rect' | 'marker' | 'star' | 'asterisk' | 'triangle' | 'plus' | 'minus';\r\n  color?: string;\r\n  size?: number;\r\n  stroke?: number;\r\n  strokeColor?: string;\r\n  rotate?: number;\r\n}\r\n\r\nconst STROKE = 0.8;\r\n\r\nfunction insertSvg(width: number, height: number, stroke = 0, content?: string) {\r\n  const s = stroke / 2;\r\n  const svg = `<svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"${width}\"\r\n    height=\"${height}\"\r\n    viewBox=\"-${s} -${s} ${width + stroke} ${height + stroke}\"\r\n  >${content}</svg>`;\r\n  const oParser = new DOMParser();\r\n  const oDOM = oParser.parseFromString(svg, 'image/svg+xml');\r\n  return oDOM.documentElement;\r\n}\r\n\r\ntype GetPathCallback = (opt?: IconOptions) => string;\r\n\r\nexport function getIcon(opt: IconOptions = {}): WebmapIcoOptions {\r\n  // default values\r\n  const shape = opt.shape || 'circle';\r\n  const color = opt.color || 'blue';\r\n  const strokeColor = opt.strokeColor || 'white';\r\n  const size = opt.size || 12;\r\n\r\n  const anchor = size / 2;\r\n  const defSize = 12;\r\n  const stroke = typeof opt.stroke === 'number' ? opt.stroke : STROKE;\r\n  const scale = size / defSize;\r\n\r\n  const pathAlias = svgPath[shape] || 'circle';\r\n\r\n  const path = typeof pathAlias === 'string' ? pathAlias : pathAlias(opt);\r\n  const svg = insertSvg(size, size, stroke * scale, path);\r\n  const fistChild = svg.firstChild as SVGElement;\r\n\r\n  const transform = `scale(${scale})`;\r\n\r\n  fistChild.setAttribute('fill', color);\r\n  if (stroke) {\r\n    fistChild.setAttribute('stroke', strokeColor);\r\n    fistChild.setAttribute('stroke-width', String(stroke));\r\n  }\r\n  fistChild.setAttribute('transform', transform);\r\n  const s = new XMLSerializer();\r\n  return {\r\n    type: 'icon',\r\n    iconSize: [size, size],\r\n    iconAnchor: [anchor, anchor],\r\n    html: s.serializeToString(svg)\r\n  };\r\n}\r\n","import WebMap from '@nextgis/webmap';\r\nimport { NgwMapEvents } from './interfaces';\r\n\r\n/**\r\n * Decorator to run action only after map is created\r\n */\r\nexport function onMapLoad() {\r\n  return WebMap.decorators.onLoad<NgwMapEvents>('build-map');\r\n}\r\n","export function fixUrlStr(url: string) {\r\n  // remove double slash\r\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\r\n}\r\n\r\nexport function deepmerge(target: any, src: any, mergeArray = false) {\r\n  const array = Array.isArray(src);\r\n  let dst: any = array && [] || {};\r\n\r\n  if (array) {\r\n\r\n    if (mergeArray) {\r\n      target = target || [];\r\n      dst = dst.concat(target);\r\n      src.forEach(function (e: any, i: any) {\r\n        if (typeof dst[i] === 'undefined') {\r\n          dst[i] = e;\r\n        } else if (typeof e === 'object') {\r\n          dst[i] = deepmerge(target[i], e, mergeArray);\r\n        } else {\r\n          if (target.indexOf(e) === -1) {\r\n            dst.push(e);\r\n          }\r\n        }\r\n      });\r\n    } else { // Replace array. Do not merge by default\r\n      dst = src;\r\n    }\r\n  } else {\r\n    if (target && typeof target === 'object') {\r\n      Object.keys(target).forEach(function (key) {\r\n        dst[key] = target[key];\r\n      });\r\n    }\r\n    Object.keys(src).forEach(function (key) {\r\n      if (typeof src[key] !== 'object' || !src[key]) {\r\n        dst[key] = src[key];\r\n      } else {\r\n        if (typeof target[key] === 'object' && typeof src[key] === 'object') {\r\n          dst[key] = deepmerge(target[key], src[key], mergeArray);\r\n        } else {\r\n          dst[key] = src[key];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return dst;\r\n}\r\n","/**\r\n * @module ngw-map\r\n */\r\nimport WebMap, {\r\n  MapAdapter,\r\n  StarterKit,\r\n  ControlPositions,\r\n  GeoJsonAdapterOptions,\r\n  MapControls,\r\n  LayerAdaptersOptions,\r\n  Type,\r\n  LayerAdapter,\r\n  WebMapEvents\r\n} from '@nextgis/webmap';\r\nimport NgwConnector from '@nextgis/ngw-connector';\r\nimport QmsKit, { QmsAdapterOptions } from '@nextgis/qms-kit';\r\nimport NgwKit, { NgwLayerOptions } from '@nextgis/ngw-kit';\r\nimport { getIcon } from '@nextgis/icons';\r\n\r\nimport { onMapLoad } from './decorators';\r\nimport { fixUrlStr, deepmerge } from './utils';\r\n\r\nimport { NgwMapOptions, ControlOptions, NgwMapEvents } from './interfaces';\r\n\r\nconst OPTIONS: NgwMapOptions = {\r\n  target: 'map',\r\n  baseUrl: 'http://dev.nextgis.com/sandbox',\r\n  controls: ['ZOOM', 'ATTRIBUTION'],\r\n  controlsOptions: {\r\n    ZOOM: { position: 'top-left' },\r\n    ATTRIBUTION: {\r\n      position: 'bottom-right',\r\n      customAttribution: [\r\n        '<a href=\"http://nextgis.ru\" target=\"_blank\">©NextGIS</a>',\r\n      ]\r\n    }\r\n  }\r\n};\r\n\r\nfunction prepareWebMapOptions(mapAdapter: MapAdapter, options: NgwMapOptions) {\r\n  const opt: NgwMapOptions = deepmerge(OPTIONS, options);\r\n  const kits: StarterKit[] = [new QmsKit()];\r\n  const resourceId = opt.webmapId;\r\n  kits.push(new NgwKit({\r\n    baseUrl: opt.baseUrl,\r\n    auth: opt.auth,\r\n    resourceId,\r\n    identification: opt.identification\r\n  }));\r\n  return {\r\n    mapAdapter,\r\n    starterKits: kits\r\n  };\r\n}\r\n\r\n/**\r\n * Base class containing the logic of interaction WebMap with NextGIS services.\r\n *\r\n * @example\r\n * ```javascript\r\n * import NgwMap from '@nextgis/ngw-map';\r\n * import MapAdapter from '@nextgis/leaflet-map-adapter';\r\n * // styles are not included in the leaflet-map-adapter\r\n * import 'leaflet/dist/leaflet.css';\r\n *\r\n * const ngwMap = new NgwMap(new MapAdapter(), {\r\n *   target: 'map',\r\n *   qmsId: 487,\r\n *   baseUrl: 'https://demo.nextgis.com',\r\n *   webmapId: 3985\r\n * });\r\n * ```\r\n */\r\nexport class NgwMap<M = any, L = any, C = any> extends WebMap<M, L, C, NgwMapEvents> {\r\n\r\n  static utils = { ...WebMap.utils, fixUrlStr };\r\n  static decorators = { onMapLoad, ...WebMap.decorators };\r\n  static getIcon = getIcon;\r\n  static toWgs84 = NgwKit.utils.toWgs84;\r\n\r\n  options: NgwMapOptions<C> = {};\r\n  connector: NgwConnector;\r\n\r\n  protected _ngwLayers: {\r\n    [layerName: string]: {\r\n      layer: LayerAdapter,\r\n      resourceId: number\r\n    }\r\n  } = {};\r\n\r\n  /**\r\n   * @param mapAdapter #noapi\r\n   * @param options\r\n   */\r\n  constructor(mapAdapter: MapAdapter, options: NgwMapOptions<C>) {\r\n    super(prepareWebMapOptions(mapAdapter, options));\r\n\r\n    this.options = deepmerge(OPTIONS, options);\r\n    this.connector = options.connector ||\r\n      new NgwConnector({ baseUrl: this.options.baseUrl, auth: this.options.auth });\r\n\r\n    this._createWebMap().then(() => {\r\n      const container = this.getContainer();\r\n      if (container) {\r\n        container.classList.add('ngw-map-container');\r\n      }\r\n      this._addControls();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Pans and zooms the map to the initial position specified in the options\r\n   */\r\n  fit() {\r\n    const { center, zoom, bounds } = this.options;\r\n    if (center) {\r\n      this.setCenter(center);\r\n      if (zoom) {\r\n        this.setZoom(zoom);\r\n      }\r\n    } else if (bounds) {\r\n      this.fitBounds(bounds);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Organized addition to the map design and controls elements,\r\n   * calling `control.onAdd(this.webMap.mapAdapter)`\r\n   * @param control - object with onAdd and onRemove methods\r\n   *                or a string value indicating the name of the control installed in the map adapter\r\n   * @param position - position relative to the map angles\r\n   * @param [options] - initialization parameters if the control is set as a string value\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * ngwMap.addControl(new CustomControl(), 'bottom-left');\r\n   * ngwMap.addControl('ZOOM', 'top-right')\r\n   * ```\r\n   */\r\n  @WebMap.decorators.onLoad<NgwMapEvents>('controls:create')\r\n  async addControl<K extends keyof MapControls>(\r\n    controlDef: K | C,\r\n    position: ControlPositions,\r\n    options?: MapControls[K]) {\r\n    return super.addControl(controlDef, position, options);\r\n  }\r\n\r\n  /**\r\n   * Add raster layer by NGW style id or vector data layer by resource id.\r\n   * @param options - set layer identification parameters and render method.\r\n   * @param [adapterOptions] - parameters for the selected adapter\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * var ngwMap = new NgwMap({ baseUrl: 'https://demo.nextgis.com', target: 'map' });\r\n   * // add raster layer resourceId is the style of 4004 layer\r\n   * ngwMap.addNgwLayer({ resourceId: 4005 });\r\n   * // add vector data from layer GEOJSON source\r\n   * ngwMap.addNgwLayer({\r\n   *   resourceId: 4038,\r\n   *   adapter: 'GEOJSON',\r\n   *   adapterOptions: { paint: { color: 'red' } }\r\n   * });\r\n   * ```\r\n   */\r\n  @onMapLoad()\r\n  async addNgwLayer(\r\n    options: NgwLayerOptions): Promise<LayerAdapter | undefined> {\r\n\r\n    if (!options.resourceId) {\r\n      throw new Error('resourceId is required parameter to add NGW layer');\r\n    }\r\n    if (this.options.baseUrl) {\r\n      const adapter = NgwKit.utils.addNgwLayer(options, this, this.options.baseUrl, this.connector);\r\n      const layer = await this.addLayer(adapter, options.adapterOptions || {});\r\n      const id = layer && this.getLayerId(layer);\r\n      if (layer && id) {\r\n        this._ngwLayers[id] = { layer, resourceId: options.resourceId };\r\n        this.showLayer(layer);\r\n      }\r\n      return layer;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Move map to layer. If the layer is NGW resource, extent will be received from the server\r\n   * @param layerDef\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const ngwLayer = ngwMap.addNgwLayer({ id: 'ngw_layer_name', resourceId: 4005 });\r\n   * ngwMap.zoomToLayer(ngwLayer);\r\n   * ngwMap.zoomToLayer('ngw_layer_name');\r\n   * ```\r\n   */\r\n  zoomToLayer(layerDef: string | LayerAdapter) {\r\n    let id: string | undefined;\r\n    if (typeof layerDef === 'string' || typeof layerDef === 'number') {\r\n      id = String(id);\r\n    } else {\r\n      id = layerDef.id;\r\n    }\r\n    const ngwLayer = id && this._ngwLayers[id];\r\n    if (ngwLayer) {\r\n      const resourceId = ngwLayer.resourceId;\r\n      return this.connector.get('resource.item', null, { id: resourceId }).then((resp) => {\r\n        if (resp) {\r\n          if (resp.resource.cls.indexOf('style') !== -1) {\r\n            return this.connector.get('resource.item', null, {\r\n              id: resp.resource.parent.id\r\n            }).then((res) => {\r\n              return this._fitNgwLayerExtend(res.resource.id);\r\n            });\r\n          } else {\r\n            return this._fitNgwLayerExtend(resourceId);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onLoad(event: keyof NgwMapEvents = 'ngw-map:create'): Promise<this> {\r\n    return super.onLoad(event as keyof WebMapEvents);\r\n  }\r\n\r\n  private _fitNgwLayerExtend(id: number) {\r\n    return this.connector.get('layer.extent', name, { id }).then((resp) => {\r\n      if (resp) {\r\n        const { maxLat, maxLon, minLat, minLon } = resp.extent;\r\n        this.fitBounds([minLon, minLat, maxLon, maxLat]);\r\n      }\r\n    });\r\n  }\r\n\r\n  private async _createWebMap() {\r\n    await this.create({ ...this.options });\r\n    if (this.options.qmsId) {\r\n      let qmsId: number;\r\n      let qmsLayerName: string | undefined;\r\n      if (Array.isArray(this.options.qmsId)) {\r\n        qmsId = this.options.qmsId[0];\r\n        qmsLayerName = this.options.qmsId[1];\r\n      } else {\r\n        qmsId = this.options.qmsId;\r\n      }\r\n      const qmsLayerOptions: QmsAdapterOptions = {\r\n        qmsId,\r\n      };\r\n      if (qmsLayerName) {\r\n        qmsLayerOptions.id = qmsLayerName;\r\n      }\r\n\r\n      await this.addBaseLayer('QMS', qmsLayerOptions).then((layer) => {\r\n        this.showLayer(layer);\r\n      });\r\n    }\r\n\r\n    this.fit();\r\n    this._emitStatusEvent('ngw-map:create', this);\r\n  }\r\n\r\n  private _addControls() {\r\n    if (this.options.controls) {\r\n      this.options.controls.forEach((x) => {\r\n        let controlOptions: ControlOptions = {};\r\n        if (typeof x === 'string' && this.options.controlsOptions) {\r\n          controlOptions = this.options.controlsOptions[x];\r\n        }\r\n        const { position, ...options } = controlOptions;\r\n        this.addControl(x, position || 'top-left', options);\r\n      });\r\n    }\r\n    this._emitStatusEvent('controls:create');\r\n  }\r\n}\r\n","/**\r\n * @module ngw-map\r\n */\r\n\r\nimport { NgwMap } from './NgwMap';\r\n\r\nexport * from '@nextgis/webmap';\r\nexport * from './interfaces';\r\n\r\nexport { NgwMap };\r\nexport default NgwMap;\r\n","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=script&lang=ts&\"","import { MapOptions, VectorLayerAdapter } from '@nextgis/webmap';\nimport MapAdapter from '@nextgis/mapboxgl-map-adapter';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n// import MapAdapter from '@nextgis/leaflet-map-adapter';\n// import 'leaflet/dist/leaflet.css';\nimport { Vue, Component, Prop } from 'vue-property-decorator';\n// @ts-ignore\nimport geojsonExtent from '@mapbox/geojson-extent';\nimport config from '../../../config.json';\nimport NgwMap, { NgwMapOptions } from '@nextgis/ngw-map';\nimport { url } from '../../api/ngw';\n\n\nimport { BdMainItem } from '../../api/ngw';\nimport { getIcon, IconOptions } from '@nextgis/icons';\nimport { Feature, FeatureCollection, Point } from 'geojson';\n\nexport interface NgwMapComponentOptions {\n  mapOptions: NgwMapOptions;\n}\n\n@Component\nexport class NgwMapComponent extends Vue {\n\n  @Prop() center: [number, number];\n  @Prop() zoom: number;\n\n  ngwMap: NgwMap;\n\n  ready: boolean = false;\n\n  mapObject: any;\n  layer: VectorLayerAdapter;\n\n  options: NgwMapComponentOptions = {\n    mapOptions: {\n      target: 'map',\n      controlsOptions: {\n        ZOOM: { position: 'top-right' },\n        ATTRIBUTION: { position: 'bottom-right' },\n      }\n    }\n  };\n\n  markers: { [name: string]: boolean } = {};\n  selected: VectorLayerAdapter;\n\n  mounted() {\n    const target = this.$el as HTMLElement;\n    this.createWebMap({ target, center: this.center, zoom: this.zoom }).then(() => {\n      this.ready = true;\n      const items = this.$store.state.bdMain.filtered;\n      if (items && items.length) {\n        const _items = JSON.parse(JSON.stringify(items));\n        this.addMarkers(_items);\n      }\n\n      this.$store.watch((state) => state.bdMain.filtered, (_items) => {\n        _items = JSON.parse(JSON.stringify(_items));\n        this.addMarkers(_items);\n        this.zoomToFiltered();\n      });\n\n      this.$store.watch((state) => state.bdMain.detailItem, (detail: BdMainItem) => {\n        this.setSelected(detail);\n      });\n\n      this.$store.watch((state) => state.app.center, (id: number) => {\n        this.zoomTo(id);\n      });\n    });\n  }\n\n  createWebMap(options?: MapOptions) {\n\n    const mapOptions = { ...JSON.parse(JSON.stringify(this.options.mapOptions)), ...options };\n\n    this.ngwMap = new NgwMap(new MapAdapter(), {\n      baseUrl: url,\n      qmsId: config.qmsId, // 487,\n      // to remove observal\n      ...mapOptions\n    });\n    this.options.mapOptions = mapOptions;\n    return this.ngwMap.onLoad().then((x) => {\n      this.mapObject = this.ngwMap.mapAdapter.map;\n      this.ngwMap.addNgwLayer({ resourceId: config.districtsLayer });\n    });\n  }\n\n  findFirsVueParent(firstVueParent) {\n    let found = false;\n    while (!found) {\n      if (firstVueParent.mapObject === undefined) {\n        firstVueParent = firstVueParent.$parent;\n      } else {\n        found = true;\n      }\n    }\n    return firstVueParent;\n  }\n\n  addMarkers(features: BdMainItem[]) {\n    const collection: FeatureCollection = {\n      type: 'FeatureCollection',\n      features\n    };\n    const data = NgwMap.toWgs84(collection);\n    if (!this.layer) {\n      return this.ngwMap.addGeoJsonLayer({\n        data,\n        paint: (feature) => {\n          console.log(feature);\n          return this.getHistoryIcon(feature, { size: 20 });\n        },\n        selectedPaint: (feature) => {\n          return this.getHistoryIcon(feature, { size: 40 });\n        },\n        selectable: true,\n        unselectOnSecondClick: true\n      }).then((layerId) => {\n        const l = this.ngwMap.getLayer(layerId) as VectorLayerAdapter;\n        this.layer = l;\n        this.ngwMap.showLayer(l);\n        this.ngwMap.emitter.on('layer:click', ({ layer, feature, selected }) => {\n          if (layer.id === l.id) {\n            this.$store.dispatch('bdMain/setDetail', selected ? Number(feature.properties.id) : null);\n          }\n        });\n      });\n    } else {\n      this.layer.filter(({ feature }) => {\n        const id = feature.properties.id;\n        return features.some((x) => x.properties.id === id);\n      });\n    }\n\n    return this.layer;\n  }\n\n  zoomTo(id: number) {\n    if (id) {\n      const layers = this.layer && this.layer.getLayers();\n      if (layers && layers.length) {\n        const layer = layers.find((x) => x.feature.properties.id === id);\n        const feature = layer && layer.feature as Feature<Point>;\n        const lngLat = feature && feature.geometry.coordinates as [number, number];\n        if (lngLat) {\n          this.ngwMap.setView(lngLat, 14);\n          // reset zoomTo storage value\n          this.$store.dispatch('app/zoomTo', null);\n        }\n      }\n    }\n  }\n\n  setSelected(item: BdMainItem) {\n    if (item) {\n      this.layer.select(({ feature }) => feature.properties.id === (item && item.id));\n    } else {\n      // unselect all\n      this.layer.unselect();\n    }\n  }\n\n  zoomToFiltered() {\n    if (this.layer) {\n      const features = this.layer.getLayers().filter((x) => {\n        return x.visible;\n      }).map((x) => x.feature);\n      if (features.length) {\n        const extent = geojsonExtent({\n          type: 'FeatureCollection',\n          features\n        });\n        this.ngwMap.fitBounds(extent, { maxZoom: 16 });\n      }\n    }\n  }\n\n  private getHistoryIcon(feature: Feature, options?: IconOptions) {\n\n    const featureStyles = {\n      'водоем': { color: '#0000ff', shape: 'marker' },\n      'ландшафт': { color: '#008000', shape: 'marker' },\n      'памятник': { color: '#ff0000', shape: 'marker' },\n      'строение': { color: '#ffa500', shape: 'marker' },\n      'улица': { color: '#ffff00', shape: 'marker' },\n      'зона': { color: '#bbbbbb', shape: 'marker' },\n      'населенный пункт': { color: '#49423d', shape: 'marker' },\n      'район': { color: '#808080', shape: 'marker' },\n      'другой': { color: '#000000', shape: 'marker' },\n      'метро': { color: '#ffa500', shape: 'brill' },\n      'метро-2': { color: '#ff0000', shape: 'brill' },\n      'другие подземные объекты': { color: '#808080', shape: 'brill' },\n    };\n\n    let style: IconOptions = { color: '#fff', shape: 'marker' };\n    if (feature.properties.type) {\n      const featureType: string = feature.properties.type;\n      const styleId = Object.keys(featureStyles).find((x) => featureType.search(x) !== -1);\n      if (featureStyles[styleId]) {\n        style = featureStyles[styleId];\n      }\n    }\n\n    return getIcon({\n      ...style, ...options\n    });\n  }\n}\n","import { render, staticRenderFns } from \"./NgwMap.vue?vue&type=template&id=7098f862&\"\nimport script from \"./NgwMap.vue?vue&type=script&lang=ts&\"\nexport * from \"./NgwMap.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NgwMap.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7098f862', component.options)\n    } else {\n      api.reload('7098f862', component.options)\n    }\n    module.hot.accept(\"./NgwMap.vue?vue&type=template&id=7098f862&\", function () {\n      api.rerender('7098f862', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/NgwMap/NgwMap.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-form\",\n    {\n      ref: \"form\",\n      staticClass: \"pl-3 pr-3 pt-0 pb-0\",\n      model: {\n        value: _vm.form,\n        callback: function($$v) {\n          _vm.form = $$v\n        },\n        expression: \"form\"\n      }\n    },\n    [\n      _c(\"v-autocomplete\", {\n        attrs: {\n          items: _vm.areas,\n          label: \"Район\",\n          \"no-data-text\": \"Не найдено\"\n        },\n        on: { change: _vm.updateFilter },\n        model: {\n          value: _vm.rayon,\n          callback: function($$v) {\n            _vm.rayon = $$v\n          },\n          expression: \"rayon\"\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemsFilter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemsFilter.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\nimport { BdMainItemProperties } from '../../api/ngw';\n\n@Component\nexport class ItemsFilter extends Vue {\n\n  form = false;\n  years: [number, number] = [1900, 2018];\n  minYear: number = 1900;\n  maxYear: number = 2018;\n  moscow: Array<{ name: string, param: string, value?: boolean }> = [\n    { name: 'дворовая', param: 'mos1' },\n    { name: 'легендарная', param: 'mos2' },\n    { name: 'бездомная', param: 'mos3' },\n    { name: 'подземная', param: 'mos4' },\n    { name: 'церковная', param: 'mos5' },\n    { name: 'субкультурная', param: 'mos6', value: false },\n  ];\n  rayon = 'Все';\n  areas: string[] = ['Все'];\n\n  mounted() {\n\n    this.moscow.forEach((x) => {\n      x.value = x.value !== undefined ? x.value : true;\n    });\n\n    if (this.$store.state.bdMain.items) {\n      this.updateFilterAreas(this.$store.state.bdMain.items);\n    }\n    this.$store.watch((state) => state.bdMain.items, (items) => {\n      this.updateFilterAreas(items);\n    });\n\n  }\n\n  updateFilterAreas(items) {\n    const areas = {};\n    items.forEach((x) => {\n      const prop = x.properties;\n      areas[prop.rayon] = true;\n    });\n    this.areas = this.areas.concat(Object.keys(areas).sort());\n  }\n\n  updateFilter() {\n    const items = this.$store.state.bdMain.items.slice();\n\n    const filtered = items.filter((x) => {\n      const prop: BdMainItemProperties = x.properties;\n\n      if (this.rayon && this.rayon !== 'Все' && prop.rayon !== this.rayon) {\n        return false;\n      }\n      return true;\n    });\n\n    this.$store.dispatch('bdMain/setFilter', filtered);\n\n  }\n\n}\n","import { render, staticRenderFns } from \"./ItemsFilter.vue?vue&type=template&id=39e05881&\"\nimport script from \"./ItemsFilter.vue?vue&type=script&lang=ts&\"\nexport * from \"./ItemsFilter.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib'\nimport { VForm } from 'vuetify/lib'\ninstallComponents(component, {VAutocomplete,VForm})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('39e05881', component.options)\n    } else {\n      api.reload('39e05881', component.options)\n    }\n    module.hot.accept(\"./ItemsFilter.vue?vue&type=template&id=39e05881&\", function () {\n      api.rerender('39e05881', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/ItemsFilter/ItemsFilter.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.detail && _vm.meta\n    ? _c(\n        \"div\",\n        [\n          _vm.photos && _vm.photos.length\n            ? _c(\n                \"div\",\n                [\n                  _vm._l(_vm.photos, function(photo) {\n                    return _c(\n                      \"a\",\n                      {\n                        key: photo.id,\n                        on: {\n                          click: function($event) {\n                            _vm.dialog = true\n                            _vm.bigImgSrc = photo.link_big\n                          }\n                        }\n                      },\n                      [\n                        _c(\"v-img\", {\n                          staticClass: \"grey lighten-2\",\n                          attrs: { src: photo.link_small }\n                        })\n                      ],\n                      1\n                    )\n                  }),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-dialog\",\n                    {\n                      attrs: {\n                        scrollable: \"\",\n                        \"content-class\": \"photo-dialog\"\n                      },\n                      model: {\n                        value: _vm.dialog,\n                        callback: function($$v) {\n                          _vm.dialog = $$v\n                        },\n                        expression: \"dialog\"\n                      }\n                    },\n                    [\n                      _c(\n                        \"v-btn\",\n                        {\n                          staticClass: \"close-img-dialog-btn\",\n                          attrs: { color: \"info\" },\n                          on: {\n                            click: function($event) {\n                              _vm.dialog = false\n                            }\n                          }\n                        },\n                        [_vm._v(\"\\n          Закрыть\\n        \")]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\"v-img\", {\n                        attrs: { src: _vm.bigImgSrc, contain: \"\" }\n                      })\n                    ],\n                    1\n                  )\n                ],\n                2\n              )\n            : _vm._e(),\n          _vm._v(\" \"),\n          _c(\n            \"v-list\",\n            { attrs: { dense: \"\" } },\n            _vm._l(_vm.meta, function(item) {\n              return _vm.detail[item.value] && (!item.noHide ? _vm.more : true)\n                ? _c(\n                    \"v-list-tile\",\n                    { key: item.value, staticClass: \"detail-prop-list pb-3\" },\n                    [\n                      _c(\n                        \"v-list-tile-content\",\n                        [\n                          _c(\"v-list-tile-sub-title\", [\n                            _vm._v(_vm._s(item.text))\n                          ]),\n                          _vm._v(\" \"),\n                          item.type === \"Story\"\n                            ? _c(\n                                \"span\",\n                                [\n                                  _c(_vm.components[item.type], {\n                                    tag: \"component\",\n                                    attrs: { text: _vm.getText(item) }\n                                  })\n                                ],\n                                1\n                              )\n                            : _c(\"v-list-tile-title\", {\n                                domProps: {\n                                  innerHTML: _vm._s(_vm.getText(item))\n                                }\n                              })\n                        ],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                : _vm._e()\n            }),\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"text-xs-center\" },\n            [\n              _vm.needMore\n                ? _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"info\", small: \"\" },\n                      on: {\n                        click: function($event) {\n                          _vm.more = !_vm.more\n                        }\n                      }\n                    },\n                    [\n                      !_vm.more\n                        ? _c(\"span\", [_vm._v(\"Подробнее\")])\n                        : _c(\"span\", [_vm._v(\"Свернуть\")])\n                    ]\n                  )\n                : _vm._e()\n            ],\n            1\n          )\n        ],\n        1\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\r\nimport { BdMainItemProperties, BdPhotoProperties } from '../../api/ngw';\r\nimport ShowMoreField from '../ShowMoreField/ShowMoreField.vue';\r\n\r\ninterface Alias {\r\n  text: string;\r\n  value: string;\r\n  type: 'NarratorLink';\r\n  noHide?: boolean;\r\n}\r\n\r\n@Component\r\nexport class Detail extends Vue {\r\n\r\n  url: string = '';\r\n  more = false;\r\n  bigImgSrc: string = '';\r\n  dialog = false;\r\n\r\n  components = {\r\n    Story: ShowMoreField\r\n  };\r\n\r\n  get photos(): BdPhotoProperties[] {\r\n    const photo = this.$store.state.bdMain.photos.find((x: BdPhotoProperties) => {\r\n      return x.link_small && (x.id_obj === this.detail.id1);\r\n    });\r\n    return photo ? [photo] : [];\r\n    // return this.$store.state.bdMain.photos.filter((x: BdPhotoProperties) => x.id_obj === this.detail.id1);\r\n  }\r\n\r\n  get detail(): BdMainItemProperties {\r\n    return this.$store.state.bdMain.detailItem && this.$store.state.bdMain.detailItem.properties;\r\n  }\r\n\r\n  get meta(): Alias[] {\r\n    return this.$store.state.bdMain.meta;\r\n  }\r\n\r\n  get needMore(): boolean {\r\n    return this.meta.some((x) => {\r\n      return !x.noHide ? this.detail[x.value] : true;\r\n    });\r\n  }\r\n\r\n  getText(alias: Alias) {\r\n    if (alias.type) {\r\n      const value = this.detail[alias.value];\r\n      if (alias.type === 'NarratorLink') {\r\n        const names = value && this.detail[alias.value].split(',').map((x) => x.trim());\r\n        const links = this.detail.nar_codes && this.detail.nar_codes.split(',').map((x) => x.trim());\r\n        return names.map((x, i) => {\r\n          const link = links ? links[i] || links[0] : '';\r\n          const href = (this.url + '/' + link).replace(/([^:]\\/)\\/+/g, '$1');\r\n          return `<a href=\"${href}\">${x}</a>`;\r\n        }).join(', ');\r\n      } else if (alias.type === 'Mos') {\r\n        return value === 1 ? `<i\r\n          aria-hidden=\"true\"\r\n          class=\"v-icon material-icons theme--light lighten-1--text\"\r\n          style=\"color: green;\"\r\n        >check\r\n        </i>` : `<i\r\n          aria-hidden=\"true\"\r\n          class=\"v-icon material-icons theme--light lighten-1--text\"\r\n          style=\"color: red;\"\r\n        >close\r\n        </i>`;\r\n      }\r\n    }\r\n\r\n    return this.detail[alias.value];\r\n\r\n  }\r\n}\r\n","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=0f60746f&\"\nimport script from \"./Detail.vue?vue&type=script&lang=ts&\"\nexport * from \"./Detail.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VDialog } from 'vuetify/lib'\nimport { VImg } from 'vuetify/lib'\nimport { VList } from 'vuetify/lib'\nimport { VListTile } from 'vuetify/lib'\nimport { VListTileContent } from 'vuetify/lib'\nimport { VListTileSubTitle } from 'vuetify/lib'\nimport { VListTileTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VDialog,VImg,VList,VListTile,VListTileContent,VListTileSubTitle,VListTileTitle})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0f60746f', component.options)\n    } else {\n      api.reload('0f60746f', component.options)\n    }\n    module.hot.accept(\"./Detail.vue?vue&type=template&id=0f60746f&\", function () {\n      api.rerender('0f60746f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/Detail/Detail.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"drawer-container\" },\n    [\n      _vm.hasHeaderSlot\n        ? _c(\n            \"div\",\n            { staticClass: \"drawer-titlebar\" },\n            [\n              _c(\n                \"v-toolbar\",\n                [\n                  _c(\n                    \"v-toolbar-title\",\n                    { staticClass: \"drawer-title\" },\n                    [_vm._t(\"header\")],\n                    2\n                  )\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\"v-divider\")\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"drawer-content\" }, [_vm._t(\"default\")], 2),\n      _vm._v(\" \"),\n      _vm.hasFooterSlot ? _c(\"v-footer\", [_vm._t(\"footer\")], 2) : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=script&lang=ts&\"","import { Vue, Component, Prop } from 'vue-property-decorator';\r\n\r\n@Component\r\nexport class DrawerContainer extends Vue {\r\n  @Prop() header: string;\r\n\r\n  get hasFooterSlot() {\r\n    return this.hasSlot('footer');\r\n  }\r\n\r\n  get hasHeaderSlot() {\r\n    return this.hasSlot('header');\r\n  }\r\n\r\n  hasSlot(name = 'default') {\r\n    return !!this.$slots[ name ] || !!this.$scopedSlots[ name ];\r\n  }\r\n}\r\n","import { render, staticRenderFns } from \"./DrawerContainer.vue?vue&type=template&id=42acd271&\"\nimport script from \"./DrawerContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./DrawerContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VDivider } from 'vuetify/lib'\nimport { VFooter } from 'vuetify/lib'\nimport { VToolbar } from 'vuetify/lib'\nimport { VToolbarTitle } from 'vuetify/lib'\ninstallComponents(component, {VDivider,VFooter,VToolbar,VToolbarTitle})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('42acd271', component.options)\n    } else {\n      api.reload('42acd271', component.options)\n    }\n    module.hot.accept(\"./DrawerContainer.vue?vue&type=template&id=42acd271&\", function () {\n      api.rerender('42acd271', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/DrawerContainer/DrawerContainer.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [_vm._t(\"default\")], 2)\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","function capitalizeFirstLetter(str) {\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\nexport default (vueElement, leafletElement, props, options?) => {\r\n  const keys = Object.keys(props);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    const setMethodName = 'set' + capitalizeFirstLetter(key);\r\n    const deepValue = (props[key].type === Object) ||\r\n      (props[key].type === Array) ||\r\n      (Array.isArray(props[key].type));\r\n    if (props[key].custom) {\r\n      vueElement.$watch(key, (newVal, oldVal) => {\r\n        vueElement[setMethodName](newVal, oldVal);\r\n      }, {\r\n        deep: deepValue\r\n      });\r\n    } else if (setMethodName === 'setOptions') {\r\n      vueElement.$watch(key, (newVal, oldVal) => {\r\n        leafletElement.options = leafletElement.options || {};\r\n        leafletElement.options = {...leafletElement.options, ...newVal};\r\n      }, {\r\n        deep: deepValue\r\n      });\r\n    } else {\r\n      vueElement.$watch(key, (newVal, oldVal) => {\r\n        leafletElement[setMethodName](newVal);\r\n      }, {\r\n        deep: deepValue\r\n      });\r\n    }\r\n  }\r\n};\r\n","export const collectionCleaner = (options) => {\r\n  const result = {};\r\n  for (const key in options) {\r\n    if (options.hasOwnProperty(key)) {\r\n      const value = options[key];\r\n      if (value !== null && value !== undefined) {\r\n        result[key] = value;\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const optionsMerger = (props, instance) => {\r\n  const options = instance.options && instance.options.constructor === Object ? instance.options : {};\r\n  props = props && props.constructor === Object ? props : {};\r\n  const result = { ...collectionCleaner(options) };\r\n  props = collectionCleaner(props);\r\n  const defaultProps = instance.$options.props;\r\n  for (const key in props) {\r\n    if (props.hasOwnProperty(key)) {\r\n      const def = defaultProps[key] ? defaultProps[key].default : Symbol('unique');\r\n      if (result[key] && def !== props[key]) {\r\n        console.warn(`${key} props is overriding the value passed in the options props`);\r\n        result[key] = props[key];\r\n      } else if (!result[key]) {\r\n        result[key] = props[key];\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n};\r\n","export default {\r\n  props: {\r\n    position: {\r\n      type: String,\r\n      default: 'topright'\r\n    },\r\n    options: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  mounted() {\r\n    this.controlOptions = {\r\n      position: this.position\r\n    };\r\n  },\r\n  beforeDestroy() {\r\n    if (this.mapObject) {\r\n      this.mapObject.remove();\r\n    }\r\n  }\r\n};\r\n","import { EventEmitter } from 'events';\r\nimport {ControlPositions} from '@nextgis/webmap';\r\n\r\nexport interface PanelOptions {\r\n  headerText?: string;\r\n  addClass?: string;\r\n  position: ControlPositions;\r\n}\r\n\r\nexport class PanelControl {\r\n\r\n  element;\r\n\r\n  options: PanelOptions;\r\n\r\n  emitter = new EventEmitter();\r\n\r\n  _header: HTMLElement;\r\n  _blocked: boolean = false;\r\n  private _container: HTMLElement;\r\n  private _body: HTMLElement;\r\n\r\n\r\n  constructor(options?: PanelOptions) {\r\n    this.options = Object.assign({}, this.options, options);\r\n    this._header = null;\r\n    this._body = null;\r\n    this._container = this._createContainer();\r\n  }\r\n\r\n  onAdd() {\r\n    return this.element;\r\n  }\r\n\r\n  setElement(el) {\r\n    this.element = el;\r\n  }\r\n\r\n  onRemove() {\r\n    this.removeFrom();\r\n  }\r\n\r\n  removeFrom() {\r\n    const parentNode = this._container && this._container.parentNode;\r\n    if (parentNode) {\r\n      parentNode.removeChild(this._container);\r\n    }\r\n  }\r\n\r\n  updateBody(content: string | HTMLElement) {\r\n    this._cleanBody();\r\n    if (typeof content === 'string') {\r\n      this._body.innerHTML = content;\r\n    } else if (content instanceof HTMLElement) {\r\n      this._body.appendChild(content);\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    this._container.classList.add('panel-hide');\r\n    this.emitter.emit('toggle', false);\r\n  }\r\n\r\n  show() {\r\n    if (!this._blocked) {\r\n      this._container.classList.remove('panel-hide');\r\n      this.emitter.emit('toggle', true);\r\n    }\r\n  }\r\n\r\n  private _cleanBody() {\r\n    if (this._body) {\r\n      this._body.innerHTML = '';\r\n    }\r\n  }\r\n\r\n  private _createContainer() {\r\n    const element = document.createElement('div');\r\n    // element.className = 'leaflet-bar leaflet-control';\r\n    if (this.options.addClass) {\r\n      this.options.addClass.split('-').forEach((x) => element.classList.add(x));\r\n    }\r\n    if (this.options.headerText) {\r\n      element.appendChild(this._createHeader());\r\n    }\r\n    element.appendChild(this._createBody());\r\n    return element;\r\n  }\r\n\r\n  private _createHeader() {\r\n    const element = document.createElement('div');\r\n    element.className = 'panel-header';\r\n\r\n    element.innerHTML = this.options.headerText;\r\n\r\n    this._header = element;\r\n    return element;\r\n  }\r\n\r\n  private _createBody() {\r\n    const element = document.createElement('div');\r\n    element.className = 'panel-body';\r\n\r\n    this._body = element;\r\n    return element;\r\n  }\r\n}\r\n","import mod from \"-!../../../../node_modules/ts-loader/index.js??ref--1!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/ts-loader/index.js??ref--1!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=ts&\"","import propsBinder from './utils/propsBinder';\nimport findRealParent from './utils/findRealParent';\nimport { optionsMerger } from './utils/optionsUtils';\nimport Control from './mixins/Control';\nimport { PanelControl, PanelOptions } from './PanelControl';\nimport NgwMap from '@nextgis/ngw-map';\n\nexport const panel = {\n  name: 'LControl',\n  mixins: [Control],\n  mounted() {\n    this.parentContainer = findRealParent(this.$parent);\n    const ngwMap = this.parentContainer.ngwMap as NgwMap;\n    const options = optionsMerger(this.controlOptions, this) as PanelOptions;\n    this.control = new PanelControl(options);\n    this.mapObject = ngwMap.createControl(this.control);\n    propsBinder(this, this.mapObject, this.$options.props);\n    this.control.setElement(this.$el);\n    ngwMap.addControl(this.mapObject, options.position);\n  }\n};\n","export default (firstVueParent) => {\n  let found = false;\n  while (!found) {\n    if (firstVueParent.ngwMap === undefined) {\n      firstVueParent = firstVueParent.$parent;\n    } else {\n      found = true;\n    }\n  }\n  return firstVueParent;\n};\n","import { render, staticRenderFns } from \"./Panel.vue?vue&type=template&id=90301248&\"\nimport script from \"./Panel.vue?vue&type=script&lang=ts&\"\nexport * from \"./Panel.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('90301248', component.options)\n    } else {\n      api.reload('90301248', component.options)\n    }\n    module.hot.accept(\"./Panel.vue?vue&type=template&id=90301248&\", function () {\n      api.rerender('90301248', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/NgwMap/controls/Panel.vue\"\nexport default component.exports","import mod from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\r\nimport List from './components/List/List.vue';\r\nimport NgwMap from './components/NgwMap/NgwMap.vue';\r\nimport ItemsFilter from './components/ItemsFilter/ItemsFilter.vue';\r\nimport Detail from './components/Detail/Detail.vue';\r\nimport DrawerContainer from './components/DrawerContainer/DrawerContainer.vue';\r\nimport { BdMainItemProperties } from './api/ngw';\r\nimport MapControl from './components/NgwMap/controls/Panel.vue';\r\nimport { AppPages } from './store/modules/app';\r\nimport throttle from './store/utils/throttle';\r\n\r\n@Component({\r\n  components: {List, NgwMap, ItemsFilter, Detail, DrawerContainer, MapControl},\r\n})\r\nexport class Main extends Vue {\r\n\r\n  throtleSave;\r\n\r\n  get listSearchText(): string {\r\n    return this.$store.state.app.listSearchText;\r\n  }\r\n\r\n  set listSearchText(value: string) {\r\n    this.throtleSave(value);\r\n  }\r\n\r\n  get page(): AppPages {\r\n    return this.$store.state.app.page;\r\n  }\r\n\r\n  set page(value: AppPages) {\r\n    this.$store.dispatch('app/setPage', value);\r\n  }\r\n\r\n  get zoomTo(): number {\r\n    return this.$store.state.app.zoomTo;\r\n  }\r\n\r\n  set zoomTo(value: number) {\r\n    this.$store.dispatch('app/zoomTo', value);\r\n  }\r\n\r\n  get drawer(): boolean {\r\n    return this.$store.state.app.drawer;\r\n  }\r\n\r\n  set drawer(value: boolean) {\r\n    this.$store.dispatch('app/toggleDrawer', value);\r\n  }\r\n\r\n  get items(): BdMainItemProperties[] {\r\n    return this.$store.state.bdMain.items.map((x) => x.properties);\r\n  }\r\n\r\n  get detail(): BdMainItemProperties {\r\n    return this.$store.state.bdMain.detailItem;\r\n  }\r\n\r\n  set detail(value: BdMainItemProperties) {\r\n    this.$store.dispatch('bdMain/setDetail', value);\r\n  }\r\n\r\n  mounted() {\r\n    this.throtleSave = throttle(this.setListSearchText, 1000, this);\r\n  }\r\n\r\n  created() {\r\n    this.$store.dispatch('bdMain/getAllItems');\r\n    this.$store.dispatch('bdMain/getPhotos');\r\n  }\r\n\r\n  setListSearchText(value) {\r\n    this.$store.dispatch('app/setListSearchText', value);\r\n  }\r\n\r\n}\r\n","export default function throttle(fn, time, context?) {\r\n  let lock;\r\n  let args;\r\n  let wrapperFn;\r\n  let later;\r\n\r\n  later = function() {\r\n    // reset lock and call if queued\r\n    lock = false;\r\n    if (args) {\r\n      wrapperFn.apply(context, args);\r\n      args = false;\r\n    }\r\n  };\r\n\r\n  wrapperFn = function() {\r\n    if (lock) {\r\n      // called too soon, queue to call later\r\n      args = arguments;\r\n\r\n    } else {\r\n      // call and lock until later\r\n      fn.apply(context, arguments);\r\n      setTimeout(later, time);\r\n      lock = true;\r\n    }\r\n  };\r\n\r\n  return wrapperFn;\r\n}\r\n","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=3ffae6b2&\"\nimport script from \"./Main.vue?vue&type=script&lang=ts&\"\nexport * from \"./Main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VBtn } from 'vuetify/lib'\nimport { VContent } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VItemGroup } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\nimport { VNavigationDrawer } from 'vuetify/lib'\nimport { VProgressCircular } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\ninstallComponents(component, {VApp,VBtn,VContent,VIcon,VItemGroup,VLayout,VNavigationDrawer,VProgressCircular,VTextField})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3ffae6b2', component.options)\n    } else {\n      api.reload('3ffae6b2', component.options)\n    }\n    module.hot.accept(\"./Main.vue?vue&type=template&id=3ffae6b2&\", function () {\n      api.rerender('3ffae6b2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/Main.vue\"\nexport default component.exports","import mod from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\nimport { AppPages } from './store/modules/app';\nimport AboutComponent from './components/NextGIS/About.vue';\nimport TableComponent from './components/Table/Table.vue';\nimport MainComponent from './Main.vue';\n\n@Component({\n  components: { MainComponent, TableComponent, AboutComponent }\n})\nexport class App extends Vue {\n\n  tableSearch: string = '';\n  pagination: any = null;\n\n  get page(): AppPages {\n    return this.$store.state.app.page;\n  }\n\n  set page(value: AppPages) {\n    this.$store.dispatch('app/setPage', value);\n  }\n\n\n  get pages() {\n    if (this.pagination && (this.pagination.rowsPerPage === null ||\n      this.pagination.totalItems === null)) {\n      return 0;\n    }\n\n    return Math.ceil(this.pagination.totalItems / this.pagination.rowsPerPage);\n  }\n\n  paginationSync(value) {\n    this.pagination = value;\n  }\n}\n","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7ba5bd90&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/rendr/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VBtn } from 'vuetify/lib'\nimport { VCard } from 'vuetify/lib'\nimport { VDialog } from 'vuetify/lib'\nimport { VFooter } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VPagination } from 'vuetify/lib'\nimport { VSpacer } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\nimport { VToolbar } from 'vuetify/lib'\nimport { VToolbarItems } from 'vuetify/lib'\ninstallComponents(component, {VApp,VBtn,VCard,VDialog,VFooter,VIcon,VPagination,VSpacer,VTextField,VToolbar,VToolbarItems})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\rendr\\\\nextgis\\\\oralhistory\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7ba5bd90', component.options)\n    } else {\n      api.reload('7ba5bd90', component.options)\n    }\n    module.hot.accept(\"./App.vue?vue&type=template&id=7ba5bd90&\", function () {\n      api.rerender('7ba5bd90', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/App.vue\"\nexport default component.exports","import Vue from 'vue';\n// import VueRouter from 'vue-router';\n// import { router } from './routes';\nimport store from './store';\nimport App from './App.vue';\nimport { version } from '../package.json';\nimport Vuetify from 'vuetify/lib';\nimport 'vuetify/src/stylus/app.styl';\n// import 'material-design-icons-iconfont/dist/material-design-icons.css';\n\nVue.use(Vuetify);\n// Vue.use(VueRouter);\n\nconst app = new Vue({\n  // router,\n  store,\n  render: h => h(App),\n});\napp.$mount('#app');\n\ndeclare global {\n  interface Window {\n    version: string;\n  }\n}\n\nwindow.version = version;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1105c31d\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"48d11e2d\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"de092f2e\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7b48c236\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"341cfa2f\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6b7af3b1\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"23e247aa\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\r\n/* tslint:disable */\r\n// https://github.com/taylorhakes/promise-polyfill\r\n// Copyright (c) 2014 Taylor Hakes\r\n// Copyright (c) 2014 Forbes Lindesay\r\n\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n// @ts-ignore\r\n!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n():\"function\"==typeof define&&define.amd?define(n):n()}(0,function(){\"use strict\";function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e){if(!(this instanceof t))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],u(e,this)}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(f){return void i(n.promise,f)}r(n.promise,o)}else(1===e._state?r:i)(n.promise,e._value)})):e._deferreds.push(n)}function r(e,n){try{if(n===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(n&&(\"object\"==typeof n||\"function\"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if(\"function\"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments)}}(o,n),e)}e._state=1,e._value=n,f(e)}catch(r){i(e,r)}}function i(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var n=0,r=e._deferreds.length;r>n;n++)o(e,e._deferreds[n]);e._deferreds=null}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,r(n,e))},function(e){t||(t=!0,i(n,e))})}catch(o){if(t)return;t=!0,i(n,o)}}var c=setTimeout;t.prototype[\"catch\"]=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof n?n:null,this.promise=t}(e,t,r)),r},t.prototype[\"finally\"]=e,t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&(\"object\"==typeof f||\"function\"==typeof f)){var u=f.then;if(\"function\"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0==--i&&n(r)}catch(c){t(c)}}if(!e||\"undefined\"==typeof e.length)throw new TypeError(\"Promise.all accepts an array\");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f])})},t.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===t?e:new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,t){t(e)})},t.race=function(e){return new t(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t)})},t._immediateFn=\"function\"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e)};var l=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof global)return global;throw Error(\"unable to locate global object\")}();\"Promise\"in l?l.Promise.prototype[\"finally\"]||(l.Promise.prototype[\"finally\"]=e):l.Promise=t});\r\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".logo {\\n  width: 300px;\\n  vertical-align: middle;\\n  cursor: pointer;\\n}\\n.logo .logo__item--dark,\\n  .logo .logo__item--light {\\n    fill: #aec8e0;\\n    transition: fill .3s;\\n}\\n.logo .logo__item--dark {\\n    fill: rgba(35, 31, 32, 0.685);\\n}\\n.logo .logo__item--light {\\n    fill: rgba(23, 111, 193, 0.747);\\n}\\n.logo:hover .logo__item--dark {\\n    fill: #231F20;\\n}\\n.logo:hover .logo__item--light {\\n    fill: #176FC1;\\n}\\n.logo--mini {\\n  width: 20px;\\n  height: 20px;\\n  left: 10px;\\n  top: 14px;\\n  z-index: 10;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"C:/Users/rendr/nextgis/oralhistory/src/components/NextGIS/About.vue\"],\"names\":[],\"mappings\":\"AA+CA;EACI,YAAY;EACZ,sBAAsB;EACtB,eAAe;AAAA;AAHnB;;IAOI,aATe;IAUf,oBAAoB;AAAA;AARxB;IAYI,6BAA6B;AAAA;AAZjC;IAeI,+BAA+B;AAAA;AAfnC;IAqBM,aAAa;AAAA;AArBnB;IAwBM,aAAa;AAAA;AAKnB;EACI,WAAW;EACX,YAAY;EACZ,UAAU;EACV,SAAS;EACT,WAAW;AAAA\",\"file\":\"About.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n$dark-blue: #aec8e0;\\n\\n.logo{\\n    width: 300px;\\n    vertical-align: middle;\\n    cursor: pointer;\\n\\n  .logo__item--dark,\\n  .logo__item--light{\\n    fill: $dark-blue;\\n    transition: fill .3s;\\n  }\\n\\n  .logo__item--dark{\\n    fill: rgba(35, 31, 32, 0.685);\\n  }\\n  .logo__item--light{\\n    fill: rgba(23, 111, 193, 0.747);\\n  }\\n\\n\\n  &:hover{\\n    .logo__item--dark{\\n      fill: #231F20;\\n    }\\n    .logo__item--light{\\n      fill: #176FC1;\\n    }\\n  }\\n}\\n\\n.logo--mini{\\n    width: 20px;\\n    height: 20px;\\n    left: 10px;\\n    top: 14px;\\n    z-index: 10;\\n}\\n\"]}]);\n\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".v-table__overflow {\\n  overflow-x: inherit;\\n  overflow-y: inherit;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"C:/Users/rendr/nextgis/oralhistory/src/components/Table/Table.vue\"],\"names\":[],\"mappings\":\"AAkCA;EACE,mBAAmB;EACnB,mBAAmB;AAAA\",\"file\":\"Table.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n\\r\\n.v-table__overflow {\\r\\n  overflow-x: inherit;\\r\\n  overflow-y: inherit;\\r\\n}\\r\\n\"]}]);\n\n"],"sourceRoot":""}