(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,n){"use strict";var r=n(40);n.n(r).a},101:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.v-table__overflow {\n  overflow-x: inherit;\n  overflow-y: inherit;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/Table/C:/Users/rendr/nextgis/oralhistory/src/components/Table/Table.vue"],names:[],mappings:";AA+BA;EACE,oBAAmB;EACnB,oBAAmB;CACpB",file:"Table.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.v-table__overflow {\n  overflow-x: inherit;\n  overflow-y: inherit;\n}\n"],sourceRoot:""}])},145:function(t,e,n){"use strict";var r=n(41);n.n(r).a},146:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"List.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},157:function(t,e,n){"use strict";var r=n(42);n.n(r).a},158:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/NgwMap/C:/Users/rendr/nextgis/oralhistory/src/components/NgwMap/NgwMap.vue"],names:[],mappings:";AAWA;EACE,mBAAkB;EAClB,OAAM;EACN,UAAS;EACT,YAAW;EACX,aAAY;EACZ,YAAW;CACZ",file:"NgwMap.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n"],sourceRoot:""}])},159:function(t,e,n){"use strict";var r=n(43);n.n(r).a},160:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ItemsFilter.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},163:function(t,e,n){"use strict";var r=n(44);n.n(r).a},164:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ShowMoreField.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},165:function(t,e,n){"use strict";var r=n(45);n.n(r).a},166:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.detail-prop-list .v-list__tile {\n  height: auto !important;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/Detail/C:/Users/rendr/nextgis/oralhistory/src/components/Detail/Detail.vue"],names:[],mappings:";AAmCA;EACE,wBAAsB;CACvB",file:"Detail.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.detail-prop-list .v-list__tile {\n  height: auto!important;\n}\n\n"],sourceRoot:""}])},167:function(t,e,n){"use strict";var r=n(46);n.n(r).a},168:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.drawer-titlebar {\n  flex-shrink: 0;\n}\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.drawer-title {\n  width: 100%;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/DrawerContainer/C:/Users/rendr/nextgis/oralhistory/src/components/DrawerContainer/DrawerContainer.vue"],names:[],mappings:";AA4BA;EACE,YAAW;EACX,aAAY;EACZ,cAAa;EACb,uBAAsB;CACvB;AAED;EAEE,eAAc;CACf;AAED;EACE,aAAY;EACZ,iBAAgB;EAChB,mBAAkB;CACnB;AAED;EACE,YACF;CAAC",file:"DrawerContainer.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.drawer-titlebar {\n  // height: 35px;\n  flex-shrink: 0;\n}\n\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.drawer-title {\n  width: 100%\n}\n"],sourceRoot:""}])},173:function(t,e,n){"use strict";var r=n(47);n.n(r).a},174:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Panel.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},175:function(t,e,n){"use strict";var r=n(48);n.n(r).a},176:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.drawe-icon.active {\n  -webkit-transform: rotate(-180deg);\n  transform: rotate(-180deg);\n}\n.bottom-button {\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n}\n.bottom-button .v-btn {\n    flex-grow: 1;\n    margin: 0;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/C:/Users/rendr/nextgis/oralhistory/src/Main.vue"],names:[],mappings:";AAmHA;EAEI,mCAAkC;EAClC,2BAA0B;CAC3B;AAGH;EACE,YAAW;EACX,cAAa;EACb,8BAA6B;CAK9B;AARD;IAKI,aAAY;IACZ,UAAS;CACV",file:"Main.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drawe-icon {\n  &.active {\n    -webkit-transform: rotate(-180deg);\n    transform: rotate(-180deg);\n  }\n}\n\n.bottom-button {\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  .v-btn {\n    flex-grow: 1;\n    margin: 0;\n  }\n}\n"],sourceRoot:""}])},187:function(t,e,n){"use strict";var r=n(49);n.n(r).a},188:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n* {\n  padding: 0;\n  margin: 0;\n}\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden !important;\n}\n.fullscreen-dialog .dialog-titlebar {\n  flex-shrink: 0;\n}\n.fullscreen-dialog .dialog-body {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: auto;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/C:/Users/rendr/nextgis/oralhistory/src/App.vue"],names:[],mappings:";AAmDA;EACE,WAAU;EACV,UAAS;CACV;AAED;EACE,YAAW;EACX,aAAY;EACZ,4BAA2B;CAC5B;AAED;EAGI,eAAc;CACf;AAJH;EAOI,aAAY;EACZ,iBAAgB;EAChB,iBAAgB;CACjB",file:"App.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n* {\n  padding: 0;\n  margin: 0;\n}\n\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden !important;\n}\n\n.fullscreen-dialog {\n\n  .dialog-titlebar {\n    flex-shrink: 0;\n  }\n\n  .dialog-body {\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: auto;\n  }\n}\n\n"],sourceRoot:""}])},197:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(77);n(92);var i=/\{ *([\w_-]+) *\}/g;function a(t,e){return t.replace(i,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for letiable "+t);return"function"==typeof r&&(r=r(e)),r})}var s=n(17),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},p=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l={route:"/api/component/pyramid/route"},f=function(){function t(t){this.options={},this.emitter=new s.EventEmitter,this._loadingQueue={},this._loadingStatus={},this.options=c({},l,t||{})}return t.prototype.connect=function(){return u(this,void 0,void 0,function(){var t,e,n,r=this;return p(this,function(o){switch(o.label){case 0:return this.route?[2,Promise.resolve(this.route)]:[3,1];case 1:return this.options.auth?(t=this.options.auth,e=t.login,n=t.password,e&&n?[4,this.getUserInfo()]:[3,3]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.makeQuery(this.options.route,{},{}).then(function(t){return r.route=t,t})];case 4:return[2,o.sent()]}})})},t.prototype.getUserInfo=function(){var t=this;return this.makeQuery("/api/component/auth/current_user",{},{headers:this.getAuthorizationHeaders(),withCredentials:!0}).then(function(e){return t.user=e,t.emitter.emit("login",e),e}).catch(function(e){throw t.emitter.emit("login:error",e),e})},t.prototype.getAuthorizationHeaders=function(){return{Authorization:"Basic "+this.makeClientId()}},t.prototype.makeClientId=function(){var t=this.options.auth,e=t.login,n=t.password;return window.btoa(unescape(encodeURIComponent(e+":"+n)))},t.prototype.request=function(t,e,n){var r=this;return this.connect().then(function(o){for(var i in o)if(o.hasOwnProperty(i)&&i===t){var s=o[i].slice(),c=s.shift();if(s.length){e=e||{};for(var u={},p=0;p<s.length;p++){var l=s[p];if(u[p]="{"+l+"}",void 0===e[l])throw new Error("`"+l+"` url api argument is not specified")}c=a(c,u)}return r.makeQuery(c,e,n)}})},t.prototype.post=function(t,e,n){return(e=e||{}).method="POST",e.nocache=!0,this.request(t,n,e)},t.prototype.makeQuery=function(t,e,n){var r=this;if(void 0===n&&(n={}),t=(this.options.baseUrl?this.options.baseUrl:"")+t)return e&&(t=a(t,e)),t=t.replace(/([^:]\/)\/+/g,"$1"),!this._loadingStatus[t]||n.nocache?(this._loadingStatus[t]=!0,this._getJson(t,n).then(function(e){return r._loadingStatus[t]=!1,r._executeLoadingQueue(t,e),e}).catch(function(e){throw r._loadingStatus[t]=!1,r._executeLoadingQueue(t,e,!0),r.emitter.emit("error",e),e})):(this._loadingStatus[t]=!1,new Promise(function(e,n){r._setLoadingQueue(t,e,n)}));throw new Error("No `url` parameter set for option "+name)},t.prototype._setLoadingQueue=function(t,e,n){this._loadingQueue[t]=this._loadingQueue[t]||{name:t,waiting:[]},this._loadingQueue[t].waiting.push({resolve:e,reject:n,timestamp:new Date})},t.prototype._executeLoadingQueue=function(t,e,n){var r=this._loadingQueue[t];if(r){for(var o=0;o<r.waiting.length;o++){var i=r.waiting[o];n?i.reject&&i.reject():i.resolve(e)}r.waiting=[]}},t.prototype._getJson=function(t,e){var n=this;return new Promise(function(r,o){n.user&&((e=e||{}).headers=n.getAuthorizationHeaders()),function(t,e,n,r){var o;void 0===n&&(n={}),n.method=n.method||"GET",(o=new XMLHttpRequest).open(n.method||"GET",t,!0);var i=function(t){void 0===t&&(t=!1);var n=t?r:e;if(o.responseText)try{n(JSON.parse(o.responseText))}catch(t){r({message:""})}else r({message:""})};o.onreadystatechange=function(){4===o.readyState&&200===o.status||3===o.readyState&&201===o.status?i():3===o.readyState&&400===o.status?i():4===o.readyState&&500===o.status&&i()},o.onerror=function(t){r(t)},o.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;n.onProgress&&n.onProgress(e)}};var a,s=n.headers;if(s)for(var c in s)s.hasOwnProperty(c)&&o.setRequestHeader(c,s[c]);if(o.withCredentials=n.withCredentials,n.file){if((a=new FormData).append("file",n.file),n.data)for(var u in a)a.hasOwnProperty(u)&&a.append(u,a[u])}else a=n.data?JSON.stringify(n.data):null;o.send(a)}(t,r,e,o)})},t}(),h=n(50),d=new f({baseUrl:h.baseUrl}),y=function(t){d.request("feature_layer.geojson",{id:10}).then(function(e){e.features.forEach(function(t,e){t.properties.id=Number(t.id||e)}),t(e.features)})},v=function(t){t([{text:"Адрес",value:"addr",noHide:!0},{text:"Название объекта",value:"name",noHide:!0},{text:"Тип объекта",value:"type",noHide:!0},{text:"Статус объекта",value:"status",noHide:!0},{text:"Район",value:"rayon",noHide:!0},{text:"Неофициальное название",value:"unoff",noHide:!0},{text:"ОПИСАНИЕ",value:"description",noHide:!0},{text:"Истории о прошлом",value:"narrativ_l",type:"Story"},{text:"Семейные истории",value:"narrativ_b",type:"Story"},{text:"Практики горожан",value:"narrativ_p",type:"Story"},{text:"Характеристика места",value:"descript2",type:"Story"},{text:"Рассказчик",value:"narrator",type:"NarratorLink"},{text:"Визуальные материалы",value:"visual"},{text:"Москва дворовая",value:"mos1",type:"Mos"},{text:"Москва церковная",value:"mos2",type:"Mos"},{text:"Москва бездомная",value:"mos3",type:"Mos"},{text:"Москва подземная",value:"mos4",type:"Mos"},{text:"Москва субкультурная",value:"mos5",type:"Mos"},{text:"Москва легендарная",value:"mos6",type:"Mos"}])},m={namespaced:!0,state:{items:[],meta:!1,filtered:[],detailItem:!1},getters:{features:function(t,e,n){return t.filtered},sortFeatures:function(t,e,n){return t.filtered.slice().sort(function(t,e){return t.properties.name.toUpperCase()>e.properties.name.toUpperCase()?1:-1})}},actions:{getAllItems:function(t){var e=t.commit;v(function(t){e("setMeta",t),y(function(t){e("setItems",t)})})},setFilter:function(t,e){var n=t.commit,r=t.state;n("setFilter",e);var o=r.detailItem;o&&(e.find(function(t){return t.id===o.id})||n("setDetail",!1))},setDetail:function(t,e){var n=t.commit,r=t.state,o=r.filtered.find(function(t){return t.id===e}),i=r.detailItem;i&&i.id===e&&(o=!1),n("setDetail",o)}},mutations:{setItems:function(t,e){t.items=e,t.filtered=e},setFilter:function(t,e){t.filtered=e},setDetail:function(t,e){t.detailItem=e},setMeta:function(t,e){t.meta=e}}},g={namespaced:!0,state:{drawer:!0,page:"main",center:null},getters:{},actions:{showDrawer:function(t){(0,t.commit)("showDrawer")},hideDrawer:function(t){(0,t.commit)("hideDrawer")},toggleDrawer:function(t,e){var n=t.commit;n(e?"showDrawer":"hideDrawer")},setPage:function(t,e){(0,t.commit)("setPage",e)},zoomTo:function(t,e){(0,t.commit)("setCenter",e)}},mutations:{showDrawer:function(t){t.drawer=!0},hideDrawer:function(t){t.drawer=!1},setPage:function(t,e){t.page=e},setCenter:function(t,e){t.center=e}}};r.default.use(o.a);var _=new o.a.Store({modules:{bdMain:m,app:g},strict:!1}),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("main-component"),t._v(" "),n("v-dialog",{attrs:{value:"table"===t.page,fullscreen:"",scrollable:"",transition:"dialog-bottom-transition"}},[n("v-card",{staticClass:"fullscreen-dialog"},[n("v-toolbar",{staticClass:"dialog-titlebar",attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.page="main"}}},[n("v-icon",[t._v("close")])],1),t._v(" "),n("span",{staticClass:"title ml-3 mr-5"},[t._v("Устная память Москвы "),n("span",{staticClass:"font-weight-light"},[t._v("Таблица")])]),t._v(" "),n("v-text-field",{attrs:{"solo-inverted":"",flat:"","hide-details":"",label:"Поиск","prepend-inner-icon":"search"},model:{value:t.tableSearch,callback:function(e){t.tableSearch=e},expression:"tableSearch"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",flat:""}},[t._v("Сохранить")])],1)],1),t._v(" "),n("div",{staticClass:"dialog-body"},["table"===t.page?n("table-component",{attrs:{search:t.tableSearch,paginationSync:t.paginationSync}}):"about"===t.page?n("about-component"):t._e()],1),t._v(" "),t.pagination&&t.pagination.page?n("v-footer",{staticClass:"pt-3 pb-4"},[n("div",{staticClass:"text-xs-center pt-1"},[n("v-pagination",{attrs:{length:t.pages,"total-visible":7},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)]):t._e()],1)],1)],1)};b._withStripped=!0;var w=n(8),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-layout",{attrs:{"align-center":"","justify-center":"",column:"","fill-height":""}},[n("div",{staticClass:"title font-weight-thin pa-3"},[t._v("Разработано в")]),t._v(" "),n("div",{staticClass:"logo",on:{click:t.openNextGIS}},[n("svg",{staticClass:"logo hidden-xs",staticStyle:{"enable-background":"new 0 0 818.8 111.5"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 818.8 111.5","xml:space":"preserve"}},[n("path",{staticClass:"logo__item--dark",attrs:{d:"M0,111.5V0.1h7.4l69.9,69.8V0.1h22.3v111.4h-8.2L22.3,42.4v69.1\n              H0"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M225.8,111.5V0.1l-81.9-0.1v20.8h59.6v23.8h-34v20.7h34v25.3H144\n              v20.8L225.8,111.5"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M502.3,0.1v20.8h-37.1v90.6h-22.3V20.9h-37.1V0.1L502.3,0.1"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M550.4,95.5c-10.7-10.6-16-23.9-16-39.9\n              c0.1-15.7,5.4-28.8,16-39.5c10.6-10.7,23.9-16,39.6-16c15.9,0,29.5,5,40.9,14.9l-14.9,16.3c-7.6-5.9-16.3-8.9-26.1-8.9\n              c-10,0-18.1,3.2-24.2,9.4c-6.1,6.2-9.2,14.1-9.2,23.8c0.1,10.4,3.2,18.6,9.3,24.7c6.1,6.1,14.2,9.1,24.2,9.1c8,0,14.2-1.6,18.5-4.8\n              V65.4l-14.9,0.1V44.7H631v52c-11.3,9.9-25,14.9-40.9,14.9C574.3,111.5,561,106.1,550.4,95.5"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M674.9,111.5h22.2V0h-22.2V111.5z"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M801.4,3.8c5.7,2.5,11,6.2,16,11.2l-14.9,14.9\n              c-5-6-11.9-8.9-20.8-8.9c-8.9,0-14.6,2.1-17.1,6.3c-2.5,4.2-2.5,7.8,0,10.8c2.5,3,8.2,5.2,17.1,6.7c9.4,1,18,4.1,25.6,9.3\n              c7.7,5.2,11.5,13.5,11.5,24.9c0,8.9-4.1,16.6-12.3,23c-8.2,6.4-17.7,9.7-28.6,9.7c-10.3,0-19-1.5-25.9-4.4\n              c-6.9-3-12.9-6.9-17.8-11.9L749,80.3c5,6,13.4,9.4,25.3,10.4c9.9,0,16.1-2.1,18.5-6.3c2.5-4.2,2.5-8.4,0-12.6\n              c-2.4-4.2-8.6-6.8-18.5-7.8c-8.9-1-17.1-3.7-24.5-8.2c-7.4-4.5-11.2-12.1-11.2-23c0-9.9,4.2-17.8,12.7-23.7c8.4-6,17.1-9,26-9\n              C787.6,0.1,795.7,1.3,801.4,3.8"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M340.2,43.3l31.6-43.2h-26.2L327,25.4L340.2,43.3"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M332.8,53.5L293.6,0.1h-26.2l39,53.4l-42.6,58h26.5L332.8,53.5"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M340.2,63.6l-13.2,18l21.9,29.9h26.4L340.2,63.6"}})])])])],1)};O._withStripped=!0;var A,x=n(19),P=n.n(x),C=(A=function(t,e){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),L=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C(e,t),e.prototype.openNextGIS=function(){window.location.href="http://nextgis.com/"},e=L([P.a],e)}(r.default),j=(n(95),n(11)),E=n(14),S=n.n(E),M=n(206),I=n(67),T=Object(j.a)(k,O,[],!1,null,null,null);S()(T,{VApp:M.a,VLayout:I.a}),T.options.__file="src/components/NextGIS/About.vue";var B=T.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-data-table",{attrs:{headers:t.headers,items:t.items,search:t.search,pagination:t.pagination,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[n("v-tooltip",{attrs:{bottom:""}},[n("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n          "+t._s(e.header.text)+"\n        ")])])]}},{key:"items",fn:function(e){return t._l(t.headers,function(r){return n("td",{key:r.value},[t._v(t._s(e.item[r.value]))])})}}])})],1)};R._withStripped=!0;var F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},V=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={rowsPerPage:30},e.headers=[{text:"Адрес",value:"addr"},{text:"долгота",value:"lat"},{text:"широта",value:"lon"},{text:"Название объекта",value:"name"},{text:"Тип объекта",value:"type"},{text:"Статус объекта",value:"status"},{text:"Район",value:"rayon"},{text:"Неофициальное название",value:"unoff"},{text:"ОПИСАНИЕ",value:"description"},{text:"Локальный нарратив",value:"narrativ_l"},{text:"Биографический нарратив",value:"narrativ_b"},{text:"Нарратив о практиках",value:"narrativ_p"},{text:"Описание места",value:"descript2"},{text:"Рассказчик",value:"narrator"},{text:"Визуальные материалы",value:"visual"},{text:"Москва дворовая",value:"mos1"},{text:"Москва церковная",value:"mos2"},{text:"Москва бездомная",value:"mos3"},{text:"Москва подземная",value:"mos4"},{text:"Москва субкультурная",value:"mos5"},{text:"Москва легендарная",value:"mos6"}],e}return F(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.getters["bdMain/sortFeatures"].map(function(t){return t.properties})},enumerable:!0,configurable:!0}),e.prototype.setPagination=function(t){this.paginationSync(t)},D([Object(w.b)(),V("design:type",String)],e.prototype,"search",void 0),D([Object(w.b)(),V("design:type",Object)],e.prototype,"paginationSync",void 0),D([Object(w.d)("pagination"),V("design:type",Function),V("design:paramtypes",[Object]),V("design:returntype",void 0)],e.prototype,"setPagination",null),e=D([w.a],e)}(w.c),U=(n(100),n(205)),N=n(198),G=Object(j.a)($,R,[],!1,null,null,null);S()(G,{VApp:M.a,VDataTable:U.a,VTooltip:N.a}),G.options.__file="src/components/Table/Table.vue";var z=G.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-content",[n("ngw-map",{attrs:{center:[37.63,55.75],zoom:10}},[n("map-control",{attrs:{position:"topleft"}},[t.drawer?t._e():n("div",[n("v-btn",{attrs:{fab:"",small:""},on:{click:function(e){t.drawer=!t.drawer}}},[n("v-icon",{staticClass:"drawe-icon",class:{active:t.drawer},attrs:{large:""}},[t._v("chevron_right")])],1),t._v(" "),n("span",{staticClass:"title"},[t._v("Устная память Москвы")])],1)])],1)],1),t._v(" "),n("v-navigation-drawer",{attrs:{stateless:"",fixed:"",app:"",width:"350"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("drawer-container",[n("div",{attrs:{slot:"header"},slot:"header"},[n("v-layout",{attrs:{"justify-space-between":""}},[t._v("\n          Устная память Москвы\n          "),n("v-btn",{staticClass:"pa-0 ma-0",attrs:{flat:"",icon:""},on:{click:function(e){t.drawer=!1}}},[n("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),t.items&&t.items.length?n("div",[n("div",[n("v-expansion-panel",{attrs:{expand:""}},[n("v-expansion-panel-content",[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("Фильтр")]),t._v(" "),n("items-filter")],1)],1),t._v(" "),n("v-divider")],1),t._v(" "),n("div",[n("list")],1)]):n("div",[n("div",{staticClass:"pa-3 text-xs-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]),t._v(" "),n("template",{slot:"footer"},[n("v-item-group",{staticClass:"bottom-button"},[n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("save_alt")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"},on:{click:function(e){t.page="table"}}},[n("v-icon",{on:{click:function(e){t.page="table"}}},[t._v("table_chart")])],1)],1)],1)],2)],1),t._v(" "),n("v-navigation-drawer",{attrs:{value:!!t.detail,stateless:"",width:"400",absolute:"",app:"",right:""}},[t.detail?n("drawer-container",[n("template",{slot:"header"},[n("v-btn",{staticClass:"pa-0 ma-0",attrs:{flat:"",icon:""},on:{click:function(e){t.detail=!1}}},[n("v-icon",[t._v("close")])],1),t._v("\n        "+t._s(t.detail.properties.name)+"\n      ")],1),t._v(" "),n("detail"),t._v(" "),n("template",{slot:"footer"},[n("v-item-group",{staticClass:"bottom-button"},[n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("feedback")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("save_alt")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"},on:{click:function(e){t.zoomTo=t.detail.id}}},[n("v-icon",[t._v("place")])],1)],1)],1)],2):t._e()],1)],1)};H._withStripped=!0;var W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-list",{attrs:{dense:""}},t._l(t.portion,function(e){return n("v-list-tile",{key:e.id},[n("v-list-tile-content",[n("v-list-tile-title",{attrs:{title:e.name}},[t._v(t._s(e.name))])],1),t._v(" "),n("v-list-tile-action",{staticClass:"pa-0"},[n("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(n){t.setDetail(e.id)}}},[n("v-icon",{style:{color:e.id===(t.detail&&t.detail.id)?"orange":"grey"},attrs:{color:"lighten-1"}},[t._v("\n            info\n          ")])],1)],1)],1)}),1),t._v(" "),t.items.length>t.portion.length?n("div",{staticClass:"text-xs-center"},[n("v-btn",{attrs:{flat:"",small:""},on:{click:t.addPortion}},[t._v("Показать ещё")])],1):t._e()],1)};W._withStripped=!0;var Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.portionCount=30,e.portion=[],e}return Z(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.getters["bdMain/sortFeatures"].map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){var t=this;this.addPortion(),this.$store.watch(function(t){return t.bdMain.filtered},function(e){t.portion=[],t.addPortion()})},e.prototype.setDetail=function(t){this.$store.dispatch("bdMain/setDetail",t),this.$store.dispatch("app/zoomTo",t)},e.prototype.addPortion=function(){var t=this.items,e=this.portion.length,n=t.length;if(e<n)for(var r=e+this.portionCount,o=r>n?n:r,i=e;i<o;i++)this.portion.push(t[i])},e=q([w.a],e)}(w.c),Y=(n(145),n(74)),Q=n(76),K=n(72),X=n(69),tt=n(70),et=n(79),nt=Object(j.a)(J,W,[],!1,null,null,null);S()(nt,{VBtn:Y.a,VIcon:Q.a,VList:K.a,VListTile:X.a,VListTileAction:tt.a,VListTileContent:et.a,VListTileTitle:et.c}),nt.options.__file="src/components/List/List.vue";var rt=nt.exports,ot=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"map"}},[this.ready?this._t("default"):this._e()],2)};ot._withStripped=!0;var it=n(16),at=1,st=function(){function t(t,e){this.map=t,this.name=e.id||String(at++),this.options=Object.assign({},this.options,e),e.onLayerClick&&(this.onLayerClick=e.onLayerClick)}return t.prototype.addLayer=function(t){return null},t}(),ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},pt=1,lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ct(e,t),e.prototype.addLayer=function(t){this.name=t.id||"tile-"+pt++;var e=t.url,n=ut(t,["url"]);return new it.TileLayer(e,n)},e}(st),ft=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(){return(ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},dt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},yt=1,vt={Point:"circle",LineString:"line",MultiPoint:"circle",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill"},mt={stroke:!1,fillOpacity:1},gt={};for(var _t in vt)vt.hasOwnProperty(_t)&&(gt[vt[_t]]=gt[vt[_t]]||[],gt[vt[_t]].push(_t));var bt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layer=new it.FeatureGroup,e.selected=!1,e._layers=[],e._selectedLayers=[],e}return ft(e,t),e.prototype.addLayer=function(t){this.options=t,this.paint=t.paint,this.selectedPaint=t.selectedPaint,t.paint=this.paint,this.name=t.id||"geojson-"+yt++;var e=t.type;if(!e){var n=function(t){var e;if("FeatureCollection"===t.type){var n=t.features.map(function(t){return t.geometry.type});e=wt(n)}else if("GeometryCollection"===t.type){var r=t.geometries.map(function(t){return t.type});e=wt(r)}else e="Feature"===t.type?t.geometry.type:t.type;return e}(t.data);e=vt[n]}this.type=e;var r=function(t,e){if("FeatureCollection"===t.type)t.features=t.features.filter(function(t){return Ot(t.geometry.type,e)});else if("Feature"===t.type){var n=Ot(t.geometry.type,e);if(!n)return!1}else"GeometryCollection"===t.type&&(t.geometries=t.geometries.filter(function(t){return Ot(t.type,e)}));return t}(t.data,e);if(r){new it.GeoJSON(r,this.getGeoJsonOptions(t,e));return this.layer}},e.prototype.select=function(t){var e=this;t?this._layers.filter(t).forEach(function(t){e._selectLayer(t.layer)}):this.selected||(this.selected=!0,this.selectedPaint&&this.setPaintEachLayer(this.selectedPaint))},e.prototype.unselect=function(t){var e=this;t?this._layers.filter(t).forEach(function(t){e._unselectLayer(t.layer)}):this.selected&&(this.selected=!1,this.setPaintEachLayer(this.paint))},e.prototype.getSelected=function(){return this._selectedLayers.map(function(t){return{feature:t.feature,layer:t}})},e.prototype.filter=function(t){var e=this;this._layers.forEach(function(n){var r=n.feature,o=n.layer;t({feature:r,layer:o})?e.layer.addLayer(o):e.layer.removeLayer(o)})},e.prototype.getLayers=function(){return this._layers},e.prototype.setPaintEachLayer=function(t){var e=this;this.layer.eachLayer(function(n){e.setPaint(n,t)})},e.prototype.setPaint=function(t,e){var n;if(n="function"==typeof e?e(t.feature):e,"circle"===this.type&&"icon"===n.type){var r=t,o=this.createDivIcon(n);r.setIcon(o)}else"setStyle"in t&&t.setStyle(this.preparePaint(n))},e.prototype.preparePaint=function(t){var e=t;return e.opacity&&(e.fillOpacity=e.opacity),e},e.prototype.getGeoJsonOptions=function(t,e){var n=this,r=t.paint,o={};return(o="function"==typeof r?"circle"===e?{pointToLayer:function(t,e){var o=r(t);return n.createPaintToLayer(o)(t,e)}}:{style:function(t){return ht({},mt,r(t))}}:this.createPaintOptions(r,e)).onEachFeature=function(e,r){n._layers.push({feature:e,layer:r}),n.layer.addLayer(r),t.selectable&&r.on("click",n._onLayerClick,n)},o},e.prototype._onLayerClick=function(t){it.DomEvent.stopPropagation(t);var e=t.target,n=-1!==this._selectedLayers.indexOf(e);n?this.options.unselectOnSecondClick&&(this._unselectLayer(e),n=!1):(this._selectLayer(e),n=!0),this.onLayerClick&&this.onLayerClick({adapter:this,layer:e,feature:e.feature,selected:n})},e.prototype._selectLayer=function(t){var e=this;this.options.multiselect||this._selectedLayers.forEach(function(t){return e._unselectLayer(t)}),this._selectedLayers.push(t),this.selected=!0,this.options.selectedPaint&&this.setPaint(t,this.options.selectedPaint)},e.prototype._unselectLayer=function(t){var e=this._selectedLayers.indexOf(t);-1!==e&&this._selectedLayers.splice(e,1),this.selected=this._selectedLayers.length>0,this.setPaint(t,this.options.paint)},e.prototype.createDivIcon=function(t){t.type;var e=dt(t,["type"]);return new it.DivIcon(ht({className:""},e))},e.prototype.createPaintToLayer=function(t){var e=this;if("icon"!==t.type)return function(n,r){return new it.CircleMarker(r,e.preparePaint(ht({},mt,t)))};var n=t.className,r=t.html;return n||r?function(n,r){var o=e.createDivIcon(t);return new it.Marker(r,{icon:o})}:void 0},e.prototype.createPaintOptions=function(t,e){var n={},r=t&&this.preparePaint(t)||{};return t&&(n.style=function(t){return r}),"circle"===e?n.pointToLayer=this.createPaintToLayer(t):"line"===e&&(r.stroke=!0),n},e}(st);function wt(t){for(var e,n={},r=0;r<t.length;r++)n[t[r]]=1+(n[t[r]]||0);for(var o in n)n[o]>(n[e]||0)&&(e=o);return e}function Ot(t,e){return-1!==gt[e].indexOf(t)}var At=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(t){function e(e){var n=t.call(this,e)||this;e.customAttribution&&[].concat(e.customAttribution).forEach(function(t){return n.addAttribution(t)});return n}return At(e,t),e}(it.Control.Attribution),Pt=n(86),Ct=n.n(Pt),Lt=function(){return(Lt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},kt=1,jt=function(){function t(){}return t.prototype.addLayer=function(t){var e=(t=Lt({transparent:!0},t)).updateWmsParams;if(this.name=t.id||"image-"+kt++,this.layer=Ct.a.overlay(t.url,t),e){var n=this.layer.updateWmsParams;this.layer.updateWmsParams=function(t){n.call(this,t),this.wmsParams=e(this.wmsParams)}}return this.layer},t}(),Et=function(){function t(){this.options={target:"map"},this.layerAdapters=t.layerAdapters,this.displayProjection="EPSG:3857",this.lonlatProjection="EPSG:4326",this.emitter=new s.EventEmitter}return t.prototype.create=function(t){void 0===t&&(t={target:"map"}),this.options=Object.assign({},t),this.map=new it.Map(this.options.target,{zoomControl:!1,attributionControl:!1}),this.emitter.emit("create",{map:this.map}),this._addMapListeners()},t.prototype.getContainer=function(){return this.map.getContainer()},t.prototype.onMapLoad=function(t){var e=this;return new Promise(function(n){e.map?n(t&&t()):e.emitter.once("create",function(){n(t&&t())})})},t.prototype.setCenter=function(t){var e=t[0],n=t[1];this.map.setView([n,e],this.map.getZoom())},t.prototype.setZoom=function(t){this.map.setZoom(t)},t.prototype.fit=function(t){this.map.fitBounds([[t[3],t[0]],[t[1],t[2]]])},t.prototype.getLayerAdapter=function(e){return t.layerAdapters[e]},t.prototype.addControl=function(e,n,r){var o;if("string"==typeof e){var i=t.controlAdapters[e];i&&(o=new i(r))}else o=e;if(o)return o.options.position=n.replace("-",""),this.map.addControl(o),o},t.prototype.removeLayer=function(t){t.remove()},t.prototype.showLayer=function(t){t.addTo(this.map)},t.prototype.hideLayer=function(t){t.remove()},t.prototype.setLayerOpacity=function(t,e){},t.prototype.setLayerOrder=function(t,e,n){var r=[],o=Object.keys(n).filter(function(t){return!n[t].baseLayer||(r.push(t),!1)}).sort(function(t,e){return n[t].order-n[e].order});r.forEach(function(t){n[t].layer.bringToBack()});for(var i=0;i<o.length;i++)n[o[i]].onMap&&n[o[i]].layer.bringToFront();t.setZIndex&&t.setZIndex(e)},t.prototype.onMapClick=function(t){var e=t.containerPoint,n=t.latlng;this.emitter.emit("click",{latLng:n,pixel:{left:e.x,top:e.y},source:t})},t.prototype._addMapListeners=function(){var t=this;this.map.on("click",function(e){t.onMapClick(e)})},t.layerAdapters={IMAGE:jt,TILE:lt,GEOJSON:bt},t.controlAdapters={ZOOM:it.Control.Zoom,ATTRIBUTION:xt},t}(),St=n(78);function Mt(t,e,n,r){var o;if(void 0===e&&(e=function(t){return t}),void 0===r&&(r=[]),Array.isArray(t))o=t;else{e(t)&&r.push(t);var i=n(t);i&&(o=[].concat(i))}if(o)for(var a=0;a<o.length;a++)o[a]&&Mt(o[a],e,n,r);return r}var It=function(){function t(t){this._children=[],this.entry=t}return t.prototype.setParent=function(t){this._parent=t},t.prototype.addChildren=function(t){this._children.push(t)},t.prototype.getParent=function(){return this._parent},t.prototype.getParents=function(t){return this.getParent()?Mt(this._parent,t,function(t){return t.tree.getParent()}):[]},t.prototype.getDescendants=function(t){return Mt(this._children,t,function(t){return t.tree.getChildren()})},t.prototype.getChildren=function(){return this._children},t}(),Tt=function(){function t(t,e,n){this.emitter=new s.EventEmitter,this.entry=e,this.options=Object.assign({},n),this.name=t,this._value=this.getProperty()}return t.prototype.getProperty=function(){return"function"==typeof this.options.getProperty?this.options.getProperty.call(this):this.options.value},t.prototype.getParents=function(){return this.entry.tree.getParents()||[]},t.prototype.getParent=function(){return this.entry.tree.getParent()},t.prototype.isGroup=function(){return this.entry.tree.getDescendants().length},t.prototype.isBlocked=function(){var t=this;if(void 0===this._blocked){var e=this.entry.tree.getParents();if(e){var n=e.find(function(e){var n=e.properties.get(t.name);if(n)return!n.value()});this._blocked=!!n}else this._blocked=!1}return this._blocked},t.prototype.set=function(t,e){this._value=this._prepareValue(t),this.update(this._value,e),this._fireChangeEvent(this._value,e)},t.prototype.value=function(){return this.getValue()},t.prototype.update=function(t,e){this._callOnSet(t,e)},t.prototype.getContainer=function(){return this._container},t.prototype.destroy=function(){this._container&&this._container.parentNode.removeChild(this._container),this._removeEventsListener&&this._removeEventsListener()},t.prototype.getValue=function(){return void 0!==this._value?this._value:this.getProperty()},t.prototype._prepareValue=function(t){return t},t.prototype._callOnSet=function(t,e){this.options.onSet&&this.options.onSet.call(this,t,e)},t.prototype._fireChangeEvent=function(t,e){var n=this;t=void 0!==t?t:this.getValue(),this.emitter.emit("change",{value:t,options:e}),this.entry.tree.getParents().forEach(function(r){var o=r.properties.get(n.name);o&&o.emitter.emit("change-tree",{value:t,options:e,entry:n.entry})})},t}(),Bt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rt=function(){return(Rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ft=function(t){function e(n,r,o){var i=t.call(this,n,r,Object.assign({},e.options,o))||this;return i.set(i.value()),i}return Bt(e,t),e.prototype.update=function(t,e){if(t){if(e&&e.bubble||this.options.bubble){this.unBlock(e);var n=this.getParent(),r=n&&n.properties.get(this.name);r&&r.set(t,Object.assign({},e,{bubble:!0,propagation:!1}))}this.isBlocked()||this._turnOn(e)}else this._turnOff(e);(e&&e.propagation||this.options.propagation)&&this._propagation(t,e)},e.prototype.getHierarchyValue=function(){var t=this;return this.value()&&this.getParents().every(function(e){var n=e.properties[t.name];return n&&n.get()})},e.prototype._prepareValue=function(t){return!!t},e.prototype._turnOff=function(t){this.options.turnOff&&this.options.turnOff.call(this,t),this._callOnSet(!1,t),this.options.hierarchy&&this.isGroup()&&this.blockChilds(t)},e.prototype._turnOn=function(t){this.options.turnOn&&this.options.turnOn.call(this,t),this._callOnSet(!0,t),this.options.hierarchy&&this.isGroup()&&this.unblockChilds(t)},e.prototype.block=function(t){this._blocked=!0,this._block(t)},e.prototype._block=function(t){this._turnOff(t)},e.prototype.unBlock=function(t){this._blocked=!1,this.getValue()&&this._unBlock(t)},e.prototype._unBlock=function(t){this._turnOn(t)},e.prototype.blockChilds=function(t){this.entry.tree.getDescendants().forEach(this._blockChild.bind(this,t))},e.prototype.unblockChilds=function(t){this.entry.tree.getChildren().forEach(this._unBlockChild.bind(this,t))},e.prototype._blockChild=function(t,e){var n=e.properties.get(this.name);n.block&&n.block(t)},e.prototype._unBlockChild=function(t,e){var n=e.properties.get(this.name);n.unBlock&&n.unBlock(t)},e.prototype._propagation=function(t,e){if(this.isGroup())for(var n=this.entry.tree.getChildren(),r=0;r<n.length;r++){var o=n[r].properties.get(this.name);o&&o.set(t,Rt({},e,{propagation:!0,bubble:!1}))}},e.options={hierarchy:!0,bubble:!1,propagation:!1,label:"Toggle"},e}(Tt),Dt=function(){return(Dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Vt=function(){function t(t,e){this.options={},this.entry=t,this._properties={},this._propertiesList=[],e&&e.forEach(this._setPropertyHandler.bind(this))}return t.prototype.add=function(t){this._setPropertyHandler(t)},t.prototype._setPropertyHandler=function(e){var n=t.handlers,r=e.handler;if(!r&&e.type)switch(e.type){case"boolean":r=n.CheckProperty;break;case"string":r=n.BaseProperty;break;default:r=n.BaseProperty}if(r){var o=Dt({},e||{});this._properties[e.name]=new r(e.name,this.entry,o),this._propertiesList.push(e.name)}},t.prototype.update=function(){this.list().forEach(function(t){t.update()})},t.prototype.value=function(t){var e=this.get(t);if(e)return e.value},t.prototype.set=function(t,e,n){var r=this.get(t);if(r)return r.set(e,n)},t.prototype.get=function(t){return this._properties[t]},t.prototype.list=function(){var t=this;return this._propertiesList.map(function(e){return t._properties[e]})},t.prototype.destroy=function(){for(var t in this._properties)if(this._properties.hasOwnProperty(t)){var e=this.get(t);e&&e.destroy&&e.destroy()}this._properties=null,this._propertiesList=[]},t.handlers={CheckProperty:Ft},t}(),$t=0,Ut=function(){function t(t){this.emitter=new s.EventEmitter,this.options=Object.assign({},this.options,t),this.id=String($t++),this.tree=new It(this)}return t.prototype.initProperties=function(){this.properties=new Vt(this,this.options.properties)},t}(),Nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=function(){return(Gt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Ht=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Wt=function(t){function e(n,r,o,i){var a=t.call(this,Object.assign({},e.options,o))||this;return a.webMap=n,a.item=r,i&&a.tree.setParent(i),a.initProperties(),a.initItem(r),a}return Nt(e,t),e.prototype.initItem=function(t){return zt(this,void 0,void 0,function(){var n,r,o,i=this;return Ht(this,function(a){switch(a.label){case 0:return n=t._layer,"group"!==t.item_type&&"root"!==t.item_type?[3,1]:(t.children&&t.children.length&&t.children.reverse().forEach(function(t){var n=new e(i.webMap,t,i.options,i);i.tree.addChildren(n)}),[3,3]);case 1:return"layer"!==t.item_type?[3,3]:(r=t.layer_adapter.toUpperCase(),t.id=Number(this.id),o=Gt({},t,{id:t.id}),[4,this.webMap.addLayer(r,o)]);case 2:n=a.sent(),a.label=3;case 3:return n&&(t._layer=n,"layer"===t.item_type&&t.layer_enabled&&this.properties.get("visibility").set(!0)),[2]}})})},e.prototype.fit=function(){"layer"===this.item.item_type&&console.log(this.item)},e.options={properties:[{type:"boolean",name:"visibility",getProperty:function(){var t=this.entry;return"group"===t.item.item_type||("layer"===t.item.item_type?t.item.layer_enabled:"root"===t.item.item_type)},onSet:function(t){var e=this.entry;"layer"===e.item.item_type&&(t?e.webMap.showLayer(e.id):e.webMap.hideLayer(e.id),e.item.layer_enabled=t)}}]},e}(Ut),Zt=function(){return function(){this.backspace=8,this.tab=9,this.enter=13,this.shift=16,this.ctrl=17,this.alt=18,this["pause/break"]=19,this.caps_lock=20,this.escape=27,this.page_up=33,this.page_down=34,this.end=35,this.home=36,this.left_arrow=37,this.up_arrow=38,this.right_arrow=39,this.down_arrow=40,this.insert=45,this.delete=46,this.left_window_key=91,this.right_window_key=92,this.select_key=93,this.numpad_0=96,this.numpad_1=97,this.numpad_2=98,this.numpad_3=99,this.numpad_4=100,this.numpad_5=101,this.numpad_6=102,this.numpad_7=103,this.numpad_8=104,this.numpad_9=105,this.multiply=106,this.add=107,this.subtract=109,this.decimal_point=110,this.divide=111,this.f1=112,this.f2=113,this.f3=114,this.f4=115,this.f5=116,this.f6=117,this.f7=118,this.f8=119,this.f9=120,this.f10=121,this.f11=122,this.f12=123,this.num_lock=144,this.scroll_lock=145,this["semi-colon"]=186,this.equal_sign=187,this[","]=188,this["-"]=189,this["."]=190,this["/"]=191,this["`"]=192,this["["]=219,this["\\"]=220,this["]"]=221,this["'"]=222}}(),qt=function(){function t(){this.keyCodeAlias=new Zt,this.keys={},this._windowOnFocus=this.windowOnFocus.bind(this),this._keysPressed=this.keysPressed.bind(this),this._keysReleased=this.keysReleased.bind(this),this.addKeyboardEventsListener()}return t.prototype.pressed=function(t){var e=this.keyCodeAlias[t];if(e)return this.keys[e]},t.prototype.addKeyboardEventsListener=function(){window.addEventListener("focus",this._windowOnFocus,!1),window.addEventListener("keydown",this._keysPressed,!1),window.addEventListener("keyup",this._keysReleased,!1)},t.prototype.removeKeyboardEventsListener=function(){window.removeEventListener("focus",this._windowOnFocus,!1),window.removeEventListener("keydown",this._keysPressed,!1),window.removeEventListener("keyup",this._keysReleased,!1)},t.prototype.keysPressed=function(t){t.stopPropagation(),this.keys[t.keyCode]||(this.keys[t.keyCode]=!0)},t.prototype.keysReleased=function(t){t.stopPropagation(),this.keys[t.keyCode]=!1},t.prototype.windowOnFocus=function(){this.keys={}},t}();Object.prototype.toString;var Jt=function(){return(Jt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Qt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Kt=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,o,(e=t[n](e)).done,e.value)})}}},Xt=function(){function t(t){this.displayProjection="EPSG:3857",this.lonlatProjection="EPSG:4326",this.emitter=new s.EventEmitter,this.keys=new qt,this.DPI=1e3/39.37/.28,this.IPM=39.37,this.settingsIsLoading=!1,this._baseLayers=[],this._layers={},this._layersIds=0,this._selectedLayers=[],this.mapAdapter=t.mapAdapter,this._starterKits=t.starterKits||[],this._addEventsListeners()}return t.prototype.create=function(t){return Yt(this,void 0,void 0,function(){var e;return Qt(this,function(n){switch(n.label){case 0:if(this.options=function t(e,n,r){void 0===r&&(r=!1);var o=Array.isArray(n),i=o&&[]||{};return o?r?(e=e||[],i=i.concat(e),n.forEach(function(n,o){void 0===i[o]?i[o]=n:"object"==typeof n?i[o]=t(e[o],n,r):-1===e.indexOf(n)&&i.push(n)})):i=n:(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){i[t]=e[t]}),Object.keys(n).forEach(function(o){"object"==typeof n[o]&&n[o]&&e[o]?i[o]=t(e[o],n[o],r):i[o]=n[o]})),i}(this.options||{},t),this.settings||!this._starterKits.length)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getSettings()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),console.error(e),[3,4];case 4:return[4,this._setupMap()];case 5:return n.sent(),[2,this]}})})},t.prototype.getSettings=function(){return Yt(this,void 0,void 0,function(){var t,e,n,r,o,i,a=this;return Qt(this,function(s){switch(s.label){case 0:return this.settings?[2,Promise.resolve(this.settings)]:this.settingsIsLoading?[2,new Promise(function(t){var e=function(n){t(n),a.emitter.removeListener("load-settings",e)};a.emitter.on("load-settings",e)})]:[3,1];case 1:this.settingsIsLoading=!0,t=void 0,s.label=2;case 2:s.trys.push([2,7,,8]),t={},e=0,n=this._starterKits.filter(function(t){return t.getSettings}),s.label=3;case 3:return e<n.length?[4,(r=n[e]).getSettings.call(r,this)]:[3,6];case 4:(o=s.sent())&&Object.assign(t,o),s.label=5;case 5:return e++,[3,3];case 6:return[3,8];case 7:throw i=s.sent(),this.settingsIsLoading=!1,new Error(i);case 8:if(t)return this.settings=t,this.settingsIsLoading=!1,this.emitter.emit("load-settings",t),[2,t];s.label=9;case 9:return[2]}})})},t.prototype.onMapLoad=function(t){var e=this.mapAdapter.onMapLoad;return e?e.call(this.mapAdapter,t):Promise.resolve(t)},t.prototype.addBaseLayer=function(t,e){return Yt(this,void 0,void 0,function(){var n;return Qt(this,function(r){switch(r.label){case 0:return[4,this.addLayer(t,Jt({},e),!0)];case 1:return(n=r.sent())&&this._baseLayers.push(n.name),[2,n]}})})},t.prototype.isBaseLayer=function(t){return-1!==this._baseLayers.indexOf(t)},t.prototype.setCenter=function(t){return this.mapAdapter.setCenter(t),this},t.prototype.setZoom=function(t){return this.mapAdapter.setZoom(t),this},t.prototype.fit=function(t){return this.mapAdapter.fit(t),this},t.prototype.getLayerAdapters=function(){return this.mapAdapter.layerAdapters},t.prototype.getLayerAdapter=function(t){return this.mapAdapter.layerAdapters[t]},t.prototype.getLayer=function(t){return this._layers[t]},t.prototype.getLayers=function(){return Object.keys(this._layers)},t.prototype.isLayerOnTheMap=function(t){return this._layers[t].onMap},t.prototype.addControl=function(t,e,n){return this.mapAdapter.addControl(t,e,n)},t.prototype.addLayer=function(t,e,n){return Yt(this,void 0,void 0,function(){var r,o,i,a,s,c,u=this;return Qt(this,function(p){switch(p.label){case 0:return(r="string"==typeof t?this.getLayerAdapter(t):t)?(e.onLayerClick=function(t){return u._onLayerClick(t)},o=new r(this.mapAdapter.map,e),i=this._layersIds++,[4,this.onMapLoad()]):[3,3];case 1:return p.sent(),[4,o.addLayer(e)];case 2:return a=p.sent(),s=o.name,c={id:s,layer:a,adapter:o,onMap:!1},n?(c.baseLayer=!0,c.order=0,this._baseLayers.push(s)):c.order=e.order||i,this._layers[s]=c,[2,o];case 3:return[2,Promise.reject("No adapter")]}})})},t.prototype.removeLayer=function(t){var e=this._layers[t];if(e){if(this.mapAdapter.removeLayer(e.layer),e.baseLayer){var n=this._baseLayers.indexOf(t);n&&this._baseLayers.splice(n,1)}delete this._layers[t]}},t.prototype.showLayer=function(t){this.toggleLayer(t,!0)},t.prototype.hideLayer=function(t){this.toggleLayer(t,!1)},t.prototype.setLayerOpacity=function(t,e){},t.prototype.getScaleForResolution=function(t,e){return parseFloat(t)*(e*this.IPM*this.DPI)},t.prototype.getResolutionForScale=function(t,e){return parseFloat(t)/(e*this.IPM*this.DPI)},t.prototype.toggleLayer=function(t,e){var n=this,r=function(t,r){if(r.onMap=e,e&&t){var o=r.baseLayer?0:r.order;n.mapAdapter.setLayerOrder(r.layer,o,n._layers),n.mapAdapter.showLayer(r.layer)}else n.mapAdapter.hideLayer(r.layer)},o=this._layers[t];o&&o.onMap!==e&&(this.mapAdapter.map?r(this.mapAdapter,o):this.mapAdapter.emitter.once("create",function(t){r(t.map,o)}))},t.prototype.requestGeomString=function(t,e){return this.mapAdapter.requestGeomString(t,e)},t.prototype.onMapClick=function(t){var e=t.containerPoint,n=t.latlng;this.emitter.emit("click",{latLng:n,pixel:{left:e.x,top:e.y},source:t})},t.prototype.selectLayer=function(t){var e=this.getLayer(t);e&&e.adapter.select&&e.adapter.select(),this._selectedLayers.push(t)},t.prototype.unSelectLayer=function(t){var e=this.getLayer(t);e&&e.adapter.unselect&&e.adapter.unselect();var n=this._selectedLayers.indexOf(t);-1!==n&&this._selectedLayers.splice(n,1)},t.prototype.filterLayer=function(t,e){var n=this.getLayer(t);n&&n.adapter.filter&&n.adapter.filter(e)},t.prototype._setupMap=function(){return Yt(this,void 0,void 0,function(){var t,e,n,r,o,i;return Qt(this,function(a){switch(a.label){case 0:return this.settings&&(t=this.settings,e=t.extent_bottom,n=t.extent_left,r=t.extent_top,o=t.extent_right,e&&n&&r&&o&&(this._extent=[n,e,o,r],(i=this._extent)[3]>82&&(i[3]=82),i[1]<-82&&(i[1]=-82))),this.mapAdapter.displayProjection=this.displayProjection,this.mapAdapter.lonlatProjection=this.lonlatProjection,this.mapAdapter.create(this.options),this._addTreeLayers(),[4,this._addLayerProviders()];case 1:return a.sent(),this._zoomToInitialExtent(),this.emitter.emit("build-map",this.mapAdapter),[2,this]}})})},t.prototype._addTreeLayers=function(){return Yt(this,void 0,void 0,function(){var t,e,n;return Qt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getSettings()];case 1:return(t=r.sent())&&(e=t.root_item)&&(this.layers=new Wt(this,e),this.emitter.emit("add-layers",this.layers)),[3,3];case 2:return n=r.sent(),console.error(n),[3,3];case 3:return[2]}})})},t.prototype._zoomToInitialExtent=function(){if(this._extent)this.mapAdapter.fit(this._extent);else{var t=this.options,e=t.center,n=t.zoom;e&&this.mapAdapter.setCenter(e),n&&this.mapAdapter.setZoom(n)}},t.prototype._addLayerProviders=function(){return Yt(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,c,u,p,l,f,h,d;return Qt(this,function(y){switch(y.label){case 0:y.trys.push([0,26,,27]),y.label=1;case 1:y.trys.push([1,19,20,25]),o=Kt(this._starterKits.filter(function(t){return t.getLayerAdapters})),y.label=2;case 2:return[4,o.next()];case 3:return(i=y.sent()).done?[3,18]:[4,(a=i.value).getLayerAdapters.call(a)];case 4:if(!(s=y.sent()))return[3,17];y.label=5;case 5:y.trys.push([5,11,12,17]),c=Kt(s),y.label=6;case 6:return[4,c.next()];case 7:return(u=y.sent()).done?[3,10]:[4,(p=u.value).createAdapter(this.mapAdapter)];case 8:(l=y.sent())&&(this.mapAdapter.layerAdapters[p.name]=l),y.label=9;case 9:return[3,6];case 10:return[3,17];case 11:return f=y.sent(),n={error:f},[3,17];case 12:return y.trys.push([12,,15,16]),u&&!u.done&&(r=c.return)?[4,r.call(c)]:[3,14];case 13:y.sent(),y.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[3,2];case 18:return[3,25];case 19:return h=y.sent(),t={error:h},[3,25];case 20:return y.trys.push([20,,23,24]),i&&!i.done&&(e=o.return)?[4,e.call(o)]:[3,22];case 21:y.sent(),y.label=22;case 22:return[3,24];case 23:if(t)throw t.error;return[7];case 24:return[7];case 25:return[3,27];case 26:throw d=y.sent(),new Error(d);case 27:return[2]}})})},t.prototype._onLayerClick=function(t){return Yt(this,void 0,void 0,function(){return Qt(this,function(e){return this.emitter.emit("layer:click",t),[2,Promise.resolve(t)]})})},t.prototype._addEventsListeners=function(){var t=this;this.mapAdapter.emitter.on("click",function(e){return t._onMapClick(e)})},t.prototype._onMapClick=function(t){var e=this;this.emitter.emit("click",t),this._starterKits.forEach(function(n){n.onMapClick&&n.onMapClick(t,e)})},t}(),te=function(){return(te=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ee=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},ne=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},re=function(){function t(t){this.options={url:"https://qms.nextgis.com"},this.options=te({},this.options,t),this.url=this.options.url}return t.prototype.getLayerAdapters=function(){var t=this;return Promise.resolve([{name:"QMS",createAdapter:function(e){return Promise.resolve(t._createAdapter(e))}}])},t.prototype.getQmsServices=function(){return ee(this,void 0,void 0,function(){return ne(this,function(t){return[2,oe(this.url+"/api/v1/geoservices/")]})})},t.prototype._createAdapter=function(t){var e=this.url;this.map=t;var n={tms:"TILE"},r=function(t,e){this.map=t,this.name=e.id};return r.prototype.addLayer=function(r){var o=this;return oe(e+"/api/v1/geoservices/"+r.qmsid).then(function(e){if(e){var i=n[e.type],a=t.layerAdapters[i];if(a&&"TILE"===i)return r.url=e.url,r.name=e.name,r.attribution=e.copyright_text,a.prototype.addLayer.call(o,r)}})},r},t}();function oe(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&200===r.status&&r.responseText)try{e(JSON.parse(r.responseText))}catch(t){n(t)}},r.open("GET",function(t){return t.replace(/([^:]\/)\/+/g,"$1")}(t),!0),r.send(null)})}var ie=function(){return(ie=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ae=function(){function t(t){this.options={},this.pixelRadius=10,this.options=ie({},this.options,t),this.options.pixelRadius&&(this.pixelRadius=t.pixelRadius),this.url=this.options.baseUrl,this.resourceId=t.resourceId,this.connector=new f({baseUrl:this.url,auth:this.options.auth})}return t.getLayerAdapterOptions=function(e,n,r){var o=e.adapter||"IMAGE",i=r,a=n.getLayerAdapters(),s=!a||a.IMAGE;if("IMAGE"===o){if(s)return{url:i+="/api/component/render/image",id:String(e.id),resourceId:e.id,updateWmsParams:function(n){return t.updateWmsParams(n,e.id)}};o="TILE"}if("TILE"===o)return{url:i+="/api/component/render/tile?z={z}&x={x}&y={y}&resource="+e.id,id:String(e.id),adapter:o,layer_adapter:o}},t.addNgwLayer=function(e,n,r){var o=e.adapter||"IMAGE",i=n.getLayerAdapters();if(!i||i.IMAGE||(o="TILE"),"IMAGE"===o||"TILE"===o)return n.addLayer(o,t.getLayerAdapterOptions(e,n,r));throw new Error(o+" not supported yet. Only TILE")},t.prototype.getSettings=function(t){var e=this;return new Promise(function(n){e.connector.request("resource.item",{id:e.resourceId}).then(function(r){var o=r.webmap;o&&(e._updateItemsParams(o.root_item,t),n(r.webmap))})})},t.prototype.onMapClick=function(t,e){},t.prototype.sendIdentifyRequest=function(t,e,n){void 0===n&&(n={}),e.emitter.emit("start-identify",{ev:t});var r=e.requestGeomString(t.pixel,this.pixelRadius),o=n.layers;o||(o=e.layers.tree.getDescendants().filter(function(t){return"layer"===t.item.item_type&&t.properties.get("visibility")}).map(function(t){return String(Number(t.item.layer_style_id)-1)}));var i={geom:r,srs:3857,layers:o};return this.connector.post("feature_layer.identify",{data:i}).then(function(n){return e.emitter.emit("identify",{ev:t,data:n}),n})},t.prototype._updateItemsParams=function(e,n){var r=this;if(e)if(e.children)e.children=e.children.map(function(t){return r._updateItemsParams(t,n)});else if("layer"===e.item_type){var o=function(t){return t.replace(/([^:]\/)\/+/g,"$1")}(this.url+"/api/component/render/image");e.url=o,e.resourceId=e.layer_style_id,e.updateWmsParams=function(n){return t.updateWmsParams(n,e.resourceId)},e=ie({},e,t.getLayerAdapterOptions({adapter:e.layer_adapter.toUpperCase(),id:e.layer_style_id},n,this.options.baseUrl))}return e},t.updateWmsParams=function(t,e){return{resource:e,extent:t.bbox,size:t.width+","+t.height,timestamp:Date.now()}},t}();var se=function(){return(se=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ce={brill:'<path d="m6 0-5 6 5 6 5-6z"/>',circle:'<circle cx="6" cy="6" r="6"/>',rect:'<rect width="12" height="12"/>',marker:'<path d="m6 0c-1.85 0-4 1.19-4 4.22 0 2.05 3.08 6.59 4 7.78 0.821-1.19 4-5.62 4-7.78 0-3.03-2.15-4.22-4-4.22z"/>',cross:'<path d="M 2.4,12 6,8.4 9.6,12 12,9.6 8.4,6 12,2.4 9.6,0 6,3.6 2.4,0 0,2.4 3.6,6 0,9.6 Z"/>',star:'<path d="m6 0.25 1.71 4.18 4.29-1.04e-4 -3.43 3.14 0.857 4.18-3.43-3.14-3.43 3.14 0.857-4.18-3.43-3.14 4.29-0.209z"/>',triangle:'<path d="m12 11.7h-12l6-11.2z"/>',plus:'<path d="m7.5 12v-4.5h4.5v-3h-4.5v-4.5h-3v4.5h-4.5v3h4.5v4.5z"/>',minus:'<path d="m12 7.5v-3h-12v3z"/>',asterisk:'<path d="m7.59 12v-3.27l2.83 1.64 1.58-2.74-2.85-1.64 2.83-1.64-1.56-2.74-2.83 1.64v-3.24h-3.17v3.24l-2.85-1.64-1.57 2.74 2.84 1.64-2.84 1.64 1.57 2.74 2.85-1.64v3.27z"/>'},ue=.8;var pe={shape:"circle",color:"blue",strokeColor:"white",size:12};function le(t){var e=(t=se({},pe,t)).size,n=e/2,r="number"==typeof t.stroke?t.stroke:ue,o=t.size/12,i=ce[t.shape]||"circle",a=function(t,e,n,r){void 0===n&&(n=0);var o=n/2,i='<svg\n    version="1.1"\n    xmlns="http://www.w3.org/2000/svg"\n    viewBox="-'+o+" -"+o+" "+(t+n)+" "+(e+n)+'"\n  >'+r+"</svg>";return(new DOMParser).parseFromString(i,"image/svg+xml").documentElement}(e,e,r*o,"string"==typeof i?i:i(t)),s=a.firstChild,c="scale("+o+")";return s.setAttribute("fill",t.color),r&&(s.setAttribute("stroke",t.strokeColor),s.setAttribute("stroke-width",String(r))),s.setAttribute("transform",c),{type:"icon",iconSize:[e,e],iconAnchor:[n,n],html:(new XMLSerializer).serializeToString(a)}}n(147);function fe(){return function(t,e,n){var r=n.value;return n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this;return new Promise(function(n,i){o.isLoaded?r.apply(t,e).then(n).catch(i):o.emitter.once("map:created",function(){r.apply(t,e).then(n).catch(i)})})},n}}var he=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),de=function(){return(de=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function ye(t){return t.replace(/([^:]\/)\/+/g,"$1")}function ve(t){for(var e,n={},r=0;r<t.length;r++)n[t[r]]=1+(n[t[r]]||0);for(var o in n)n[o]>(n[e]||0)&&(e=o);return e}var me=n(87),ge=function(){return(ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},_e=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},be=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},we=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Oe=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ae=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},xe={"EPSG:3857":"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"},Pe={Point:"circle",LineString:"line",MultiPoint:"circle",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill"},Ce=function(){function t(t,e){var n=this;this.options={target:"map",baseUrl:"http://dev.nextgis.com/sandbox",controls:["ZOOM","ATTRIBUTION"],controlsOptions:{ZOOM:{position:"top-left"},ATTRIBUTION:{position:"bottom-right",customAttribution:['<a href="http://nextgis.ru" target="_blank">©NextGIS</a>']}},geoJsonDefaultPaint:{circle:{type:"circle",color:"blue",opacity:1,radius:6,stroke:!1},path:{type:"path",color:"blue",opacity:1,stroke:!1,weight:1},icon:le({shape:"circle"})}},this.emitter=new s.EventEmitter,this.isLoaded=!1,this._ngwLayers={},this.options=function t(e,n,r){void 0===r&&(r=!1);var o=Array.isArray(n),i=o&&[]||{};return o?r?(e=e||[],i=i.concat(e),n.forEach(function(n,o){void 0===i[o]?i[o]=n:"object"==typeof n?i[o]=t(e[o],n,r):-1===e.indexOf(n)&&i.push(n)})):i=n:(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){i[t]=e[t]}),Object.keys(n).forEach(function(o){"object"==typeof n[o]&&n[o]&&"object"==typeof e[o]&&"object"===n[o]?i[o]=t(e[o],n[o],r):i[o]=n[o]})),i}(this.options,e),this.connector=new f({baseUrl:this.options.baseUrl});var r=[new re];this.options.webmapId&&r.push(new ae({baseUrl:this.options.baseUrl,resourceId:this.options.webmapId})),this.webMap=new Xt({mapAdapter:t,starterKits:r}),this._createWebMap().then(function(){n._addControls()}),this._addEventsListeners()}return t.prototype.fit=function(){var t=this.options,e=t.center,n=t.zoom,r=t.bounds;e?(this.webMap.setCenter(e),n&&this.webMap.setZoom(n)):r&&this.fitBounds(r)},t.prototype.fitBounds=function(t){var e=t[0],n=t[1],r=t[2],o=t[3];this.webMap.fit([n,r,o,e])},t.prototype.addNgwLayer=function(t,e){return we(this,void 0,void 0,function(){var n,r=this;return Oe(this,function(o){return"GEOJSON"===t.adapter?(n=this.connector.makeQuery("/api/resource/{id}/geojson",{id:t.id}).then(function(e){return e=Object(me.toWgs84)(e,void 0,xe),r._updateGeojsonAdapterOptions({data:e,id:String(t.id)})}),[2,this.addGeoJsonLayer(e,(i="GEOJSON",a=n,s=this.webMap.mapAdapter,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return he(e,t),e.prototype.addLayer=function(e){var n=this;return a.then(function(r){return t.prototype.addLayer.call(n,de({},e,r))})},e}(s.layerAdapters[i])))]):[2,ae.addNgwLayer(t,this.webMap,this.options.baseUrl).then(function(t){return r._ngwLayers[t.name]=t,r.webMap.showLayer(t.name),t.name})];var i,a,s})})},t.prototype.addGeoJsonLayer=function(t,e){var n=this;return t.multiselect=void 0!==t.multiselect&&t.multiselect,t.unselectOnSecondClick=void 0===t.unselectOnSecondClick||t.unselectOnSecondClick,e||(t=this._updateGeojsonAdapterOptions(t)),this.webMap.addLayer(e||"GEOJSON",t).then(function(t){return n.webMap.showLayer(t.name),t.name})},t.prototype.zoomToLayer=function(t){var e=this;if(this._ngwLayers[t])return this.connector.request("resource.item",{id:t}).then(function(n){if(n)return"raster_style"===n.resource.cls?e.connector.request("resource.item",{id:n.resource.parent.id}).then(function(t){return e._fitNgwLayerExtend(t.resource.id)}):e._fitNgwLayerExtend(t)})},t.prototype._updateGeojsonAdapterOptions=function(t){var e=Pe[function(t){var e;e="FeatureCollection"===t.type?ve(t.features.map(function(t){return t.geometry.type})):"GeometryCollection"===t.type?ve(t.geometries.map(function(t){return t.type})):"Feature"===t.type?t.geometry.type:t.type;return e}(t.data)],n=t.paint;return"object"==typeof n&&(n.type||(n.type="fill"===e||"line"===e?"path":"html"in n||"className"in n?"icon":e),"circle"===n.type?t.paint=ge({},this.options.geoJsonDefaultPaint.circle,n):"path"===n.type?t.paint=ge({},this.options.geoJsonDefaultPaint.path,n):"icon"===n.type&&(t.paint=ge({},this.options.geoJsonDefaultPaint.icon,n))),t.type=e,t},t.prototype._fitNgwLayerExtend=function(t){var e=this;return this.connector.request("layer.extent",{id:t}).then(function(t){var n=t.extent,r=n.maxLat,o=n.maxLon,i=n.minLat,a=n.minLon;e.fitBounds([r,o,i,a])})},t.prototype._createWebMap=function(){var t=this;return this.webMap.create({target:this.options.target}).then(function(){t.isLoaded=!0,t.emitter.emit("map:created"),t.options.qmsId&&t.webMap.addBaseLayer("QMS",{id:t.options.qmsId,qmsid:t.options.qmsId}).then(function(e){t.webMap.showLayer(e.name)}),t.fit()})},t.prototype._addControls=function(){var t=this;this.options.controls.forEach(function(e){var n={position:"top-left"};"string"==typeof e&&(n=t.options.controlsOptions[e]);var r=n.position,o=Ae(n,["position"]);t.webMap.addControl(e,r,o)})},t.prototype._addEventsListeners=function(){var t=this;this.webMap.emitter.on("click",function(e){return t.emitter.emit("click",e)}),this.webMap.emitter.on("layer:click",function(e){return t.emitter.emit("layer:click",e)})},t.utils={fixUrlStr:ye},t.decorators={onMapLoad:fe},t.getIcon=le,_e([fe(),be("design:type",Function),be("design:paramtypes",[Object,Object]),be("design:returntype",Promise)],t.prototype,"addNgwLayer",null),_e([fe(),be("design:type",Function),be("design:paramtypes",[Object,Object]),be("design:returntype",void 0)],t.prototype,"addGeoJsonLayer",null),t}(),Le=(n(152),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ke=function(){return(ke=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},je=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ee=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Se=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ready=!1,e.options={mapOptions:{target:"map",controlsOptions:{ZOOM:{position:"top-right"},ATTRIBUTION:{position:"bottom-right"}}}},e.markers={},e}return Le(e,t),e.prototype.mounted=function(){var t=this,e=this.$el;this.createWebMap({target:e,center:this.center,zoom:this.zoom}).then(function(){t.ready=!0;var e=t.$store.state.bdMain.filtered;if(e&&e.length){var n=JSON.parse(JSON.stringify(e));t.addMarkers(n)}t.$store.watch(function(t){return t.bdMain.filtered},function(e){e=JSON.parse(JSON.stringify(e)),t.addMarkers(e)}),t.$store.watch(function(t){return t.bdMain.detailItem},function(e){t.webMap.mapAdapter.map.invalidateSize(),t.setSelected(e)}),t.$store.watch(function(t){return t.app.center},function(e){t.zoomTo(e)})})},e.prototype.createWebMap=function(t){return this.options.mapOptions=ke({},this.options.mapOptions,t),this.ngw=new Ce(new Et,ke({baseUrl:h.baseUrl,qmsId:487},this.options.mapOptions)),this.webMap=this.ngw.webMap,this.mapObject=this.webMap.mapAdapter.map,this.ngw.addNgwLayer({id:9}),this.webMap.onMapLoad()},e.prototype.findFirsVueParent=function(t){for(var e=!1;!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t},e.prototype.addMarkers=function(t){var e=this,n={type:"FeatureCollection",features:t.map(function(t){var e=t.geometry.coordinates,n=e[0],r=e[1],o=St.Projection.SphericalMercator.unproject(new St.Point(n,r)),i=o.lat,a=o.lng;return t.geometry.coordinates=[a,i],t})};return this.layer?(this.layer.filter(function(e){var n=e.feature.properties.id;return t.some(function(t){return t.properties.id===n})}),this.layer):this.webMap.addLayer("GEOJSON",{data:n,paint:function(t){return e.getHistoryIcon(t,{size:20})},selectedPaint:function(t){return e.getHistoryIcon(t,{size:40})},selectable:!0,unselectOnSecondClick:!0}).then(function(t){e.layer=t,e.webMap.showLayer(t.name),e.webMap.emitter.on("layer:click",function(n){var r=n.adapter,o=n.feature,i=n.selected;r.name===t.name&&e.$store.dispatch("bdMain/setDetail",i?Number(o.properties.id):null)})})},e.prototype.zoomTo=function(t){if(t){var e=this.layer&&this.layer.getLayers();if(e&&e.length){var n=e.find(function(e){return e.feature.properties.id===t}),r=n&&n.layer;if(r){var o=r.getBounds?r.getBounds().getCenter():r.getLatLng();this.webMap.mapAdapter.map.setView(o,14),this.$store.dispatch("app/zoomTo",null)}}}},e.prototype.setSelected=function(t){t?this.layer.select(function(e){return e.feature.properties.id===(t&&t.id)}):this.layer.unselect()},e.prototype.getHistoryIcon=function(t,e){var n={"водоем":{color:"#0000ff",shape:"marker"},"ландшафт":{color:"#008000",shape:"marker"},"памятник":{color:"#ff0000",shape:"marker"},"строение":{color:"#ffa500",shape:"marker"},"улица":{color:"#ffff00",shape:"marker"},"зона":{color:"#bbbbbb",shape:"marker"},"населенный пункт":{color:"#49423d",shape:"marker"},"район":{color:"#808080",shape:"marker"},"другой":{color:"#000000",shape:"marker"},"метро":{color:"#ffa500",shape:"brill"},"метро-2":{color:"#ff0000",shape:"brill"},"другие подземные объекты":{color:"#808080",shape:"brill"}},r=t.properties.type,o=Object.keys(n).find(function(t){return-1!==r.search(t)});return le(ke({},n[o]||{color:"#fff",shape:"cross"},e))},je([Object(w.b)(),Ee("design:type",Array)],e.prototype,"center",void 0),je([Object(w.b)(),Ee("design:type",Number)],e.prototype,"zoom",void 0),e=je([w.a],e)}(w.c),Me=(n(157),Object(j.a)(Se,ot,[],!1,null,null,null));Me.options.__file="src/components/NgwMap/NgwMap.vue";var Ie=Me.exports,Te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",staticClass:"pl-3 pr-3 pt-0 pb-0",model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("v-autocomplete",{attrs:{items:t.areas,label:"Район","no-data-text":"Не найдено"},on:{change:t.updateFilter},model:{value:t.rayon,callback:function(e){t.rayon=e},expression:"rayon"}})],1)};Te._withStripped=!0;var Be=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Fe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form=!1,e.years=[1900,2018],e.minYear=1900,e.maxYear=2018,e.moscow=[{name:"дворовая",param:"mos1"},{name:"легендарная",param:"mos2"},{name:"бездомная",param:"mos3"},{name:"подземная",param:"mos4"},{name:"церковная",param:"mos5"},{name:"субкультурная",param:"mos6",value:!1}],e.rayon="Все",e.areas=["Все"],e}return Be(e,t),e.prototype.mounted=function(){var t=this;this.moscow.forEach(function(t){t.value=void 0===t.value||t.value}),this.$store.state.bdMain.items&&this.updateFilterAreas(this.$store.state.bdMain.items),this.$store.watch(function(t){return t.bdMain.items},function(e){t.updateFilterAreas(e)})},e.prototype.updateFilterAreas=function(t){var e={};t.forEach(function(t){var n=t.properties;e[n.rayon]=!0}),this.areas=this.areas.concat(Object.keys(e).sort())},e.prototype.updateFilter=function(){var t=this,e=this.$store.state.bdMain.items.slice().filter(function(e){var n=e.properties;return!t.rayon||"Все"===t.rayon||n.rayon===t.rayon});this.$store.dispatch("bdMain/setFilter",e)},e=Re([w.a],e)}(w.c),De=(n(159),n(32)),Ve=n(199),$e=Object(j.a)(Fe,Te,[],!1,null,null,null);S()($e,{VAutocomplete:De.a,VForm:Ve.a}),$e.options.__file="src/components/ItemsFilter/ItemsFilter.vue";var Ue=$e.exports,Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.detail&&t.meta?n("div",[n("v-list",{attrs:{dense:""}},t._l(t.meta,function(e){return t.detail[e.value]&&(e.noHide||t.more)?n("v-list-tile",{key:e.value,staticClass:"detail-prop-list pb-3"},[n("v-list-tile-content",[n("v-list-tile-sub-title",[t._v(t._s(e.text))]),t._v(" "),"Story"===e.type?n("span",[n(t.components[e.type],{tag:"component",attrs:{text:t.getText(e)}})],1):n("v-list-tile-title",{domProps:{innerHTML:t._s(t.getText(e))}})],1)],1):t._e()}),1),t._v(" "),n("div",{staticClass:"text-xs-center"},[t.needMore?n("v-btn",{attrs:{color:"info",small:""},on:{click:function(e){t.more=!t.more}}},[t.more?n("span",[t._v("Свернуть")]):n("span",[t._v("Подробнее")])]):t._e()],1)],1):t._e()};Ne._withStripped=!0;var Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("span",[t._v(t._s(t.toShow))]),t._v(" "),n("span",[n("a",{on:{click:t.onClick}},[t.expand?n("span",[t._v("<<<")]):n("span",[t._v(">>>")])])])])};Ge._withStripped=!0;var ze=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},We=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.expand=!1,e}return ze(e,t),Object.defineProperty(e.prototype,"toShow",{get:function(){return this.expand?this.text:this.text.slice(0,this.charCount)+"..."},enumerable:!0,configurable:!0}),e.prototype.onClick=function(){this.expand=!this.expand},He([Object(w.b)({default:""}),We("design:type",String)],e.prototype,"text",void 0),He([Object(w.b)({default:40}),We("design:type",Number)],e.prototype,"charCount",void 0),e=He([w.a],e)}(w.c),qe=(n(163),Object(j.a)(Ze,Ge,[],!1,null,null,null));qe.options.__file="src/components/Detail/ShowMoreField/ShowMoreField.vue";var Je=qe.exports,Ye=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ke=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url="",e.more=!1,e.components={Story:Je},e}return Ye(e,t),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem&&this.$store.state.bdMain.detailItem.properties},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meta",{get:function(){return this.$store.state.bdMain.meta},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needMore",{get:function(){var t=this;return this.meta.some(function(e){return!!e.noHide||t.detail[e.value]})},enumerable:!0,configurable:!0}),e.prototype.getText=function(t){var e=this;if(t.type){var n=this.detail[t.value];if("NarratorLink"===t.type){var r=n&&this.detail[t.value].split(",").map(function(t){return t.trim()}),o=this.detail.nar_codes&&this.detail.nar_codes.split(",").map(function(t){return t.trim()});return r.map(function(t,n){var r=o?o[n]||o[0]:"";return'<a href="'+(e.url+"/"+r).replace(/([^:]\/)\/+/g,"$1")+'">'+t+"</a>"}).join(", ")}if("Mos"===t.type)return 1===n?'<i\n          aria-hidden="true"\n          class="v-icon material-icons theme--light lighten-1--text"\n          style="color: green;"\n        >check\n        </i>':'<i\n          aria-hidden="true"\n          class="v-icon material-icons theme--light lighten-1--text"\n          style="color: red;"\n        >close\n        </i>'}return this.detail[t.value]},e=Qe([w.a],e)}(w.c),Xe=(n(165),Object(j.a)(Ke,Ne,[],!1,null,null,null));S()(Xe,{VBtn:Y.a,VList:K.a,VListTile:X.a,VListTileContent:et.a,VListTileSubTitle:et.b,VListTileTitle:et.c}),Xe.options.__file="src/components/Detail/Detail.vue";var tn=Xe.exports,en=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawer-container"},[t.hasHeaderSlot?n("div",{staticClass:"drawer-titlebar"},[n("v-toolbar",[n("v-toolbar-title",{staticClass:"drawer-title"},[t._t("header")],2)],1),t._v(" "),n("v-divider")],1):t._e(),t._v(" "),n("div",{staticClass:"drawer-content"},[t._t("default")],2),t._v(" "),t.hasFooterSlot?n("v-footer",[t._t("footer")],2):t._e()],1)};en._withStripped=!0;var nn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rn=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},on=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},an=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nn(e,t),Object.defineProperty(e.prototype,"hasFooterSlot",{get:function(){return this.hasSlot("footer")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHeaderSlot",{get:function(){return this.hasSlot("header")},enumerable:!0,configurable:!0}),e.prototype.hasSlot=function(t){return void 0===t&&(t="default"),!!this.$slots[t]||!!this.$scopedSlots[t]},rn([Object(w.b)(),on("design:type",String)],e.prototype,"header",void 0),e=rn([w.a],e)}(w.c),sn=(n(167),n(71)),cn=n(200),un=n(75),pn=n(211),ln=Object(j.a)(an,en,[],!1,null,null,null);S()(ln,{VDivider:sn.a,VFooter:cn.a,VToolbar:un.a,VToolbarTitle:pn.b}),ln.options.__file="src/components/DrawerContainer/DrawerContainer.vue";var fn=ln.exports,hn=function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)};hn._withStripped=!0;var dn=function(){return(dn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var yn=function(){return(yn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},vn=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(e[n]=r)}return e},mn={props:{position:{type:String,default:"topright"},options:{type:Object,default:function(){return{}}}},mounted:function(){this.controlOptions={position:this.position}},beforeDestroy:function(){this.mapObject&&this.mapObject.remove()}},gn=function(){function t(t){this.emitter=new s.EventEmitter,this._blocked=!1,this.options=Object.assign({},this.options,t),this._header=null,this._body=null,this._container=this._createContainer()}return t.prototype.onAdd=function(){return this.element},t.prototype.setElement=function(t){this.element=t},t.prototype.onRemove=function(){this.removeFrom()},t.prototype.addTo=function(t){var e=this._container=this.onAdd(),n=this.options.position,r=t._controlCorners[n];return e.classList.add("leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this},t.prototype.remove=function(){this.onRemove&&this.onRemove()},t.prototype.removeFrom=function(){var t=this._container&&this._container.parentNode;t&&t.removeChild(this._container)},t.prototype.updateBody=function(t){this._cleanBody(),"string"==typeof t?this._body.innerHTML=t:t instanceof HTMLElement&&this._body.appendChild(t)},t.prototype.hide=function(){this._container.classList.add("panel-hide"),this.emitter.emit("toggle",!1)},t.prototype.show=function(){this._blocked||(this._container.classList.remove("panel-hide"),this.emitter.emit("toggle",!0))},t.prototype._cleanBody=function(){this._body&&(this._body.innerHTML="")},t.prototype._createContainer=function(){var t=document.createElement("div");return this.options.addClass&&this.options.addClass.split("-").forEach(function(e){return t.classList.add(e)}),this.options.headerText&&t.appendChild(this._createHeader()),t.appendChild(this._createBody()),t},t.prototype._createHeader=function(){var t=document.createElement("div");return t.className="panel-header",t.innerHTML=this.options.headerText,this._header=t,t},t.prototype._createBody=function(){var t=document.createElement("div");return t.className="panel-body",this._body=t,t},t}(),_n={name:"LControl",mixins:[mn],mounted:function(){var t=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var r=yn({},vn(n));t=vn(t);var o=e.$options.props;for(var i in t)if(t.hasOwnProperty(i)){var a=o[i]?o[i].default:Symbol("unique");r[i]&&a!==t[i]?(console.warn(i+" props is overriding the value passed in the options props"),r[i]=t[i]):r[i]||(r[i]=t[i])}return r}(this.controlOptions,this);this.mapObject=new gn(t),function(t,e,n,r){for(var o=Object.keys(n),i=function(r){var i,a=o[r],s="set"+((i=a).charAt(0).toUpperCase()+i.slice(1)),c=n[a].type===Object||n[a].type===Array||Array.isArray(n[a].type);n[a].custom?t.$watch(a,function(e,n){t[s](e,n)},{deep:c}):"setOptions"===s?t.$watch(a,function(t,n){e.options=e.options||{},e.options=dn({},e.options,t)},{deep:c}):t.$watch(a,function(t,n){e[s](t)},{deep:c})},a=0;a<o.length;a++)i(a)}(this,this.mapObject,this.$options.props),this.parentContainer=function(t){for(var e=!1;!e;)void 0===t.webMap?t=t.$parent:e=!0;return t}(this.$parent),this.mapObject.setElement(this.$el),this.mapObject.addTo(this.parentContainer.webMap.mapAdapter.map)}},bn=(n(173),Object(j.a)(_n,hn,[],!1,null,null,null));bn.options.__file="src/components/NgwMap/controls/Panel.vue";var wn=bn.exports,On=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),An=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"page",{get:function(){return this.$store.state.app.page},set:function(t){this.$store.dispatch("app/setPage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomTo",{get:function(){return this.$store.state.app.zoomTo},set:function(t){this.$store.dispatch("app/zoomTo",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawer",{get:function(){return this.$store.state.app.drawer},set:function(t){this.$store.dispatch("app/toggleDrawer",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.state.bdMain.items.map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem},set:function(t){this.$store.dispatch("bdMain/setDetail",t)},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.$store.dispatch("bdMain/getAllItems")},e=An([Object(w.a)({components:{List:rt,NgwMap:Ie,ItemsFilter:Ue,Detail:tn,DrawerContainer:fn,MapControl:wn}})],e)}(w.c),Pn=(n(175),n(73)),Cn=n(201),Ln=n(202),kn=n(210),jn=n(209),En=n(68),Sn=Object(j.a)(xn,H,[],!1,null,null,null);S()(Sn,{VApp:M.a,VBtn:Y.a,VContent:Pn.a,VDivider:sn.a,VExpansionPanel:Cn.a,VExpansionPanelContent:Ln.a,VIcon:Q.a,VItemGroup:kn.a,VLayout:I.a,VNavigationDrawer:jn.a,VProgressCircular:En.a}),Sn.options.__file="src/Main.vue";var Mn=Sn.exports,In=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tn=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Bn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tableSearch="",e.pagination=null,e}return In(e,t),Object.defineProperty(e.prototype,"page",{get:function(){return this.$store.state.app.page},set:function(t){this.$store.dispatch("app/setPage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return!this.pagination||null!==this.pagination.rowsPerPage&&null!==this.pagination.totalItems?Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage):0},enumerable:!0,configurable:!0}),e.prototype.paginationSync=function(t){this.pagination=t},e=Tn([Object(w.a)({components:{MainComponent:Mn,TableComponent:z,AboutComponent:B}})],e)}(w.c),Rn=(n(187),n(208)),Fn=n(203),Dn=n(204),Vn=n(207),$n=n(212),Un=Object(j.a)(Bn,b,[],!1,null,null,null);S()(Un,{VApp:M.a,VBtn:Y.a,VCard:Rn.a,VDialog:Fn.a,VFooter:cn.a,VIcon:Q.a,VPagination:Dn.a,VSpacer:Vn.a,VTextField:$n.a,VToolbar:un.a,VToolbarItems:pn.a}),Un.options.__file="src/App.vue";var Nn=Un.exports,Gn=n(88),zn=n(5);n(195);r.default.use(zn.a),new r.default({store:_,render:function(t){return t(Nn)}}).$mount("#app"),window.version=Gn.a},39:function(t,e,n){var r=n(96);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("2f71248e",r,!1,{})},40:function(t,e,n){var r=n(101);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("4cd827de",r,!1,{})},41:function(t,e,n){var r=n(146);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("b5be5e50",r,!1,{})},42:function(t,e,n){var r=n(158);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("3ffc3518",r,!1,{})},43:function(t,e,n){var r=n(160);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("dbe1d530",r,!1,{})},44:function(t,e,n){var r=n(164);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("0b373205",r,!1,{})},45:function(t,e,n){var r=n(166);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("2a498ee5",r,!1,{})},46:function(t,e,n){var r=n(168);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("55e0b820",r,!1,{})},47:function(t,e,n){var r=n(174);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("03a54c6e",r,!1,{})},48:function(t,e,n){var r=n(176);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("65246d60",r,!1,{})},49:function(t,e,n){var r=n(188);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("9c4e14cc",r,!1,{})},50:function(t){t.exports={baseUrl:"http://pastandnow.nextgis.com"}},86:function(t,e,n){var r,o,i;
/*!
 * leaflet.wms.js
 * A collection of Leaflet utilities for working with Web Mapping services.
 * (c) 2014-2016, Houston Engineering, Inc.
 * MIT License
 */o=[n(16)],void 0===(i="function"==typeof(r=function(t){var e={};"keys"in Object||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),e.Source=t.Layer.extend({options:{untiled:!0,identify:!0},initialize:function(e,n){t.setOptions(this,n),this.options.tiled&&(this.options.untiled=!1),this._url=e,this._subLayers={},this._overlay=this.createOverlay(this.options.untiled)},createOverlay:function(t){var n={};for(var r in this.options)"untiled"!=r&&"identify"!=r&&(n[r]=this.options[r]);return t?e.overlay(this._url,n):e.tileLayer(this._url,n)},onAdd:function(){this.refreshOverlay()},getEvents:function(){return this.options.identify?{click:this.identify}:{}},setOpacity:function(t){this.options.opacity=t,this._overlay&&this._overlay.setOpacity(t)},bringToBack:function(){this.options.isBack=!0,this._overlay&&this._overlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._overlay&&this._overlay.bringToFront()},getLayer:function(t){return e.layer(this,t)},addSubLayer:function(t){this._subLayers[t]=!0,this.refreshOverlay()},removeSubLayer:function(t){delete this._subLayers[t],this.refreshOverlay()},refreshOverlay:function(){var t=Object.keys(this._subLayers).join(",");this._map&&(t?(this._overlay.setParams({layers:t}),this._overlay.addTo(this._map)):this._overlay.remove())},identify:function(t){var e=this.getIdentifyLayers();e.length&&this.getFeatureInfo(t.containerPoint,t.latlng,e,this.showFeatureInfo)},getFeatureInfo:function(e,n,r,o){var i=this.getFeatureInfoParams(e,r),a=this._url+t.Util.getParamString(i,this._url);this.showWaiting(),this.ajax(a,function(t){this.hideWaiting();var e=this.parseFeatureInfo(t,a);o.call(this,n,e)})},ajax:function(t,e){(function(t,e){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e.call(n,r.responseText):e.call(n,"error"))},r.open("GET",t),r.send()}).call(this,t,e)},getIdentifyLayers:function(){return this.options.identifyLayers?this.options.identifyLayers:Object.keys(this._subLayers)},getFeatureInfoParams:function(e,n){var r,o;this.options.untiled?r=this._overlay.wmsParams:((o=this.createOverlay(!0)).updateWmsParams(this._map),(r=o.wmsParams).layers=n.join(","));var i={request:"GetFeatureInfo",query_layers:n.join(","),X:Math.round(e.x),Y:Math.round(e.y)};return t.extend({},r,i)},parseFeatureInfo:function(t,e){return"error"==t&&(t="<iframe src='"+e+"' style='border:none'>"),t},showFeatureInfo:function(t,e){this._map&&this._map.openPopup(e,t)},showWaiting:function(){this._map&&(this._map._container.style.cursor="progress")},hideWaiting:function(){this._map&&(this._map._container.style.cursor="default")}}),e.source=function(t,n){return new e.Source(t,n)},e.Layer=t.Layer.extend({initialize:function(n,r,o){t.setOptions(this,o),n.addSubLayer||(n=e.getSourceForUrl(n,o)),this._source=n,this._name=r},onAdd:function(){this._source._map||this._source.addTo(this._map),this._source.addSubLayer(this._name)},onRemove:function(){this._source.removeSubLayer(this._name)},setOpacity:function(t){this._source.setOpacity(t)},bringToBack:function(){this._source.bringToBack()},bringToFront:function(){this._source.bringToFront()}}),e.layer=function(t,n){return new e.Layer(t,n)};var n={};return e.getSourceForUrl=function(t,r){return n[t]||(n[t]=e.source(t,r)),n[t]},e.TileLayer=t.TileLayer.WMS,e.tileLayer=t.tileLayer.wms,e.Overlay=t.Layer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1,attribution:"",opacity:1,isBack:!1,minZoom:0,maxZoom:18},initialize:function(e,n){this._url=e;var r={},o={};for(var i in n)i in this.options?o[i]=n[i]:r[i]=n[i];t.setOptions(this,o),this.wmsParams=t.extend({},this.defaultWmsParams,r)},setParams:function(e){t.extend(this.wmsParams,e),this.update()},getAttribution:function(){return this.options.attribution},onAdd:function(){this.update()},onRemove:function(t){this._currentOverlay&&(t.removeLayer(this._currentOverlay),delete this._currentOverlay),this._currentUrl&&delete this._currentUrl},getEvents:function(){return{moveend:this.update}},update:function(){if(this._map){this.updateWmsParams();var e=this.getImageUrl();if(this._currentUrl!=e){this._currentUrl=e;var n=this._map.getBounds(),r=t.imageOverlay(e,n,{opacity:0});r.addTo(this._map),r.once("load",function(){this._map&&(r._url==this._currentUrl?(this._currentOverlay&&this._map.removeLayer(this._currentOverlay),this._currentOverlay=r,r.setOpacity(this.options.opacity?this.options.opacity:1),!0===this.options.isBack&&r.bringToBack(),!1===this.options.isBack&&r.bringToFront(),void 0!==this.options.zIndex&&r.setZIndex(this.options.zIndex)):this._map.removeLayer(r))},this),(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)&&this._map.removeLayer(r)}}},setOpacity:function(t){this.options.opacity=t,this._currentOverlay&&this._currentOverlay.setOpacity(t)},bringToBack:function(){this.options.isBack=!0,this._currentOverlay&&this._currentOverlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._currentOverlay&&this._currentOverlay.bringToFront()},setZIndex:function(t){this.options.zIndex=t,this._currentOverlay&&this._currentOverlay.setZIndex(t)},updateWmsParams:function(e){e||(e=this._map);var n=e.getBounds(),r=e.getSize(),o=parseFloat(this.wmsParams.version),i=this.options.crs||e.options.crs,a=o>=1.3?"crs":"srs",s=i.project(n.getNorthWest()),c=i.project(n.getSouthEast()),u={width:r.x,height:r.y};u[a]=i.code,u.bbox=(o>=1.3&&i===t.CRS.EPSG4326?[c.y,s.x,s.y,c.x]:[s.x,c.y,c.x,s.y]).join(","),t.extend(this.wmsParams,u)},getImageUrl:function(){var e=this.options.uppercase||!1,n=t.Util.getParamString(this.wmsParams,this._url,e);return this._url+n}}),e.overlay=function(t,n){return new e.Overlay(t,n)},e})?r.apply(e,o):r)||(t.exports=i)},88:function(t){t.exports={a:"1.3.4"}},92:function(t,e,n){(function(t,e){!function(){"use strict";function n(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void s(e.promise,t)}a(e.promise,r)}else(1===t._state?a:s)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void u(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){s(t,e)}}function s(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;n>e;e++)i(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}var p=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return i(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=n,o.all=function(t){return new o(function(e,n){function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}o[t]=a,0==--i&&e(o)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var i=o.length,a=0;o.length>a;a++)r(a,o[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,o=t.length;o>r;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){p(t,0)},o._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw Error("unable to locate global object")}();"Promise"in l?l.Promise.prototype.finally||(l.Promise.prototype.finally=n):l.Promise=o}()}).call(this,n(80).setImmediate,n(38))},95:function(t,e,n){"use strict";var r=n(39);n.n(r).a},96:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.logo {\n  width: 300px;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.logo .logo__item--dark,\n  .logo .logo__item--light {\n    fill: #aec8e0;\n    transition: fill .3s;\n}\n.logo .logo__item--dark {\n    fill: rgba(35, 31, 32, 0.685);\n}\n.logo .logo__item--light {\n    fill: rgba(23, 111, 193, 0.747);\n}\n.logo:hover .logo__item--dark {\n    fill: #231F20;\n}\n.logo:hover .logo__item--light {\n    fill: #176FC1;\n}\n.logo--mini {\n  width: 20px;\n  height: 20px;\n  left: 10px;\n  top: 14px;\n  z-index: 10;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/NextGIS/C:/Users/rendr/nextgis/oralhistory/src/components/NextGIS/About.vue"],names:[],mappings:";AA+CA;EACI,aAAY;EACZ,uBAAsB;EACtB,gBAAe;CAwBlB;AA3BD;;IAOI,cATe;IAUf,qBAAoB;CACrB;AATH;IAYI,8BAA6B;CAC9B;AAbH;IAeI,gCAA+B;CAChC;AAhBH;IAqBM,cAAa;CACd;AAtBL;IAwBM,cAAa;CACd;AAIL;EACI,YAAW;EACX,aAAY;EACZ,WAAU;EACV,UAAS;EACT,YAAW;CACd",file:"About.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$dark-blue: #aec8e0;\n\n.logo{\n    width: 300px;\n    vertical-align: middle;\n    cursor: pointer;\n\n  .logo__item--dark,\n  .logo__item--light{\n    fill: $dark-blue;\n    transition: fill .3s;\n  }\n\n  .logo__item--dark{\n    fill: rgba(35, 31, 32, 0.685);\n  }\n  .logo__item--light{\n    fill: rgba(23, 111, 193, 0.747);\n  }\n\n\n  &:hover{\n    .logo__item--dark{\n      fill: #231F20;\n    }\n    .logo__item--light{\n      fill: #176FC1;\n    }\n  }\n}\n\n.logo--mini{\n    width: 20px;\n    height: 20px;\n    left: 10px;\n    top: 14px;\n    z-index: 10;\n}\n"],sourceRoot:""}])}},[[197,20,15,6,3,19,1,14,4,7,2,5,8,9,11,12,13,10,16,17,18]]]);
//# sourceMappingURL=main-d0e3b1d.js.map