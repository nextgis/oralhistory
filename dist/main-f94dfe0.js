(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(t,e,n){"use strict";var r=n(40);n.n(r).a},142:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"List.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},153:function(t,e,n){t.exports=n.p+"marker-icon.png?2273e3d8ad9264b7daa5bdbf8e6b47f8"},154:function(t,e,n){t.exports=n.p+"marker-icon-2x.png?401d815dc206b8dc1b17cd0e37695975"},155:function(t,e,n){t.exports=n.p+"marker-shadow.png?44a526eed258222515aa21eaffd14a96"},156:function(t,e,n){t.exports=n.p+"marker-icon_selected.png?b2aa7f36f5ac75dab9a5685722ad9018"},157:function(t,e,n){t.exports=n.p+"marker-icon-2x_selected.png?78ad5b5c56acfb7d1e290984642cc624"},158:function(t,e,n){"use strict";var r=n(41);n.n(r).a},159:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/NgwMap/C:/Users/rendr/nextgis/oralhistory/src/components/NgwMap/NgwMap.vue"],names:[],mappings:";AAWA;EACE,mBAAkB;EAClB,OAAM;EACN,UAAS;EACT,YAAW;EACX,aAAY;EACZ,YAAW;CACZ",file:"NgwMap.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n"],sourceRoot:""}])},160:function(t,e,n){"use strict";var r=n(42);n.n(r).a},161:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ItemsFilter.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},168:function(t,e,n){"use strict";var r=n(43);n.n(r).a},169:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Detail.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},170:function(t,e,n){"use strict";var r=n(44);n.n(r).a},171:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.drawer-titlebar {\n  flex-shrink: 0;\n}\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.drawer-title {\n  width: 100%;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/DrawerContainer/C:/Users/rendr/nextgis/oralhistory/src/components/DrawerContainer/DrawerContainer.vue"],names:[],mappings:";AA4BA;EACE,YAAW;EACX,aAAY;EACZ,cAAa;EACb,uBAAsB;CACvB;AAED;EAEE,eAAc;CACf;AAED;EACE,aAAY;EACZ,iBAAgB;EAChB,mBAAkB;CACnB;AAED;EACE,YACF;CAAC",file:"DrawerContainer.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.drawer-titlebar {\n  // height: 35px;\n  flex-shrink: 0;\n}\n\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.drawer-title {\n  width: 100%\n}\n"],sourceRoot:""}])},176:function(t,e,n){"use strict";var r=n(45);n.n(r).a},177:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Panel.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},178:function(t,e,n){"use strict";var r=n(46);n.n(r).a},179:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.drawe-icon.active {\n  -webkit-transform: rotate(-180deg);\n  transform: rotate(-180deg);\n}\n.bottom-button {\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n}\n.bottom-button .v-btn {\n    flex-grow: 1;\n    margin: 0;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/C:/Users/rendr/nextgis/oralhistory/src/Main.vue"],names:[],mappings:";AAmHA;EAEI,mCAAkC;EAClC,2BAA0B;CAC3B;AAGH;EACE,YAAW;EACX,cAAa;EACb,8BAA6B;CAK9B;AARD;IAKI,aAAY;IACZ,UAAS;CACV",file:"Main.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drawe-icon {\n  &.active {\n    -webkit-transform: rotate(-180deg);\n    transform: rotate(-180deg);\n  }\n}\n\n.bottom-button {\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  .v-btn {\n    flex-grow: 1;\n    margin: 0;\n  }\n}\n"],sourceRoot:""}])},190:function(t,e,n){"use strict";var r=n(47);n.n(r).a},191:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n* {\n  padding: 0;\n  margin: 0;\n}\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden !important;\n}\n.fullscreen-dialog .dialog-titlebar {\n  flex-shrink: 0;\n}\n.fullscreen-dialog .dialog-body {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/C:/Users/rendr/nextgis/oralhistory/src/App.vue"],names:[],mappings:";AAqCA;EACE,WAAU;EACV,UAAS;CACV;AAED;EACE,YAAW;EACX,aAAY;EACZ,4BAA2B;CAC5B;AAED;EAGI,eAAc;CACf;AAJH;EAOI,aAAY;EACZ,iBAAgB;EAChB,mBAAkB;CACnB",file:"App.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n\r\n* {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\nhtml, body {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden !important;\r\n}\r\n\r\n.fullscreen-dialog {\r\n\r\n  .dialog-titlebar {\r\n    flex-shrink: 0;\r\n  }\r\n\r\n  .dialog-body {\r\n    flex-grow: 1;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n  }\r\n}\r\n\r\n"],sourceRoot:""}])},196:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(73);n(90);var i=/\{ *([\w_-]+) *\}/g;function a(t,e){return t.replace(i,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for letiable "+t);return"function"==typeof r&&(r=r(e)),r})}var s=n(14),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},p=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l={route:"/api/component/pyramid/route"},f=function(){function t(t){this.options={},this.emitter=new s.EventEmitter,this._loadingQueue={},this._loadingStatus={},this.options=c({},l,t||{})}return t.prototype.connect=function(){return u(this,void 0,void 0,function(){var t,e,n,r=this;return p(this,function(o){switch(o.label){case 0:return this.route?[2,Promise.resolve(this.route)]:[3,1];case 1:return this.options.auth?(t=this.options.auth,e=t.login,n=t.password,e&&n?[4,this.getUserInfo()]:[3,3]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.makeQuery(this.options.route,{},{}).then(function(t){return r.route=t,t})];case 4:return[2,o.sent()]}})})},t.prototype.getUserInfo=function(){var t=this;return this.makeQuery("/api/component/auth/current_user",{},{headers:this.getAuthorizationHeaders(),withCredentials:!0}).then(function(e){return t.user=e,t.emitter.emit("login",e),e}).catch(function(e){throw t.emitter.emit("login:error",e),e})},t.prototype.getAuthorizationHeaders=function(){return{Authorization:"Basic "+this.makeClientId()}},t.prototype.makeClientId=function(){var t=this.options.auth,e=t.login,n=t.password;return window.btoa(unescape(encodeURIComponent(e+":"+n)))},t.prototype.request=function(t,e,n){var r=this;return this.connect().then(function(o){for(var i in o)if(o.hasOwnProperty(i)&&i===t){var s=o[i].slice(),c=s.shift();if(s.length){e=e||{};for(var u={},p=0;p<s.length;p++){var l=s[p];if(u[p]="{"+l+"}",void 0===e[l])throw new Error("`"+l+"` url api argument is not specified")}c=a(c,u)}return r.makeQuery(c,e,n)}})},t.prototype.post=function(t,e,n){return(e=e||{}).method="POST",e.nocache=!0,this.request(t,n,e)},t.prototype.makeQuery=function(t,e,n){var r=this;if(void 0===n&&(n={}),t=(this.options.baseUrl?this.options.baseUrl:"")+t)return e&&(t=a(t,e)),t=t.replace(/([^:]\/)\/+/g,"$1"),!this._loadingStatus[t]||n.nocache?(this._loadingStatus[t]=!0,this._getJson(t,n).then(function(e){return r._loadingStatus[t]=!1,r._executeLoadingQueue(t,e),e}).catch(function(e){throw r._loadingStatus[t]=!1,r._executeLoadingQueue(t,e,!0),r.emitter.emit("error",e),e})):(this._loadingStatus[t]=!1,new Promise(function(e,n){r._setLoadingQueue(t,e,n)}));throw new Error("No `url` parameter set for option "+name)},t.prototype._setLoadingQueue=function(t,e,n){this._loadingQueue[t]=this._loadingQueue[t]||{name:t,waiting:[]},this._loadingQueue[t].waiting.push({resolve:e,reject:n,timestamp:new Date})},t.prototype._executeLoadingQueue=function(t,e,n){var r=this._loadingQueue[t];if(r){for(var o=0;o<r.waiting.length;o++){var i=r.waiting[o];n?i.reject&&i.reject():i.resolve(e)}r.waiting=[]}},t.prototype._getJson=function(t,e){var n=this;return new Promise(function(r,o){n.user&&((e=e||{}).headers=n.getAuthorizationHeaders()),function(t,e,n,r){var o;void 0===n&&(n={}),n.method=n.method||"GET",(o=new XMLHttpRequest).open(n.method||"GET",t,!0);var i=function(t){void 0===t&&(t=!1);var n=t?r:e;if(o.responseText)try{n(JSON.parse(o.responseText))}catch(t){r({message:""})}else r({message:""})};o.onreadystatechange=function(){4===o.readyState&&200===o.status||3===o.readyState&&201===o.status?i():3===o.readyState&&400===o.status?i():4===o.readyState&&500===o.status&&i()},o.onerror=function(t){r(t)},o.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;n.onProgress&&n.onProgress(e)}};var a,s=n.headers;if(s)for(var c in s)s.hasOwnProperty(c)&&o.setRequestHeader(c,s[c]);if(o.withCredentials=n.withCredentials,n.file){if((a=new FormData).append("file",n.file),n.data)for(var u in a)a.hasOwnProperty(u)&&a.append(u,a[u])}else a=n.data?JSON.stringify(n.data):null;o.send(a)}(t,r,e,o)})},t}(),h=n(48),d=new f({baseUrl:h.baseUrl}),y=function(t){d.request("feature_layer.geojson",{id:4}).then(function(e){e.features.forEach(function(t,e){t.properties.id=Number(t.id||e)}),t(e.features)})},v=function(t){t([{text:"Адрес",value:"addr"},{text:"долгота",value:"lat"},{text:"широта",value:"lon"},{text:"Название объекта",value:"name"},{text:"Тип объекта",value:"type"},{text:"Статус объекта",value:"status"},{text:"Район",value:"rayon"},{text:"Неофициальное название",value:"unoff"},{text:"ОПИСАНИЕ",value:"description"},{text:"Локальный нарратив",value:"narrativ_l"},{text:"Биографический нарратив",value:"narrativ_b"},{text:"Нарратив о практиках",value:"narrativ_p"},{text:"Описание места",value:"descript2"},{text:"Рассказчик",value:"narrator"},{text:"Визуальные материалы",value:"visual"},{text:"Москва дворовая",value:"mos1"},{text:"Москва церковная",value:"mos2"},{text:"Москва бездомная",value:"mos3"},{text:"Москва подземная",value:"mos4"},{text:"Москва субкультурная",value:"mos5"},{text:"Москва легендарная",value:"mos6"}])},m={namespaced:!0,state:{items:[],meta:!1,filtered:[],detailItem:!1},getters:{features:function(t,e,n){return t.filtered},sortFeatures:function(t,e,n){return t.filtered.slice().sort(function(t,e){return t.properties.name.toUpperCase()>e.properties.name.toUpperCase()?1:-1})}},actions:{getAllItems:function(t){var e=t.commit;v(function(t){e("setMeta",t),y(function(t){e("setItems",t)})})},setFilter:function(t,e){var n=t.commit,r=t.state;n("setFilter",e);var o=r.detailItem;o&&(e.find(function(t){return t.id===o.id})||n("setDetail",!1))},setDetail:function(t,e){var n=t.commit,r=t.state,o=r.filtered.find(function(t){return t.id===e}),i=r.detailItem;i&&i.id===e&&(o=!1),n("setDetail",o)}},mutations:{setItems:function(t,e){t.items=e,t.filtered=e},setFilter:function(t,e){t.filtered=e},setDetail:function(t,e){t.detailItem=e},setMeta:function(t,e){t.meta=e}}},g={namespaced:!0,state:{drawer:!0,page:"main",center:null},getters:{},actions:{showDrawer:function(t){(0,t.commit)("showDrawer")},hideDrawer:function(t){(0,t.commit)("hideDrawer")},toggleDrawer:function(t,e){var n=t.commit;n(e?"showDrawer":"hideDrawer")},setPage:function(t,e){(0,t.commit)("setPage",e)},zoomTo:function(t,e){(0,t.commit)("setCenter",e)}},mutations:{showDrawer:function(t){t.drawer=!0},hideDrawer:function(t){t.drawer=!1},setPage:function(t,e){t.page=e},setCenter:function(t,e){t.center=e}}};r.default.use(o.a);var _=new o.a.Store({modules:{bdMain:m,app:g},strict:!1}),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("main-component"),t._v(" "),n("v-dialog",{attrs:{value:"table"===t.page,fullscreen:"",scrollable:"",transition:"dialog-bottom-transition"}},[n("v-card",{staticClass:"fullscreen-dialog"},[n("v-toolbar",{staticClass:"dialog-titlebar",attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.page="main"}}},[n("v-icon",[t._v("close")])],1),t._v(" "),n("v-toolbar-title",[t._v("Таблица")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",flat:""}},[t._v("Сохранить")])],1)],1),t._v(" "),n("div",{staticClass:"dialog-body"},["table"===t.page?n("table-component"):"about"===t.page?n("about-component"):t._e()],1)],1)],1)],1)};b._withStripped=!0;var w=n(8),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-layout",{attrs:{"align-center":"","justify-center":"",column:"","fill-height":""}},[n("div",{staticClass:"title font-weight-thin pa-3"},[t._v("Разработано в")]),t._v(" "),n("div",{staticClass:"logo",on:{click:t.openNextGIS}},[n("svg",{staticClass:"logo hidden-xs",staticStyle:{"enable-background":"new 0 0 818.8 111.5"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 818.8 111.5","xml:space":"preserve"}},[n("path",{staticClass:"logo__item--dark",attrs:{d:"M0,111.5V0.1h7.4l69.9,69.8V0.1h22.3v111.4h-8.2L22.3,42.4v69.1\n              H0"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M225.8,111.5V0.1l-81.9-0.1v20.8h59.6v23.8h-34v20.7h34v25.3H144\n              v20.8L225.8,111.5"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M502.3,0.1v20.8h-37.1v90.6h-22.3V20.9h-37.1V0.1L502.3,0.1"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M550.4,95.5c-10.7-10.6-16-23.9-16-39.9\n              c0.1-15.7,5.4-28.8,16-39.5c10.6-10.7,23.9-16,39.6-16c15.9,0,29.5,5,40.9,14.9l-14.9,16.3c-7.6-5.9-16.3-8.9-26.1-8.9\n              c-10,0-18.1,3.2-24.2,9.4c-6.1,6.2-9.2,14.1-9.2,23.8c0.1,10.4,3.2,18.6,9.3,24.7c6.1,6.1,14.2,9.1,24.2,9.1c8,0,14.2-1.6,18.5-4.8\n              V65.4l-14.9,0.1V44.7H631v52c-11.3,9.9-25,14.9-40.9,14.9C574.3,111.5,561,106.1,550.4,95.5"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M674.9,111.5h22.2V0h-22.2V111.5z"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M801.4,3.8c5.7,2.5,11,6.2,16,11.2l-14.9,14.9\n              c-5-6-11.9-8.9-20.8-8.9c-8.9,0-14.6,2.1-17.1,6.3c-2.5,4.2-2.5,7.8,0,10.8c2.5,3,8.2,5.2,17.1,6.7c9.4,1,18,4.1,25.6,9.3\n              c7.7,5.2,11.5,13.5,11.5,24.9c0,8.9-4.1,16.6-12.3,23c-8.2,6.4-17.7,9.7-28.6,9.7c-10.3,0-19-1.5-25.9-4.4\n              c-6.9-3-12.9-6.9-17.8-11.9L749,80.3c5,6,13.4,9.4,25.3,10.4c9.9,0,16.1-2.1,18.5-6.3c2.5-4.2,2.5-8.4,0-12.6\n              c-2.4-4.2-8.6-6.8-18.5-7.8c-8.9-1-17.1-3.7-24.5-8.2c-7.4-4.5-11.2-12.1-11.2-23c0-9.9,4.2-17.8,12.7-23.7c8.4-6,17.1-9,26-9\n              C787.6,0.1,795.7,1.3,801.4,3.8"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M340.2,43.3l31.6-43.2h-26.2L327,25.4L340.2,43.3"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M332.8,53.5L293.6,0.1h-26.2l39,53.4l-42.6,58h26.5L332.8,53.5"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M340.2,63.6l-13.2,18l21.9,29.9h26.4L340.2,63.6"}})])])])],1)};A._withStripped=!0;var O,x=n(19),P=n.n(x),C=(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C(e,t),e.prototype.openNextGIS=function(){window.location.href="http://nextgis.com/"},e=k([P.a],e)}(r.default),j=(n(91),n(10)),E=n(12),M=n.n(E),S=n(204),I=n(62),T=Object(j.a)(L,A,[],!1,null,null,null);M()(T,{VApp:S.a,VLayout:I.a}),T.options.__file="src/components/NextGIS/About.vue";var B=T.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-data-table",{attrs:{headers:t.headers,items:t.items,"hide-actions":""},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[n("v-tooltip",{attrs:{bottom:""}},[n("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n          "+t._s(e.header.text)+"\n        ")]),t._v(" "),n("span",[t._v("\n          "+t._s(e.header.text)+"\n        ")])])]}},{key:"items",fn:function(e){return t._l(t.headers,function(r){return n("td",{key:r.value},[t._v(t._s(e.item[r.value]))])})}}])})],1)};R._withStripped=!0;var F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headers=[{text:"Адрес",value:"addr"},{text:"долгота",value:"lat"},{text:"широта",value:"lon"},{text:"Название объекта",value:"name"},{text:"Тип объекта",value:"type"},{text:"Статус объекта",value:"status"},{text:"Район",value:"rayon"},{text:"Неофициальное название",value:"unoff"},{text:"ОПИСАНИЕ",value:"description"},{text:"Локальный нарратив",value:"narrativ_l"},{text:"Биографический нарратив",value:"narrativ_b"},{text:"Нарратив о практиках",value:"narrativ_p"},{text:"Описание места",value:"descript2"},{text:"Рассказчик",value:"narrator"},{text:"Визуальные материалы",value:"visual"},{text:"Москва дворовая",value:"mos1"},{text:"Москва церковная",value:"mos2"},{text:"Москва бездомная",value:"mos3"},{text:"Москва подземная",value:"mos4"},{text:"Москва субкультурная",value:"mos5"},{text:"Москва легендарная",value:"mos6"}],e}return F(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.getters["bdMain/sortFeatures"].map(function(t){return t.properties})},enumerable:!0,configurable:!0}),e=V([w.a],e)}(w.c),U=(n(96),n(203)),$=n(197),N=Object(j.a)(D,R,[],!1,null,null,null);M()(N,{VApp:S.a,VDataTable:U.a,VTooltip:$.a}),N.options.__file="src/components/Table/Table.vue";var G=N.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-navigation-drawer",{attrs:{stateless:"",fixed:"",app:"",width:"350"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("drawer-container",[n("div",{attrs:{slot:"header"},slot:"header"},[n("v-layout",{attrs:{"justify-space-between":""}},[t._v("\n        Устная память Москвы\n        "),n("v-btn",{staticClass:"pa-0 ma-0",attrs:{flat:"",icon:""},on:{click:function(e){t.drawer=!1}}},[n("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),t.items&&t.items.length?n("div",[n("div",[n("v-expansion-panel",{attrs:{expand:""}},[n("v-expansion-panel-content",[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("Фильтр")]),t._v(" "),n("items-filter")],1)],1),t._v(" "),n("v-divider")],1),t._v(" "),n("div",[n("list")],1)]):n("div",[n("div",{staticClass:"text-xs-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]),t._v(" "),n("template",{slot:"footer"},[n("v-item-group",{staticClass:"bottom-button"},[n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("save_alt")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"},on:{click:function(e){t.page="table"}}},[n("v-icon",{on:{click:function(e){t.page="table"}}},[t._v("table_chart")])],1)],1)],1)],2)],1),t._v(" "),n("v-navigation-drawer",{attrs:{value:!!t.detail,stateless:"",width:"400",app:"",right:""}},[t.detail?n("drawer-container",[n("template",{slot:"header"},[n("v-btn",{staticClass:"pa-0 ma-0",attrs:{flat:"",icon:""},on:{click:function(e){t.detail=!1}}},[n("v-icon",[t._v("close")])],1),t._v("\n        "+t._s(t.detail.properties.name)+"\n      ")],1),t._v(" "),n("detail"),t._v(" "),n("template",{slot:"footer"},[n("v-item-group",{staticClass:"bottom-button"},[n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("feedback")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("save_alt")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"},on:{click:function(e){t.zoomTo=t.detail.id}}},[n("v-icon",[t._v("place")])],1)],1)],1)],2):t._e()],1),t._v(" "),n("v-content",[n("ngw-map",{attrs:{center:[37.63,55.75],zoom:10}},[n("map-control",{attrs:{position:"topleft"}},[t.drawer?t._e():n("div",[n("v-btn",{attrs:{fab:"",small:""},on:{click:function(e){t.drawer=!t.drawer}}},[n("v-icon",{staticClass:"drawe-icon",class:{active:t.drawer},attrs:{large:""}},[t._v("chevron_right")])],1),t._v(" "),n("span",{staticClass:"title"},[t._v("Устная память Москвы")])],1)])],1)],1)],1)};z._withStripped=!0;var W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{attrs:{dense:""}},t._l(t.items,function(e){return n("v-list-tile",{key:e.id},[n("v-list-tile-content",[n("v-list-tile-title",{attrs:{title:e.name}},[t._v(t._s(e.name))])],1),t._v(" "),n("v-list-tile-action",{staticClass:"pa-0"},[n("v-btn",{attrs:{icon:"",ripple:""}},[n("v-icon",{style:{color:e.id===(t.detail&&t.detail.id)?"orange":"grey"},attrs:{color:"lighten-1"},on:{click:function(n){t.setDetail(e.id)}}},[t._v("\n          info\n        ")])],1)],1)],1)}))};W._withStripped=!0;var Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Z(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.getters["bdMain/sortFeatures"].map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem},enumerable:!0,configurable:!0}),e.prototype.setDetail=function(t){this.$store.dispatch("bdMain/setDetail",t)},e=q([w.a],e)}(w.c),J=(n(141),n(69)),Y=n(71),Q=n(67),K=n(64),X=n(65),tt=n(74),et=Object(j.a)(H,W,[],!1,null,null,null);M()(et,{VBtn:J.a,VIcon:Y.a,VList:Q.a,VListTile:K.a,VListTileAction:X.a,VListTileContent:tt.a,VListTileTitle:tt.c}),et.options.__file="src/components/List/List.vue";var nt=et.exports,rt=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"map"}},[this.ready?this._t("default"):this._e()],2)};rt._withStripped=!0;var ot=n(16),it=1,at=function(){function t(t,e){this.map=t,this.name=e.id||String(it++),this.options=Object.assign({},this.options,e)}return t.prototype.addLayer=function(t){return null},t}(),st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},ut=1,pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.addLayer=function(t){this.name=t.id||"tile-"+ut++;var e=t.url,n=ct(t,["url"]);return new ot.TileLayer(e,n)},e}(at),lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(){return(ft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ht=1,dt={color:"blue",opacity:1,stroke:!1},yt={Point:"circle",LineString:"line",MultiPoint:"circle",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill"},vt={};for(var mt in yt)yt.hasOwnProperty(mt)&&(vt[yt[mt]]=vt[yt[mt]]||[],vt[yt[mt]].push(mt));var gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lt(e,t),e.prototype.addLayer=function(t){this.name=t.id||"geojson-"+ht++;var e=t.type;if(!e){var n=function(t){var e;if("FeatureCollection"===t.type){var n=t.features.map(function(t){return t.geometry.type});e=_t(n)}else if("GeometryCollection"===t.type){var r=t.geometries.map(function(t){return t.type});e=_t(r)}else e="Feature"===t.type?t.geometry.type:t.type;return e}(t.data);e=yt[n]}var r=function(t,e){if("FeatureCollection"===t.type)t.features=t.features.filter(function(t){return bt(t.geometry.type,e)});else if("Feature"===t.type){var n=bt(t.geometry.type,e);if(!n)return!1}else"GeometryCollection"===t.type&&(t.geometries=t.geometries.filter(function(t){return bt(t.type,e)}));return t}(t.data,e);if(r){var o={},i=t.paint&&t.paint.icon,a=function(t){var e=ft({},dt,t);e.opacity&&(e.fillOpacity=e.opacity);return e}(t.paint);return t.paint&&(o.style=function(t){return a}),"circle"!==e||i?"line"===e&&(a.stroke=!0):o.pointToLayer=function(t,e){return new ot.CircleMarker(e,a)},new ot.GeoJSON(r,o)}},e}(at);function _t(t){for(var e,n={},r=0;r<t.length;r++)n[t[r]]=1+(n[t[r]]||0);for(var o in n)n[o]>(n[e]||0)&&(e=o);return e}function bt(t,e){return-1!==vt[e].indexOf(t)}var wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),At=function(t){function e(e){var n=t.call(this,e)||this;e.customAttribution&&[].concat(e.customAttribution).forEach(function(t){return n.addAttribution(t)});return n}return wt(e,t),e}(ot.Control.Attribution),Ot=n(81),xt=n.n(Ot),Pt=function(){return(Pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ct=1,kt=function(){function t(){}return t.prototype.addLayer=function(t){var e=(t=Pt({transparent:!0},t)).updateWmsParams;if(this.name=t.id||"image-"+Ct++,this.layer=xt.a.overlay(t.url,t),e){var n=this.layer.updateWmsParams;this.layer.updateWmsParams=function(t){n.call(this,t),this.wmsParams=e(this.wmsParams)}}return this.layer},t}(),Lt=function(){function t(){this.options={target:"map"},this.layerAdapters=t.layerAdapters,this.displayProjection="EPSG:3857",this.lonlatProjection="EPSG:4326",this.emitter=new s.EventEmitter}return t.prototype.create=function(t){void 0===t&&(t={target:"map"}),this.options=Object.assign({},t),this.map=new ot.Map(this.options.target,{zoomControl:!1,attributionControl:!1}),this.emitter.emit("create",{map:this.map}),this._addMapListeners()},t.prototype.getContainer=function(){return this.map.getContainer()},t.prototype.onMapLoad=function(t){var e=this;return new Promise(function(n){e.map?n(t&&t()):e.emitter.once("create",function(){n(t&&t())})})},t.prototype.setCenter=function(t){var e=t[0],n=t[1];this.map.setView([n,e],this.map.getZoom())},t.prototype.setZoom=function(t){this.map.setZoom(t)},t.prototype.fit=function(t){this.map.fitBounds([[t[3],t[0]],[t[1],t[2]]])},t.prototype.getLayerAdapter=function(e){return t.layerAdapters[e]},t.prototype.addControl=function(e,n,r){var o;if("string"==typeof e){var i=t.controlAdapters[e];i&&(o=new i(r))}else o=e;if(o)return o.options.position=n.replace("-",""),this.map.addControl(o),o},t.prototype.removeLayer=function(t){},t.prototype.showLayer=function(t){t.addTo(this.map)},t.prototype.hideLayer=function(t){t.remove()},t.prototype.setLayerOpacity=function(t,e){},t.prototype.setLayerOrder=function(t,e,n){var r=[],o=Object.keys(n).filter(function(t){return!n[t].baseLayer||(r.push(t),!1)}).sort(function(t,e){return n[t].order-n[e].order});r.forEach(function(t){n[t].layer.bringToBack()});for(var i=0;i<o.length;i++)n[o[i]].onMap&&n[o[i]].layer.bringToFront();t.setZIndex&&t.setZIndex(e)},t.prototype.onMapClick=function(t){var e=t.containerPoint,n=t.latlng;this.emitter.emit("click",{latLng:n,pixel:{left:e.x,top:e.y},source:t})},t.prototype._addMapListeners=function(){var t=this;this.map.on("click",function(e){t.onMapClick(e)})},t.layerAdapters={IMAGE:kt,TILE:pt,GEOJSON:gt},t.controlAdapters={ZOOM:ot.Control.Zoom,ATTRIBUTION:At},t}(),jt=n(36);function Et(t,e,n,r){var o;if(void 0===e&&(e=function(t){return t}),void 0===r&&(r=[]),Array.isArray(t))o=t;else{e(t)&&r.push(t);var i=n(t);i&&(o=[].concat(i))}if(o)for(var a=0;a<o.length;a++)o[a]&&Et(o[a],e,n,r);return r}var Mt=function(){function t(t){this._children=[],this.entry=t}return t.prototype.setParent=function(t){this._parent=t},t.prototype.addChildren=function(t){this._children.push(t)},t.prototype.getParent=function(){return this._parent},t.prototype.getParents=function(t){return this.getParent()?Et(this._parent,t,function(t){return t.tree.getParent()}):[]},t.prototype.getDescendants=function(t){return Et(this._children,t,function(t){return t.tree.getChildren()})},t.prototype.getChildren=function(){return this._children},t}(),St=function(){function t(t,e,n){this.emitter=new s.EventEmitter,this.entry=e,this.options=Object.assign({},n),this.name=t,this._value=this.getProperty()}return t.prototype.getProperty=function(){return"function"==typeof this.options.getProperty?this.options.getProperty.call(this):this.options.value},t.prototype.getParents=function(){return this.entry.tree.getParents()||[]},t.prototype.getParent=function(){return this.entry.tree.getParent()},t.prototype.isGroup=function(){return this.entry.tree.getDescendants().length},t.prototype.isBlocked=function(){var t=this;if(void 0===this._blocked){var e=this.entry.tree.getParents();if(e){var n=e.find(function(e){var n=e.properties.get(t.name);if(n)return!n.value()});this._blocked=!!n}else this._blocked=!1}return this._blocked},t.prototype.set=function(t,e){this._value=this._prepareValue(t),this.update(this._value,e),this._fireChangeEvent(this._value,e)},t.prototype.value=function(){return this.getValue()},t.prototype.update=function(t,e){this._callOnSet(t,e)},t.prototype.getContainer=function(){return this._container},t.prototype.destroy=function(){this._container&&this._container.parentNode.removeChild(this._container),this._removeEventsListener&&this._removeEventsListener()},t.prototype.getValue=function(){return void 0!==this._value?this._value:this.getProperty()},t.prototype._prepareValue=function(t){return t},t.prototype._callOnSet=function(t,e){this.options.onSet&&this.options.onSet.call(this,t,e)},t.prototype._fireChangeEvent=function(t,e){var n=this;t=void 0!==t?t:this.getValue(),this.emitter.emit("change",{value:t,options:e}),this.entry.tree.getParents().forEach(function(r){var o=r.properties.get(n.name);o&&o.emitter.emit("change-tree",{value:t,options:e,entry:n.entry})})},t}(),It=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tt=function(){return(Tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Bt=function(t){function e(n,r,o){var i=t.call(this,n,r,Object.assign({},e.options,o))||this;return i.set(i.value()),i}return It(e,t),e.prototype.update=function(t,e){if(t){if(e&&e.bubble||this.options.bubble){this.unBlock(e);var n=this.getParent(),r=n&&n.properties.get(this.name);r&&r.set(t,Object.assign({},e,{bubble:!0,propagation:!1}))}this.isBlocked()||this._turnOn(e)}else this._turnOff(e);(e&&e.propagation||this.options.propagation)&&this._propagation(t,e)},e.prototype.getHierarchyValue=function(){var t=this;return this.value()&&this.getParents().every(function(e){var n=e.properties[t.name];return n&&n.get()})},e.prototype._prepareValue=function(t){return!!t},e.prototype._turnOff=function(t){this.options.turnOff&&this.options.turnOff.call(this,t),this._callOnSet(!1,t),this.options.hierarchy&&this.isGroup()&&this.blockChilds(t)},e.prototype._turnOn=function(t){this.options.turnOn&&this.options.turnOn.call(this,t),this._callOnSet(!0,t),this.options.hierarchy&&this.isGroup()&&this.unblockChilds(t)},e.prototype.block=function(t){this._blocked=!0,this._block(t)},e.prototype._block=function(t){this._turnOff(t)},e.prototype.unBlock=function(t){this._blocked=!1,this.getValue()&&this._unBlock(t)},e.prototype._unBlock=function(t){this._turnOn(t)},e.prototype.blockChilds=function(t){this.entry.tree.getDescendants().forEach(this._blockChild.bind(this,t))},e.prototype.unblockChilds=function(t){this.entry.tree.getChildren().forEach(this._unBlockChild.bind(this,t))},e.prototype._blockChild=function(t,e){var n=e.properties.get(this.name);n.block&&n.block(t)},e.prototype._unBlockChild=function(t,e){var n=e.properties.get(this.name);n.unBlock&&n.unBlock(t)},e.prototype._propagation=function(t,e){if(this.isGroup())for(var n=this.entry.tree.getChildren(),r=0;r<n.length;r++){var o=n[r].properties.get(this.name);o&&o.set(t,Tt({},e,{propagation:!0,bubble:!1}))}},e.options={hierarchy:!0,bubble:!1,propagation:!1,label:"Toggle"},e}(St),Rt=function(){return(Rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ft=function(){function t(t,e){this.options={},this.entry=t,this._properties={},this._propertiesList=[],e&&e.forEach(this._setPropertyHandler.bind(this))}return t.prototype.add=function(t){this._setPropertyHandler(t)},t.prototype._setPropertyHandler=function(e){var n=t.handlers,r=e.handler;if(!r&&e.type)switch(e.type){case"boolean":r=n.CheckProperty;break;case"string":r=n.BaseProperty;break;default:r=n.BaseProperty}if(r){var o=Rt({},e||{});this._properties[e.name]=new r(e.name,this.entry,o),this._propertiesList.push(e.name)}},t.prototype.update=function(){this.list().forEach(function(t){t.update()})},t.prototype.value=function(t){var e=this.get(t);if(e)return e.value},t.prototype.set=function(t,e,n){var r=this.get(t);if(r)return r.set(e,n)},t.prototype.get=function(t){return this._properties[t]},t.prototype.list=function(){var t=this;return this._propertiesList.map(function(e){return t._properties[e]})},t.prototype.destroy=function(){for(var t in this._properties)if(this._properties.hasOwnProperty(t)){var e=this.get(t);e&&e.destroy&&e.destroy()}this._properties=null,this._propertiesList=[]},t.handlers={CheckProperty:Bt},t}(),Vt=0,Dt=function(){function t(t){this.emitter=new s.EventEmitter,this.options=Object.assign({},this.options,t),this.id=String(Vt++),this.tree=new Mt(this)}return t.prototype.initProperties=function(){this.properties=new Ft(this,this.options.properties)},t}(),Ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$t=function(){return($t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Nt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Gt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},zt=function(t){function e(n,r,o,i){var a=t.call(this,Object.assign({},e.options,o))||this;return a.webMap=n,a.item=r,i&&a.tree.setParent(i),a.initProperties(),a.initItem(r),a}return Ut(e,t),e.prototype.initItem=function(t){return Nt(this,void 0,void 0,function(){var n,r,o,i=this;return Gt(this,function(a){switch(a.label){case 0:return n=t._layer,"group"!==t.item_type&&"root"!==t.item_type?[3,1]:(t.children&&t.children.length&&t.children.reverse().forEach(function(t){var n=new e(i.webMap,t,i.options,i);i.tree.addChildren(n)}),[3,3]);case 1:return"layer"!==t.item_type?[3,3]:(r=t.layer_adapter.toUpperCase(),t.id=Number(this.id),o=$t({},t,{id:t.id}),[4,this.webMap.addLayer(r,o)]);case 2:n=a.sent(),a.label=3;case 3:return n&&(t._layer=n,"layer"===t.item_type&&t.layer_enabled&&this.properties.get("visibility").set(!0)),[2]}})})},e.prototype.fit=function(){"layer"===this.item.item_type&&console.log(this.item)},e.options={properties:[{type:"boolean",name:"visibility",getProperty:function(){var t=this.entry;return"group"===t.item.item_type||("layer"===t.item.item_type?t.item.layer_enabled:"root"===t.item.item_type)},onSet:function(t){var e=this.entry;"layer"===e.item.item_type&&(t?e.webMap.showLayer(e.id):e.webMap.hideLayer(e.id),e.item.layer_enabled=t)}}]},e}(Dt),Wt=function(){return function(){this.backspace=8,this.tab=9,this.enter=13,this.shift=16,this.ctrl=17,this.alt=18,this["pause/break"]=19,this.caps_lock=20,this.escape=27,this.page_up=33,this.page_down=34,this.end=35,this.home=36,this.left_arrow=37,this.up_arrow=38,this.right_arrow=39,this.down_arrow=40,this.insert=45,this.delete=46,this.left_window_key=91,this.right_window_key=92,this.select_key=93,this.numpad_0=96,this.numpad_1=97,this.numpad_2=98,this.numpad_3=99,this.numpad_4=100,this.numpad_5=101,this.numpad_6=102,this.numpad_7=103,this.numpad_8=104,this.numpad_9=105,this.multiply=106,this.add=107,this.subtract=109,this.decimal_point=110,this.divide=111,this.f1=112,this.f2=113,this.f3=114,this.f4=115,this.f5=116,this.f6=117,this.f7=118,this.f8=119,this.f9=120,this.f10=121,this.f11=122,this.f12=123,this.num_lock=144,this.scroll_lock=145,this["semi-colon"]=186,this.equal_sign=187,this[","]=188,this["-"]=189,this["."]=190,this["/"]=191,this["`"]=192,this["["]=219,this["\\"]=220,this["]"]=221,this["'"]=222}}(),Zt=function(){function t(){this.keyCodeAlias=new Wt,this.keys={},this._windowOnFocus=this.windowOnFocus.bind(this),this._keysPressed=this.keysPressed.bind(this),this._keysReleased=this.keysReleased.bind(this),this.addKeyboardEventsListener()}return t.prototype.pressed=function(t){var e=this.keyCodeAlias[t];if(e)return this.keys[e]},t.prototype.addKeyboardEventsListener=function(){window.addEventListener("focus",this._windowOnFocus,!1),window.addEventListener("keydown",this._keysPressed,!1),window.addEventListener("keyup",this._keysReleased,!1)},t.prototype.removeKeyboardEventsListener=function(){window.removeEventListener("focus",this._windowOnFocus,!1),window.removeEventListener("keydown",this._keysPressed,!1),window.removeEventListener("keyup",this._keysReleased,!1)},t.prototype.keysPressed=function(t){t.stopPropagation(),this.keys[t.keyCode]||(this.keys[t.keyCode]=!0)},t.prototype.keysReleased=function(t){t.stopPropagation(),this.keys[t.keyCode]=!1},t.prototype.windowOnFocus=function(){this.keys={}},t}();Object.prototype.toString;var qt=function(){return(qt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ht=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Jt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Yt=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,o,(e=t[n](e)).done,e.value)})}}},Qt=function(){function t(t){this.displayProjection="EPSG:3857",this.lonlatProjection="EPSG:4326",this.emitter=new s.EventEmitter,this.keys=new Zt,this.DPI=1e3/39.37/.28,this.IPM=39.37,this.settingsIsLoading=!1,this._baseLayers=[],this._layers={},this._layersIds=0,this.mapAdapter=t.mapAdapter,this._starterKits=t.starterKits||[],this._addEventsListeners()}return t.prototype.create=function(t){return Ht(this,void 0,void 0,function(){var e;return Jt(this,function(n){switch(n.label){case 0:if(this.options=function t(e,n,r){void 0===r&&(r=!1);var o=Array.isArray(n),i=o&&[]||{};return o?r?(e=e||[],i=i.concat(e),n.forEach(function(n,o){void 0===i[o]?i[o]=n:"object"==typeof n?i[o]=t(e[o],n,r):-1===e.indexOf(n)&&i.push(n)})):i=n:(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){i[t]=e[t]}),Object.keys(n).forEach(function(o){"object"==typeof n[o]&&n[o]&&e[o]?i[o]=t(e[o],n[o],r):i[o]=n[o]})),i}(this.options||{},t),this.settings||!this._starterKits.length)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getSettings()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),console.error(e),[3,4];case 4:return[4,this._setupMap()];case 5:return n.sent(),[2,this]}})})},t.prototype.getSettings=function(){return Ht(this,void 0,void 0,function(){var t,e,n,r,o,i,a=this;return Jt(this,function(s){switch(s.label){case 0:return this.settings?[2,Promise.resolve(this.settings)]:this.settingsIsLoading?[2,new Promise(function(t){var e=function(n){t(n),a.emitter.removeListener("load-settings",e)};a.emitter.on("load-settings",e)})]:[3,1];case 1:this.settingsIsLoading=!0,t=void 0,s.label=2;case 2:s.trys.push([2,7,,8]),t={},e=0,n=this._starterKits.filter(function(t){return t.getSettings}),s.label=3;case 3:return e<n.length?[4,(r=n[e]).getSettings.call(r,this)]:[3,6];case 4:(o=s.sent())&&Object.assign(t,o),s.label=5;case 5:return e++,[3,3];case 6:return[3,8];case 7:throw i=s.sent(),this.settingsIsLoading=!1,new Error(i);case 8:if(t)return this.settings=t,this.settingsIsLoading=!1,this.emitter.emit("load-settings",t),[2,t];s.label=9;case 9:return[2]}})})},t.prototype.onMapLoad=function(t){var e=this.mapAdapter.onMapLoad;return e?e.call(this.mapAdapter,t):Promise.resolve(t)},t.prototype.addBaseLayer=function(t,e){return Ht(this,void 0,void 0,function(){var n;return Jt(this,function(r){switch(r.label){case 0:return[4,this.addLayer(t,qt({},e),!0)];case 1:return(n=r.sent())&&this._baseLayers.push(n.name),[2,n]}})})},t.prototype.isBaseLayer=function(t){return-1!==this._baseLayers.indexOf(t)},t.prototype.setCenter=function(t){return this.mapAdapter.setCenter(t),this},t.prototype.setZoom=function(t){return this.mapAdapter.setZoom(t),this},t.prototype.fit=function(t){return this.mapAdapter.fit(t),this},t.prototype.getLayerAdapters=function(){return this.mapAdapter.layerAdapters},t.prototype.getLayerAdapter=function(t){return this.mapAdapter.layerAdapters[t]},t.prototype.getLayer=function(t){return this._layers[t]},t.prototype.getLayers=function(){return Object.keys(this._layers)},t.prototype.isLayerOnTheMap=function(t){return this._layers[t].onMap},t.prototype.addControl=function(t,e,n){return this.mapAdapter.addControl(t,e,n)},t.prototype.addLayer=function(t,e,n){return Ht(this,void 0,void 0,function(){var r,o,i,a,s;return Jt(this,function(c){switch(c.label){case 0:return(r="string"==typeof t?this.getLayerAdapter(t):t)?(o=new r(this.mapAdapter.map,e),this.mapAdapter.onMapLoad?[4,this.mapAdapter.onMapLoad()]:[3,2]):[3,4];case 1:c.sent(),c.label=2;case 2:return[4,o.addLayer(e)];case 3:return i=c.sent(),a=o.name,s={layer:i,onMap:!1},n?(s.baseLayer=!0,s.order=0,this._baseLayers.push(a)):s.order=e.order||++this._layersIds,this._layers[a]=s,[2,o];case 4:return[2,Promise.reject("No adapter")]}})})},t.prototype.removeLayer=function(t){var e=this._layers[t];if(e){if(this.mapAdapter.removeLayer(e.layer),e.baseLayer){var n=this._baseLayers.indexOf(t);n&&this._baseLayers.splice(n,1)}delete this._layers[t]}},t.prototype.showLayer=function(t){this.toggleLayer(t,!0)},t.prototype.hideLayer=function(t){this.toggleLayer(t,!1)},t.prototype.setLayerOpacity=function(t,e){},t.prototype.getScaleForResolution=function(t,e){return parseFloat(t)*(e*this.IPM*this.DPI)},t.prototype.getResolutionForScale=function(t,e){return parseFloat(t)/(e*this.IPM*this.DPI)},t.prototype.toggleLayer=function(t,e){var n=this,r=function(t,r){if(r.onMap=e,e&&t){var o=r.baseLayer?0:r.order;n.mapAdapter.setLayerOrder(r.layer,o,n._layers),n.mapAdapter.showLayer(r.layer)}else t.removeLayer(r.layer)},o=this._layers[t];o&&o.onMap!==e&&(this.mapAdapter.map?r(this.mapAdapter,o):this.mapAdapter.emitter.once("create",function(t){r(t.map,o)}))},t.prototype.requestGeomString=function(t,e){return this.mapAdapter.requestGeomString(t,e)},t.prototype.onMapClick=function(t){var e=t.containerPoint,n=t.latlng;this.emitter.emit("click",{latLng:n,pixel:{left:e.x,top:e.y},source:t})},t.prototype._setupMap=function(){return Ht(this,void 0,void 0,function(){var t,e,n,r,o,i;return Jt(this,function(a){switch(a.label){case 0:return this.settings&&(t=this.settings,e=t.extent_bottom,n=t.extent_left,r=t.extent_top,o=t.extent_right,e&&n&&r&&o&&(this._extent=[n,e,o,r],(i=this._extent)[3]>82&&(i[3]=82),i[1]<-82&&(i[1]=-82))),this.mapAdapter.displayProjection=this.displayProjection,this.mapAdapter.lonlatProjection=this.lonlatProjection,this.mapAdapter.create(this.options),this._addTreeLayers(),[4,this._addLayerProviders()];case 1:return a.sent(),this._zoomToInitialExtent(),this.emitter.emit("build-map",this.mapAdapter),[2,this]}})})},t.prototype._addTreeLayers=function(){return Ht(this,void 0,void 0,function(){var t,e,n;return Jt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getSettings()];case 1:return(t=r.sent())&&(e=t.root_item)&&(this.layers=new zt(this,e),this.emitter.emit("add-layers",this.layers)),[3,3];case 2:return n=r.sent(),console.error(n),[3,3];case 3:return[2]}})})},t.prototype._zoomToInitialExtent=function(){if(this._extent)this.mapAdapter.fit(this._extent);else{var t=this.options,e=t.center,n=t.zoom;e&&this.mapAdapter.setCenter(e),n&&this.mapAdapter.setZoom(n)}},t.prototype._addLayerProviders=function(){return Ht(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,c,u,p,l,f,h,d;return Jt(this,function(y){switch(y.label){case 0:y.trys.push([0,26,,27]),y.label=1;case 1:y.trys.push([1,19,20,25]),o=Yt(this._starterKits.filter(function(t){return t.getLayerAdapters})),y.label=2;case 2:return[4,o.next()];case 3:return(i=y.sent()).done?[3,18]:[4,(a=i.value).getLayerAdapters.call(a)];case 4:if(!(s=y.sent()))return[3,17];y.label=5;case 5:y.trys.push([5,11,12,17]),c=Yt(s),y.label=6;case 6:return[4,c.next()];case 7:return(u=y.sent()).done?[3,10]:[4,(p=u.value).createAdapter(this.mapAdapter)];case 8:(l=y.sent())&&(this.mapAdapter.layerAdapters[p.name]=l),y.label=9;case 9:return[3,6];case 10:return[3,17];case 11:return f=y.sent(),n={error:f},[3,17];case 12:return y.trys.push([12,,15,16]),u&&!u.done&&(r=c.return)?[4,r.call(c)]:[3,14];case 13:y.sent(),y.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[3,2];case 18:return[3,25];case 19:return h=y.sent(),t={error:h},[3,25];case 20:return y.trys.push([20,,23,24]),i&&!i.done&&(e=o.return)?[4,e.call(o)]:[3,22];case 21:y.sent(),y.label=22;case 22:return[3,24];case 23:if(t)throw t.error;return[7];case 24:return[7];case 25:return[3,27];case 26:throw d=y.sent(),new Error(d);case 27:return[2]}})})},t.prototype._addEventsListeners=function(){var t=this;this.mapAdapter.emitter.on("click",function(e){return t._onMapClick(e)})},t.prototype._onMapClick=function(t){var e=this;this.emitter.emit("click",t),this._starterKits.forEach(function(n){n.onMapClick&&n.onMapClick(t,e)})},t}(),Kt=function(){return(Kt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},te=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ee=function(){function t(t){this.options={url:"https://qms.nextgis.com"},this.options=Kt({},this.options,t),this.url=this.options.url}return t.prototype.getLayerAdapters=function(){var t=this;return Promise.resolve([{name:"QMS",createAdapter:function(e){return Promise.resolve(t._createAdapter(e))}}])},t.prototype.getQmsServices=function(){return Xt(this,void 0,void 0,function(){return te(this,function(t){return[2,ne(this.url+"/api/v1/geoservices/")]})})},t.prototype._createAdapter=function(t){var e=this.url;this.map=t;var n={tms:"TILE"},r=function(t,e){this.map=t,this.name=e.id};return r.prototype.addLayer=function(r){var o=this;return ne(e+"/api/v1/geoservices/"+r.qmsid).then(function(e){if(e){var i=n[e.type],a=t.layerAdapters[i];if(a&&"TILE"===i)return r.url=e.url,r.name=e.name,r.attribution=e.copyright_text,a.prototype.addLayer.call(o,r)}})},r},t}();function ne(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&200===r.status&&r.responseText)try{e(JSON.parse(r.responseText))}catch(t){n(t)}},r.open("GET",function(t){return t.replace(/([^:]\/)\/+/g,"$1")}(t),!0),r.send(null)})}var re=function(){return(re=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},oe=function(){function t(t){this.options={},this.pixelRadius=10,this.options=re({},this.options,t),this.options.pixelRadius&&(this.pixelRadius=t.pixelRadius),this.url=this.options.baseUrl,this.resourceId=t.resourceId,this.connector=new f({baseUrl:this.url,auth:this.options.auth})}return t.getLayerAdapterOptions=function(e,n,r){var o=e.adapter||"IMAGE",i=r,a=n.getLayerAdapters(),s=!a||a.IMAGE;if("IMAGE"===o){if(s)return{url:i+="/api/component/render/image",id:String(e.id),resourceId:e.id,updateWmsParams:function(n){return t.updateWmsParams(n,e.id)}};o="TILE"}if("TILE"===o)return{url:i+="/api/component/render/tile?z={z}&x={x}&y={y}&resource="+e.id,id:String(e.id),adapter:o,layer_adapter:o}},t.addNgwLayer=function(e,n,r){var o=e.adapter||"IMAGE",i=n.getLayerAdapters();if(!i||i.IMAGE||(o="TILE"),"IMAGE"===o||"TILE"===o)return n.addLayer(o,t.getLayerAdapterOptions(e,n,r));throw new Error(o+" not supported yet. Only TILE")},t.prototype.getSettings=function(t){var e=this;return new Promise(function(n){e.connector.request("resource.item",{id:e.resourceId}).then(function(r){var o=r.webmap;o&&(e._updateItemsParams(o.root_item,t),n(r.webmap))})})},t.prototype.onMapClick=function(t,e){},t.prototype.sendIdentifyRequest=function(t,e,n){void 0===n&&(n={}),e.emitter.emit("start-identify",{ev:t});var r=e.requestGeomString(t.pixel,this.pixelRadius),o=n.layers;o||(o=e.layers.tree.getDescendants().filter(function(t){return"layer"===t.item.item_type&&t.properties.get("visibility")}).map(function(t){return String(Number(t.item.layer_style_id)-1)}));var i={geom:r,srs:3857,layers:o};return this.connector.post("feature_layer.identify",{data:i}).then(function(n){return e.emitter.emit("identify",{ev:t,data:n}),n})},t.prototype._updateItemsParams=function(e,n){var r=this;if(e)if(e.children)e.children=e.children.map(function(t){return r._updateItemsParams(t,n)});else if("layer"===e.item_type){var o=function(t){return t.replace(/([^:]\/)\/+/g,"$1")}(this.url+"/api/component/render/image");e.url=o,e.resourceId=e.layer_style_id,e.updateWmsParams=function(n){return t.updateWmsParams(n,e.resourceId)},e=re({},e,t.getLayerAdapterOptions({adapter:e.layer_adapter.toUpperCase(),id:e.layer_style_id},n,this.options.baseUrl))}return e},t.updateWmsParams=function(t,e){return{resource:e,extent:t.bbox,size:t.width+","+t.height,timestamp:Date.now()}},t}();n(143);function ie(){return function(t,e,n){var r=n.value;return n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this;return new Promise(function(n,i){o.isLoaded?r.apply(t,e).then(n).catch(i):o.emitter.once("map:created",function(){r.apply(t,e).then(n).catch(i)})})},n}}function ae(t){return t.replace(/([^:]\/)\/+/g,"$1")}var se=n(82),ce=function(){return(ce=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ue=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},pe=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},le=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},fe=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},he=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},de={"EPSG:3857":"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"},ye=function(){function t(t,e){var n=this;this.options={target:"map",baseUrl:"http://dev.nextgis.com/sandbox",controls:["ZOOM","ATTRIBUTION"],controlsOptions:{ZOOM:{position:"top-left"},ATTRIBUTION:{position:"bottom-right",customAttribution:['<a href="http://nextgis.ru" target="_blank">©NextGIS</a>']}},geoJsonDefaultPaint:{color:"blue",opacity:1,radius:6,stroke:!1}},this.emitter=new s.EventEmitter,this.isLoaded=!1,this._ngwLayers={},this.options=function t(e,n,r){void 0===r&&(r=!1);var o=Array.isArray(n),i=o&&[]||{};return o?r?(e=e||[],i=i.concat(e),n.forEach(function(n,o){void 0===i[o]?i[o]=n:"object"==typeof n?i[o]=t(e[o],n,r):-1===e.indexOf(n)&&i.push(n)})):i=n:(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){i[t]=e[t]}),Object.keys(n).forEach(function(o){"object"==typeof n[o]&&n[o]&&"object"==typeof e[o]&&"object"===n[o]?i[o]=t(e[o],n[o],r):i[o]=n[o]})),i}(this.options,e),this.connector=new f({baseUrl:this.options.baseUrl});var r=[new ee];this.options.webmapId&&r.push(new oe({baseUrl:this.options.baseUrl,resourceId:this.options.webmapId})),this.webMap=new Qt({mapAdapter:t,starterKits:r}),this._createWebMap().then(function(){n._addControls()})}return t.prototype.fit=function(){var t=this.options,e=t.center,n=t.zoom,r=t.bounds;e?(this.webMap.setCenter(e),n&&this.webMap.setZoom(n)):r&&this.fitBounds(r)},t.prototype.fitBounds=function(t){var e=t[0],n=t[1],r=t[2],o=t[3];this.webMap.fit([n,r,o,e])},t.prototype.addNgwLayer=function(t,e){return le(this,void 0,void 0,function(){var n,r=this;return fe(this,function(o){switch(o.label){case 0:return"GEOJSON"!==t.adapter?[3,2]:[4,this.connector.makeQuery("/api/resource/{id}/geojson",{id:t.id})];case 1:return n=o.sent(),n=Object(se.toWgs84)(n,void 0,de),[2,this.addGeoJsonLayer(n,e)];case 2:return[2,oe.addNgwLayer(t,this.webMap,this.options.baseUrl).then(function(t){return r._ngwLayers[t.name]=t,r.webMap.showLayer(t.name),t.name})]}})})},t.prototype.addGeoJsonLayer=function(t,e){var n=this;return e=ce({},this.options.geoJsonDefaultPaint,e),this.webMap.addLayer("GEOJSON",{data:t,paint:e}).then(function(t){return n.webMap.showLayer(t.name),t.name})},t.prototype.zoomToLayer=function(t){var e=this;if(this._ngwLayers[t])return this.connector.request("resource.item",{id:t}).then(function(n){if(n)return"raster_style"===n.resource.cls?e.connector.request("resource.item",{id:n.resource.parent.id}).then(function(t){return e._fitNgwLayerExtend(t.resource.id)}):e._fitNgwLayerExtend(t)})},t.prototype._fitNgwLayerExtend=function(t){var e=this;return this.connector.request("layer.extent",{id:t}).then(function(t){var n=t.extent,r=n.maxLat,o=n.maxLon,i=n.minLat,a=n.minLon;e.fitBounds([r,o,i,a])})},t.prototype._createWebMap=function(){var t=this;return this.webMap.create({target:this.options.target}).then(function(){t.isLoaded=!0,t.emitter.emit("map:created"),t.options.qmsId&&t.webMap.addBaseLayer("QMS",{id:t.options.qmsId,qmsid:t.options.qmsId}).then(function(e){t.webMap.showLayer(e.name)}),t.fit()})},t.prototype._addControls=function(){var t=this;this.options.controls.forEach(function(e){var n={position:"top-left"};"string"==typeof e&&(n=t.options.controlsOptions[e]);var r=n.position,o=he(n,["position"]);t.webMap.addControl(e,r,o)})},t.utils={fixUrlStr:ae},t.decorators={onMapLoad:ie},ue([ie(),pe("design:type",Function),pe("design:paramtypes",[Object,Object]),pe("design:returntype",Promise)],t.prototype,"addNgwLayer",null),ue([ie(),pe("design:type",Function),pe("design:paramtypes",[Object,Object]),pe("design:returntype",void 0)],t.prototype,"addGeoJsonLayer",null),t}(),ve=(n(148),n(153),n(154),n(155),n(156),n(157),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),me=function(){return(me=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ge=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},_e=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},be={iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},we=me({},be,{iconUrl:"marker-icon_selected.png",iconRetinaUrl:"marker-icon-2x_selected.png"}),Ae=jt.Icon.extend({options:be}),Oe=jt.Icon.extend({options:we}),xe=new Ae,Pe=new Oe,Ce=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ready=!1,e.options={mapOptions:{target:"map",controlsOptions:{ZOOM:{position:"top-right"},ATTRIBUTION:{position:"bottom-right"}}}},e.markers={},e}return ve(e,t),e.prototype.mounted=function(){var t=this,e=this.$el;this.createWebMap({target:e,center:this.center,zoom:this.zoom}).then(function(){t.ready=!0;var e=t.$store.state.bdMain.filtered;if(e&&e.length){var n=JSON.parse(JSON.stringify(e));t.addMarkers(n)}t.$store.watch(function(t){return t.bdMain.filtered},function(e){e=JSON.parse(JSON.stringify(e)),t.addMarkers(e)}),t.$store.watch(function(t){return t.bdMain.detailItem},function(e){t.setSelected(e)}),t.$store.watch(function(t){return t.app.center},function(e){t.zoomTo(e)})})},e.prototype.createWebMap=function(t){var e=this;return this.options.mapOptions=me({},this.options.mapOptions,t),new Promise(function(t){e.ngw=new ye(new Lt,me({baseUrl:h.baseUrl,qmsId:487},e.options.mapOptions)),e.webMap=e.ngw.webMap,e.mapObject=e.webMap.mapAdapter.map,e.webMap.onMapLoad().then(function(){t()}),e.ngw.addNgwLayer({id:9})})},e.prototype.findFirsVueParent=function(t){for(var e=!1;!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t},e.prototype.addMarkers=function(t){var e=this,n=t.map(function(t){var n=String(t.properties.id);if(void 0===e.markers[n]){e.markers[n]=!1;var r=t.geometry.coordinates,o=r[0],i=r[1],a=jt.Projection.SphericalMercator.unproject(new jt.Point(o,i)),s=a.lat,c=a.lng;return t.geometry.coordinates=[c,s],e.webMap.addLayer("GEOJSON",{data:t,id:n,paint:{icon:!0}}).then(function(t){var r=e.webMap.getLayer(t.name).layer;r.on("click",function(){e.$store.dispatch("bdMain/setDetail",Number(n))}),e._unselectMarker(r)})}return Promise.resolve()}),r=t.map(function(t){return String(t.properties.id)});Promise.all(n).then(function(){for(var t in e.markers)e.markers.hasOwnProperty(t)&&(-1!==r.indexOf(t)?e.markers[t]||(e.markers[t]=!0,e.webMap.showLayer(t)):e.markers[t]&&(e.markers[t]=!1,e.webMap.hideLayer(t)))})},e.prototype.zoomTo=function(t){var e=this.webMap.getLayer(t),n=e&&e.layer;if(n){var r=n.getBounds().getCenter(),o=r[0],i=r[1];this.webMap.setCenter([i,o])}},e.prototype.setSelected=function(t){if(t){var e=this.webMap.getLayer(String(t.id)),n=e&&e.layer;n&&n!==this.selected&&(this.selected&&this._unselectMarker(this.selected),this.selected=n,this._selectMarker(n))}else this.selected&&this._unselectMarker(this.selected)},e.prototype._selectMarker=function(t){t.eachLayer(function(t){t.setIcon(Pe),t.setZIndexOffset(100)})},e.prototype._unselectMarker=function(t){t.eachLayer(function(t){t.setIcon(xe),t.setZIndexOffset(10)})},ge([Object(w.b)(),_e("design:type",Array)],e.prototype,"center",void 0),ge([Object(w.b)(),_e("design:type",Number)],e.prototype,"zoom",void 0),e=ge([w.a],e)}(w.c),ke=(n(158),Object(j.a)(Ce,rt,[],!1,null,null,null));ke.options.__file="src/components/NgwMap/NgwMap.vue";var Le=ke.exports,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",staticClass:"pa-3 pb-0",model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("v-range-slider",{attrs:{"thumb-label":"always","thumb-size":"26",max:t.maxYear,min:t.minYear,step:1},on:{change:t.updateFilter},model:{value:t.years,callback:function(e){t.years=e},expression:"years"}}),t._v(" "),n("v-select",{attrs:{items:t.areas,label:"Район"},on:{change:t.updateFilter},model:{value:t.rayon,callback:function(e){t.rayon=e},expression:"rayon"}}),t._v(" "),t._l(t.moscow,function(e){return n("v-checkbox",{key:e.param,staticClass:"pa-0 ma-0",on:{change:t.updateFilter},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"mos.value"}},[n("template",{slot:"label"},[t._v("\n      "+t._s(e.name)+"\n    ")])],2)})],2)};je._withStripped=!0;var Ee=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Me=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Se=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form=!1,e.years=[1900,2018],e.minYear=1900,e.maxYear=2018,e.moscow=[{name:"дворовая",param:"mos1"},{name:"легендарная",param:"mos2"},{name:"бездомная",param:"mos3"},{name:"подземная",param:"mos4"},{name:"церковная",param:"mos5"},{name:"субкультурная",param:"mos6",value:!1}],e.rayon="Все",e.areas=["Все"],e}return Ee(e,t),e.prototype.mounted=function(){var t=this;this.moscow.forEach(function(t){t.value=void 0===t.value||t.value}),this.$store.state.bdMain.items&&this.updateFilterAreas(this.$store.state.bdMain.items),this.$store.watch(function(t){return t.bdMain.items},function(e){t.updateFilterAreas(e)})},e.prototype.updateFilterAreas=function(t){var e={};t.map(function(t){var n=t.properties;return e[n.rayon]=!0,n});this.areas=this.areas.concat(Object.keys(e))},e.prototype.updateFilter=function(){var t=this,e=this.$store.state.bdMain.items.slice().filter(function(e){var n=e.properties;return!t.rayon||"Все"===t.rayon||n.rayon===t.rayon});this.$store.dispatch("bdMain/setFilter",e)},e=Me([w.a],e)}(w.c),Ie=(n(160),n(72)),Te=n(198),Be=n(205),Re=n(84),Fe=Object(j.a)(Se,je,[],!1,null,null,null);M()(Fe,{VCheckbox:Ie.a,VForm:Te.a,VRangeSlider:Be.a,VSelect:Re.a}),Fe.options.__file="src/components/ItemsFilter/ItemsFilter.vue";var Ve=Fe.exports,De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.detail&&t.meta?n("div",[n("v-list",{attrs:{dense:""}},t._l(t.meta,function(e){return t.detail[e.value]?n("v-list-tile",{key:e.value,staticClass:"pb-3"},[n("v-list-tile-content",[n("v-list-tile-sub-title",[t._v(t._s(e.text))]),t._v(" "),n("v-list-tile-title",[t._v(t._s(t.detail[e.value]))])],1)],1):t._e()}))],1):t._e()};De._withStripped=!0;var Ue=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$e=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ue(e,t),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem&&this.$store.state.bdMain.detailItem.properties},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meta",{get:function(){return this.$store.state.bdMain.meta},enumerable:!0,configurable:!0}),e.prototype.getKeyAlias=function(t){if(this.meta){var e=this.meta.find(function(e){return e.value===t});if(e)return e.text}return t},e=$e([w.a],e)}(w.c),Ge=(n(168),Object(j.a)(Ne,De,[],!1,null,null,null));M()(Ge,{VList:Q.a,VListTile:K.a,VListTileContent:tt.a,VListTileSubTitle:tt.b,VListTileTitle:tt.c}),Ge.options.__file="src/components/Detail/Detail.vue";var ze=Ge.exports,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawer-container"},[t.hasHeaderSlot?n("div",{staticClass:"drawer-titlebar"},[n("v-toolbar",[n("v-toolbar-title",{staticClass:"drawer-title"},[t._t("header")],2)],1),t._v(" "),n("v-divider")],1):t._e(),t._v(" "),n("div",{staticClass:"drawer-content"},[t._t("default")],2),t._v(" "),t.hasFooterSlot?n("v-footer",[t._t("footer")],2):t._e()],1)};We._withStripped=!0;var Ze=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qe=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},He=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ze(e,t),Object.defineProperty(e.prototype,"hasFooterSlot",{get:function(){return this.hasSlot("footer")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHeaderSlot",{get:function(){return this.hasSlot("header")},enumerable:!0,configurable:!0}),e.prototype.hasSlot=function(t){return void 0===t&&(t="default"),!!this.$slots[t]||!!this.$scopedSlots[t]},qe([Object(w.b)(),He("design:type",String)],e.prototype,"header",void 0),e=qe([w.a],e)}(w.c),Ye=(n(170),n(66)),Qe=n(199),Ke=n(70),Xe=n(210),tn=Object(j.a)(Je,We,[],!1,null,null,null);M()(tn,{VDivider:Ye.a,VFooter:Qe.a,VToolbar:Ke.a,VToolbarTitle:Xe.b}),tn.options.__file="src/components/DrawerContainer/DrawerContainer.vue";var en=tn.exports,nn=function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)};nn._withStripped=!0;var rn=function(){return(rn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var on=function(){return(on=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},an=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(e[n]=r)}return e},sn={props:{position:{type:String,default:"topright"},options:{type:Object,default:function(){return{}}}},mounted:function(){this.controlOptions={position:this.position}},beforeDestroy:function(){this.mapObject&&this.mapObject.remove()}},cn=function(){function t(t){this.emitter=new s.EventEmitter,this._blocked=!1,this.options=Object.assign({},this.options,t),this._header=null,this._body=null,this._container=this._createContainer()}return t.prototype.onAdd=function(){return this.element},t.prototype.setElement=function(t){this.element=t},t.prototype.onRemove=function(){this.removeFrom()},t.prototype.addTo=function(t){var e=this._container=this.onAdd(),n=this.options.position,r=t._controlCorners[n];return e.classList.add("leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this},t.prototype.remove=function(){this.onRemove&&this.onRemove()},t.prototype.removeFrom=function(){var t=this._container&&this._container.parentNode;t&&t.removeChild(this._container)},t.prototype.updateBody=function(t){this._cleanBody(),"string"==typeof t?this._body.innerHTML=t:t instanceof HTMLElement&&this._body.appendChild(t)},t.prototype.hide=function(){this._container.classList.add("panel-hide"),this.emitter.emit("toggle",!1)},t.prototype.show=function(){this._blocked||(this._container.classList.remove("panel-hide"),this.emitter.emit("toggle",!0))},t.prototype._cleanBody=function(){this._body&&(this._body.innerHTML="")},t.prototype._createContainer=function(){var t=document.createElement("div");return this.options.addClass&&this.options.addClass.split("-").forEach(function(e){return t.classList.add(e)}),this.options.headerText&&t.appendChild(this._createHeader()),t.appendChild(this._createBody()),t},t.prototype._createHeader=function(){var t=document.createElement("div");return t.className="panel-header",t.innerHTML=this.options.headerText,this._header=t,t},t.prototype._createBody=function(){var t=document.createElement("div");return t.className="panel-body",this._body=t,t},t}(),un={name:"LControl",mixins:[sn],mounted:function(){var t=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var r=on({},an(n));t=an(t);var o=e.$options.props;for(var i in t)if(t.hasOwnProperty(i)){var a=o[i]?o[i].default:Symbol("unique");r[i]&&a!==t[i]?(console.warn(i+" props is overriding the value passed in the options props"),r[i]=t[i]):r[i]||(r[i]=t[i])}return r}(this.controlOptions,this);this.mapObject=new cn(t),function(t,e,n,r){for(var o=Object.keys(n),i=function(r){var i,a=o[r],s="set"+((i=a).charAt(0).toUpperCase()+i.slice(1)),c=n[a].type===Object||n[a].type===Array||Array.isArray(n[a].type);n[a].custom?t.$watch(a,function(e,n){t[s](e,n)},{deep:c}):"setOptions"===s?t.$watch(a,function(t,n){e.options=e.options||{},e.options=rn({},e.options,t)},{deep:c}):t.$watch(a,function(t,n){e[s](t)},{deep:c})},a=0;a<o.length;a++)i(a)}(this,this.mapObject,this.$options.props),this.parentContainer=function(t){for(var e=!1;!e;)void 0===t.webMap?t=t.$parent:e=!0;return t}(this.$parent),this.mapObject.setElement(this.$el),this.mapObject.addTo(this.parentContainer.webMap.mapAdapter.map)}},pn=(n(176),Object(j.a)(un,nn,[],!1,null,null,null));pn.options.__file="src/components/NgwMap/controls/Panel.vue";var ln=pn.exports,fn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hn=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fn(e,t),Object.defineProperty(e.prototype,"page",{get:function(){return this.$store.state.app.page},set:function(t){this.$store.dispatch("app/setPage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomTo",{get:function(){return this.$store.state.app.zoomTo},set:function(t){this.$store.dispatch("app/zoomTo",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawer",{get:function(){return this.$store.state.app.drawer},set:function(t){this.$store.dispatch("app/toggleDrawer",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.state.bdMain.items.map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem},set:function(t){this.$store.dispatch("bdMain/setDetail",t)},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.$store.dispatch("bdMain/getAllItems")},e=hn([Object(w.a)({components:{List:nt,NgwMap:Le,ItemsFilter:Ve,Detail:ze,DrawerContainer:en,MapControl:ln}})],e)}(w.c),yn=(n(178),n(68)),vn=n(200),mn=n(201),gn=n(209),_n=n(208),bn=n(63),wn=Object(j.a)(dn,z,[],!1,null,null,null);M()(wn,{VApp:S.a,VBtn:J.a,VContent:yn.a,VDivider:Ye.a,VExpansionPanel:vn.a,VExpansionPanelContent:mn.a,VIcon:Y.a,VItemGroup:gn.a,VLayout:I.a,VNavigationDrawer:_n.a,VProgressCircular:bn.a}),wn.options.__file="src/Main.vue";var An=wn.exports,On=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xn=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"page",{get:function(){return this.$store.state.app.page},set:function(t){this.$store.dispatch("app/setPage",t)},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.$store.dispatch("bdMain/getAllItems")},e=xn([Object(w.a)({components:{MainComponent:An,TableComponent:G,AboutComponent:B}})],e)}(w.c),Cn=(n(190),n(207)),kn=n(202),Ln=n(206),jn=Object(j.a)(Pn,b,[],!1,null,null,null);M()(jn,{VApp:S.a,VBtn:J.a,VCard:Cn.a,VDialog:kn.a,VIcon:Y.a,VSpacer:Ln.a,VToolbar:Ke.a,VToolbarItems:Xe.a,VToolbarTitle:Xe.b}),jn.options.__file="src/App.vue";var En=jn.exports,Mn=n(83),Sn=n(4);n(194);r.default.use(Sn.a),new r.default({store:_,render:function(t){return t(En)}}).$mount("#app"),window.version=Mn.a},38:function(t,e,n){var r=n(92);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("2f71248e",r,!1,{})},39:function(t,e,n){var r=n(97);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("4cd827de",r,!1,{})},40:function(t,e,n){var r=n(142);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("b5be5e50",r,!1,{})},41:function(t,e,n){var r=n(159);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("3ffc3518",r,!1,{})},42:function(t,e,n){var r=n(161);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("dbe1d530",r,!1,{})},43:function(t,e,n){var r=n(169);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("2a498ee5",r,!1,{})},44:function(t,e,n){var r=n(171);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("55e0b820",r,!1,{})},45:function(t,e,n){var r=n(177);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("03a54c6e",r,!1,{})},46:function(t,e,n){var r=n(179);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("65246d60",r,!1,{})},47:function(t,e,n){var r=n(191);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(3).default)("9c4e14cc",r,!1,{})},48:function(t){t.exports={baseUrl:"http://pastandnow.nextgis.com"}},81:function(t,e,n){var r,o,i;
/*!
 * leaflet.wms.js
 * A collection of Leaflet utilities for working with Web Mapping services.
 * (c) 2014-2016, Houston Engineering, Inc.
 * MIT License
 */o=[n(16)],void 0===(i="function"==typeof(r=function(t){var e={};"keys"in Object||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),e.Source=t.Layer.extend({options:{untiled:!0,identify:!0},initialize:function(e,n){t.setOptions(this,n),this.options.tiled&&(this.options.untiled=!1),this._url=e,this._subLayers={},this._overlay=this.createOverlay(this.options.untiled)},createOverlay:function(t){var n={};for(var r in this.options)"untiled"!=r&&"identify"!=r&&(n[r]=this.options[r]);return t?e.overlay(this._url,n):e.tileLayer(this._url,n)},onAdd:function(){this.refreshOverlay()},getEvents:function(){return this.options.identify?{click:this.identify}:{}},setOpacity:function(t){this.options.opacity=t,this._overlay&&this._overlay.setOpacity(t)},bringToBack:function(){this.options.isBack=!0,this._overlay&&this._overlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._overlay&&this._overlay.bringToFront()},getLayer:function(t){return e.layer(this,t)},addSubLayer:function(t){this._subLayers[t]=!0,this.refreshOverlay()},removeSubLayer:function(t){delete this._subLayers[t],this.refreshOverlay()},refreshOverlay:function(){var t=Object.keys(this._subLayers).join(",");this._map&&(t?(this._overlay.setParams({layers:t}),this._overlay.addTo(this._map)):this._overlay.remove())},identify:function(t){var e=this.getIdentifyLayers();e.length&&this.getFeatureInfo(t.containerPoint,t.latlng,e,this.showFeatureInfo)},getFeatureInfo:function(e,n,r,o){var i=this.getFeatureInfoParams(e,r),a=this._url+t.Util.getParamString(i,this._url);this.showWaiting(),this.ajax(a,function(t){this.hideWaiting();var e=this.parseFeatureInfo(t,a);o.call(this,n,e)})},ajax:function(t,e){(function(t,e){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e.call(n,r.responseText):e.call(n,"error"))},r.open("GET",t),r.send()}).call(this,t,e)},getIdentifyLayers:function(){return this.options.identifyLayers?this.options.identifyLayers:Object.keys(this._subLayers)},getFeatureInfoParams:function(e,n){var r,o;this.options.untiled?r=this._overlay.wmsParams:((o=this.createOverlay(!0)).updateWmsParams(this._map),(r=o.wmsParams).layers=n.join(","));var i={request:"GetFeatureInfo",query_layers:n.join(","),X:Math.round(e.x),Y:Math.round(e.y)};return t.extend({},r,i)},parseFeatureInfo:function(t,e){return"error"==t&&(t="<iframe src='"+e+"' style='border:none'>"),t},showFeatureInfo:function(t,e){this._map&&this._map.openPopup(e,t)},showWaiting:function(){this._map&&(this._map._container.style.cursor="progress")},hideWaiting:function(){this._map&&(this._map._container.style.cursor="default")}}),e.source=function(t,n){return new e.Source(t,n)},e.Layer=t.Layer.extend({initialize:function(n,r,o){t.setOptions(this,o),n.addSubLayer||(n=e.getSourceForUrl(n,o)),this._source=n,this._name=r},onAdd:function(){this._source._map||this._source.addTo(this._map),this._source.addSubLayer(this._name)},onRemove:function(){this._source.removeSubLayer(this._name)},setOpacity:function(t){this._source.setOpacity(t)},bringToBack:function(){this._source.bringToBack()},bringToFront:function(){this._source.bringToFront()}}),e.layer=function(t,n){return new e.Layer(t,n)};var n={};return e.getSourceForUrl=function(t,r){return n[t]||(n[t]=e.source(t,r)),n[t]},e.TileLayer=t.TileLayer.WMS,e.tileLayer=t.tileLayer.wms,e.Overlay=t.Layer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1,attribution:"",opacity:1,isBack:!1,minZoom:0,maxZoom:18},initialize:function(e,n){this._url=e;var r={},o={};for(var i in n)i in this.options?o[i]=n[i]:r[i]=n[i];t.setOptions(this,o),this.wmsParams=t.extend({},this.defaultWmsParams,r)},setParams:function(e){t.extend(this.wmsParams,e),this.update()},getAttribution:function(){return this.options.attribution},onAdd:function(){this.update()},onRemove:function(t){this._currentOverlay&&(t.removeLayer(this._currentOverlay),delete this._currentOverlay),this._currentUrl&&delete this._currentUrl},getEvents:function(){return{moveend:this.update}},update:function(){if(this._map){this.updateWmsParams();var e=this.getImageUrl();if(this._currentUrl!=e){this._currentUrl=e;var n=this._map.getBounds(),r=t.imageOverlay(e,n,{opacity:0});r.addTo(this._map),r.once("load",function(){this._map&&(r._url==this._currentUrl?(this._currentOverlay&&this._map.removeLayer(this._currentOverlay),this._currentOverlay=r,r.setOpacity(this.options.opacity?this.options.opacity:1),!0===this.options.isBack&&r.bringToBack(),!1===this.options.isBack&&r.bringToFront(),void 0!==this.options.zIndex&&r.setZIndex(this.options.zIndex)):this._map.removeLayer(r))},this),(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)&&this._map.removeLayer(r)}}},setOpacity:function(t){this.options.opacity=t,this._currentOverlay&&this._currentOverlay.setOpacity(t)},bringToBack:function(){this.options.isBack=!0,this._currentOverlay&&this._currentOverlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._currentOverlay&&this._currentOverlay.bringToFront()},setZIndex:function(t){this.options.zIndex=t,this._currentOverlay&&this._currentOverlay.setZIndex(t)},updateWmsParams:function(e){e||(e=this._map);var n=e.getBounds(),r=e.getSize(),o=parseFloat(this.wmsParams.version),i=this.options.crs||e.options.crs,a=o>=1.3?"crs":"srs",s=i.project(n.getNorthWest()),c=i.project(n.getSouthEast()),u={width:r.x,height:r.y};u[a]=i.code,u.bbox=(o>=1.3&&i===t.CRS.EPSG4326?[c.y,s.x,s.y,c.x]:[s.x,c.y,c.x,s.y]).join(","),t.extend(this.wmsParams,u)},getImageUrl:function(){var e=this.options.uppercase||!1,n=t.Util.getParamString(this.wmsParams,this._url,e);return this._url+n}}),e.overlay=function(t,n){return new e.Overlay(t,n)},e})?r.apply(e,o):r)||(t.exports=i)},83:function(t){t.exports={a:"1.3.0"}},90:function(t,e,n){(function(t,e){!function(){"use strict";function n(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void s(e.promise,t)}a(e.promise,r)}else(1===t._state?a:s)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void u(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){s(t,e)}}function s(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;n>e;e++)i(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}var p=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return i(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=n,o.all=function(t){return new o(function(e,n){function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}o[t]=a,0==--i&&e(o)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var i=o.length,a=0;o.length>a;a++)r(a,o[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,o=t.length;o>r;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){p(t,0)},o._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw Error("unable to locate global object")}();"Promise"in l?l.Promise.prototype.finally||(l.Promise.prototype.finally=n):l.Promise=o}()}).call(this,n(75).setImmediate,n(37))},91:function(t,e,n){"use strict";var r=n(38);n.n(r).a},92:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"\n.logo {\n  width: 300px;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.logo .logo__item--dark,\n  .logo .logo__item--light {\n    fill: #aec8e0;\n    transition: fill .3s;\n}\n.logo .logo__item--dark {\n    fill: rgba(35, 31, 32, 0.685);\n}\n.logo .logo__item--light {\n    fill: rgba(23, 111, 193, 0.747);\n}\n.logo:hover .logo__item--dark {\n    fill: #231F20;\n}\n.logo:hover .logo__item--light {\n    fill: #176FC1;\n}\n.logo--mini {\n  width: 20px;\n  height: 20px;\n  left: 10px;\n  top: 14px;\n  z-index: 10;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/NextGIS/C:/Users/rendr/nextgis/oralhistory/src/components/NextGIS/About.vue"],names:[],mappings:";AA+CA;EACI,aAAY;EACZ,uBAAsB;EACtB,gBAAe;CAwBlB;AA3BD;;IAOI,cATe;IAUf,qBAAoB;CACrB;AATH;IAYI,8BAA6B;CAC9B;AAbH;IAeI,gCAA+B;CAChC;AAhBH;IAqBM,cAAa;CACd;AAtBL;IAwBM,cAAa;CACd;AAIL;EACI,YAAW;EACX,aAAY;EACZ,WAAU;EACV,UAAS;EACT,YAAW;CACd",file:"About.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$dark-blue: #aec8e0;\n\n.logo{\n    width: 300px;\n    vertical-align: middle;\n    cursor: pointer;\n\n  .logo__item--dark,\n  .logo__item--light{\n    fill: $dark-blue;\n    transition: fill .3s;\n  }\n\n  .logo__item--dark{\n    fill: rgba(35, 31, 32, 0.685);\n  }\n  .logo__item--light{\n    fill: rgba(23, 111, 193, 0.747);\n  }\n\n\n  &:hover{\n    .logo__item--dark{\n      fill: #231F20;\n    }\n    .logo__item--light{\n      fill: #176FC1;\n    }\n  }\n}\n\n.logo--mini{\n    width: 20px;\n    height: 20px;\n    left: 10px;\n    top: 14px;\n    z-index: 10;\n}\n"],sourceRoot:""}])},96:function(t,e,n){"use strict";var r=n(39);n.n(r).a},97:function(t,e,n){(t.exports=n(2)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Table.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])}},[[196,20,15,6,3,19,1,14,2,4,5,7,8,9,11,12,13,10,16,17,18]]]);
//# sourceMappingURL=main-f94dfe0.js.map