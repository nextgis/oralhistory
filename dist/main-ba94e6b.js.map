{"version":3,"sources":["webpack:///./src/components/NgwMap/NgwMap.vue?2ea8","webpack:///./src/components/NgwMap/NgwMap.vue?da67","webpack:///./src/components/Detail/Detail.vue?4eb6","webpack:///./src/components/Detail/Detail.vue?cce1","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?3b1d","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?ef77","webpack:///./src/Main.vue?691f","webpack:///./src/Main.vue?664d","webpack:///./src/App.vue?126f","webpack:///./src/App.vue?46ec","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/CancelablePromise.ts","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/utils.ts","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/NgwConnector.ts","webpack:///./src/api/ngw.ts","webpack:///./src/store/modules/bd_main.ts","webpack:///./src/store/modules/app.ts","webpack:///./src/store/index.ts","webpack:///./src/App.vue?4d14","webpack:///./src/components/NextGIS/About.vue?ba22","webpack:///./src/components/NextGIS/About.vue?6ee7","webpack:///./src/components/NextGIS/About.ts","webpack:///./src/components/NextGIS/About.vue","webpack:///./src/components/Table/Table.vue?8e73","webpack:///./src/components/ShowMoreField/ShowMoreField.vue?1361","webpack:///./src/components/ShowMoreField/ShowMoreField.vue?d671","webpack:///./src/components/ShowMoreField/ShowMoreField.ts","webpack:///./src/components/ShowMoreField/ShowMoreField.vue","webpack:///./src/components/Table/Table.vue?7235","webpack:///./src/components/Table/Table.ts","webpack:///./src/components/Table/Table.vue","webpack:///./src/Main.vue?28a0","webpack:///./src/components/List/List.vue?8e53","webpack:///./src/components/List/List.vue?26f3","webpack:///./src/components/List/List.ts","webpack:///./src/components/List/List.vue","webpack:///./src/components/NgwMap/NgwMap.vue?8f18","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/BaseAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/util/image_icons.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/MvtAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/TileAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/OsmAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/ZoomControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/CompassControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/AttributionControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/layer-adapters/GeoJsonAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/createControl.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/MapboxglMapAdapter.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/index.ts","webpack:///./nextgisweb_frontend/packages/mapboxgl-map-adapter/src/controls/createButtonControl.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/controls/ToggleControl.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/keys/KeysCodes.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/keys/Keys.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/decorators.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/deepmerge.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/geometryTypes.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/updateGeojsonAdapterOptions.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/preparePaint.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/WebMapLayers.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/WebMapControls.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/WebMap.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/index.ts","webpack:///./nextgisweb_frontend/packages/qms-kit/src/utility.ts","webpack:///./nextgisweb_frontend/packages/qms-kit/src/index.ts","webpack:///./nextgisweb_frontend/packages/qms-kit/src/QmsKit.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createGeoJsonAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createRasterAdapter.ts","webpack:///./nextgisweb_frontend/packages/item/src/TreeUtil.ts","webpack:///./nextgisweb_frontend/packages/item/src/TreeHelper.ts","webpack:///./nextgisweb_frontend/packages/item/src/properties/BaseProperty.ts","webpack:///./nextgisweb_frontend/packages/item/src/Item.ts","webpack:///./nextgisweb_frontend/packages/item/src/properties/CheckProperty.ts","webpack:///./nextgisweb_frontend/packages/item/src/properties/ItemProperties.ts","webpack:///./nextgisweb_frontend/packages/item/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/WebMapLayerItem.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/utils.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/WebMapLayerAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/NgwResource.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createAsyncAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/createWebMapAdapter.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-kit/src/NgwKit.ts","webpack:///./nextgisweb_frontend/packages/icons/src/index.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/decorators.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/utils.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/NgwMap.ts","webpack:///./nextgisweb_frontend/packages/ngw-map/src/index.ts","webpack:///./src/components/NgwMap/NgwMap.vue?8bbe","webpack:///./src/components/NgwMap/NgwMap.ts","webpack:///./src/components/NgwMap/NgwMap.vue","webpack:///./src/components/ItemsFilter/ItemsFilter.vue?0bf8","webpack:///./src/components/ItemsFilter/ItemsFilter.vue?c8b5","webpack:///./src/components/ItemsFilter/ItemsFilter.ts","webpack:///./src/components/ItemsFilter/ItemsFilter.vue","webpack:///./src/components/Detail/Detail.vue?ee2e","webpack:///./src/components/Detail/Detail.vue?31c3","webpack:///./src/components/Detail/Detail.ts","webpack:///./src/components/Detail/Detail.vue","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?dee7","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?0b97","webpack:///./src/components/DrawerContainer/DrawerContainer.ts","webpack:///./src/components/DrawerContainer/DrawerContainer.vue","webpack:///./src/components/NgwMap/controls/Panel.vue?43be","webpack:///./src/components/NgwMap/controls/utils/propsBinder.ts","webpack:///./src/components/NgwMap/controls/utils/optionsUtils.ts","webpack:///./src/components/NgwMap/controls/mixins/Control.ts","webpack:///./src/components/NgwMap/controls/PanelControl.ts","webpack:///./src/components/NgwMap/controls/Panel.vue?c1e4","webpack:///./src/components/NgwMap/controls/Panel.ts","webpack:///./src/components/NgwMap/controls/utils/findRealParent.ts","webpack:///./src/components/NgwMap/controls/Panel.vue","webpack:///./src/Main.vue?4f76","webpack:///./src/Main.ts","webpack:///./src/store/utils/throttle.ts","webpack:///./src/Main.vue","webpack:///./src/App.vue?3799","webpack:///./src/App.ts","webpack:///./src/App.vue","webpack:///./src/index.ts","webpack:///./src/components/NextGIS/About.vue?5f9c","webpack:///./src/components/Table/Table.vue?7f54","webpack:///./src/components/NgwMap/NgwMap.vue?b0c2","webpack:///./src/components/Detail/Detail.vue?5831","webpack:///./src/components/DrawerContainer/DrawerContainer.vue?cd80","webpack:///./src/Main.vue?cd22","webpack:///./src/App.vue?13e8","webpack:///./nextgisweb_frontend/packages/ngw-connector/src/polyfills.ts","webpack:///./src/components/NextGIS/About.vue?8cda","webpack:///./src/components/NextGIS/About.vue?1cf2","webpack:///./src/components/Table/Table.vue?0c36","webpack:///./src/components/Table/Table.vue?0397"],"names":["_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_NgwMap_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","module","exports","push","i","version","sources","names","mappings","file","sourcesContent","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Detail_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_DrawerContainer_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Main_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","handleCallback","resolve","reject","callback","r","e","CancelablePromise","executor","onCancel","this","_canceled","_promise","Promise","prototype","then","onfulfilled","onrejected","_this","p","cancel","catch","undefined","errorCallback","_destroy","finally","onfinally","templateRe","template","str","data","replace","s","key","value","Error","src","NgwConnector","options","emitter","events","routeStr","_loadingQueue","_loadingStatus","route","connect","auth","_a","login","password","getUserInfo","_b","sent","makeQuery","credentials","logout","_rejectLoadingQueue","user","headers","getAuthorizationHeaders","emit","er","client","makeClientId","Authorization","window","btoa","unescape","encodeURIComponent","request","name","params","apiItems","apiItem","slice","url","shift","length","replaceParams","fry","arg","paramArray","hasOwnProperty","indexOf","join","post","method","nocache","get","baseUrl","_getJson","_executeLoadingQueue","_setLoadingQueue","waiting","timestamp","Date","q","forEach","x","isError","queue","wait","error","xhr","XMLHttpRequest","open","processingResponce","forError","cb","responseText","JSON","parse","message","onreadystatechange","readyState","status","statusText","onerror","upload","onprogress","lengthComputable","percentComplete","loaded","total","onProgress","h","header","setRequestHeader","withCredentials","FormData","append","d","stringify","abort","send","loadJSON","ngw_url","config","location","protocol","ngw_connector","ngw","id","ngwMarkerLayerId","fid","features","properties","layerWithPhotos","map","text","noHide","type","bd_main","namespaced","state","items","photos","meta","filtered","detailItem","getters","rootState","sortFeatures","sort","a","b","toUpperCase","actions","getAllItems","commit","getPhotos","setFilter","detail","find","setDetail","item","mutations","setItems","setMeta","setPhotos","app","drawer","page","center","listSearchText","showDrawer","hideDrawer","setListSearchText","toggleDrawer","setPage","zoomTo","setCenter","vue_esm","use","vuex_esm","store","Store","modules","bdMain","strict","render","_vm","_h","$createElement","_c","_self","_v","attrs","fullscreen","scrollable","transition","staticClass","dark","color","icon","nativeOn","click","$event","solo-inverted","flat","hide-details","label","prepend-inner-icon","model","tableSearch","$$v","expression","search","paginationSync","_e","pagination","pages","total-visible","$set","_withStripped","Aboutvue_type_template_id_5e667ffc_render","align-center","justify-center","column","fill-height","on","openNextGIS","staticStyle","enable-background","xmlns","xmlns:xlink","y","viewBox","xml:space","Aboutvue_type_script_lang_ts_","_super","About","__extends","href","__decorate","vue_class_component_esm","component","Object","componentNormalizer","installComponents_default","VApp","VLayout","__file","NextGIS_About","Tablevue_type_template_id_647119ad_render","hide-actions","update:pagination","scopedSlots","_u","fn","props","bottom","slot","_s","_l","charCount","ShowMoreFieldvue_type_template_id_051b4be1_render","String","toShow","onClick","expand","ShowMoreFieldvue_type_script_lang_ts_","ShowMoreField","apply","arguments","ShowMoreField_extends","defineProperty","ShowMoreField_decorate","vue_property_decorator","default","ShowMoreField_component","components_ShowMoreField_ShowMoreField","Tablevue_type_script_lang_ts_","Table","rowsPerPage","Table_extends","$store","setPagination","Table_decorate","components","Table_component","VDataTable","VTooltip","components_Table_Table","Mainvue_type_template_id_3ffae6b2_render","zoom","position","justify-start","row","fab","small","class","active","large","stateless","fixed","width","justify-space-between","solo","clearable","indeterminate","absolute","right","Listvue_type_template_id_87fbdfe2_render","dense","portion","title","ripple","style","displayItems","addPortion","Listvue_type_script_lang_ts_","List","portionCount","List_extends","mounted","watch","_items","resetPortions","getDisplayItems","filter","toLowerCase","dispatch","portionsLength","itemsLength","addLength","len","List_decorate","List_component","VBtn","VIcon","VList","VListTile","VListTileAction","VListTileContent","components_VList","VListTileTitle","components_List_List","NgwMapvue_type_template_id_7098f862_render","ready","_t","canvg","ID","BaseAdapter","_layerId","addLayer","MvtAdapter","MvtAdapter_extends","__assign","idString","layerOptions","source-layer","source","tiles","layout","visibility","paint","layer","TileAdapter","TileAdapter_extends","sourceOptions","TileAdapter_assign","subdomains","split","tileSize","attribution","before","OPTIONS","OsmAdapter","OsmAdapter_extends","call","assign","ZoomControl","ZoomControl_assign","showCompass","ZoomControl_extends","_createButton","className","ariaLabel","element","alias","Zoom in","Zoom out","setAttribute","mapbox_gl","CompassControl","showZoom","CompassControl_extends","AttributionControl","AttributionControl_extends","getImageData","img","opt","canvas","document","createElement","context","getContext","height","HTMLImageElement","drawImage","allowedByType","circle","line","fill","concat","typeAlias","Point","LineString","MultiPoint","Polygon","MultiLineString","MultiPolygon","GeometryCollection","typeAliasForFilter","backAliases","layerType","backAlias","PAINT","opacity","radius","GeoJsonAdapter_ID","GeoJsonAdapter_GeoJsonAdapter","GeoJsonAdapter","selected","_features","_selectedFeatureIds","_filteredFeatureIds","_types","_sourceId","_selectionName","$onLayerClick","_onLayerClick","bind","GeoJsonAdapter_extends","GeoJsonAdapter_assign","addSource","types","types_1","_i","t","geomType","_detectPaintType","_getLayerNameFromType","geomFilter","_addLayer","selectedPaint","selectionLayer","_getSelectionLayerNameFromType","addData","_addEventsListeners","removeLayer","layerId","removeSource","clearLayer","getSource","setData","detectedType","geojson","geometry","featuresTypes","f","findMostFrequentGeomType","geometryTypes","geometries","g","detectType","filterGeometries","rendromId","_rendrom_id","_filterFun","_filter","_updateLayerPaint","getLayers","feature","visible","_getRendromId","fun","removeFilter","_updateFilter","getSelected","select","findFeatureFun","_selectFeature","unselect","_unselectFeature","ok","layerOpt","layerName","layers","selName","layers_1","name_1","_createPaintForType","_paint","setLayoutProperty","setPaintProperty","newFeatures","geometryFilter","geomCollection","_getPaintFromCallback","mapboxPaint","html","_registerImage","icon-image","allowed","allowedType","Array","isArray","paramName","toSave","hasImage","iconSize","svgStr","svgImage_1","Image","crossOrigin","onload","imageData","image","addImage","preventDefault","queryRenderedFeatures","point","isSelected","unselectOnSecondClick","onLayerClick","multiselect","index","splice","selectionArray","filteredArray","selLayerName","falsePaint","selectable","onLayerClick_1","getCanvas","cursor","backType","arr","counts","maxName","c","maxCount","createControl","control","Control","getDefaultPosition","onAdd","content","classList","add","bar","addClass","appendChild","_container","onRemove","parent_1","parentNode","removeChild","remove","fitBoundsOptions","padding","mapboxgl_map_adapter_src","MapboxglMapAdapter","layerAdapters","controlAdapters","isLoaded","_universalEvents","_sourceDataLoading","create","target","mapOpt","container","attributionControl","bounds","MapboxglMapAdapter_assign","fitOptions","once","getContainer","setView","jumpTo","latLng","getCenter","lng","lat","setZoom","getZoom","fit","fitBounds","linear","setRotation","angle","showLayer","layerIds","_toggleLayer","hideLayer","_map_1","setLayerOrder","order","_sortTimerId","clearTimeout","setTimeout","_setLayerOrder","setLayerOpacity","_map","_onMapLoad","getLayer","createButtonControl","link","HTMLElement","innerHTML","child","firstElementChild","lineHeight","offsetHeight","stopPropagation","addEventListener","parent","removeEventListener","addControl","removeControl","onMapClick","evt","lngLat","pixel","top","left","_resolve","baseLayers","orderedLayers","l","baseLayer","nextLayer","nextLayerId","mem","this_1","_getLayerIds","moveLayer","firstRealLayer","firstLayerId_1","_layers","getDependLayers","_onMapSourceData","dataType","isSourceLoaded","_onDataLoad","_onMapError","sourceId","keys","tile","TILE","MVT","OSM","GEOJSON","ZOOM","COMPASS","ATTRIBUTION","createToggleControl","getStatus","setTitle","off","_setHtml","htmlDef","setHtml","_setClass","impact","setClass","addClassOn","addClassOff","_status","buttonControl","KeyCodes","Keys_Keys","Keys","keyCodeAlias","_windowOnFocus","windowOnFocus","_keysPressed","keysPressed","_keysReleased","keysReleased","addKeyboardEventsListener","pressed","keyName","code","removeKeyboardEventsListener","keyCode","decorators_onLoad","event","propertyKey","descriptor","originalMethod","args","origin","getEventStatus","deepmerge","mergeArray","array","dst","detectGeometryType","geometryTypes_findMostFrequentGeomType","count","updateGeojsonAdapterOptions_typeAlias","updateGeojsonAdapterOptions","preparePaint","defaultPaint","getPaintFunctions","newPaint","getPaint","from","updatePaintOptionFromCallback","preparePaint_assign","stroke","strokeColor","strokeOpacity","fillColor","fillOpacity","WebMapLayers_WebMapLayers","WebMapLayers","webMap","_layersIds","_baseLayers","_selectedLayers","fitLayer","layerDef","getExtent","extent","isBaseLayer","getBaseLayers","getLayerId","findLayer","layerAdapter","isLayerVisible","addBaseLayer","adapter","WebMapLayers_assign","_order","adapterEngine","getLayerAdapter","geoJsonOptions","strongOptions","_updateGeoJsonOptions","maxZoom","minZoom","_adapter","mapAdapter","onMapLoad","filterLayer","addLayerFromAsyncAdapter","removeLayers","allowCb","allow","removeOverlays","beforeRemove","addGeoJsonLayer","toggleLayer","onMap","toStatus","silent","action","preEventName","eventName","anotherVisibleLayerBaseLayer","updateLayer","selectLayer","unSelectLayer","removeLayerFilter","setLayerData","addLayerData","clearLayerData","getAttributions","attributions","layerMem","onlyVisible","attr","onLayerClickFromOpt","WebMapControls_WebMapControls","WebMapControls","controlDef","getControl","_control","onLoad","WebMap_WebMap","utils","engine","createFun","controls","CONTROL","BUTTON","TOGGLE","WebMap_OPTIONS","weight","WebMap","appOptions","runtimeParams","_eventsStatus","_starterKits","starterKits","mapOptions","_setupMap","_emitStatusEvent","getElementById","setCursor","_eventName","res","getActiveBaseLayer","visibleLayerBaseLayer","getLayerAdapters","_zoomToInitialExtent","_addLayerProviders","_onLoadSync","_extent","__asyncValues","kit","_d","adapters","adapters_1","adapters_1_1","createAdapter","newAdapter","er_1","onLoadSync","console","er_2","decorators","webmap_src","tms","createQmsAdapter","QmsAdapter","qms","qmsId","utility_loadJSON","webMapAdapter","utility_assign","copyright_text","z_max","z_min","updateQmsOptions","xmlHttp","fixUrlStr","qms_kit_src","QmsKit","QmsKit_assign","webmap","_createAdapter","createGeoJsonAdapter","connector","geoJsonAdapterCb","resourceId","toWgs84","Adapter","createGeoJsonAdapter_extends","_opt","createGeoJsonAdapter_assign","createRasterAdapter","IMAGE","_options","getLayerAdapterOptions","layerAdapterOptions","createRasterAdapter_assign","tileAdapterOptions","createRasterAdapter_extends","addOptions","getIdentificationIds","resource","filterIn","filterFunc","relationFunc","_filtered","children","relChild","BaseProperty_events","TreeHelper_TreeHelper","TreeHelper","_children","setParent","_parent","addChild","getParent","getParents","tree","getChildren","all","getDescendants","Item_events","EventEmitter","BaseProperty","_blocked","_value","getProperty","isGroup","isBlocked","parents","parentProp","property","set","_prepareValue","update","_fireChangeEvent","getValue","_callOnSet","destroy","_removeEventsListener","onSet","prop","CheckProperty","CheckProperty_assign","CheckProperty_extends","bubble","unBlock","propagation","_turnOn","_turnOff","_propagation","getHierarchyValue","every","turnOff","hierarchy","blockChilds","turnOn","unblockChilds","block","_block","_unBlock","_blockChild","_unBlockChild","ItemProperties_ItemProperties","ItemProperties","propertiesList","_properties","_propertiesList","_setPropertyHandler","propOpt","handlers","handler","ItemProperties_assign","list","Item_EventEmitter","item_src","Item","Item_assign","initProperties","WebMapLayerItem_WebMapLayerItem","WebMapLayerItem","WebMapLayerItem_assign","_init","WebMapLayerItem_extends","initItem","newLayer","_layer","item_type","reverse","draw_order_position","layer_adapter","layer_max_scale_denom","_mapScaleToZoomLevel","layer_min_scale_denom","layer_enabled","transparency","layer_transparency","bringToFront","log","scale","centerLat","crsScale","pixelsInMeterWidth","Math","PI","cos","LN2","getZoomFromScale","round","setScaleRatio","WebMapLayerAdapter_WebMapLayerAdapter","WebMapLayerAdapter","pixelRadius","WebMapLayerAdapter_assign","_getWebMapLayerItem","identification","_getWebmapIds","ids","_webmapLayersIds","$$onMapClick","ev","_onMapClick","response","getWebMapExtent","getWebMapConfig","webmap_1","root_item","_updateItemsParams","utils_fixUrlStr","resourceId_1","layer_style_id","updateWmsParams","webMapItem","promises_1","promise","parentId","Number","_sendIdentifyRequest","sendIdentifyRequest","resp","NgwResource_NgwResource","NgwResource","getNgwResourceExtent","styles","createAsyncAdapter","createWebMapAdapter_extends","createWebMapAdapter","cls","parentOptions","createAsyncAdapter_assign","createAdapterFromFirstStyle","basemap_layer","resourceAdapter","derivedCtor","baseCtor","getOwnPropertyNames","getOwnPropertyDescriptor","childrenStyles","firstStyle","epsg","EPSG:3857","reproject","wktToGeoJson","geom","wellknown","bbox","size","now","isImageAllowed","simplification","addNgwLayer","extent_bottom","extent_left","extent_top","extent_right","getNgwLayerExtent","maxLat","maxLon","minLat","minLon","points","rlat","earthsradius","r2d","rlng","d2r","extp","theta","ex","ey","sin","getCirclePoly","polygon","tan","degrees2meters","srs","_pixelsInMeter","div","cssText","body","px","offsetWidth","ngw_kit_src","NgwKit","resourceIds","resourceIds_1","NgwKit_assign","_getLayerAdapter","A","utils_assign","utils_extends","svgPath","brill","rect","marker","cross","star","triangle","plus","minus","asterisk","STROKE","getIcon","shape","anchor","pathAlias","svg","DOMParser","parseFromString","documentElement","insertSvg","fistChild","firstChild","transform","iconAnchor","XMLSerializer","serializeToString","src_utils_fixUrlStr","utils_deepmerge","appendNgwResources","defOptions","src_utils_assign","NgwMap_OPTIONS","controlsOptions","customAttribution","ngw_map_src","NgwMap","kits","prepareWebMapOptions","_ngwLayers","_createWebMap","_addControls","NgwMap_extends","NgwMap_assign","adapterOptions","getNgwLayers","getNgwLayerByResourceId","some","dependLayers","dependFit","zoomToLayer","ngwLayer","qmsLayerName","qmsLayerOptions","resources","webmapId","resources_1","_selectFromNgw","controlAdapterName","controlOptions","__rest","nl","promises","getIds","metresPerPixel","abs","pow","NgwMap_decorate","NgwMapvue_type_script_lang_ts_","NgwMapComponent","markers","NgwMap_NgwMap_extends","$el","createWebMap","addMarkers","zoomToFiltered","setSelected","NgwMap_NgwMap_assign","ngwMap","mapObject","districtsLayer","findFirsVueParent","firstVueParent","found","$parent","collection","getHistoryIcon","coordinates","geojson_extent_default","featureStyles","водоем","ландшафт","памятник","строение","улица","зона","населенный пункт","район","другой","метро","метро-2","другие подземные объекты","featureType_1","styleId","NgwMap_NgwMap_decorate","NgwMap_component","components_NgwMap_NgwMap","ItemsFiltervue_type_template_id_39e05881_render","ref","form","areas","no-data-text","change","updateFilter","rayon","ItemsFiltervue_type_script_lang_ts_","ItemsFilter","years","minYear","maxYear","moscow","param","ItemsFilter_extends","updateFilterAreas","ItemsFilter_decorate","ItemsFilter_component","VAutocomplete","VForm","components_ItemsFilter_ItemsFilter","Detailvue_type_template_id_0f60746f_render","photo","dialog","bigImgSrc","link_big","link_small","content-class","contain","more","tag","getText","domProps","needMore","Detailvue_type_script_lang_ts_","Detail","Story","Detail_extends","id_obj","id1","trim","links_1","nar_codes","Detail_decorate","Detail_component","VDialog","VImg","VListTileSubTitle","components_Detail_Detail","DrawerContainervue_type_template_id_42acd271_render","hasHeaderSlot","hasFooterSlot","DrawerContainervue_type_script_lang_ts_","DrawerContainer","DrawerContainer_extends","hasSlot","$slots","$scopedSlots","DrawerContainer_decorate","DrawerContainer_component","VDivider","VFooter","VToolbar","VToolbarTitle","components_VToolbar","components_DrawerContainer_DrawerContainer","Panelvue_type_template_id_90301248_render","collectionCleaner","result","beforeDestroy","PanelControl_PanelControl","PanelControl","_header","_body","_createContainer","setElement","el","removeFrom","updateBody","_cleanBody","hide","show","headerText","_createHeader","_createBody","Panelvue_type_script_lang_ts_","mixins","parentContainer","findRealParent","instance","constructor","optionsUtils_assign","defaultProps","$options","def","Symbol","warn","optionsMerger","vueElement","leafletElement","setMethodName","charAt","deepValue","custom","$watch","newVal","oldVal","deep","propsBinder_assign","propsBinder","Panel_component","Panel","Mainvue_type_script_lang_ts_","Main","Main_extends","throtleSave","time","lock","wrapperFn","later","created","Main_decorate","MapControl","Main_component","VContent","VItemGroup","VNavigationDrawer","VProgressCircular","VTextField","src_Main","Appvue_type_script_lang_ts_","App","App_extends","totalItems","ceil","App_decorate","MainComponent","TableComponent","AboutComponent","App_component","VCard","VPagination","VSpacer","VGrid","VToolbarItems","src_App","lib","$mount","package_0","locals","setImmediate","global","TypeError","_state","_handled","_deferreds","u","o","_immediateFn","onFulfilled","onRejected","_unhandledRejectionFn","race","self","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_ref_7_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_ref_7_2_node_modules_vuetify_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Table_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"main-ba94e6b.js","sourcesContent":["import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"#map, .map-container {\\n  position: relative;\\n  top: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 10;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/artemiy/nextgis/oralhistory/src/components/NgwMap/NgwMap.vue\"],\"names\":[],\"mappings\":\"AAWA;EACE,kBAAkB;EAClB,MAAM;EACN,SAAS;EACT,WAAW;EACX,YAAY;EACZ,WAAW;AAAA\",\"file\":\"NgwMap.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#map, .map-container {\\n  position: relative;\\n  top: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 10;\\n}\\n\"]}]);\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".detail-prop-list .v-list__tile {\\n  height: auto !important;\\n}\\n.show-photo-card .v-card__text {\\n  padding: 0;\\n}\\n.photo-dialog {\\n  box-shadow: none;\\n  max-height: 100% !important;\\n  margin: 0 !important;\\n}\\n.close-img-dialog-btn {\\n  position: absolute !important;\\n  right: 0;\\n  z-index: 500;\\n  overflow: visible;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/artemiy/nextgis/oralhistory/src/components/Detail/Detail.vue\"],\"names\":[],\"mappings\":\"AA2DA;EACE,uBAAsB;AAAA;AAGxB;EACE,UAAU;AAAA;AAGZ;EACE,gBAAgB;EAChB,2BAA2B;EAC3B,oBAAoB;AAAA;AAGtB;EACE,6BAA6B;EAC7B,QAAQ;EACR,YAAY;EACZ,iBAAiB;AAAA\",\"file\":\"Detail.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.detail-prop-list .v-list__tile {\\n  height: auto!important;\\n}\\n\\n.show-photo-card .v-card__text {\\n  padding: 0;\\n}\\n\\n.photo-dialog {\\n  box-shadow: none;\\n  max-height: 100% !important;\\n  margin: 0 !important;\\n}\\n\\n.close-img-dialog-btn {\\n  position: absolute !important;\\n  right: 0;\\n  z-index: 500;\\n  overflow: visible;\\n}\\n\\n\"]}]);\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".drawer-container {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n}\\n.drawer-titlebar {\\n  flex-shrink: 0;\\n}\\n.drawer-content {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n}\\n.drawer-title {\\n  width: 100%;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/artemiy/nextgis/oralhistory/src/components/DrawerContainer/DrawerContainer.vue\"],\"names\":[],\"mappings\":\"AA4BA;EACE,WAAW;EACX,YAAY;EACZ,aAAa;EACb,sBAAsB;AAAA;AAGxB;EAEE,cAAc;AAAA;AAGhB;EACE,YAAY;EACZ,gBAAgB;EAChB,kBAAkB;AAAA;AAGpB;EACE,WACF;AAAA\",\"file\":\"DrawerContainer.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.drawer-container {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.drawer-titlebar {\\n  // height: 35px;\\n  flex-shrink: 0;\\n}\\n\\n.drawer-content {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n}\\n\\n.drawer-title {\\n  width: 100%\\n}\\n\"]}]);\n","import mod from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".drawe-icon.active {\\n  -webkit-transform: rotate(-180deg);\\n  transform: rotate(-180deg);\\n}\\n.bottom-button {\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-around;\\n}\\n.bottom-button .v-btn {\\n    flex-grow: 1;\\n    margin: 0;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/artemiy/nextgis/oralhistory/src/Main.vue\"],\"names\":[],\"mappings\":\"AAiIA;EAEI,kCAAkC;EAClC,0BAA0B;AAAA;AAI9B;EACE,WAAW;EACX,aAAa;EACb,6BAA6B;AAAA;AAH/B;IAKI,YAAY;IACZ,SAAS;AAAA\",\"file\":\"Main.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.drawe-icon {\\n  &.active {\\n    -webkit-transform: rotate(-180deg);\\n    transform: rotate(-180deg);\\n  }\\n}\\n\\n.bottom-button {\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-around;\\n  .v-btn {\\n    flex-grow: 1;\\n    margin: 0;\\n  }\\n}\\n\"]}]);\n","import mod from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"* {\\n  padding: 0;\\n  margin: 0;\\n}\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden !important;\\n}\\n.fullscreen-dialog .dialog-titlebar {\\n  flex-shrink: 0;\\n}\\n.fullscreen-dialog .dialog-body {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  overflow-x: auto;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/artemiy/nextgis/oralhistory/src/App.vue\"],\"names\":[],\"mappings\":\"AAmDA;EACE,UAAU;EACV,SAAS;AAAA;AAGX;EACE,WAAW;EACX,YAAY;EACZ,2BAA2B;AAAA;AAG7B;EAGI,cAAc;AAAA;AAHlB;EAOI,YAAY;EACZ,gBAAgB;EAChB,gBAAgB;AAAA\",\"file\":\"App.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n* {\\n  padding: 0;\\n  margin: 0;\\n}\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden !important;\\n}\\n\\n.fullscreen-dialog {\\n\\n  .dialog-titlebar {\\n    flex-shrink: 0;\\n  }\\n\\n  .dialog-body {\\n    flex-grow: 1;\\n    overflow-y: auto;\\n    overflow-x: auto;\\n  }\\n}\\n\\n\"]}]);\n","type Reject = (reason?: any) => void;\ntype Resolve = (value?: any) => void;\n\nconst handleCallback = <T = never>(\n  resolve: Resolve,\n  reject: Reject,\n  callback: Resolve,\n  r: T) => {\n  try {\n    resolve(callback(r));\n  } catch (e) {\n    reject(e);\n  }\n};\n\nexport class CancelablePromise<T> implements Promise<T> {\n\n  readonly [Symbol.toStringTag]: string;\n\n  private _canceled = false;\n\n  private _promise?: Promise<T>;\n\n  constructor(\n    executor: (\n      resolve: (value?: T | PromiseLike<T>) => void,\n      reject: (reason?: any) => void\n    ) => void,\n    private onCancel?: (...args: any[]) => void\n  ) {\n    this._promise = new Promise(executor);\n  }\n\n  then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null):\n    CancelablePromise<TResult1 | TResult2> {\n\n    const p = new CancelablePromise((resolve, reject) => {\n      if (this._promise) {\n        this._promise.then((r) => {\n          if (this._canceled) {\n            p.cancel();\n          }\n          if (onfulfilled && !this._canceled) {\n            handleCallback(resolve, reject, onfulfilled, r);\n          } else {\n            resolve(r);\n          }\n        }, (r) => {\n          if (this._canceled) {\n            p.cancel();\n          }\n          if (onrejected && !this._canceled) {\n            handleCallback(resolve, reject, onrejected, r);\n          } else {\n            reject(r);\n          }\n        });\n      }\n    }, () => {\n      this.cancel();\n    });\n    return p as CancelablePromise<TResult1 | TResult2>;\n  }\n\n  catch<TResult = never>(onrejected?: (\n    (reason: any) => TResult | PromiseLike<TResult>) | undefined | null\n  ): CancelablePromise<T | TResult> {\n    return this.then(undefined, onrejected);\n  }\n\n  cancel(errorCallback?: (...args: any[]) => void) {\n    this._canceled = true;\n    if (errorCallback && this._promise) {\n      this._promise.catch(errorCallback);\n    }\n    if (this.onCancel) {\n      this.onCancel();\n    }\n    this._destroy();\n    return this;\n  }\n\n  finally(onfinally?: (() => void) | undefined | null): Promise<T> {\n    if (this._promise) {\n      return this._promise.finally(onfinally);\n    }\n    return Promise.reject<T>(onfinally);\n  }\n\n  private _destroy() {\n    this.onCancel = undefined;\n    this._promise = undefined;\n  }\n}\n","// readyState\n// Holds the status of the XMLHttpRequest.\n// 0: request not initialized\n// 1: server connection established\n// 2: request received\n// 3: processing request\n// 4: request finished and response is ready\n\n// status\n// 200: \"OK\"\n// 201 \"Created\"\tThe request has been fulfilled, and a new resource is created\n// 403: \"Forbidden\"\n// 404: \"Page not found\"\n// 500: \"Internal Server Error\"\n// For a complete list go to the Http Messages Reference\n\nimport { RequestOptions } from './interfaces';\n\nexport function loadJSON(\n  url: string,\n  callback: (...args: any[]) => any,\n  options: RequestOptions = {},\n  error: (reason?: any) => void,\n  onCancel: Array<() => void>) {\n\n  options.method = options.method || 'GET';\n  let xhr: XMLHttpRequest;\n\n  xhr = new XMLHttpRequest();\n  xhr.open(options.method || 'GET', url, true); // true for asynchronous\n\n  const processingResponce = (forError: boolean = false) => {\n    const cb = forError ? error : callback;\n    if (xhr.responseText) {\n      try {\n        cb(JSON.parse(xhr.responseText));\n      } catch (er) {\n        error({ message: '' });\n      }\n    } else {\n      error({ message: '' });\n    }\n  };\n\n  xhr.onreadystatechange = () => {\n    if ((xhr.readyState === 4 && xhr.status === 200) || (xhr.readyState === 3 && xhr.status === 201)) {\n      processingResponce();\n    } else if (xhr.readyState === 3 && xhr.status === 400) {\n      processingResponce();\n    } else if (xhr.readyState === 4 && xhr.status === 500) {\n      processingResponce();\n    } else if (xhr.readyState === 4 && xhr.status === 401) {\n      error(xhr.statusText);\n    } else if (xhr.readyState === 4) {\n      error('request error');\n    }\n  };\n\n  xhr.onerror = (er) => {\n    error(er);\n  };\n\n  xhr.upload.onprogress = function (e) {\n    if (e.lengthComputable) {\n      const percentComplete = (e.loaded / e.total) * 100;\n      if (options.onProgress) {\n        options.onProgress(percentComplete);\n      }\n      // console.log(percentComplete + '% uploaded');\n    }\n  };\n\n  const headers = options.headers;\n  if (headers) {\n    for (const h in headers) {\n      if (headers.hasOwnProperty(h)) {\n        const header = headers[h];\n        if (typeof header === 'string') {\n          xhr.setRequestHeader(h, header);\n        }\n      }\n    }\n  }\n  if (options.withCredentials !== undefined) {\n    xhr.withCredentials = options.withCredentials;\n  }\n\n  let data: FormData | any;\n  if (options.file) {\n    data = new FormData();\n    data.append('file', options.file);\n    if (options.data) {\n      for (const d in data) {\n        if (data.hasOwnProperty(d)) {\n          data.append(d, data[d]);\n        }\n      }\n    }\n  } else {\n    data = options.data ? JSON.stringify(options.data) : null;\n  }\n  if (onCancel) {\n    onCancel.push(() => {\n      xhr.abort();\n    });\n  }\n  xhr.send(data);\n}\n\n// https://github.com/Leaflet/Leaflet/blob/b507e21c510b53cd704fb8d3f89bb46ea925c8eb/src/core/Util.js#L165\nconst templateRe = /\\{ *([\\w_-]+) *\\}/g;\n\nexport function template(str: string, data: { [param: string]: any }) {\n  return str.replace(templateRe, (s, key) => {\n    let value = data[key];\n\n    if (value === undefined) {\n      throw new Error('No value provided for letiable ' + s);\n    } else if (typeof value === 'function') {\n      value = value(data);\n    }\n    return value;\n  });\n}\n","/**\n * @module ngw-connector\n */\n\nimport { NgwConnector } from './NgwConnector';\n\nexport { CancelablePromise } from './CancelablePromise';\n\nexport * from './interfaces';\nexport * from './types/ResourceItem';\nexport * from './types/FeatureLayer';\nexport * from './types/RequestItemsParamsMap';\n\nexport { NgwConnector };\nexport default NgwConnector;\n","/**\n * @module ngw-connector\n */\nimport './polyfills';\n\nimport { CancelablePromise } from './CancelablePromise';\n\nimport { RequestItemsParamsMap } from './types/RequestItemsParamsMap';\nimport {\n  NgwConnectorOptions, Router,\n  GetRequestItemsResponseMap, RequestOptions,\n  Params, LoadingQueue, UserInfo, Credentials,\n  PyramidRoute, RequestHeaders, PostRequestItemsResponseMap\n} from './interfaces';\nimport { loadJSON, template } from './utils';\nimport { EventEmitter } from 'events';\n\nexport class NgwConnector {\n\n  emitter = new EventEmitter();\n  user?: UserInfo;\n  private routeStr = '/api/component/pyramid/route';\n  private route?: PyramidRoute;\n  private _loadingQueue: { [name: string]: LoadingQueue } = {};\n  private _loadingStatus: { [url: string]: boolean } = {};\n\n  constructor(public options: NgwConnectorOptions = {}) {\n    if (this.options.route) {\n      this.routeStr = this.options.route;\n    }\n  }\n\n  async connect(): CancelablePromise<Router> {\n    if (this.route) {\n      return Promise.resolve(this.route);\n    } else {\n      if (this.options.auth) {\n        const { login, password } = this.options.auth;\n        if (login && password) {\n          await this.getUserInfo({ login, password });\n        }\n      }\n\n      return await this.makeQuery(this.routeStr, {}, {}).then((route: PyramidRoute) => {\n        this.route = route;\n        return route;\n      });\n    }\n  }\n\n  async login(credentials: Credentials) {\n    this.logout();\n    return this.getUserInfo(credentials);\n  }\n\n  logout() {\n    this._rejectLoadingQueue();\n    this._loadingStatus = {};\n    this.options.auth = undefined;\n    this.route = undefined;\n    this.user = undefined;\n  }\n\n  getUserInfo(credentials: Credentials): CancelablePromise<UserInfo> {\n    if (credentials) {\n      this.options.auth = credentials;\n    }\n    const options: RequestOptions = {\n      headers: this.getAuthorizationHeaders(credentials)\n      // withCredentials: true\n    };\n\n    // Do not use request('auth.current_user') to avoid circular-references\n    return this.makeQuery('/api/component/auth/current_user', {}, options).then((data: UserInfo) => {\n      this.user = data;\n      this.emitter.emit('login', data);\n      return data;\n    }).catch((er) => {\n      this.emitter.emit('login:error', er);\n      throw er;\n    });\n  }\n\n  getAuthorizationHeaders(credentials?: Credentials): RequestHeaders | undefined {\n    const client = this.makeClientId(credentials);\n    if (client) {\n      return {\n        'Authorization': 'Basic ' + client\n      };\n    }\n  }\n\n  makeClientId(credentials?: Credentials) {\n    credentials = credentials || this.options.auth;\n    if (credentials) {\n      const { login, password } = credentials;\n      return window.btoa(unescape(encodeURIComponent(`${login}:${password}`)));\n    }\n  }\n\n  async request<K extends keyof RequestItemsParamsMap>(\n    name: K,\n    params: (RequestItemsParamsMap[K] | {} ) & { [name: string]: any } = {},\n    options?: RequestOptions): CancelablePromise<GetRequestItemsResponseMap[K] | PostRequestItemsResponseMap[K]> {\n\n    const apiItems = await this.connect();\n    let apiItem = apiItems && apiItems[name];\n    if (apiItem) {\n      apiItem = [...apiItem];\n      let url = apiItem.shift();\n      if (apiItem.length) {\n        const replaceParams: {\n          [num: number]: string;\n        } = {};\n        for (let fry = 0; fry < apiItem.length; fry++) {\n          const arg = apiItem[fry];\n          replaceParams[fry] = '{' + arg + '}';\n          if (params[arg] === undefined) {\n            throw new Error('`' + arg + '`' + ' url api argument is not specified');\n          }\n        }\n        if (url) {\n          url = template(url, replaceParams);\n        }\n      }\n      // Transfer part of the parameters from `params` to the URL string\n      if (params) {\n        const paramArray = [];\n        for (const p in params) {\n          if (params.hasOwnProperty(p) && apiItem.indexOf(p) === -1) {\n            paramArray.push(`${p}=${params[p]}`);\n          }\n        }\n        if (paramArray.length) {\n          url = url + '?' + paramArray.join('&');\n        }\n      }\n      if (url) {\n        return this.makeQuery(url, params, options);\n      } else {\n        throw new Error('request url is not set');\n      }\n    }\n\n  }\n\n  post<K extends keyof RequestItemsParamsMap>(\n    name: K,\n    options?: RequestOptions,\n    params?: RequestItemsParamsMap[K] & { [name: string]: any }): CancelablePromise<PostRequestItemsResponseMap[K]> {\n\n    options = options || {};\n    options.method = 'POST';\n    options.nocache = true;\n    return this.request(name, params, options);\n  }\n\n  get<K extends keyof RequestItemsParamsMap>(\n    name: K,\n    options?: RequestOptions | undefined | null,\n    params?: RequestItemsParamsMap[K] & { [name: string]: any }): CancelablePromise<GetRequestItemsResponseMap[K]> {\n\n    options = options || {};\n    options.method = 'GET';\n    options.nocache = true;\n    return this.request(name, params, options);\n  }\n\n  makeQuery(\n    url: string,\n    params: Params,\n    options: RequestOptions = {}): CancelablePromise<any> {\n\n    url = (this.options.baseUrl ? this.options.baseUrl : '') + url;\n    if (url) {\n      if (params) {\n        url = template(url, params);\n      }\n      // remove double slash\n      url = url.replace(/([^:]\\/)\\/+/g, '$1');\n      if (!this._loadingStatus[url] || options.nocache) {\n        this._loadingStatus[url] = true;\n\n        return this._getJson(url, options).then((data) => {\n          this._loadingStatus[url] = false;\n          this._executeLoadingQueue(url, data);\n          return data;\n        }).catch((er) => {\n          this._loadingStatus[url] = false;\n          this._executeLoadingQueue(url, er, true);\n          this.emitter.emit('error', er);\n          throw er;\n        });\n      } else {\n        this._loadingStatus[url] = false;\n        return new CancelablePromise((resolve, reject) => {\n          this._setLoadingQueue(url, resolve, reject);\n        });\n      }\n    } else {\n      throw new Error('No `url` parameter set for option ' + name);\n    }\n\n  }\n\n  _setLoadingQueue(name: string, resolve: (...args: any[]) => any, reject: (...args: any[]) => any) {\n    this._loadingQueue[name] = this._loadingQueue[name] || {\n      name,\n      waiting: [],\n    };\n    this._loadingQueue[name].waiting.push({\n      resolve,\n      reject,\n      timestamp: new Date(),\n    });\n  }\n\n  _rejectLoadingQueue() {\n    for (const q in this._loadingQueue) {\n      if (this._loadingQueue.hasOwnProperty(q)) {\n        const queue = this._loadingQueue[q];\n        queue.waiting.forEach((x) => {\n          x.reject();\n        });\n        delete this._loadingQueue[q];\n      }\n    }\n  }\n\n  _executeLoadingQueue(name: string, data: any, isError?: boolean) {\n    const queue = this._loadingQueue[name];\n    if (queue) {\n      for (let fry = 0; fry < queue.waiting.length; fry++) {\n        const wait = queue.waiting[fry];\n        if (isError) {\n          if (wait.reject) {\n            wait.reject();\n          }\n        } else {\n          wait.resolve(data);\n        }\n      }\n      queue.waiting = [];\n    }\n  }\n\n  _getJson(url: string, options: RequestOptions): CancelablePromise<any> {\n    const onCancel: Array<() => void> = [];\n    return new CancelablePromise((resolve, reject) => {\n      if (this.user) {\n        options = options || {};\n        // options.withCredentials = true;\n        options.headers = this.getAuthorizationHeaders();\n      }\n      loadJSON(url, resolve, options, reject, onCancel);\n    }, () => {\n      onCancel.forEach((x) => x());\n    });\n  }\n}\n","import NgwConnector from '@nextgis/ngw-connector';\nimport { FeatureCollection, Point, Feature } from 'geojson';\n// @ts-ignore\nimport config from '../../config.json';\n\nexport const url = config.baseUrl.replace(\n  /^(https?|ftp):\\/\\//,\n  (location.protocol === 'https:' ? 'https' : 'http') + '://'\n);\n\nconst connector = new NgwConnector({ baseUrl: url });\n\nexport interface BdMainItemProperties {\n\n  id: number;\n\n  id1: number;\n\n  status: string;\n  narrator: string;\n  nar_codes: string;\n  description?: string;\n  mos2?: string;\n  mos5?: string;\n  mos4?: string;\n  visual?: string;\n  mos6?: string;\n  mos1?: string;\n  unoff: string;\n  mos3?: string;\n  descript2?: string;\n  lat: number;\n  rayon: string;\n  geo?: string;\n  name?: string;\n  narrativ_b?: string;\n  addr?: string;\n  narrativ_l: string;\n  lon: number;\n  narrativ_p?: string;\n  type: string;\n}\n\nexport interface BdPhotoProperties {\n  id: number;\n\n  link_big: string;\n  link_small: string;\n  id_obj: number;\n  descript: string;\n  link: string;\n  details: string;\n}\n\nexport type BdMainItem = Feature<Point, BdMainItemProperties>;\n\nexport default {\n  getLayerGeoJson(cb) {\n    connector.request('feature_layer.geojson', {\n      id: config.ngwMarkerLayerId,\n      fid: 'id'\n    }).then((data: FeatureCollection<Point, BdMainItemProperties>) => {\n      data.features.forEach((x, i) => {\n        x.id = x.properties.id;\n      });\n      cb(data.features);\n    });\n  },\n\n  getPhotos(cb) {\n    connector.request('feature_layer.geojson', {\n      id: config.layerWithPhotos,\n      fid: 'id'\n    }).then((data: FeatureCollection<Point, BdPhotoProperties>) => {\n      cb(data.features.map((x) => {\n        x.id = x.properties.id;\n        return x.properties;\n      }));\n    });\n  },\n\n  getLayerMeta(cb) {\n    cb([\n      // { text: 'Идентификатор', value: 'id1', noHide: true },\n      // { text: 'долгота', value: 'lat', noHide: true },\n      // { text: 'широта', value: 'lon', noHide: true },\n      { text: 'Адрес', value: 'addr', noHide: true },\n      { text: 'Название объекта', value: 'name', noHide: true },\n      // { text: 'Тип объекта', value: 'type', noHide: true },\n      { text: 'Статус объекта', value: 'status', noHide: true },\n      { text: 'Район', value: 'rayon', noHide: true },\n      { text: 'Неофициальное название', value: 'unoff', noHide: true },\n      { text: 'ОПИСАНИЕ', value: 'description', noHide: true },\n      { text: 'Истории о прошлом', value: 'narrativ_l', type: 'Story' },\n      { text: 'Семейные истории', value: 'narrativ_b', type: 'Story' },\n      { text: 'Практики горожан', value: 'narrativ_p', type: 'Story' },\n      { text: 'Характеристика места', value: 'descript2', type: 'Story' },\n      { text: 'Рассказчик', value: 'narrator', type: 'NarratorLink' },\n      { text: 'Визуальные материалы', value: 'visual' },\n      { text: 'Москва дворовая', value: 'mos1', type: 'Mos' },\n      { text: 'Москва церковная', value: 'mos2', type: 'Mos' },\n      { text: 'Москва бездомная', value: 'mos3', type: 'Mos' },\n      { text: 'Москва подземная', value: 'mos4', type: 'Mos' },\n      { text: 'Москва субкультурная', value: 'mos5', type: 'Mos' },\n      { text: 'Москва легендарная', value: 'mos6', type: 'Mos' }\n    ]);\n  }\n};\n","import ngw, { BdMainItem } from '../../api/ngw';\n\n// initial state\n// shape: [{ id, quantity }]\nconst _state = {\n  items: [],\n  photos: [],\n  meta: false,\n  filtered: [],\n  detailItem: false,\n};\n\n// getters\nconst _getters = {\n  features: (state, getters, rootState) => state.filtered,\n  sortFeatures: (state, getters, rootState) => {\n    const filtered = [...state.filtered] as BdMainItem[];\n    return filtered.sort((a, b) => {\n      return a.properties.name.toUpperCase() > b.properties.name.toUpperCase() ? 1 : -1;\n    });\n  }\n};\n\n// actions\nconst actions = {\n\n  getAllItems({ commit }) {\n    ngw.getLayerMeta(meta => {\n      commit('setMeta', meta);\n      ngw.getLayerGeoJson(items => {\n        commit('setItems', items);\n      });\n    });\n  },\n\n  getPhotos({ commit }) {\n    ngw.getPhotos((photos) => {\n      commit('setPhotos', photos);\n    });\n  },\n\n  setFilter({ commit, state }, items) {\n    commit('setFilter', items);\n    const detail = state.detailItem;\n    if (detail) {\n      const item = items.find((x: BdMainItem) => {\n        const id = x.properties.id;\n        return id === detail.id;\n      });\n      if (!item) {\n        commit('setDetail', false);\n      }\n    }\n  },\n\n  setDetail({ commit, state }, id: number) {\n    let item = state.filtered.find((x: BdMainItem) => {\n      const _id = x.properties.id;\n      return _id === id;\n    });\n    const detail = state.detailItem;\n    if (detail && detail.id === id) {\n      item = false;\n    }\n    commit('setDetail', item);\n  }\n};\n\n// mutations\nconst mutations = {\n\n  setItems(state, items) {\n    state.items = items;\n    state.filtered = items;\n  },\n\n  setFilter(state, items) {\n    state.filtered = items;\n  },\n\n  setDetail(state, item) {\n    state.detailItem = item;\n  },\n\n  setMeta(state, meta) {\n    state.meta = meta;\n  },\n\n  setPhotos(state, photos) {\n    state.photos = photos;\n  }\n\n};\n\nexport default {\n  namespaced: true,\n  state: _state,\n  getters: _getters,\n  actions,\n  mutations\n};\n","// initial state\n// shape: [{ id, quantity }]\n\nexport type AppPages = 'main' | 'table' | 'about';\nexport interface AppState {\n  drawer?: boolean;\n  page?: AppPages;\n  center?: [number, number];\n  listSearchText?: string;\n}\n\nconst _state: AppState = {\n  drawer: true,\n  page: 'main',\n  center: null,\n  listSearchText: ''\n};\n\n// getters\nconst _getters = {};\n\n// actions\nconst actions = {\n\n\n  showDrawer({ commit }) {\n    commit('showDrawer');\n  },\n\n  hideDrawer({ commit }) {\n    commit('hideDrawer');\n  },\n\n  setListSearchText({ commit }, value: string) {\n    return commit('setListSearchText', value);\n  },\n\n  toggleDrawer({ commit }, value: boolean) {\n    if (value) {\n      commit('showDrawer');\n    } else {\n      commit('hideDrawer');\n    }\n  },\n\n  setPage({ commit }, page: AppPages) {\n    commit('setPage', page);\n  },\n\n  zoomTo({ commit }, id: number) {\n    commit('setCenter', id);\n  }\n\n};\n\n// mutations\nconst mutations = {\n\n  showDrawer(state) {\n    state.drawer = true;\n  },\n\n  hideDrawer(state) {\n    state.drawer = false;\n  },\n\n  setPage(state, page: AppPages) {\n    state.page = page;\n  },\n\n  setCenter(state, id: number) {\n    state.center = id;\n  },\n\n  setListSearchText(state, value: string) {\n    state.listSearchText = value;\n  }\n\n};\n\nexport default {\n  namespaced: true,\n  state: _state,\n  getters: _getters,\n  actions,\n  mutations\n};\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport bdMain from './modules/bd_main';\nimport app from './modules/app';\n// import createLogger from '../../../src/plugins/logger';\n\n// Example projects\n// https://github.com/vuejs/vuex/tree/dev/examples/\n// Vuex and typescript\n// https://github.com/utahta/vue-vuex-typescript-example\n\nVue.use(Vuex);\n// @ts-ignore\nconst debug = process.env.NODE_ENV !== 'production';\n\nexport default new Vuex.Store({\n  modules: {\n    bdMain,\n    app,\n  },\n  strict: debug,\n  // plugins: debug ? [createLogger()] : []\n});\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\"main-component\"),\n      _vm._v(\" \"),\n      _c(\n        \"v-dialog\",\n        {\n          attrs: {\n            value: _vm.page === \"table\",\n            fullscreen: \"\",\n            scrollable: \"\",\n            transition: \"dialog-bottom-transition\"\n          }\n        },\n        [\n          _c(\n            \"v-card\",\n            { staticClass: \"fullscreen-dialog\" },\n            [\n              _c(\n                \"v-toolbar\",\n                {\n                  staticClass: \"dialog-titlebar\",\n                  attrs: { dark: \"\", color: \"primary\" }\n                },\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { icon: \"\", dark: \"\" },\n                      nativeOn: {\n                        click: function($event) {\n                          _vm.page = \"main\"\n                        }\n                      }\n                    },\n                    [_c(\"v-icon\", [_vm._v(\"close\")])],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"span\", { staticClass: \"title ml-3 mr-5\" }, [\n                    _vm._v(\"Устная память Москвы \"),\n                    _c(\"span\", { staticClass: \"font-weight-light\" }, [\n                      _vm._v(\"Таблица\")\n                    ])\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"v-text-field\", {\n                    attrs: {\n                      \"solo-inverted\": \"\",\n                      flat: \"\",\n                      \"hide-details\": \"\",\n                      label: \"Поиск\",\n                      \"prepend-inner-icon\": \"search\"\n                    },\n                    model: {\n                      value: _vm.tableSearch,\n                      callback: function($$v) {\n                        _vm.tableSearch = $$v\n                      },\n                      expression: \"tableSearch\"\n                    }\n                  }),\n                  _vm._v(\" \"),\n                  _c(\"v-spacer\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-toolbar-items\",\n                    [\n                      _c(\"v-btn\", { attrs: { dark: \"\", flat: \"\" } }, [\n                        _vm._v(\"Сохранить\")\n                      ])\n                    ],\n                    1\n                  )\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"div\",\n                { staticClass: \"dialog-body\" },\n                [\n                  _vm.page === \"table\"\n                    ? _c(\"table-component\", {\n                        attrs: {\n                          search: _vm.tableSearch,\n                          paginationSync: _vm.paginationSync\n                        }\n                      })\n                    : _vm.page === \"about\"\n                    ? _c(\"about-component\")\n                    : _vm._e()\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _vm.pagination && _vm.pagination.page\n                ? _c(\"v-footer\", { staticClass: \"pt-3 pb-4\" }, [\n                    _c(\n                      \"div\",\n                      { staticClass: \"text-xs-center pt-1\" },\n                      [\n                        _c(\"v-pagination\", {\n                          attrs: { length: _vm.pages, \"total-visible\": 7 },\n                          model: {\n                            value: _vm.pagination.page,\n                            callback: function($$v) {\n                              _vm.$set(_vm.pagination, \"page\", $$v)\n                            },\n                            expression: \"pagination.page\"\n                          }\n                        })\n                      ],\n                      1\n                    )\n                  ])\n                : _vm._e()\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\n        \"v-layout\",\n        {\n          attrs: {\n            \"align-center\": \"\",\n            \"justify-center\": \"\",\n            column: \"\",\n            \"fill-height\": \"\"\n          }\n        },\n        [\n          _c(\"div\", { staticClass: \"title font-weight-thin pa-3\" }, [\n            _vm._v(\"Разработано в\")\n          ]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"logo\", on: { click: _vm.openNextGIS } }, [\n            _c(\n              \"svg\",\n              {\n                staticClass: \"logo hidden-xs\",\n                staticStyle: { \"enable-background\": \"new 0 0 818.8 111.5\" },\n                attrs: {\n                  version: \"1.1\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\n                  x: \"0px\",\n                  y: \"0px\",\n                  viewBox: \"0 0 818.8 111.5\",\n                  \"xml:space\": \"preserve\"\n                }\n              },\n              [\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d:\n                      \"M0,111.5V0.1h7.4l69.9,69.8V0.1h22.3v111.4h-8.2L22.3,42.4v69.1\\n              H0\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d:\n                      \"M225.8,111.5V0.1l-81.9-0.1v20.8h59.6v23.8h-34v20.7h34v25.3H144\\n              v20.8L225.8,111.5\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d:\n                      \"M502.3,0.1v20.8h-37.1v90.6h-22.3V20.9h-37.1V0.1L502.3,0.1\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: {\n                    d:\n                      \"M550.4,95.5c-10.7-10.6-16-23.9-16-39.9\\n              c0.1-15.7,5.4-28.8,16-39.5c10.6-10.7,23.9-16,39.6-16c15.9,0,29.5,5,40.9,14.9l-14.9,16.3c-7.6-5.9-16.3-8.9-26.1-8.9\\n              c-10,0-18.1,3.2-24.2,9.4c-6.1,6.2-9.2,14.1-9.2,23.8c0.1,10.4,3.2,18.6,9.3,24.7c6.1,6.1,14.2,9.1,24.2,9.1c8,0,14.2-1.6,18.5-4.8\\n              V65.4l-14.9,0.1V44.7H631v52c-11.3,9.9-25,14.9-40.9,14.9C574.3,111.5,561,106.1,550.4,95.5\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: { d: \"M674.9,111.5h22.2V0h-22.2V111.5z\" }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: {\n                    d:\n                      \"M801.4,3.8c5.7,2.5,11,6.2,16,11.2l-14.9,14.9\\n              c-5-6-11.9-8.9-20.8-8.9c-8.9,0-14.6,2.1-17.1,6.3c-2.5,4.2-2.5,7.8,0,10.8c2.5,3,8.2,5.2,17.1,6.7c9.4,1,18,4.1,25.6,9.3\\n              c7.7,5.2,11.5,13.5,11.5,24.9c0,8.9-4.1,16.6-12.3,23c-8.2,6.4-17.7,9.7-28.6,9.7c-10.3,0-19-1.5-25.9-4.4\\n              c-6.9-3-12.9-6.9-17.8-11.9L749,80.3c5,6,13.4,9.4,25.3,10.4c9.9,0,16.1-2.1,18.5-6.3c2.5-4.2,2.5-8.4,0-12.6\\n              c-2.4-4.2-8.6-6.8-18.5-7.8c-8.9-1-17.1-3.7-24.5-8.2c-7.4-4.5-11.2-12.1-11.2-23c0-9.9,4.2-17.8,12.7-23.7c8.4-6,17.1-9,26-9\\n              C787.6,0.1,795.7,1.3,801.4,3.8\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: {\n                    d: \"M340.2,43.3l31.6-43.2h-26.2L327,25.4L340.2,43.3\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--light\",\n                  attrs: {\n                    d:\n                      \"M332.8,53.5L293.6,0.1h-26.2l39,53.4l-42.6,58h26.5L332.8,53.5\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"path\", {\n                  staticClass: \"logo__item--dark\",\n                  attrs: { d: \"M340.2,63.6l-13.2,18l21.9,29.9h26.4L340.2,63.6\" }\n                })\n              ]\n            )\n          ])\n        ]\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=ts&\"","import Vue from 'vue';\nimport Component from 'vue-class-component';\n\n@Component\nexport class About extends Vue {\n\n  openNextGIS() {\n    window.location.href = 'http://nextgis.com/';\n  }\n\n}\n","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=5e667ffc&\"\nimport script from \"./About.vue?vue&type=script&lang=ts&\"\nexport * from \"./About.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\ninstallComponents(component, {VApp,VLayout})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('5e667ffc', component.options)\n    } else {\n      api.reload('5e667ffc', component.options)\n    }\n    module.hot.accept(\"./About.vue?vue&type=template&id=5e667ffc&\", function () {\n      api.rerender('5e667ffc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/NextGIS/About.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\"v-data-table\", {\n        attrs: {\n          headers: _vm.headers,\n          items: _vm.items,\n          search: _vm.search,\n          pagination: _vm.pagination,\n          \"hide-actions\": \"\"\n        },\n        on: {\n          \"update:pagination\": function($event) {\n            _vm.pagination = $event\n          }\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"headerCell\",\n            fn: function(props) {\n              return [\n                _c(\"v-tooltip\", { attrs: { bottom: \"\" } }, [\n                  _c(\n                    \"span\",\n                    { attrs: { slot: \"activator\" }, slot: \"activator\" },\n                    [\n                      _vm._v(\n                        \"\\n          \" +\n                          _vm._s(props.header.text) +\n                          \"\\n        \"\n                      )\n                    ]\n                  )\n                ])\n              ]\n            }\n          },\n          {\n            key: \"items\",\n            fn: function(props) {\n              return _vm._l(_vm.headers, function(h) {\n                return _c(\"td\", { key: h.value }, [\n                  props.item[h.value] && props.item[h.value].length < 40\n                    ? _c(\"span\", [_vm._v(_vm._s(props.item[h.value]))])\n                    : _c(\n                        \"span\",\n                        [\n                          _c(\"show-more-field\", {\n                            attrs: { text: props.item[h.value], charCount: 40 }\n                          })\n                        ],\n                        1\n                      )\n                ])\n              })\n            }\n          }\n        ])\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"span\", [\n    _vm.text && String(_vm.text).length > _vm.charCount\n      ? _c(\"span\", [\n          _c(\"span\", [_vm._v(_vm._s(_vm.toShow))]),\n          _vm._v(\" \"),\n          _c(\"a\", { on: { click: _vm.onClick } }, [\n            !_vm.expand\n              ? _c(\"span\", [_vm._v(\">>>\")])\n              : _c(\"span\", [_vm._v(\"<<<\")])\n          ])\n        ])\n      : _c(\"span\", [_vm._v(_vm._s(_vm.text))])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowMoreField.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowMoreField.vue?vue&type=script&lang=ts&\"","import { Vue, Component, Prop } from 'vue-property-decorator';\n\n@Component\nexport class ShowMoreField extends Vue {\n\n  @Prop({default: ''}) text: string;\n  @Prop({default: 40}) charCount: number;\n\n  expand = false;\n\n  get toShow() {\n    if (this.expand) {\n      return this.text;\n    } else {\n      return this.text.slice(0, this.charCount) + '...';\n    }\n  }\n\n  onClick() {\n    this.expand = !this.expand;\n  }\n}\n","import { render, staticRenderFns } from \"./ShowMoreField.vue?vue&type=template&id=051b4be1&\"\nimport script from \"./ShowMoreField.vue?vue&type=script&lang=ts&\"\nexport * from \"./ShowMoreField.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('051b4be1', component.options)\n    } else {\n      api.reload('051b4be1', component.options)\n    }\n    module.hot.accept(\"./ShowMoreField.vue?vue&type=template&id=051b4be1&\", function () {\n      api.rerender('051b4be1', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/ShowMoreField/ShowMoreField.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=ts&\"","import { Vue, Component, Prop, Watch } from 'vue-property-decorator';\nimport { BdMainItemProperties } from '../../api/ngw';\nimport ShowMoreField from '../ShowMoreField/ShowMoreField.vue';\n\n\n@Component({\n  components: {ShowMoreField}\n})\nexport class Table extends Vue {\n\n  @Prop() search: string;\n  @Prop() paginationSync;\n\n  pagination = {\n    rowsPerPage: 20\n  };\n\n  headers = [\n    { text: 'Адрес', value: 'addr' },\n    { text: 'долгота', value: 'lat' },\n    { text: 'широта', value: 'lon' },\n    { text: 'Название объекта', value: 'name' },\n    { text: 'Тип объекта', value: 'type' },\n    { text: 'Статус объекта', value: 'status' },\n    { text: 'Район', value: 'rayon' },\n    { text: 'Неофициальное название', value: 'unoff' },\n    { text: 'ОПИСАНИЕ', value: 'description' },\n    { text: 'Локальный нарратив', value: 'narrativ_l' },\n    { text: 'Биографический нарратив', value: 'narrativ_b' },\n    { text: 'Нарратив о практиках', value: 'narrativ_p' },\n    { text: 'Описание места', value: 'descript2' },\n    { text: 'Рассказчик', value: 'narrator' },\n    { text: 'Визуальные материалы', value: 'visual' },\n    { text: 'Москва дворовая', value: 'mos1' },\n    { text: 'Москва церковная', value: 'mos2' },\n    { text: 'Москва бездомная', value: 'mos3' },\n    { text: 'Москва подземная', value: 'mos4' },\n    { text: 'Москва субкультурная', value: 'mos5' },\n    { text: 'Москва легендарная', value: 'mos6' },\n  ];\n\n  get items(): BdMainItemProperties[] {\n    return this.$store.getters['bdMain/sortFeatures'].map((x) => x.properties);\n  }\n\n  @Watch('pagination')\n  setPagination(value) {\n    this.paginationSync(value);\n  }\n\n}\n\n\n\n\n","import { render, staticRenderFns } from \"./Table.vue?vue&type=template&id=647119ad&\"\nimport script from \"./Table.vue?vue&type=script&lang=ts&\"\nexport * from \"./Table.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Table.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VDataTable } from 'vuetify/lib'\nimport { VTooltip } from 'vuetify/lib'\ninstallComponents(component, {VApp,VDataTable,VTooltip})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('647119ad', component.options)\n    } else {\n      api.reload('647119ad', component.options)\n    }\n    module.hot.accept(\"./Table.vue?vue&type=template&id=647119ad&\", function () {\n      api.rerender('647119ad', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/Table/Table.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\n        \"v-content\",\n        [\n          _c(\n            \"ngw-map\",\n            { attrs: { center: [37.63, 55.75], zoom: 10 } },\n            [\n              _c(\"map-control\", { attrs: { position: \"top-left\" } }, [\n                !_vm.drawer\n                  ? _c(\n                      \"div\",\n                      [\n                        _c(\n                          \"v-layout\",\n                          {\n                            attrs: {\n                              \"align-center\": \"\",\n                              \"justify-start\": \"\",\n                              row: \"\",\n                              \"fill-height\": \"\"\n                            }\n                          },\n                          [\n                            _c(\n                              \"v-btn\",\n                              {\n                                attrs: { fab: \"\", small: \"\" },\n                                on: {\n                                  click: function($event) {\n                                    _vm.drawer = !_vm.drawer\n                                  }\n                                }\n                              },\n                              [\n                                _c(\n                                  \"v-icon\",\n                                  {\n                                    staticClass: \"drawe-icon\",\n                                    class: { active: _vm.drawer },\n                                    attrs: { large: \"\" }\n                                  },\n                                  [_vm._v(\"chevron_right\")]\n                                )\n                              ],\n                              1\n                            ),\n                            _vm._v(\" \"),\n                            _c(\"span\", { staticClass: \"title\" }, [\n                              _vm._v(\"Устная память Москвы\")\n                            ])\n                          ],\n                          1\n                        )\n                      ],\n                      1\n                    )\n                  : _vm._e()\n              ])\n            ],\n            1\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-navigation-drawer\",\n        {\n          attrs: { stateless: \"\", fixed: \"\", app: \"\", width: \"350\" },\n          model: {\n            value: _vm.drawer,\n            callback: function($$v) {\n              _vm.drawer = $$v\n            },\n            expression: \"drawer\"\n          }\n        },\n        [\n          _c(\n            \"drawer-container\",\n            [\n              _c(\n                \"div\",\n                { attrs: { slot: \"header\" }, slot: \"header\" },\n                [\n                  _c(\n                    \"v-layout\",\n                    { attrs: { \"justify-space-between\": \"\" } },\n                    [\n                      _vm._v(\"\\n          Устная память Москвы\\n          \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          staticClass: \"pa-0 ma-0\",\n                          attrs: { flat: \"\", icon: \"\" },\n                          on: {\n                            click: function($event) {\n                              _vm.drawer = false\n                            }\n                          }\n                        },\n                        [_c(\"v-icon\", [_vm._v(\"close\")])],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _vm.items && _vm.items.length\n                ? _c(\"div\", [\n                    _c(\n                      \"div\",\n                      [\n                        _c(\"items-filter\"),\n                        _vm._v(\" \"),\n                        _c(\n                          \"div\",\n                          { staticClass: \"pl-3 pr-3\" },\n                          [\n                            _c(\"v-text-field\", {\n                              staticClass: \"pa-0\",\n                              attrs: {\n                                \"hide-details\": \"\",\n                                solo: \"\",\n                                clearable: \"\",\n                                label: \"Поиск\",\n                                \"prepend-inner-icon\": \"search\"\n                              },\n                              model: {\n                                value: _vm.listSearchText,\n                                callback: function($$v) {\n                                  _vm.listSearchText = $$v\n                                },\n                                expression: \"listSearchText\"\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _c(\"div\", [_c(\"list\")], 1)\n                  ])\n                : _c(\"div\", [\n                    _c(\n                      \"div\",\n                      { staticClass: \"pa-3 text-xs-center\" },\n                      [\n                        _c(\"v-progress-circular\", {\n                          attrs: { indeterminate: \"\", color: \"primary\" }\n                        })\n                      ],\n                      1\n                    )\n                  ]),\n              _vm._v(\" \"),\n              _c(\n                \"template\",\n                { slot: \"footer\" },\n                [\n                  _c(\n                    \"v-item-group\",\n                    { staticClass: \"bottom-button\" },\n                    [\n                      _c(\n                        \"v-btn\",\n                        { attrs: { flat: \"\", color: \"grey\" } },\n                        [_c(\"v-icon\", [_vm._v(\"save_alt\")])],\n                        1\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { flat: \"\", color: \"grey\" },\n                          on: {\n                            click: function($event) {\n                              _vm.page = \"table\"\n                            }\n                          }\n                        },\n                        [\n                          _c(\n                            \"v-icon\",\n                            {\n                              on: {\n                                click: function($event) {\n                                  _vm.page = \"table\"\n                                }\n                              }\n                            },\n                            [_vm._v(\"table_chart\")]\n                          )\n                        ],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            2\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-navigation-drawer\",\n        {\n          attrs: {\n            value: !!_vm.detail,\n            stateless: \"\",\n            width: \"400\",\n            absolute: \"\",\n            app: \"\",\n            right: \"\"\n          }\n        },\n        [\n          _vm.detail\n            ? _c(\n                \"drawer-container\",\n                [\n                  _c(\n                    \"template\",\n                    { slot: \"header\" },\n                    [\n                      _c(\n                        \"v-btn\",\n                        {\n                          staticClass: \"pa-0 ma-0\",\n                          attrs: { flat: \"\", icon: \"\" },\n                          on: {\n                            click: function($event) {\n                              _vm.detail = false\n                            }\n                          }\n                        },\n                        [_c(\"v-icon\", [_vm._v(\"close\")])],\n                        1\n                      ),\n                      _vm._v(\n                        \"\\n        \" +\n                          _vm._s(_vm.detail.properties.name) +\n                          \"\\n      \"\n                      )\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"detail\"),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"footer\" },\n                    [\n                      _c(\n                        \"v-item-group\",\n                        { staticClass: \"bottom-button\" },\n                        [\n                          _c(\n                            \"v-btn\",\n                            { attrs: { flat: \"\", color: \"grey\" } },\n                            [_c(\"v-icon\", [_vm._v(\"feedback\")])],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-btn\",\n                            { attrs: { flat: \"\", color: \"grey\" } },\n                            [_c(\"v-icon\", [_vm._v(\"save_alt\")])],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"v-btn\",\n                            {\n                              attrs: { flat: \"\", color: \"grey\" },\n                              on: {\n                                click: function($event) {\n                                  _vm.zoomTo = _vm.detail.id\n                                }\n                              }\n                            },\n                            [_c(\"v-icon\", [_vm._v(\"place\")])],\n                            1\n                          )\n                        ],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                ],\n                2\n              )\n            : _vm._e()\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"v-list\",\n        { attrs: { dense: \"\" } },\n        _vm._l(_vm.portion, function(item) {\n          return _c(\n            \"v-list-item\",\n            { key: item.id },\n            [\n              _c(\n                \"v-list-item-content\",\n                [\n                  _c(\"v-list-item-title\", { attrs: { title: item.name } }, [\n                    _vm._v(_vm._s(item.name))\n                  ])\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-list-item-action\",\n                { staticClass: \"pa-0\" },\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      attrs: { icon: \"\", ripple: \"\" },\n                      on: {\n                        click: function($event) {\n                          return _vm.setDetail(item.id)\n                        }\n                      }\n                    },\n                    [\n                      _c(\n                        \"v-icon\",\n                        {\n                          style: {\n                            color:\n                              item.id === (_vm.detail && _vm.detail.id)\n                                ? \"orange\"\n                                : \"grey\"\n                          },\n                          attrs: { color: \"lighten-1\" }\n                        },\n                        [_vm._v(\"\\n            info\\n          \")]\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          )\n        }),\n        1\n      ),\n      _vm._v(\" \"),\n      _vm.displayItems.length > _vm.portion.length\n        ? _c(\n            \"div\",\n            { staticClass: \"text-xs-center\" },\n            [\n              _c(\n                \"v-btn\",\n                {\n                  attrs: { flat: \"\", small: \"\" },\n                  on: { click: _vm.addPortion }\n                },\n                [_vm._v(\"Показать ещё\")]\n              )\n            ],\n            1\n          )\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"","import { BdMainItem, BdMainItemProperties } from '../../api/ngw';\nimport { Vue, Component, Prop } from 'vue-property-decorator';\n\n@Component\nexport class List extends Vue {\n\n  portionCount = 30;\n\n  portion = [];\n\n  get listSearchText(): string {\n    return this.$store.state.app.listSearchText;\n  }\n\n  get items(): BdMainItemProperties[] {\n    return this.$store.getters['bdMain/sortFeatures'].map((x) => x.properties);\n  }\n\n  get detail(): BdMainItem {\n    return this.$store.state.bdMain.detailItem;\n  }\n\n  mounted() {\n    this.addPortion();\n    this.$store.watch((state) => state.bdMain.filtered, (_items) => {\n      this.resetPortions();\n    });\n    this.$store.watch((state) => state.app.listSearchText, (value) => {\n      this.resetPortions();\n    });\n  }\n\n  get displayItems() {\n    return this.getDisplayItems();\n  }\n\n  getDisplayItems(): BdMainItemProperties[] {\n    if (this.listSearchText && this.listSearchText.length > 1) {\n      const filteredItems = this.items.filter((item) => {\n        for (const p in item) {\n          if (item.hasOwnProperty(p)) {\n            const ok = String(item[p]).toLowerCase().indexOf(this.listSearchText.toLowerCase()) !== -1;\n            if (ok) {\n              return true;\n            }\n          }\n        }\n        return false;\n      });\n      return filteredItems;\n    } else {\n      return this.items;\n    }\n  }\n\n  setDetail(id: string) {\n    this.$store.dispatch('bdMain/setDetail', id);\n    this.$store.dispatch('app/zoomTo', id);\n  }\n\n  resetPortions() {\n    this.portion = [];\n    this.addPortion();\n  }\n\n  addPortion() {\n    const items = this.getDisplayItems();\n    const portionsLength = this.portion.length;\n    const itemsLength = items.length;\n    if (portionsLength < itemsLength) {\n      const addLength = portionsLength + this.portionCount;\n      const len = addLength > itemsLength ? itemsLength : addLength;\n      for (let fry = portionsLength; fry < len; fry++) {\n        this.portion.push(items[fry]);\n      }\n    }\n  }\n\n}\n","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=87fbdfe2&\"\nimport script from \"./List.vue?vue&type=script&lang=ts&\"\nexport * from \"./List.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VList } from 'vuetify/lib'\nimport { VListTile } from 'vuetify/lib'\nimport { VListTileAction } from 'vuetify/lib'\nimport { VListTileContent } from 'vuetify/lib'\nimport { VListTileTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VIcon,VList,VListTile,VListTileAction,VListTileContent,VListTileTitle})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('87fbdfe2', component.options)\n    } else {\n      api.reload('87fbdfe2', component.options)\n    }\n    module.hot.accept(\"./List.vue?vue&type=template&id=87fbdfe2&\", function () {\n      api.rerender('87fbdfe2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/List/List.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { attrs: { id: \"map\" } },\n    [_vm.ready ? _vm._t(\"default\") : _vm._e()],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { BaseLayerAdapter, AdapterOptions } from '@nextgis/webmap';\nimport { Map } from 'mapbox-gl';\nimport { TLayer } from '../MapboxglMapAdapter';\n\nlet ID = 0;\n\nexport abstract class BaseAdapter<O extends AdapterOptions = AdapterOptions>\n  implements BaseLayerAdapter<Map, TLayer, O> {\n\n  layer?: TLayer;\n  protected readonly _layerId: string;\n\n  constructor(public map: Map, public options: O) {\n    this._layerId = `layer-${ID++}`;\n  }\n\n  addLayer(options?: any): string[] | Promise<string[]> | undefined {\n    return [''];\n  }\n}\n","let canvg: any;\ntry {\n  canvg = require('canvg');\n} catch (er) {\n  // ignore\n}\ninterface GetImgOpt {\n  width: number;\n  height: number;\n  x?: number;\n  y?: number;\n  sdf?: string;\n  pixelRatio?: number;\n}\n\nconst defAddImgOpt = {\n  width: 12,\n  height: 12,\n  x: 0,\n  y: 0,\n  sdf: undefined,\n  pixelRatio: 2\n};\n\nexport function getImage(svgStr: string, opt: GetImgOpt): Promise<ImageData> {\n  return new Promise((resolve) => {\n    if (canvg) {\n      resolve(getImageData(svgStr, opt));\n    } else {\n      const svgImage = new Image();\n      svgImage.crossOrigin = 'Anonymous';\n      svgImage.src = 'data:image/svg+xml;base64,' + btoa(svgStr);\n\n      svgImage.onload = () => {\n        const imageData = getImageData(svgImage, opt);\n        resolve(imageData);\n      };\n    }\n  });\n}\n\n// // from /mapbox-gl/src/util/browser.js\nexport function getImageData(img: string | HTMLImageElement, opt: GetImgOpt): ImageData {\n  const canvas = window.document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  if (!context) {\n    throw new Error('failed to create canvas 2d context');\n  }\n  canvas.setAttribute('width', String(opt.width));\n  canvas.setAttribute('height', String(opt.height));\n  if (!canvg && img instanceof HTMLImageElement) {\n    context.drawImage(img, 0, 0, opt.width, opt.height);\n  } else if (typeof img === 'string') {\n    canvg(canvas, img);\n  }\n  return context.getImageData(0, 0, opt.width, opt.height);\n}\n","import { BaseLayerAdapter } from '@nextgis/webmap';\nimport { BaseAdapter } from './BaseAdapter';\nimport { Layer } from 'mapbox-gl';\n\nexport class MvtAdapter extends BaseAdapter implements BaseLayerAdapter {\n\n  addLayer(options: any): string[] {\n    options = this.options = { ...this.options, ...(options || {}) };\n    // read about https://blog.mapbox.com/vector-tile-specification-version-2-whats-changed-259d4cd73df6\n    const idString = String(options.id);\n\n    const layerOptions: Layer = {\n      'id': idString,\n      'type': options.type || 'fill',\n      'source-layer': options['source-layer'] || idString,\n      'source': {\n        type: 'vector',\n        tiles: [options.url],\n      },\n      'layout': {\n        visibility: 'none',\n      },\n      // paint: {'fill-color': 'red'}\n    };\n\n    if (options.paint) {\n      layerOptions.paint = options.paint;\n    }\n\n    this.map.addLayer(layerOptions);\n    this.layer = [idString];\n    return this.layer;\n  }\n}\n","import { BaseLayerAdapter, TileAdapterOptions } from '@nextgis/webmap';\nimport { BaseAdapter } from './BaseAdapter';\nimport { RasterSource } from 'mapbox-gl';\n\nexport class TileAdapter extends BaseAdapter<TileAdapterOptions> implements BaseLayerAdapter {\n\n  addLayer(options: TileAdapterOptions): string[] {\n    options = { ...this.options, ...(options || {}) };\n\n    let tiles: string[];\n    if (options && options.subdomains) {\n      tiles = options.subdomains.split('').map((x) => {\n        const subUrl = options.url.replace('{s}', x);\n        return subUrl;\n      },\n      );\n    } else {\n      tiles = [options.url];\n    }\n\n    const sourceOptions: RasterSource = {\n      type: 'raster',\n      // point to our third-party tiles. Note that some examples\n      // show a \"url\" property. This only applies to tilesets with\n      // corresponding TileJSON (such as mapbox tiles).\n      tiles,\n      tileSize: 256, // opt && opt.tileSize ||\n    };\n    if (options.attribution) {\n      sourceOptions.attribution = options.attribution;\n    }\n\n    this.map.addLayer({\n      id: this._layerId,\n      type: 'raster',\n      layout: {\n        visibility: 'none',\n      },\n      source: sourceOptions,\n      // TODO: clean remove before options from all existing apps\n      // @ts-ignore\n    }, options.before);\n    const layer = this.layer = [this._layerId];\n    return layer;\n  }\n}\n","import { BaseLayerAdapter, TileAdapterOptions } from '@nextgis/webmap';\nimport { TileAdapter } from './TileAdapter';\n\nconst OPTIONS = {\n  url: 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  attribution: '&copy; <a href=\"http://osm.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors',\n  subdomains: 'abc',\n};\n\nexport class OsmAdapter extends TileAdapter implements BaseLayerAdapter {\n\n  addLayer(options: TileAdapterOptions): string[] {\n    return super.addLayer(Object.assign({}, OPTIONS, options));\n  }\n}\n","import { NavigationControl } from 'mapbox-gl';\nimport { ZoomControlOptions } from '@nextgis/webmap';\n\nexport class ZoomControl extends NavigationControl {\n\n  options: ZoomControlOptions & any;\n\n  constructor(options: ZoomControlOptions & any = {}) {\n    options = {...options, showCompass: false };\n    super(options);\n  }\n\n  _createButton(className: string, ariaLabel: string, fn: () => any) {\n    // @ts-ignore\n    const element = super._createButton(className, ariaLabel, fn);\n    const aliases: any = {\n      'Zoom in': 'zoomInTitle',\n      'Zoom out': 'zoomOutTitle'\n    };\n    const alias = aliases[ariaLabel];\n    const label = alias && this.options[alias];\n    if (label) {\n      element.title = label;\n      element.setAttribute('aria-label', label);\n    }\n\n    return element;\n  }\n}\n","import { NavigationControl } from 'mapbox-gl';\n\nexport class CompassControl extends NavigationControl {\n    constructor(options = {}) {\n        options = Object.assign({}, options, {showZoom: false});\n        super(options);\n    }\n}\n","// import { MapControl } from '@nextgis/webmap';\nimport { AttributionControl as AC } from 'mapbox-gl';\n\nexport class AttributionControl extends AC {\n\n}\n","import {\n  GeoJsonAdapterOptions,\n  GeoJsonAdapterLayerType,\n  GeoJsonAdapterLayerPaint,\n  GetPaintCallback,\n  IconOptions,\n  DataLayerFilter,\n  LayerDefinition,\n  VectorLayerAdapter,\n} from '@nextgis/webmap';\nimport {\n  GeoJsonObject,\n  GeoJsonGeometryTypes,\n  Feature as F,\n  FeatureCollection,\n  GeometryCollection,\n  GeometryObject,\n  Geometry,\n  GeoJsonProperties\n} from 'geojson';\nimport {\n  Map, MapLayerMouseEvent, GeoJSONSource,\n  // BackgroundPaint, FillPaint, FillExtrusionPaint, LinePaint, SymbolPaint,\n  // RasterPaint, CirclePaint, HeatmapPaint, HillshadePaint,\n} from 'mapbox-gl';\n\n// type MapboxPaint = BackgroundPaint | FillPaint | FillExtrusionPaint | LinePaint | SymbolPaint |\n//   RasterPaint | CirclePaint | HeatmapPaint | HillshadePaint;\n\nimport { getImage } from '../util/image_icons';\nimport { TLayer } from '../MapboxglMapAdapter';\nimport { BaseAdapter } from './BaseAdapter';\n\ninterface Feature<G extends GeometryObject | null = Geometry, P = GeoJsonProperties> extends F<G, P> {\n  _rendrom_id?: string;\n}\n\nconst allowedParams: Array<[string, string] | string> = ['color', 'opacity'];\nconst allowedByType = {\n  circle: [\n    ['fillColor', 'color'],\n    ['fillOpacity', 'opacity'],\n    ['strokeColor', 'stroke-color'],\n    ['strokeOpacity', 'stroke-opacity'],\n    ['weight', 'stroke-width'],\n    'radius'\n  ],\n  line: [['strokeColor', 'color'], ['strokeOpacity', 'opacity'], ['weight', 'width']],\n  fill: [['fillColor', 'color'], ['fillOpacity', 'opacity']],\n  icon: allowedParams.concat([])\n};\n\nconst typeAlias: { [key in GeoJsonGeometryTypes]: GeoJsonAdapterLayerType } = {\n  'Point': 'circle',\n  'LineString': 'line',\n  'MultiPoint': 'circle',\n  'Polygon': 'fill',\n  'MultiLineString': 'line',\n  'MultiPolygon': 'fill',\n  'GeometryCollection': 'fill'\n};\n\nconst typeAliasForFilter: { [key in GeoJsonAdapterLayerType]: GeoJsonGeometryTypes } = {\n  circle: 'Point',\n  line: 'LineString',\n  fill: 'Polygon',\n  icon: 'Point'\n};\n\nconst backAliases: { [key in GeoJsonAdapterLayerType]?: GeoJsonGeometryTypes[] } = {\n  'icon': ['Point']\n};\n\nfor (const a in typeAlias) {\n  if (typeAlias.hasOwnProperty(a)) {\n    const layerType = typeAlias[a as GeoJsonGeometryTypes];\n    const backAlias = backAliases[layerType] || [];\n    backAlias.push(a as GeoJsonGeometryTypes);\n    backAliases[layerType] = backAlias;\n  }\n}\n\nconst PAINT = {\n  color: 'blue',\n  opacity: 1,\n  radius: 10\n};\n\nlet ID = 0;\n\ntype MapboxLayerType = 'fill' | 'line' | 'symbol' | 'circle';\n\nexport class GeoJsonAdapter extends BaseAdapter<GeoJsonAdapterOptions>\n  implements VectorLayerAdapter<Map, TLayer, GeoJsonAdapterOptions, Feature> {\n\n  selected: boolean = false;\n\n  private _features: Feature[] = [];\n  private readonly _sourceId: string;\n  private readonly _selectionName: string;\n  private _selectedFeatureIds: string[] = [];\n  private _filteredFeatureIds: string[] = [];\n  private _types: GeoJsonAdapterLayerType[] = ['fill', 'circle', 'line'];\n  private _filterFun?: DataLayerFilter<Feature>;\n  private $onLayerClick?: (e: MapLayerMouseEvent) => void;\n\n  constructor(public map: Map, public options: GeoJsonAdapterOptions) {\n    super(map, options);\n    this._sourceId = `source-${this._layerId}`;\n    this._selectionName = this._layerId + '-highlighted';\n    this.$onLayerClick = this._onLayerClick.bind(this);\n  }\n\n  async addLayer(options: GeoJsonAdapterOptions): Promise<any> {\n    options = this.options = { ...this.options, ...(options || {}) };\n\n    this.map.addSource(this._sourceId, {\n      'type': 'geojson',\n      'data': {\n        'type': 'FeatureCollection',\n        'features': []\n      }\n    });\n    this.layer = [];\n    const types = this._types = options.type ? [options.type] : this._types;\n    // const types = this._types;\n    for (const t of types) {\n      if (options.paint) {\n\n        const geomType = typeAliasForFilter[t];\n        if (geomType) {\n          let type = t;\n          if (t === 'circle') {\n            const paintType = this._detectPaintType(options.paint);\n            if (paintType === 'icon') {\n              type = 'icon';\n            }\n          }\n          const layer = this._getLayerNameFromType(t);\n          const geomFilter = ['==', '$type', geomType];\n          await this._addLayer(layer, type, geomFilter);\n          this.layer.push(layer);\n          if (options.selectedPaint) {\n            const selectionLayer = this._getSelectionLayerNameFromType(t);\n            await this._addLayer(selectionLayer, type, ['all', geomFilter, ['in', '_rendrom_id', '']]);\n            this.layer.push(selectionLayer);\n          }\n        }\n      }\n    }\n\n    if (this.options.data) {\n      this.addData(this.options.data);\n    }\n\n    this._addEventsListeners();\n\n    return this.layer;\n  }\n\n  removeLayer() {\n    const map = this.map;\n    if (this.layer) {\n      this.layer.forEach((layerId) => {\n        map.removeLayer(layerId);\n      });\n      map.removeSource(this._sourceId);\n    }\n  }\n\n  clearLayer(cb?: (feature: Feature) => boolean) {\n    let features: Feature[] = [];\n    const source = this.map.getSource(this._sourceId) as GeoJSONSource;\n    if (cb) {\n      features = this._features = this._features.filter((x) => !cb(x));\n    }\n    source.setData({ type: 'FeatureCollection', features });\n  }\n\n  async addData(data: GeoJsonObject) {\n    let type: GeoJsonAdapterLayerType | undefined;\n    if (this.options.type) {\n      type = this.options.type;\n    }\n    if (!type && data) {\n      const detectedType = detectType(data);\n      type = typeAlias[detectedType];\n    }\n    if (data && type) {\n      const features = this.filterGeometries(data, type);\n      features.forEach((x) => {\n        // to avoid id = 0 is false\n        const rendromId = '_' + ID++;\n        x._rendrom_id = rendromId;\n        if (x.properties) {\n          x.properties._rendrom_id = rendromId;\n        }\n      });\n      if (this._filterFun) {\n        this._filter(this._filterFun);\n      }\n      await this._updateLayerPaint(type);\n      const source = this.map.getSource(this._sourceId) as GeoJSONSource;\n      source.setData({ type: 'FeatureCollection', features: this._features });\n    }\n  }\n\n  getLayers() {\n    const filtered = this._filteredFeatureIds.length;\n    return this._features.map((feature) => {\n      let visible: boolean = false;\n      if (filtered) {\n        const id = this._getRendromId(feature);\n        if (id !== undefined) {\n          visible = this._filteredFeatureIds.indexOf(id) !== -1;\n        }\n      }\n      return {\n        feature,\n        visible\n      };\n    });\n  }\n\n  filter(fun: DataLayerFilter<Feature, TLayer>) {\n    this._filterFun = fun;\n    this._filter(fun);\n  }\n\n  removeFilter() {\n    this._filterFun = undefined;\n    this._filteredFeatureIds = [];\n    this._updateFilter();\n  }\n\n  getSelected() {\n    const features: Array<LayerDefinition<Feature, TLayer>> = [];\n    this._features.forEach((x) => {\n      const id = this._getRendromId(x);\n      if (id && this._selectedFeatureIds.indexOf(id) !== -1) {\n        features.push({ feature: x });\n      }\n    });\n    return features;\n  }\n\n  select(findFeatureFun?: (opt: { feature: Feature }) => boolean) {\n    if (findFeatureFun) {\n      const features = this._features.filter((x) => findFeatureFun({ feature: x }));\n      this._selectFeature(features);\n    } else if (!this.selected) {\n      this._selectFeature(this._features);\n    }\n    this.selected = true;\n  }\n\n  unselect(findFeatureFun?: (opt: { feature: Feature }) => boolean) {\n    if (findFeatureFun) {\n      const features = this._features.filter((x) => findFeatureFun({ feature: x }));\n      this._unselectFeature(features);\n    } else if (this.selected) {\n      this._unselectFeature(this._features);\n    }\n    this.selected = !!this._selectedFeatureIds.length;\n  }\n\n  private _filter(fun: DataLayerFilter<Feature, TLayer>) {\n    this._filteredFeatureIds = [];\n    this._features.forEach((feature) => {\n      const ok = fun({ feature });\n      const id = this._getRendromId(feature);\n      if (ok && id) {\n        this._filteredFeatureIds.push(id);\n      }\n    });\n    this._updateFilter();\n  }\n\n  private _getLayerNameFromType(type: GeoJsonAdapterLayerType) {\n    return type + '-' + this._layerId;\n  }\n\n  private _getSelectionLayerNameFromType(type: GeoJsonAdapterLayerType) {\n    return type + '-' + this._selectionName;\n  }\n\n  private async _addLayer(name: string, type: GeoJsonAdapterLayerType, filter?: any) {\n    let mType: MapboxLayerType;\n    if (type === 'icon') {\n      mType = 'symbol';\n    } else {\n      mType = type;\n    }\n\n    const layerOpt: mapboxgl.Layer = {\n      id: name,\n      type: mType,\n      source: this._sourceId,\n      layout: {\n        visibility: 'none',\n      },\n      filter\n    };\n\n    this.map.addLayer(layerOpt);\n  }\n\n  private async _updateLayerPaint(type: GeoJsonAdapterLayerType) {\n\n    const layerName = this._getLayerNameFromType(type);\n\n    if (this.options.paint) {\n      const layers: Array<[string, GeoJsonAdapterLayerPaint | GetPaintCallback]> = [[layerName, this.options.paint]];\n      if (this.options.selectedPaint) {\n        const selName = this._getSelectionLayerNameFromType(type);\n        layers.push([selName, this.options.selectedPaint]);\n      }\n\n      for (const [name, paint] of layers) {\n        const _paint: any = await this._createPaintForType(paint, type, name);\n\n        if ('icon-image' in _paint) {\n          // If true, the icon will be visible even if it collides with other previously drawn symbols.\n          _paint['icon-allow-overlap'] = true;\n          for (const p in _paint) {\n            if (_paint.hasOwnProperty(p)) {\n              this.map.setLayoutProperty(name, p, _paint[p]);\n            }\n          }\n        } else {\n          for (const p in _paint) {\n            if (_paint.hasOwnProperty(p)) {\n              this.map.setPaintProperty(name, p, _paint[p]);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  private filterGeometries(data: GeoJsonObject, type: GeoJsonAdapterLayerType): Feature[] {\n    let newFeatures: Feature[] = [];\n    if (data.type === 'FeatureCollection') {\n      const features = (data as FeatureCollection).features = (data as FeatureCollection).features\n        .filter((f) => geometryFilter(f.geometry.type, type)) as Feature[];\n      newFeatures = features;\n    } else if (data.type === 'Feature') {\n      const allow = geometryFilter((data as Feature).geometry.type, type);\n      if (!allow) {\n        return [];\n      }\n      newFeatures.push((data as Feature));\n    } else if (data.type === 'GeometryCollection') {\n      const geomCollection = data as GeometryCollection;\n      geomCollection.geometries = geomCollection.geometries.filter((g) => geometryFilter(g.type, type));\n      newFeatures = geomCollection.geometries.map((x) => {\n        const f: Feature = { type: 'Feature', geometry: x as GeometryObject, properties: {} };\n        return f;\n      });\n    } else if (typeAlias[data.type]) {\n      const obj: Feature = { type: 'Feature', geometry: data as GeometryObject, properties: {} };\n      newFeatures = [obj];\n    }\n    this._features = this._features.concat(newFeatures);\n    return newFeatures;\n  }\n\n  private async _createPaintForType(\n    paint: GeoJsonAdapterLayerPaint | GetPaintCallback,\n    type: GeoJsonAdapterLayerType,\n    name: string): Promise<any> {\n\n    if (typeof paint === 'function') {\n      return await this._getPaintFromCallback(paint, type, name);\n    } else {\n      const mapboxPaint: any = {};\n      const _paint = { ...PAINT, ...(paint || {}) };\n      if (paint.type === 'icon' && paint.html) {\n        await this._registerImage(paint);\n        return {\n          'icon-image': paint.html\n        };\n      } else {\n        for (const p in _paint) {\n          if (_paint.hasOwnProperty(p)) {\n            const allowed = allowedByType[type];\n            if (allowed) {\n              const allowedType = allowed.find((x) => {\n                if (typeof x === 'string') {\n                  return x === p;\n                } else if (Array.isArray(x)) {\n                  return x[0] === p;\n                }\n                return false;\n              });\n              if (allowedType) {\n                const paramName = Array.isArray(allowedType) ? allowedType[1] : allowedType;\n                // @ts-ignore\n                mapboxPaint[type + '-' + paramName] = _paint[p];\n              }\n            }\n          }\n        }\n        return mapboxPaint;\n      }\n    }\n  }\n\n  private async _getPaintFromCallback(paint: GetPaintCallback, type: GeoJsonAdapterLayerType, name: string) {\n    const style: any = {};\n    for (const feature of this._features) {\n      const _paint = paint(feature);\n      if (_paint.type === 'icon') {\n        await this._registerImage(_paint);\n        if (feature.properties) {\n          feature.properties['_icon-image-' + name] = _paint.html;\n        }\n        style['icon-image'] = `{_icon-image-${name}}`;\n      } else {\n        for (const p in _paint) {\n          if (_paint.hasOwnProperty(p)) {\n            // @ts-ignore\n            const toSave = _paint[p];\n            if (feature.properties) {\n              feature.properties[`_paint_${p}_${name}`] = toSave;\n            }\n            style[p] = ['get', `_paint_${p}_${name}`];\n          }\n        }\n      }\n    }\n    if ('icon-image' in style) {\n      return style;\n    }\n    const styleFromCb = this._createPaintForType(style, type, name);\n    return styleFromCb;\n  }\n\n  private async _registerImage(paint: IconOptions) {\n    if (paint.html) {\n      const imageExist = this.map.hasImage(paint.html);\n      if (!imageExist) {\n        let width = 12;\n        let height = 12;\n        if (paint.iconSize) {\n          width = paint.iconSize[0];\n          height = paint.iconSize[1];\n        }\n        const image = await getImage(paint.html, {\n          width,\n          height\n        });\n\n        this.map.addImage(paint.html, image);\n      }\n    }\n  }\n\n  private _onLayerClick(e: mapboxgl.MapLayerMouseEvent) {\n    e.preventDefault();\n    const features = this.map.queryRenderedFeatures(e.point, { layers: this.layer });\n    const feature = features[0] as Feature;\n    if (feature) {\n      const id = this._getRendromId(feature);\n      if (id !== undefined) {\n        let isSelected = this._selectedFeatureIds.indexOf(id) !== -1;\n        if (isSelected) {\n          if (this.options && this.options.unselectOnSecondClick) {\n            this._unselectFeature(feature);\n            isSelected = false;\n          }\n        } else {\n          this._selectFeature(feature);\n          isSelected = true;\n        }\n        if (this.options.onLayerClick) {\n          this.options.onLayerClick({\n            layer: this,\n            feature,\n            selected: isSelected\n          });\n        }\n      }\n    }\n  }\n\n  private _selectFeature(feature: Feature | Feature[]) {\n    if (this.options && !this.options.multiselect) {\n      this._selectedFeatureIds = [];\n    }\n    let features: Feature[] = [];\n    if (Array.isArray(feature)) {\n      features = feature;\n    } else {\n      features = [feature];\n    }\n    features.forEach((f) => {\n      const id = this._getRendromId(f);\n      if (id !== undefined) {\n        this._selectedFeatureIds.push(id);\n      }\n    });\n    this._updateFilter();\n  }\n\n  private _unselectFeature(feature: Feature | Feature[]) {\n    let features: Feature[] = [];\n    if (Array.isArray(feature)) {\n      features = feature;\n    } else {\n      features = [feature];\n    }\n    features.forEach((f) => {\n      const id = this._getRendromId(f);\n      if (id !== undefined) {\n        const index = this._selectedFeatureIds.indexOf(id);\n        if (index !== -1) {\n          this._selectedFeatureIds.splice(index, 1);\n        }\n      }\n    });\n    this._updateFilter();\n  }\n\n  private _updateFilter() {\n    let selectionArray: string[] = [];\n    const filteredArray: string[] = [];\n\n    if (this._filteredFeatureIds.length) {\n      this._features.forEach((x) => {\n        const id = this._getRendromId(x);\n        if (id !== undefined && this._filteredFeatureIds.indexOf(id) !== -1) {\n          if (this._selectedFeatureIds.indexOf(id) !== -1) {\n            selectionArray.push(id);\n          } else {\n            filteredArray.push(id);\n          }\n        }\n      });\n    } else {\n      selectionArray = this._selectedFeatureIds;\n    }\n\n    const layers = this.layer;\n    if (layers) {\n      this._types.forEach((t) => {\n        const geomType = typeAliasForFilter[t];\n        if (geomType) {\n          const geomFilter = ['==', '$type', geomType];\n          const layerName = this._getLayerNameFromType(t);\n          const selLayerName = this._getSelectionLayerNameFromType(t);\n          if (layers.indexOf(selLayerName) !== -1) {\n            if (this._selectionName) {\n              this.map.setFilter(selLayerName, ['all', geomFilter, ['in', '_rendrom_id', ...selectionArray]]);\n            }\n          }\n          if (layers.indexOf(layerName) !== -1) {\n            if (this._filteredFeatureIds.length) {\n              this.map.setFilter(layerName, ['all', geomFilter, ['in', '_rendrom_id', ...filteredArray]]);\n            } else {\n              this.map.setFilter(layerName, ['all', geomFilter, ['!in', '_rendrom_id', ...selectionArray]]);\n            }\n          }\n        }\n      });\n    }\n  }\n\n  private _detectPaintType(paint: GeoJsonAdapterLayerPaint | GetPaintCallback): string | undefined {\n    if ('type' in paint) {\n      return paint.type;\n    } else if (typeof paint === 'function') {\n      try {\n        const falsePaint = paint({ type: 'Feature', properties: {}, geometry: {} });\n        return this._detectPaintType(falsePaint);\n      } catch (er) {\n        //\n      }\n    }\n  }\n\n  private _addEventsListeners() {\n    if (this.layer && this.options && this.options.selectable) {\n      this.layer.forEach((x) => {\n        if (this.$onLayerClick) {\n          const onLayerClick = this.$onLayerClick;\n          this.map.on('click', x, (e: MapLayerMouseEvent) => {\n            onLayerClick(e);\n          });\n        }\n\n        this.map.on('mousemove', x, () => {\n          this.map.getCanvas().style.cursor = 'pointer';\n        });\n        this.map.on('mouseleave', x, () => {\n          this.map.getCanvas().style.cursor = '';\n        });\n      });\n    }\n  }\n\n  private _getRendromId(feature: Feature): string | undefined {\n    // @ts-ignore\n    const id = feature._rendrom_id;\n    if (id !== undefined) {\n      return id;\n    } else if (feature.properties && feature.properties._rendrom_id !== undefined) {\n      return feature.properties._rendrom_id;\n    }\n  }\n}\n\n// Static functions\nfunction geometryFilter(geometry: GeoJsonGeometryTypes, type: GeoJsonAdapterLayerType): boolean {\n  const backType = backAliases[type];\n  if (backType) {\n    return backType.indexOf(geometry) !== -1;\n  }\n  return false;\n}\n\nfunction detectType(geojson: GeoJsonObject): GeoJsonGeometryTypes {\n  let geometry: GeoJsonGeometryTypes;\n  if (geojson.type === 'FeatureCollection') {\n    const featuresTypes = (geojson as FeatureCollection).features.map((f) => f.geometry.type);\n    geometry = findMostFrequentGeomType(featuresTypes);\n  } else if (geojson.type === 'GeometryCollection') {\n    const geometryTypes = (geojson as GeometryCollection).geometries.map((g) => g.type);\n    geometry = findMostFrequentGeomType(geometryTypes);\n  } else if (geojson.type === 'Feature') {\n    geometry = (geojson as Feature).geometry.type;\n  } else {\n    geometry = geojson.type;\n  }\n  return geometry;\n}\n\nfunction findMostFrequentGeomType(arr: GeoJsonGeometryTypes[]): GeoJsonGeometryTypes {\n  const counts: { [x: string]: number } = {};\n  for (let fry = 0; fry < arr.length; fry++) {\n    counts[arr[fry]] = 1 + (counts[arr[fry]] || 0);\n  }\n  let maxName: string = '';\n  for (const c in counts) {\n    if (counts.hasOwnProperty(c)) {\n      const maxCount = maxName ? counts[maxName] : 0;\n      if (counts[c] > maxCount) {\n        maxName = c;\n      }\n    }\n  }\n  return maxName as GeoJsonGeometryTypes;\n}\n","import { MapControl, CreateControlOptions } from '@nextgis/webmap';\nimport { IControl, Map } from 'mapbox-gl';\n\nexport function createControl(control: MapControl, options: CreateControlOptions = {}): IControl {\n\n  class Control implements IControl {\n\n    private _container?: HTMLElement;\n\n    getDefaultPosition() {\n      return 'top-left';\n    }\n\n    onAdd(map: Map) {\n\n      const element = document.createElement('div');\n      const content: HTMLElement = control.onAdd();\n      element.classList.add('mapboxgl-ctrl');\n      if (options.bar) {\n        // add custom css for boarder style\n        element.classList.add('mapboxgl-bar');\n      }\n      if (options.addClass) {\n        element.classList.add(options.addClass);\n      }\n      element.appendChild(content);\n      this._container = element;\n      return this._container;\n    }\n\n    onRemove() {\n      if (this._container) {\n        const parent = this._container.parentNode;\n        if (parent) {\n          parent.removeChild(this._container);\n        }\n      }\n      return control.onRemove();\n    }\n\n    remove() {\n      this.onRemove();\n    }\n  }\n\n  return new Control();\n  // return control;\n}\n","/**\n * @module mapboxgl-map-adapter\n */\nimport {\n  MapAdapter,\n  FitOptions,\n  MapControl,\n  ControlPositions,\n  ButtonControlOptions,\n  LngLatArray,\n  MapOptions,\n  LayerAdapter,\n  LngLatBoundsArray,\n  WebMapEvents\n} from '@nextgis/webmap';\nimport { MvtAdapter } from './layer-adapters/MvtAdapter';\nimport { Map, IControl, MapEventType, EventData, MapboxOptions } from 'mapbox-gl';\nimport { OsmAdapter } from './layer-adapters/OsmAdapter';\nimport { TileAdapter } from './layer-adapters/TileAdapter';\nimport { EventEmitter } from 'events';\nimport { ZoomControl } from './controls/ZoomControl';\nimport { CompassControl } from './controls/CompassControl';\nimport { AttributionControl } from './controls/AttributionControl';\nimport { GeoJsonAdapter } from './layer-adapters/GeoJsonAdapter';\nimport { createControl } from './controls/createControl';\nimport { createButtonControl } from './controls/createButtonControl';\n\nexport type TLayer = string[];\ntype TLayerAdapter = LayerAdapter<Map, TLayer>;\n\nconst fitBoundsOptions: FitOptions = {\n  padding: 100\n};\n\nexport class MapboxglMapAdapter implements MapAdapter<Map, TLayer, IControl> {\n\n  static layerAdapters = {\n    TILE: TileAdapter,\n    // IMAGE: ImageAdapter,\n    MVT: MvtAdapter,\n    OSM: OsmAdapter,\n    GEOJSON: GeoJsonAdapter,\n  };\n\n  static controlAdapters: { [name: string]: any } = {\n    ZOOM: ZoomControl,\n    COMPASS: CompassControl,\n    ATTRIBUTION: AttributionControl,\n  };\n\n  options: MapOptions = {};\n  map!: Map;\n\n  emitter = new EventEmitter();\n\n  layerAdapters = MapboxglMapAdapter.layerAdapters;\n  controlAdapters = MapboxglMapAdapter.controlAdapters;\n  isLoaded = false;\n\n  private _universalEvents: Array<keyof WebMapEvents> = [\n    'zoomstart',\n    'zoom',\n    'zoomend',\n    'movestart',\n    'move',\n    'moveend',\n  ];\n\n  private _sourceDataLoading: { [name: string]: any[] } = {};\n  private _sortTimerId?: number;\n\n  // create(options: MapOptions = {target: 'map'}) {\n  create(options: MapOptions) {\n    if (!this.map) {\n      this.options = options;\n      if (options.target) {\n        const mapOpt: MapboxOptions = {\n          container: options.target,\n          attributionControl: false,\n          // @ts-ignore\n          bounds: options.bounds,\n          fitBoundsOptions: {...options.fitOptions, ...fitBoundsOptions},\n          // center: options.center,\n          // zoom: options.zoom,\n          style: {\n            version: 8,\n            name: 'Empty style',\n            sources: {},\n            layers: [],\n          },\n        };\n        if (options.center !== undefined) {\n          mapOpt.center = options.center;\n        }\n        if (options.zoom) {\n          mapOpt.zoom = options.zoom;\n        }\n        this.map = new Map(mapOpt);\n        this._addEventsListeners();\n        this.map.once('load', () => {\n          this.isLoaded = true;\n          this.emitter.emit('create', this);\n        });\n      }\n    }\n  }\n\n  getContainer() {\n    return this.map && this.map.getContainer();\n  }\n\n  setView(center: LngLatArray, zoom: number) {\n    if (this.map) {\n      this.map.jumpTo({ center, zoom: zoom - 1 });\n    }\n  }\n\n  setCenter(latLng: LngLatArray): void {\n    if (this.map) {\n      this.map.setCenter(latLng);\n    }\n  }\n\n  getCenter(): LngLatArray | undefined {\n    if (this.map) {\n      const center = this.map.getCenter();\n      return [center.lng, center.lat];\n    }\n  }\n\n  setZoom(zoom: number): void {\n    if (this.map) {\n      this.map.setZoom(zoom - 1);\n    }\n  }\n\n  getZoom(): number | undefined {\n    if (this.map) {\n      const zoom = this.map.getZoom();\n      return zoom + 1;\n    }\n  }\n\n  // [extent_left, extent_bottom, extent_right, extent_top];\n  fit(e: LngLatBoundsArray, options: FitOptions = {}): void {\n    if (this.map) {\n      this.map.fitBounds(\n        [[e[0], e[1]], [e[2], e[3]]], {\n          linear: true,\n          ...options,\n          ...fitBoundsOptions\n        });\n    }\n  }\n\n  setRotation(angle: number): void {\n    // ignore\n  }\n\n  showLayer(layerIds: string[]): void {\n    layerIds.forEach((layerId) => {\n      this._toggleLayer(layerId, true);\n    });\n  }\n\n  hideLayer(layerIds: string[]): void {\n    layerIds.forEach((layerId) => {\n      this._toggleLayer(layerId, false);\n    });\n  }\n\n  removeLayer(layerIds: string[]): void {\n    if (this.map) {\n      const _map = this.map;\n      layerIds.forEach((layerId) => {\n        _map.removeLayer(layerId);\n        _map.removeSource(layerId);\n      });\n    }\n  }\n\n  setLayerOrder(layerIds: string[], order: number, layers: { [x: string]: TLayerAdapter }): void {\n    if (this._sortTimerId) {\n      window.clearTimeout(this._sortTimerId);\n    }\n    this._sortTimerId = window.setTimeout(() => this._setLayerOrder(layers));\n  }\n\n  setLayerOpacity(layerIds: string[], opacity: number): void {\n    const _map = this.map;\n    if (_map) {\n      layerIds.forEach((layerId) => {\n        this._onMapLoad().then(() => {\n          const layer = _map.getLayer(layerId);\n          if (layer) {\n            _map.setPaintProperty(layerId, layer.type + '-opacity', opacity);\n          }\n        });\n      });\n    }\n  }\n\n  createControl(control: MapControl): IControl {\n    return createControl(control);\n  }\n\n  createButtonControl(options: ButtonControlOptions): IControl {\n    return createButtonControl(options);\n  }\n\n  addControl(control: IControl, position: ControlPositions): IControl | undefined {\n    if (this.map) {\n      this.map.addControl(control, position);\n      return control;\n    }\n  }\n\n  removeControl(control: IControl): void {\n    if (this.map) {\n      this.map.removeControl(control);\n    }\n  }\n\n  onMapClick(evt: MapEventType['click'] & EventData): void {\n\n    const latLng = evt.lngLat;\n    const { x, y } = evt.point;\n\n    this.emitter.emit('click', { latLng, pixel: { top: y, left: x } });\n  }\n\n  private _onMapLoad(cb?: () => any): Promise<Map> {\n    return new Promise<Map>((resolve) => {\n      const _resolve = () => {\n        if (cb) {\n          cb();\n        }\n        if (this.map) {\n          resolve(this.map);\n        }\n      };\n      if (this.isLoaded) { // map.loaded()\n        _resolve();\n      } else if (this.map) {\n        this.emitter.once('create', () => {\n          _resolve();\n        });\n      }\n    });\n  }\n\n  private _setLayerOrder(layers: { [x: string]: TLayerAdapter }): void {\n    const _map = this.map;\n    if (_map) {\n      const baseLayers: TLayerAdapter[] = [];\n      let orderedLayers: TLayerAdapter[] = [];\n      for (const l in layers) {\n        if (layers.hasOwnProperty(l)) {\n          const layer = layers[l];\n          if (layer.options.baseLayer) {\n            baseLayers.push(layer);\n          } else {\n            orderedLayers.push(layer);\n          }\n        }\n      }\n\n      orderedLayers = orderedLayers.sort((a, b) => {\n        return a.options.order !== undefined && b.options.order !== undefined ? a.options.order - b.options.order : 0;\n      });\n\n      for (let fry = 0; fry < orderedLayers.length; fry++) {\n        const nextLayer = orderedLayers[fry + 1];\n        const nextLayerId = nextLayer && nextLayer.layer && nextLayer.layer[0];\n        const mem = orderedLayers[fry];\n        const _layers = this._getLayerIds(mem);\n        _layers.forEach((x) => {\n          _map.moveLayer(x, nextLayerId);\n        });\n      }\n      const firstRealLayer = orderedLayers.find((x) => Array.isArray(x.layer));\n      if (firstRealLayer) {\n        const firstLayerId = this._getLayerIds(firstRealLayer)[0];\n        // normalize layer ordering\n        baseLayers.forEach((x) => {\n          if (x.layer) {\n            x.layer.forEach((y) => {\n              _map.moveLayer(y, firstLayerId);\n            });\n          }\n        });\n      }\n    }\n  }\n\n  private _getLayerIds(mem: TLayerAdapter): string[] {\n    let _layers: TLayer = [];\n    if (mem) {\n      if (Array.isArray(mem.layer)) {\n        _layers = mem.layer;\n      } else if (mem.getDependLayers) {\n        mem.getDependLayers().forEach((x) => {\n          x.forEach((y) => {\n            _layers.push(y);\n          });\n        });\n      }\n    }\n    return _layers;\n  }\n\n  private _toggleLayer(layerId: string, status: boolean): void {\n    this._onMapLoad().then((_map) => {\n      _map.setLayoutProperty(layerId, 'visibility', status ? 'visible' : 'none');\n    });\n  }\n\n  private _onMapSourceData(data: mapboxgl.MapSourceDataEvent & EventData) {\n    if (data.dataType === 'source') {\n      const isLoaded = data.isSourceLoaded;\n      const emit = (target: string) => {\n        this.emitter.emit('data-loaded', { target });\n      };\n      this._onDataLoad(data, isLoaded, emit);\n    }\n  }\n\n  private _onMapError(data: mapboxgl.ErrorEvent & mapboxgl.MapSourceDataEvent & EventData) {\n    if (this._sourceDataLoading[data.sourceId]) {\n      const isLoaded = data.isSourceLoaded;\n      const emit = (target: string) => {\n        this.emitter.emit('data-error', { target });\n      };\n      this._onDataLoad(data, isLoaded, emit);\n    }\n  }\n\n  private _onDataLoad(data: { sourceId: string, tile: any }, isLoaded = false, emit: (sourceId: string) => void) {\n    // if all sources is loaded emmit event for all and clean mem\n    if (isLoaded) {\n      Object.keys(this._sourceDataLoading).forEach((x) => {\n        emit(x);\n      });\n      this._sourceDataLoading = {};\n    } else {\n      // check if all tiles in layer is loaded\n      const tiles = this._sourceDataLoading[data.sourceId];\n      if (tiles && data.tile) {\n        const index = tiles.indexOf(data.tile);\n        if (index !== -1) {\n          this._sourceDataLoading[data.sourceId].splice(index, 1);\n        }\n        // if no more loaded tiles in layer emit event and clean mem only for this layer\n        if (!tiles.length) {\n          emit(data.sourceId);\n          delete this._sourceDataLoading[data.sourceId];\n        }\n      }\n    }\n  }\n\n  private _addEventsListeners(): void {\n    const _map = this.map;\n    if (_map) {\n      // write mem for start loaded layers\n      _map.on('sourcedataloading', (data) => {\n        this._sourceDataLoading[data.sourceId] = this._sourceDataLoading[data.sourceId] || [];\n        if (data.tile) {\n          this._sourceDataLoading[data.sourceId].push(data.tile);\n        }\n      });\n      // emmit data-loaded for each layer or all sources is loaded\n      _map.on('sourcedata', this._onMapSourceData.bind(this));\n      _map.on('error', this._onMapError.bind(this));\n      _map.on('click', (evt) => {\n        this.onMapClick(evt);\n      });\n\n      this._universalEvents.forEach((e) => {\n        _map.on(e, () => this.emitter.emit(e, this));\n      });\n    }\n  }\n}\n","/**\n * @module mapboxgl-map-adapter\n */\n\nimport { MapboxglMapAdapter } from './MapboxglMapAdapter';\n\nexport { MapboxglMapAdapter };\nexport default MapboxglMapAdapter;\n","import { ButtonControlOptions } from '@nextgis/webmap';\nimport { createControl } from './createControl';\n\nexport function createButtonControl(options: ButtonControlOptions) {\n  const link = document.createElement('button');\n  link.className = 'mapboxgl-ctrl-icon';\n\n  link.setAttribute('role', 'button');\n  if (options.title) {\n    link.title = options.title;\n    link.setAttribute('aria-label', options.title);\n  }\n\n  if (options.html) {\n    if (options.html instanceof HTMLElement) {\n      link.appendChild(options.html);\n    } else {\n      link.innerHTML = options.html;\n    }\n    const child = link.firstElementChild as HTMLElement;\n    child.style.width = '100%';\n    child.style.height = '100%';\n    child.style.lineHeight = (link.offsetHeight || 30) + 'px';\n  }\n  if (options.addClass) {\n    options.addClass.split(' ').forEach((x) => link.classList.add(x));\n  }\n\n  const onClick = (e: Event) => {\n    e.stopPropagation();\n    options.onClick();\n  };\n  if (options.onClick) {\n    link.addEventListener('click', onClick);\n  }\n\n  return createControl({\n    onAdd() {\n      return link;\n    },\n    onRemove() {\n      const parent = link.parentNode;\n      if (parent) {\n        parent.removeChild(link);\n      }\n      if (options.onClick) {\n        link.removeEventListener('click', onClick);\n      }\n    }\n  }, { bar: true, addClass: 'mapboxgl-ctrl-group' });\n}\n","import { ToggleControlOptions, ToggleControl, ButtonControlOptions } from '../../interfaces/MapControl';\n\nexport function createToggleControl<C = any>(\n  createButtonControl: (options: ButtonControlOptions) => C,\n  options: ToggleControlOptions): (C & ToggleControl) {\n\n  const link = document.createElement('div');\n\n  let status = false;\n  if (options.getStatus) {\n    status = options.getStatus();\n  } else if (options.status) {\n    status = options.status;\n  }\n\n  const title = options.title || '';\n  const html = options.html;\n\n  function setTitle() {\n    if (title) {\n      if (typeof title === 'string') {\n        link.title = title;\n      } else {\n        link.title = status ? title.on : title.off;\n      }\n      link.setAttribute('aria-label', link.title);\n    }\n  }\n  setTitle();\n\n  // DomEvent.disableClickPropagation(link);\n  // DomEvent.on(link, 'click', DomEvent.stop);\n\n  function _setHtml(htmlDef: string | HTMLElement) {\n    if (htmlDef instanceof HTMLElement) {\n      link.innerHTML = '';\n      link.appendChild(htmlDef);\n    } else if (typeof htmlDef === 'string') {\n      link.innerHTML = htmlDef;\n    }\n  }\n  function setHtml() {\n    if (html) {\n      if (typeof html === 'string' || html instanceof HTMLElement) {\n        _setHtml(html);\n      } else {\n        _setHtml(status ? html.on : html.off);\n      }\n      link.setAttribute('aria-label', link.title);\n    }\n  }\n  setHtml();\n\n  function _setClass(addClass: string, impact: boolean) {\n    addClass.split(' ').forEach((x) => {\n      if (impact) {\n        link.classList.add(x);\n      } else {\n        link.classList.remove(x);\n      }\n    });\n  }\n\n  function setClass() {\n    if (options.addClassOn) {\n      _setClass(options.addClassOn, status);\n    }\n    if (options.addClassOff) {\n      _setClass(options.addClassOff, !status);\n    }\n  }\n\n  if (options.addClass) {\n    _setClass(options.addClass, true);\n  }\n  setClass();\n\n  const onClick = (_status?: boolean) => {\n    status = _status !== undefined ? _status : !status;\n    setHtml();\n    setTitle();\n    setClass();\n    options.onClick(status);\n  };\n\n  const buttonControl = createButtonControl({\n    html: link,\n    onClick\n  }) as (C & ToggleControl);\n  buttonControl.onClick = onClick;\n  return buttonControl;\n}\n","export class KeyCodes {\n  'backspace' = 8;\n  'tab' = 9;\n  'enter' = 13;\n  'shift' = 16;\n  'ctrl' = 17;\n  'alt' = 18;\n  'pause/break' = 19;\n  'caps_lock' = 20;\n  'escape' = 27;\n  'page_up' = 33;\n  'page_down' = 34;\n  'end' = 35;\n  'home' = 36;\n  'left_arrow' = 37;\n  'up_arrow' = 38;\n  'right_arrow' = 39;\n  'down_arrow' = 40;\n  'insert' = 45;\n  'delete' = 46;\n  'left_window_key' = 91;\n  'right_window_key' = 92;\n  'select_key' = 93;\n  'numpad_0' = 96;\n  'numpad_1' = 97;\n  'numpad_2' = 98;\n  'numpad_3' = 99;\n  'numpad_4' = 100;\n  'numpad_5' = 101;\n  'numpad_6' = 102;\n  'numpad_7' = 103;\n  'numpad_8' = 104;\n  'numpad_9' = 105;\n  'multiply' = 106;\n  'add' = 107;\n  'subtract' = 109;\n  'decimal_point' = 110;\n  'divide' = 111;\n  'f1' = 112;\n  'f2' = 113;\n  'f3' = 114;\n  'f4' = 115;\n  'f5' = 116;\n  'f6' = 117;\n  'f7' = 118;\n  'f8' = 119;\n  'f9' = 120;\n  'f10' = 121;\n  'f11' = 122;\n  'f12' = 123;\n  'num_lock' = 144;\n  'scroll_lock' = 145;\n  'semi-colon' = 186;\n  'equal_sign' = 187;\n  ',' = 188; // \"comma\";\n  '-' = 189; // \"dash\";\n  '.' = 190; // \"period\";\n  '/' = 191; // \"forward slash\";\n  '`' = 192; // \"grave accent\";\n  '[' = 219; // \"open bracket\";\n  '\\\\' = 220; // \"back slash\";\n  ']' = 221; // \"close braket\";\n  '\\'' = 222; // \"single quote\"\n}\n","import {KeyCodes} from './KeysCodes';\n\n/**\n * @param {string} key - key symbol\n * @param {string} func - action on key press\n * @param {number} [keyCode] - key code for special button like tab\n *\n * @export\n * @interface IKeyControl\n */\nexport interface IKeyControl {\n  key?: string;\n  keyCode?: number;\n  func: () => void;\n}\n\nexport class Keys {\n\n  keyCodeAlias = new KeyCodes();\n\n  keys: {[keyCode: number]: boolean} = {};\n\n  private _windowOnFocus: () => void;\n  private _keysPressed: (e: KeyboardEvent) => void;\n  private _keysReleased: (e: KeyboardEvent) => void;\n\n  constructor() {\n    this._windowOnFocus = this.windowOnFocus.bind(this);\n    this._keysPressed = this.keysPressed.bind(this);\n    this._keysReleased = this.keysReleased.bind(this);\n    this.addKeyboardEventsListener();\n  }\n\n  pressed(keyName: keyof KeyCodes): boolean {\n    const code = this.keyCodeAlias[keyName];\n    return !!code && this.keys[code];\n  }\n\n  addKeyboardEventsListener() {\n    window.addEventListener('focus', this._windowOnFocus, false);\n    window.addEventListener('keydown', this._keysPressed, false);\n    window.addEventListener('keyup', this._keysReleased, false);\n  }\n\n  removeKeyboardEventsListener() {\n    window.removeEventListener('focus', this._windowOnFocus, false);\n    window.removeEventListener('keydown', this._keysPressed, false);\n    window.removeEventListener('keyup', this._keysReleased, false);\n  }\n\n  private keysPressed(e: KeyboardEvent) {\n    e.stopPropagation();\n    if (!this.keys[e.keyCode]) {\n      this.keys[e.keyCode] = true;\n    }\n  }\n\n  private keysReleased(e: KeyboardEvent) {\n    e.stopPropagation();\n    this.keys[e.keyCode] = false;\n  }\n\n  private windowOnFocus() {\n    this.keys = {};\n  }\n}\n","import { WebMap } from '../WebMap';\nimport { WebMapEvents } from '../interfaces/Events';\n\nexport function onLoad<E extends WebMapEvents = WebMapEvents>(event: keyof E) {\n  return function (target: WebMap, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = function (this: WebMap<any, any, any, E>, ...args: any[]) {\n\n      return new Promise((resolve, reject) => {\n        const _resolve = () => {\n          const origin = originalMethod.apply(this, args);\n          origin && origin.then ? origin.then(resolve).catch(reject) : resolve(origin);\n        };\n        const isLoaded = this.getEventStatus(event);\n        if (isLoaded) {\n          _resolve();\n        } else {\n          this.emitter.once(event as keyof WebMapEvents, () => {\n            _resolve();\n          });\n        }\n      });\n    };\n    return descriptor;\n  };\n}\n","export function deepmerge(target: any, src: any, mergeArray = false) {\n  const array = Array.isArray(src);\n  let dst: any = array && [] || {};\n\n  if (array) {\n\n    if (mergeArray) {\n      target = target || [];\n      dst = dst.concat(target);\n      src.forEach(function(e: any, i: any) {\n        if (typeof dst[i] === 'undefined') {\n          dst[i] = e;\n        } else if (typeof e === 'object') {\n          dst[i] = deepmerge(target[i], e, mergeArray);\n        } else {\n          if (target.indexOf(e) === -1) {\n            dst.push(e);\n          }\n        }\n      });\n    } else { // Replace array. Do not merge by default\n      dst = src;\n    }\n\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(function(key) {\n        dst[key] = target[key];\n      });\n    }\n    Object.keys(src).forEach(function(key) {\n      if (typeof src[key] !== 'object' || !src[key]) {\n        dst[key] = src[key];\n      } else {\n        if (!target[key]) {\n          dst[key] = src[key];\n        } else {\n          dst[key] = deepmerge(target[key], src[key], mergeArray);\n        }\n      }\n    });\n  }\n  return dst;\n}\n","import {\n  GeoJsonObject,\n  GeoJsonGeometryTypes,\n  FeatureCollection,\n  GeometryCollection,\n  Feature\n} from 'geojson';\n\nexport function detectGeometryType(geojson: GeoJsonObject): GeoJsonGeometryTypes {\n  let geometry: GeoJsonGeometryTypes;\n  if (geojson.type === 'FeatureCollection') {\n    const featuresTypes = (geojson as FeatureCollection).features.map((f) => f.geometry.type);\n    geometry = findMostFrequentGeomType(featuresTypes);\n  } else if (geojson.type === 'GeometryCollection') {\n    const geometryTypes = (geojson as GeometryCollection).geometries.map((g) => g.type);\n    geometry = findMostFrequentGeomType(geometryTypes);\n  } else if (geojson.type === 'Feature') {\n    geometry = (geojson as Feature).geometry.type;\n  } else {\n    geometry = geojson.type;\n  }\n  return geometry;\n}\n\nexport function findMostFrequentGeomType(arr: GeoJsonGeometryTypes[]): GeoJsonGeometryTypes {\n  const counts: { [x: string]: number } = {};\n  for (let fry = 0; fry < arr.length; fry++) {\n    counts[arr[fry]] = 1 + (counts[arr[fry]] || 0);\n  }\n  let maxName;\n  for (const c in counts) {\n    if (counts.hasOwnProperty(c)) {\n      const count = maxName !== undefined ? counts[maxName] : 0;\n      if (counts[c] > (count || 0)) {\n        maxName = c;\n      }\n    }\n  }\n  return maxName as GeoJsonGeometryTypes;\n}\n","import { GeoJsonAdapterOptions, GeoJsonAdapterLayerType } from '../interfaces/LayerAdapter';\nimport { detectGeometryType } from './geometryTypes';\n\nexport const typeAlias: { [x: string]: GeoJsonAdapterLayerType } = {\n  'Point': 'circle',\n  'LineString': 'line',\n  'MultiPoint': 'circle',\n  'Polygon': 'fill',\n  'MultiLineString': 'line',\n  'MultiPolygon': 'fill'\n};\n\nexport function updateGeojsonAdapterOptions(opt: GeoJsonAdapterOptions): GeoJsonAdapterOptions {\n  if (opt.data) {\n    const geomType = typeAlias[detectGeometryType(opt.data)];\n    const p = opt.paint;\n    if (typeof p === 'object') {\n      // define parameter if not specified\n      p.type = p.type ? p.type :\n        (geomType === 'fill' || geomType === 'line') ?\n          'path' :\n          ('html' in p || 'className' in p) ?\n            'icon' :\n            geomType;\n    }\n    opt.type = geomType;\n  }\n  return opt;\n}\n","import {\n  Paint,\n  GeoJsonAdapterLayerPaint,\n  GeometryPaint,\n  GetPaintFunction,\n  GetCustomPaintOptions\n} from '../interfaces/LayerAdapter';\n\nexport function preparePaint(\n  paint: Paint,\n  defaultPaint: GeometryPaint,\n  getPaintFunctions: { [name: string]: GetPaintFunction }): Paint {\n\n  let newPaint: Paint | undefined;\n  if (typeof paint === 'function') {\n    return (opt: any) => {\n      return preparePaint(paint(opt), defaultPaint, getPaintFunctions) as GeoJsonAdapterLayerPaint;\n    };\n  } else if (paint.type === 'get-paint') {\n    const getPaint = updatePaintOptionFromCallback(paint, getPaintFunctions);\n    if (getPaint) {\n      newPaint = preparePaint(getPaint, defaultPaint, getPaintFunctions);\n    }\n  } else if (paint.type === 'icon') {\n    return paint;\n  } else {\n    newPaint = { ...paint };\n    newPaint.fill = newPaint.fill !== undefined ? newPaint.fill : true;\n    newPaint.stroke = newPaint.stroke !== undefined ?\n      newPaint.stroke : !newPaint.fill || !!(newPaint.strokeColor || newPaint.strokeOpacity);\n  }\n  if (newPaint) {\n    if (typeof newPaint === 'function') {\n      return newPaint;\n    } else {\n      newPaint = { ...defaultPaint, ...newPaint };\n\n    }\n  } else {\n    newPaint = { ...defaultPaint };\n  }\n\n  if ('color' in newPaint) {\n    if (!newPaint.strokeColor) {\n      newPaint.strokeColor = newPaint.color;\n    }\n    if (!newPaint.fillColor) {\n      newPaint.fillColor = newPaint.color;\n    }\n  }\n  if ('opacity' in newPaint) {\n    if (newPaint.strokeOpacity === undefined) {\n      newPaint.strokeOpacity = newPaint.opacity;\n    }\n    if (newPaint.fillOpacity === undefined) {\n      newPaint.fillOpacity = newPaint.opacity;\n    }\n  }\n\n  return newPaint;\n}\n\nfunction updatePaintOptionFromCallback(\n  paint: GetCustomPaintOptions,\n  getPaintFunctions: { [name: string]: GetPaintFunction }): GeoJsonAdapterLayerPaint | undefined {\n\n  if (typeof paint.from === 'function') {\n    return paint.from(paint.options);\n  } else if (typeof paint.from === 'string' && getPaintFunctions) {\n    const from = getPaintFunctions[paint.from];\n    if (from) {\n      return from(paint.options);\n    }\n  }\n\n}\n","/**\n * @module webmap\n */\nimport {\n  LayerAdapter,\n  LayerAdapters,\n  AdapterConstructor,\n  LayerAdaptersOptions,\n  AdapterOptions,\n  GeoJsonAdapterOptions,\n  VectorLayerAdapter,\n  DataLayerFilter,\n  OnLayerClickOptions\n} from './interfaces/LayerAdapter';\nimport { LayerDef, Type } from './interfaces/BaseTypes';\nimport { WebMap } from './WebMap';\n\nimport { Feature, GeoJsonObject } from 'geojson';\nimport { preparePaint } from './util/preparePaint';\nimport { updateGeojsonAdapterOptions } from './util/updateGeojsonAdapterOptions';\nimport { GetAttributionsOptions, ToggleLayerOptions } from './interfaces/WebMapApp';\n\nexport class WebMapLayers<L = any> {\n  private _layersIds: number = 1;\n  private readonly _baseLayers: string[] = [];\n  private readonly _layers: { [x: string]: LayerAdapter } = {};\n  private readonly _selectedLayers: string[] = [];\n\n  constructor(private webMap: WebMap) { }\n  /**\n   * Try to fit map view by given layer bounds.\n   * But not all layers have borders\n   * @param layerDef\n   */\n  async fitLayer(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    if (layer && layer.getExtent) {\n      const extent = await layer.getExtent();\n      if (extent) {\n        this.webMap.fitBounds(extent);\n      }\n    }\n  }\n\n  /**\n   * Check if given layer is baselayer\n   * @param layerName Check\n   */\n  isBaseLayer(layerDef: LayerDef): boolean | undefined {\n    const layer = this.getLayer(layerDef);\n    if (layer && layer.id) {\n      return this._baseLayers.indexOf(layer.id) !== -1;\n    }\n    return undefined;\n  }\n\n  getBaseLayers() {\n    return this._baseLayers;\n  }\n\n  /**\n   * Helper method to return added layer object by any definition type.\n   */\n  getLayer(layerDef: LayerDef): LayerAdapter | undefined {\n    if (typeof layerDef === 'string') {\n      return this._layers[layerDef];\n    }\n    return layerDef;\n  }\n\n  /**\n   * Helper method to return added layer identificator by any definition type.\n   */\n  getLayerId(layerDef: LayerDef): string | undefined {\n    const layer = this.getLayer(layerDef);\n    if (layer && layer.options) {\n      return layer.options.id;\n    } else {\n      throw new Error('No id for layer');\n    }\n  }\n\n  /**\n   * Return array of all added layer identificators.\n   */\n  getLayers(): string[] {\n    return Object.keys(this._layers);\n  }\n\n  findLayer<T extends LayerAdapter = LayerAdapter>(filter: (adapter: T) => boolean): T | undefined {\n    for (const l in this._layers) {\n      if (this._layers.hasOwnProperty(l)) {\n        const layerAdapter = this._layers[l] as T;\n        const isFit = filter(layerAdapter);\n        if (isFit) {\n          return layerAdapter;\n        }\n      }\n    }\n  }\n\n  /**\n   * Check if the given layer on the map\n   */\n  isLayerVisible(layerDef: LayerDef): boolean {\n    const layer = this.getLayer(layerDef);\n    return layer && layer.options.visibility !== undefined ? layer.options.visibility : false;\n  }\n\n  /**\n   * Shortcut method to create base layer\n   * @param adapter\n   * @param options\n   */\n  async addBaseLayer<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\n    adapter: K | Type<LayerAdapters[K]>,\n    options: O | LayerAdaptersOptions[K]): Promise<LayerAdapter> {\n\n    const layer = await this.addLayer(adapter, {\n      ...options,\n      baseLayer: true\n    });\n\n    return layer;\n  }\n\n  /**\n   * Registration of map layer.\n   *\n   * @param adapter The name of layer adapter from [MapAdapter.layerAdapters](webmap#MapAdapter.layerAdapters).\n   *                May be custom object or class implemented by [BaseLayerAdapter](webmap#BaseLayerAdapter).\n   * @param options Specific options for given adapter\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', options).then((layer) => webMap.showLayer(layer));\n   *\n   * webMap.addLayer(CustomLayerAdapter, options);\n   * ```\n   */\n  async addLayer<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\n    adapter: K | Type<LayerAdapters[K]> | Promise<Type<LayerAdapters[K]> | undefined>,\n    options: O | LayerAdaptersOptions[K],\n    order?: number): Promise<LayerAdapter> {\n\n    const _order = order || this._layersIds++;\n    let adapterEngine: Type<LayerAdapter> | undefined;\n    if (typeof adapter === 'string') {\n      adapterEngine = this.webMap.getLayerAdapter(adapter);\n    } else if (typeof adapter === 'function') {\n      adapterEngine = adapter as Type<LayerAdapter>;\n    } else if ((adapter as Promise<Type<LayerAdapters[K]> | undefined>).then) {\n      adapterEngine = await adapter as Type<LayerAdapters[K]>;\n    }\n    if (adapterEngine !== undefined) {\n      const geoJsonOptions = options as GeoJsonAdapterOptions;\n      if (!options.strongOptions) {\n        this._updateGeoJsonOptions(geoJsonOptions);\n      }\n      const { maxZoom, minZoom } = this.webMap.options;\n\n      options = {\n        id: String(_order),\n        order: _order,\n        maxZoom,\n        minZoom,\n        ...options\n      };\n      // options.visibility is a layer global state, but each layer on init is not visible\n      const visibility = options.visibility;\n      options.visibility = false;\n\n      // TODO: check usage in adapter constructor and safe remove\n      if (options.baseLayer) {\n        options.order = 0;\n      }\n\n      const _adapter = new adapterEngine(this.webMap.mapAdapter.map, options);\n\n      if (_adapter.options.baseLayer) {\n        options.baseLayer = true;\n        options.order = 0;\n      }\n\n      let layerId = _adapter.options.id;\n      if (layerId) {\n        this._layers[layerId] = _adapter;\n      }\n      this.webMap.emitter.emit('layer:preadd', _adapter);\n      await this.webMap.onMapLoad();\n      const layer = await _adapter.addLayer(options);\n\n      // checking that the original layer was inserted into the adapter anyway\n      _adapter.layer = layer;\n      // think about how to move `id` to the adapter's constructor,\n      // but that it is not required in the options\n      _adapter.id = _adapter.options.id;\n\n      layerId = _adapter.options.id;\n      if (layerId) {\n        if (geoJsonOptions.filter) {\n          this.filterLayer(_adapter, geoJsonOptions.filter);\n        }\n        if (options.baseLayer) {\n          this._baseLayers.push(layerId);\n        }\n        this._layers[layerId] = _adapter;\n\n        if (visibility) {\n          this.showLayer(layerId);\n        }\n      }\n      if (options.fit && _adapter.getExtent) {\n        const extent = await _adapter.getExtent();\n        if (extent) {\n          this.webMap.fitBounds(extent);\n        }\n      }\n      const opacity = options.opacity;\n      if (opacity !== undefined && opacity <= 1) {\n        this.setLayerOpacity(_adapter, opacity);\n      }\n      this.webMap.emitter.emit('layer:add', _adapter);\n      return _adapter;\n\n    }\n    return Promise.reject('No adapter');\n  }\n\n  async addLayerFromAsyncAdapter<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\n    adapter: AdapterConstructor,\n    options: O | LayerAdaptersOptions[K],\n    order?: number\n  ): Promise<LayerAdapter> {\n    const _order = order || this._layersIds++;\n    const adapterConstructor = adapter as AdapterConstructor;\n    const adapterConstructorPromise = adapterConstructor();\n    const adapterEngine = await adapterConstructorPromise;\n    if (adapterEngine) {\n      return this.addLayer(adapterEngine, options, _order);\n    }\n    return Promise.reject('No adapter');\n  }\n\n  /**\n   * Remove all layer from map and memory.\n   */\n  removeLayers(allowCb?: (layer: string, adapter: LayerAdapter) => boolean) {\n    for (const l in this._layers) {\n      if (this._layers.hasOwnProperty(l)) {\n        let allow = true;\n        if (allowCb) {\n          allow = allowCb(l, this._layers[l]);\n        }\n        if (allow) {\n          this.removeLayer(l);\n          delete this._layers[l];\n        }\n      }\n    }\n  }\n\n  /**\n   * Remove all layers but not remove basemap.\n   */\n  removeOverlays() {\n    this.removeLayers((layerId, layer) => !layer.options.baseLayer);\n  }\n\n  /**\n   * Remove specific layer from map and memory by its definition.\n   * @param layerDef\n   */\n  removeLayer(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    const layerId = layer && this.getLayerId(layer);\n    if (layer && layerId) {\n      this.webMap.emitter.emit('layer:preremove', layer);\n      if (layer.beforeRemove) {\n        layer.beforeRemove();\n      }\n      if (layer.beforeRemove) {\n        layer.beforeRemove();\n      }\n      if (layer.removeLayer) {\n        layer.removeLayer();\n      } else {\n        this.webMap.mapAdapter.removeLayer(layer.layer);\n      }\n      if (layer.options && layer.options.baseLayer) {\n        const index = this._baseLayers.indexOf(layerId);\n        if (index) {\n          this._baseLayers.splice(index, 1);\n        }\n      }\n      delete this._layers[layerId];\n      this.webMap.emitter.emit('layer:remove', layer);\n    }\n  }\n\n  /**\n   * Create layer from GeoJson data. Set style and behavior for selection.\n   *\n   * @example\n   * ```javascript\n   * // Add simple layer\n   * webMap.addGeoJsonLayer({ data: geojson, paint: { color: 'red' } });\n   *\n   * // Add styled by feature property layer with selection behavior\n   * webMap.addGeoJsonLayer({\n   *   data: geojson,\n   *   paint: function (feature) {\n   *     return { color: feature.properties.color, opacity: 0.5 }\n   *   },\n   *  selectedPaint: function (feature) {\n   *    return { color: feature.properties.selcolor, opacity: 1 }\n   *  },\n   *  selectable: true,\n   *  multiselect: true\n   * });\n   *\n   * // Add marker layer styled with use [Icons](icons)\n   * webMap.addGeoJsonLayer({ data: geojson, paint: webMap.getIcon({ color: 'orange' })});\n   *\n   * // work with added layer\n   * const layer = webMap.addGeoJsonLayer({ data: geojson, id: 'my_layer_name'});\n   * // access layer by id\n   * webMap.showLayer('my_layer_name');\n   * // or access layer by instance\n   * webMap.showLayer(layer);\n   * ```\n   */\n  // @onMapLoad()\n  async addGeoJsonLayer<K extends keyof LayerAdaptersOptions>(\n    opt: GeoJsonAdapterOptions,\n    adapter?: K | Type<LayerAdapter>) {\n\n    opt = opt || {};\n    opt.multiselect = opt.multiselect !== undefined ? opt.multiselect : false;\n    opt.unselectOnSecondClick = opt.unselectOnSecondClick !== undefined ? opt.unselectOnSecondClick : true;\n    if (!adapter) {\n      opt = updateGeojsonAdapterOptions(opt);\n    }\n    opt.paint = opt.paint || {};\n    const layer = await this.addLayer(adapter || 'GEOJSON', opt);\n    this.showLayer(layer);\n    return layer;\n  }\n\n  /**\n   * Show added layer on the map by it definition.\n   */\n  showLayer(layerDef: LayerDef, options: ToggleLayerOptions = {}) {\n    this.toggleLayer(layerDef, true, options);\n  }\n\n  /**\n   * Hide added layer on the map by it definition.\n   */\n  hideLayer(layerDef: LayerDef, options: ToggleLayerOptions = {}) {\n    this.toggleLayer(layerDef, false, options);\n  }\n\n  /**\n   * Change added layer visibility on the map by given status or inverse current status.\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', {id: 'my_layer', url: ''}).then((layer) => {\n   *   webMap.toggleLayer(layer, true);\n   *   webMap.toggleLayer('my_layer', false);\n   *   webMap.toggleLayer('my_layer');\n   *   webMap.isLayerVisible(layer); // true\n   * });\n   * ```\n   */\n  toggleLayer(layerDef: LayerDef, status?: boolean, options: ToggleLayerOptions = {}) {\n    const layer = this.getLayer(layerDef);\n    const onMap = layer && layer.options.visibility;\n    const toStatus = status !== undefined ? status : !onMap;\n    const silent = options.silent !== undefined ? options.silent : false;\n    const action = (source: any, l: LayerAdapter) => {\n      l.options.visibility = toStatus;\n\n      const preEventName = toStatus ? 'layer:preshow' : 'layer:prehide';\n      const eventName = toStatus ? 'layer:show' : 'layer:hide';\n      if (!silent) {\n        this.webMap.emitter.emit(preEventName, l);\n      }\n      if (toStatus && source) {\n        const order = l.options.baseLayer ? 0 : l.options.order;\n\n        // do not show baselayer if another on the map\n        if (order === 0 && this._baseLayers.length) {\n          const anotherVisibleLayerBaseLayer = this._baseLayers.find((x) => {\n            return x !== l.id && this.isLayerVisible(x);\n          });\n          if (anotherVisibleLayerBaseLayer) {\n            this.hideLayer(anotherVisibleLayerBaseLayer);\n          }\n        }\n\n        if (l.showLayer) {\n          l.showLayer.call(l, l.layer);\n        } else {\n          this.webMap.mapAdapter.showLayer(l.layer);\n        }\n        if (order !== undefined) {\n          this.webMap.mapAdapter.setLayerOrder(l.layer, order, this._layers);\n        }\n      } else {\n        if (l.hideLayer) {\n          l.hideLayer.call(l, l.layer);\n        } else {\n          this.webMap.mapAdapter.hideLayer(l.layer);\n        }\n      }\n      if (!silent) {\n        this.webMap.emitter.emit(eventName, l);\n      }\n    };\n    if (layer && layer.options.visibility !== toStatus) {\n      if (this.webMap.mapAdapter.map) {\n        action(this.webMap.mapAdapter, layer);\n      } else {\n        this.webMap.mapAdapter.emitter.once('create', (adapter) => {\n          action(adapter.map, layer);\n        });\n      }\n    }\n  }\n\n  updateLayer(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    if (layer && this.isLayerVisible(layer)) {\n      this.hideLayer(layer, { silent: true });\n      this.showLayer(layer, { silent: true });\n    }\n  }\n\n  /**\n   * Set transparency for a given layer by number from 0 to 1\n   */\n  setLayerOpacity(layerDef: LayerDef, value: number) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      if (this.webMap.mapAdapter.setLayerOpacity) {\n        if (layer) {\n          this.webMap.mapAdapter.setLayerOpacity(layer.layer, value);\n        }\n      }\n    }\n  }\n\n  // requestGeomString(pixel: Pixel, pixelRadius: number) {\n  //   if (this.mapAdapter.requestGeomString) {\n  //     return this.mapAdapter.requestGeomString(pixel, pixelRadius);\n  //   }\n  // }\n\n  /**\n   * Mark the layer as selected.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be selected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.selectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   * @param layerDef\n   * @param findFeatureFun\n   */\n  selectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const adapter = layer as VectorLayerAdapter;\n      if (adapter && adapter.select) {\n        adapter.select(findFeatureFun);\n      }\n      const layerId = this.getLayerId(layer);\n      if (layerId) {\n        this._selectedLayers.push(layerId);\n      }\n    }\n  }\n\n  /**\n   * Unselect the given layer.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be unselected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.unSelectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   * @param layerDef\n   * @param findFeatureFun\n   */\n  unSelectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const adapter = layer && layer as VectorLayerAdapter;\n      if (adapter.unselect) {\n        adapter.unselect(findFeatureFun);\n      }\n      const layerId = this.getLayerId(layer);\n      if (layerId) {\n        const index = this._selectedLayers.indexOf(layerId);\n        if (index !== -1) {\n          this._selectedLayers.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  /**\n   * Hide features from a vector layer using a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.filterLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   * @param layerDef\n   * @param filter\n   */\n  filterLayer(layerDef: LayerDef, filter: DataLayerFilter<Feature, L>) {\n    const layer = this.getLayer(layerDef);\n    const adapter = layer as VectorLayerAdapter;\n    if (adapter.filter) {\n      adapter.filter(filter);\n    }\n  }\n\n  removeLayerFilter(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    const adapter = layer as VectorLayerAdapter;\n    if (adapter.removeFilter) {\n      adapter.removeFilter();\n    } else if (adapter.filter) {\n      adapter.filter(function () { return true; });\n    }\n  }\n\n  /**\n   * Sets the GeoJSON data for given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON').then((layer) => {\n   *   webMap.setLayerData(layer, geojson);\n   * });\n   * ```\n   */\n  setLayerData(layerDef: LayerDef, data: GeoJsonObject) {\n    const layerMem = this.getLayer(layerDef);\n    const adapter = layerMem as VectorLayerAdapter;\n    if (adapter.setData) {\n      adapter.setData(data);\n    } else if (adapter.clearLayer && adapter.addData) {\n      adapter.clearLayer();\n      adapter.addData(data);\n    }\n  }\n\n  /**\n   * Push new the GeoJSON features into given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson_features_5}).then((layer) => {\n   *   console.log(layer.getLayers().length) // > 5;\n   *   webMap.addLayerData(layer, geojson_features_3);\n   *   console.log(layer.getLayers().length) // > 8;\n   * });\n   * ```\n   */\n  addLayerData(layerDef: LayerDef, data: GeoJsonObject) {\n    const layerMem = this.getLayer(layerDef);\n    const adapter = layerMem as VectorLayerAdapter;\n    if (adapter.addData) {\n      adapter.addData(data);\n    }\n  }\n\n  /**\n   * Remove from vector layer all features.\n   * it is possible to remove only some objects if you specify a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.clearLayerData(layer, (feture) => feture.id === 42);\n   *   webMap.clearLayerData(layer);\n   * });\n   * ```\n   */\n  clearLayerData(layerDef: LayerDef, cb?: (feature: Feature) => boolean) {\n    const layerMem = this.getLayer(layerDef);\n    const adapter = layerMem as VectorLayerAdapter;\n    if (adapter.clearLayer) {\n      adapter.clearLayer(cb);\n    }\n  }\n\n  getAttributions(options: GetAttributionsOptions): string[] {\n    const attributions: string[] = [];\n    for (const l in this._layers) {\n      if (this._layers.hasOwnProperty(l)) {\n        const layerMem = this._layers[l];\n        const onlyVisible = options.onlyVisible !== undefined ? options.onlyVisible : true;\n        const useLayerAttr = onlyVisible ? layerMem.options.visibility : true;\n        if (useLayerAttr) {\n          const attr = layerMem.options && layerMem.options.attribution;\n          if (attr) {\n            attributions.push(attr);\n          }\n        }\n      }\n    }\n    return attributions;\n  }\n\n  private async _onLayerClick(options: OnLayerClickOptions) {\n    this.webMap.emitter.emit('layer:click', options);\n    return Promise.resolve(options);\n  }\n\n  private _updateGeoJsonOptions(options: GeoJsonAdapterOptions) {\n    const onLayerClickFromOpt = options.onLayerClick;\n    options.onLayerClick = (e) => {\n      if (onLayerClickFromOpt) {\n        onLayerClickFromOpt(e);\n      }\n      return this._onLayerClick(e);\n    };\n    if (this.webMap.options.paint) {\n      options.paint = preparePaint(options.paint || {}, this.webMap.options.paint, this.webMap.getPaintFunctions);\n    }\n    if (options.selectedPaint && this.webMap.options.selectedPaint) {\n      options.selectedPaint = preparePaint(\n        options.selectedPaint, this.webMap.options.selectedPaint, this.webMap.getPaintFunctions\n      );\n    }\n  }\n}\n","/**\n * @module webmap\n */\nimport { WebMap } from './WebMap';\nimport {\n  MapControl,\n  CreateControlOptions,\n  ButtonControlOptions,\n  ToggleControlOptions,\n  ToggleControl,\n  MapControls\n} from './interfaces/MapControl';\n\nimport { ControlPositions } from './interfaces/MapAdapter';\n\nexport class WebMapControls<C = any> {\n\n  static controls: { [name: string]: (webMap: WebMap, options?: any) => any } = {\n    'CONTROL': (webMap: WebMap, options: {\n      control: MapControl,\n      options?: CreateControlOptions\n    }) => {\n      return webMap.createControl(options.control, options.options);\n    },\n    'BUTTON': (webMap: WebMap, options: ButtonControlOptions) => {\n      return webMap.createButtonControl(options);\n    },\n    'TOGGLE': (webMap: WebMap, options: ToggleControlOptions) => {\n      return webMap.createToggleControl(options);\n    }\n  };\n\n  constructor(private webMap: WebMap) { }\n\n  async addControl<K extends keyof MapControls>(\n    controlDef: K | C,\n    position: ControlPositions,\n    options?: MapControls[K]) {\n\n    let control: C | undefined;\n    if (typeof controlDef === 'string') {\n      control = this.getControl(controlDef, options);\n    } else {\n      control = controlDef as C;\n    }\n    if (control) {\n      const _control = await control;\n      return this.webMap.mapAdapter.addControl(_control, position);\n    }\n  }\n\n  /**\n   * Creating a universal map layout control element. Can be used with any map adapter.\n   *\n   * @example\n   * const control = webMap.createControl({\n   *   onAdd() {\n   *     return document.createElement('div');\n   *   }\n   * });\n   */\n  async createControl(control: MapControl, options?: CreateControlOptions): Promise<C | undefined> {\n    await this.webMap.onLoad('build-map');\n    if (this.webMap.mapAdapter.createControl) {\n      return this.webMap.mapAdapter.createControl(control, options);\n    }\n  }\n\n  async createButtonControl(options: ButtonControlOptions): Promise<C | undefined> {\n    await this.webMap.onLoad('build-map');\n    if (this.webMap.mapAdapter.createButtonControl) {\n      return this.webMap.mapAdapter.createButtonControl(options);\n    }\n  }\n\n  async createToggleControl(options: ToggleControlOptions): Promise<(C & ToggleControl) | undefined> {\n    await this.webMap.onLoad('build-map');\n    if (this.webMap.mapAdapter.createToggleControl) {\n      return this.webMap.mapAdapter.createToggleControl(options);\n    } else {\n      if (this.webMap.mapAdapter.createButtonControl) {\n        return WebMap.utils.createToggleControl<C>(this.webMap.mapAdapter.createButtonControl, options);\n      }\n    }\n  }\n\n  removeControl(control: any) {\n    if (control.remove) {\n      control.remove();\n    } else if (this.webMap.mapAdapter.removeControl) {\n      this.webMap.mapAdapter.removeControl(control);\n    }\n  }\n\n  getControl<K extends keyof MapControls>(control: K, options?: MapControls[K]): C | undefined {\n    const engine = this.webMap.mapAdapter.controlAdapters[control];\n    if (engine) {\n      return new engine(options);\n    } else {\n      const createFun = WebMapControls.controls[control];\n      if (createFun) {\n        return createFun(this.webMap, options);\n      }\n    }\n  }\n}\n","/**\n * @module webmap\n */\n\nimport {\n  AdapterOptions,\n  DataLayerFilter,\n  LayerAdapters,\n  GetPaintFunction,\n  GeoJsonAdapterOptions,\n  AdapterConstructor\n} from './interfaces/LayerAdapter';\nimport { LayerAdaptersOptions, LayerAdapter } from './interfaces/LayerAdapter';\nimport { MapAdapter, ControlPositions, FitOptions } from './interfaces/MapAdapter';\nimport { MapOptions, AppOptions, GetAttributionsOptions } from './interfaces/WebMapApp';\nimport { LngLatBoundsArray, Type, Cursor, LngLatArray, LayerDef } from './interfaces/BaseTypes';\nimport { RuntimeParams } from './interfaces/RuntimeParams';\nimport { StarterKit } from './interfaces/StarterKit';\n\nimport {\n  MapControl,\n  MapControls,\n  CreateControlOptions,\n  ButtonControlOptions,\n  ToggleControlOptions,\n  ToggleControl\n} from './interfaces/MapControl';\n\nimport { createToggleControl } from './components/controls/ToggleControl';\n\nimport { Keys } from './components/keys/Keys';\nimport { Feature, GeoJsonObject } from 'geojson';\n\nimport StrictEventEmitter from 'strict-event-emitter-types';\nimport { EventEmitter } from 'events';\nimport { WebMapEvents } from './interfaces/Events';\n\nimport { onLoad } from './util/decorators';\nimport { deepmerge } from './util/deepmerge';\n\nimport { detectGeometryType, findMostFrequentGeomType } from './util/geometryTypes';\nimport { updateGeojsonAdapterOptions } from './util/updateGeojsonAdapterOptions';\n\nimport { WebMapLayers } from './WebMapLayers';\nimport { WebMapControls } from './WebMapControls';\n\nconst OPTIONS: MapOptions = {\n  minZoom: 0,\n  maxZoom: 21,\n  paint: {\n    color: 'blue',\n    opacity: 1,\n    radius: 8,\n    weight: 1\n  },\n  selectedPaint: {\n    color: 'darkblue',\n    opacity: 1,\n    radius: 12,\n    weight: 1\n  }\n};\n\n/**\n * @class WebMap\n */\nexport class WebMap<M = any, L = any, C = any, E extends WebMapEvents = WebMapEvents> {\n\n  static keys: Keys = new Keys();\n  static utils = {\n    detectGeometryType,\n    findMostFrequentGeomType,\n    updateGeojsonAdapterOptions,\n    createToggleControl\n  };\n  static getPaintFunctions: { [name: string]: GetPaintFunction };\n  static decorators = { onLoad };\n  static controls = WebMapControls.controls;\n\n  options: MapOptions = OPTIONS;\n  // `WebMapEvents` must be `E` but its not work correct\n  readonly emitter: StrictEventEmitter<EventEmitter, WebMapEvents> = new EventEmitter();\n  readonly keys = WebMap.keys;\n  readonly mapAdapter: MapAdapter<M>;\n  readonly runtimeParams: RuntimeParams[] = [];\n\n  getPaintFunctions = WebMap.getPaintFunctions;\n\n  private readonly layers: WebMapLayers<L>;\n  private readonly controls: WebMapControls<C>;\n\n  private _extent?: LngLatBoundsArray;\n  private readonly _eventsStatus: { [key in keyof E]?: boolean } = {};\n  private readonly _starterKits: StarterKit[];\n\n  constructor(appOptions: AppOptions) {\n    this.layers = new WebMapLayers<L>(this);\n    this.controls = new WebMapControls<C>(this);\n    this.mapAdapter = appOptions.mapAdapter;\n    this._starterKits = appOptions.starterKits || [];\n    if (appOptions.mapOptions) {\n      this.options = deepmerge(OPTIONS || {}, appOptions.mapOptions);\n    }\n    this._addEventsListeners();\n    if (appOptions.create) {\n      this.create(this.options);\n    }\n  }\n\n  /**\n   * Manual way to create a map. On default\n   * @example\n   * ```javascript\n   * const webMap = new WebMap(options);\n   * // options.create === false\n   * webMap.create(mapOptions).then(() => doSomething());\n   * ```\n   */\n  async create(options?: MapOptions): Promise<this> {\n    if (!this.getEventStatus('create')) {\n      this.options = deepmerge(OPTIONS || {}, options);\n      await this._setupMap();\n      this._emitStatusEvent('create', this);\n    }\n    return this;\n  }\n\n  /**\n   * Returns the HTML element that contains the map.\n   * @returns The map's container\n   */\n  getContainer(): HTMLElement | undefined {\n    if (this.mapAdapter.getContainer) {\n      return this.mapAdapter.getContainer();\n    } else if (this.options.target) {\n      if (this.options.target instanceof HTMLElement) {\n        return this.options.target;\n      } else if (typeof this.options.target === 'string') {\n        const element = document.getElementById(this.options.target);\n        if (element) {\n          return element;\n        }\n      }\n    }\n  }\n\n  /**\n   * Set the cursor icon to be displayed when hover icon on the map container.\n   * @param cursor available cursor name from https://developer.mozilla.org/ru/docs/Web/CSS/cursor\n   */\n  setCursor(cursor: Cursor) {\n    if (this.mapAdapter.setCursor) {\n      this.mapAdapter.setCursor(cursor);\n    }\n  }\n\n  /**\n   * Set the center of the current view.\n   * @param lngLat Array of two numbers representing longitude and latitude of the center of the map view.\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.setCenter([86.925278, 27.988056]);\n   * ```\n   */\n  setCenter(lngLat: LngLatArray): this {\n    this.mapAdapter.setCenter(lngLat);\n    return this;\n  }\n\n  /**\n   * Returns the map's geographical centerpoint.\n   * @return lngLat Array of two numbers representing longitude and latitude of the center of the map view.\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.getCenter(); // [86.925278, 27.988056]\n   * ```\n   */\n  getCenter(): LngLatArray | undefined {\n    return this.mapAdapter.getCenter();\n  }\n\n  /**\n   * Zoom to a specific zoom level.\n   * @param zoom The zoom level to set (0-24).\n   */\n  setZoom(zoom: number): this {\n    this.mapAdapter.setZoom(zoom);\n    return this;\n  }\n\n  /**\n   * Returns the map's current zoom level.\n   * @return The map's current zoom level (0-24).\n   */\n  getZoom(): number | undefined {\n    return this.mapAdapter.getZoom();\n  }\n\n  /**\n   * Sets the view of the map geographical center and zoom\n   * @param lngLat Array of two numbers representing longitude and latitude of the center of the map view.\n   * @param zoom The zoom level to set (0-24).\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.setView([86.925278, 27.988056], 12)\n   * ```\n   */\n  setView(lngLat?: LngLatArray, zoom?: number) {\n    if (this.mapAdapter.setView && lngLat && zoom) {\n      this.mapAdapter.setView(lngLat, zoom);\n    } else {\n      if (lngLat) {\n        this.mapAdapter.setCenter(lngLat);\n      }\n      if (zoom) {\n        this.mapAdapter.setZoom(zoom);\n      }\n    }\n  }\n\n  // [west, south, east, north];\n  /**\n   * Sets a map view that contains the given geographical bounds.\n   * @param bounds Array of coordinates, measured in degrees, in [west, south, east, north] order.\n   * @param options\n   *\n   * @example\n   * ```javascript\n   * // Whall world\n   * webMap.fitBounds([0, -90, 180, 90]);\n   * ```\n   */\n  fitBounds(bounds: LngLatBoundsArray, options?: FitOptions): this {\n    this.mapAdapter.fit(bounds, options);\n    return this;\n  }\n\n  getEventStatus(eventName: keyof E): boolean {\n    // ugly hack to disable type checking error\n    const _eventName = eventName as keyof WebMapEvents;\n    const status = this._eventsStatus[_eventName];\n    return status !== undefined ? status : false;\n  }\n\n  onLoad(event: keyof WebMapEvents = 'create'): Promise<this> {\n    return new Promise((res) => {\n      if (this.getEventStatus(event)) {\n        res(this);\n      } else {\n        this.emitter.once(event, () => {\n          res(this);\n        });\n      }\n    });\n  }\n\n  onMapLoad(cb?: (mapAdapter: MapAdapter) => void): Promise<MapAdapter> {\n    return new Promise((res) => {\n      const _resolve = () => {\n        const mapAdapter = this.mapAdapter;\n        if (cb) {\n          cb(mapAdapter);\n        }\n        if (mapAdapter) {\n          res(mapAdapter);\n        }\n      };\n      const isLoaded = this.mapAdapter.isLoaded !== undefined ? this.mapAdapter.isLoaded : true;\n      if (this.mapAdapter.map && isLoaded) {\n        _resolve();\n      } else {\n        this.mapAdapter.emitter.once('create', () => {\n          _resolve();\n        });\n      }\n    });\n  }\n\n  /**\n   * Try to fit map view by given layer bounds.\n   * But not all layers have borders\n   * @param layerDef\n   */\n  async fitLayer(layerDef: LayerDef) {\n    this.layers.fitLayer(layerDef);\n  }\n\n  /**\n   * Check if given layer is baselayer\n   * @param layerName Check\n   */\n  isBaseLayer(layerDef: LayerDef): boolean | undefined {\n    return this.layers.isBaseLayer(layerDef);\n  }\n\n  getActiveBaseLayer() {\n    const visibleLayerBaseLayer = this.getBaseLayers().find((x) => {\n      return this.isLayerVisible(x);\n    });\n    if (visibleLayerBaseLayer) {\n      return this.getLayer(visibleLayerBaseLayer);\n    }\n  }\n\n  getBaseLayers() {\n    return this.layers.getBaseLayers();\n  }\n\n  getLayerAdapters(): { [name: string]: Type<LayerAdapter> } {\n    return this.mapAdapter.layerAdapters;\n  }\n\n  getLayerAdapter(name: string): Type<LayerAdapter> {\n    const adapter = this.mapAdapter.layerAdapters[name];\n    return adapter;\n  }\n\n  /**\n   * Helper method to return added layer object by any definition type.\n   */\n  getLayer(layerDef: LayerDef): LayerAdapter | undefined {\n    return this.layers.getLayer(layerDef);\n  }\n\n  /**\n   * Helper method to return added layer identificator by any definition type.\n   */\n  getLayerId(layerDef: LayerDef): string | undefined {\n    return this.layers.getLayerId(layerDef);\n  }\n\n  /**\n   * Return array of all added layer identificators.\n   */\n  getLayers(): string[] {\n    return this.layers.getLayers();\n  }\n\n  findLayer<T extends LayerAdapter = LayerAdapter>(filter: (adapter: T) => boolean): T | undefined {\n    return this.layers.findLayer<T>(filter);\n  }\n\n  /**\n   * Check if the given layer on the map\n   */\n  isLayerVisible(layerDef: LayerDef): boolean {\n    return this.layers.isLayerVisible(layerDef);\n  }\n\n  /**\n   * Shortcut method to create base layer\n   * @param adapter\n   * @param options\n   */\n  async addBaseLayer<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\n    adapter: K | Type<LayerAdapters[K]>,\n    options: O | LayerAdaptersOptions[K]): Promise<LayerAdapter> {\n\n    return this.layers.addBaseLayer<K, O>(adapter, options);\n  }\n\n  /**\n   * Registration of map layer.\n   *\n   * @param adapter The name of layer adapter from [MapAdapter.layerAdapters](webmap#MapAdapter.layerAdapters).\n   *                May be custom object or class implemented by [BaseLayerAdapter](webmap#BaseLayerAdapter).\n   * @param options Specific options for given adapter\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', options).then((layer) => webMap.showLayer(layer));\n   *\n   * webMap.addLayer(CustomLayerAdapter, options);\n   * ```\n   */\n  async addLayer<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\n    adapter: K | Type<LayerAdapters[K]> | Promise<Type<LayerAdapters[K]> | undefined>,\n    options: O | LayerAdaptersOptions[K],\n    order?: number): Promise<LayerAdapter> {\n\n    return this.layers.addLayer<K, O>(adapter, options, order);\n  }\n\n  async addLayerFromAsyncAdapter<K extends keyof LayerAdapters, O extends AdapterOptions = AdapterOptions>(\n    adapter: AdapterConstructor,\n    options: O | LayerAdaptersOptions[K],\n    order?: number\n  ): Promise<LayerAdapter> {\n    return this.layers.addLayerFromAsyncAdapter<K, O>(adapter, options, order);\n  }\n\n  /**\n   * Remove all layer from map and memory.\n   */\n  removeLayers(allowCb?: (layer: string, adapter: LayerAdapter) => boolean) {\n    this.layers.removeLayers(allowCb);\n  }\n\n  /**\n   * Remove all layers but not remove basemap.\n   */\n  removeOverlays() {\n    this.layers.removeOverlays();\n  }\n\n  /**\n   * Remove specific layer from map and memory by its definition.\n   * @param layerDef\n   */\n  removeLayer(layerDef: LayerDef) {\n    this.layers.removeLayer(layerDef);\n  }\n\n  /**\n   * Create layer from GeoJson data. Set style and behavior for selection.\n   *\n   * @example\n   * ```javascript\n   * // Add simple layer\n   * webMap.addGeoJsonLayer({ data: geojson, paint: { color: 'red' } });\n   *\n   * // Add styled by feature property layer with selection behavior\n   * webMap.addGeoJsonLayer({\n   *   data: geojson,\n   *   paint: function (feature) {\n   *     return { color: feature.properties.color, opacity: 0.5 }\n   *   },\n   *  selectedPaint: function (feature) {\n   *    return { color: feature.properties.selcolor, opacity: 1 }\n   *  },\n   *  selectable: true,\n   *  multiselect: true\n   * });\n   *\n   * // Add marker layer styled with use [Icons](icons)\n   * webMap.addGeoJsonLayer({ data: geojson, paint: webMap.getIcon({ color: 'orange' })});\n   *\n   * // work with added layer\n   * const layer = webMap.addGeoJsonLayer({ data: geojson, id: 'my_layer_name'});\n   * // access layer by id\n   * webMap.showLayer('my_layer_name');\n   * // or access layer by instance\n   * webMap.showLayer(layer);\n   * ```\n   */\n  // @onMapLoad()\n  async addGeoJsonLayer<K extends keyof LayerAdaptersOptions>(\n    opt: GeoJsonAdapterOptions,\n    adapter?: K | Type<LayerAdapter>) {\n\n    return this.layers.addGeoJsonLayer(opt, adapter);\n  }\n\n  /**\n   * Show added layer on the map by it definition.\n   */\n  showLayer(layerDef: LayerDef) {\n    return this.layers.showLayer(layerDef);\n  }\n\n  /**\n   * Hide added layer on the map by it definition.\n   */\n  hideLayer(layerDef: LayerDef) {\n    this.layers.hideLayer(layerDef);\n  }\n\n  /**\n   * Change added layer visibility on the map by given status or inverse current status.\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', {id: 'my_layer', url: ''}).then((layer) => {\n   *   webMap.toggleLayer(layer, true);\n   *   webMap.toggleLayer('my_layer', false);\n   *   webMap.toggleLayer('my_layer');\n   *   webMap.isLayerVisible(layer); // true\n   * });\n   * ```\n   */\n  toggleLayer(layerDef: LayerDef, status?: boolean) {\n    this.layers.toggleLayer(layerDef, status);\n  }\n\n  updateLayer(layerDef: LayerDef) {\n    this.layers.updateLayer(layerDef);\n  }\n\n  /**\n   * Set transparency for a given layer by number from 0 to 1\n   */\n  setLayerOpacity(layerDef: LayerDef, value: number) {\n    this.layers.setLayerOpacity(layerDef, value);\n  }\n\n  // requestGeomString(pixel: Pixel, pixelRadius: number) {\n  //   if (this.mapAdapter.requestGeomString) {\n  //     return this.mapAdapter.requestGeomString(pixel, pixelRadius);\n  //   }\n  // }\n\n  /**\n   * Mark the layer as selected.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be selected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.selectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   * @param layerDef\n   * @param findFeatureFun\n   */\n  selectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\n    this.layers.selectLayer(layerDef, findFeatureFun);\n  }\n\n  /**\n   * Unselect the given layer.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be unselected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.unSelectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   * @param layerDef\n   * @param findFeatureFun\n   */\n  unSelectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\n    this.layers.unSelectLayer(layerDef, findFeatureFun);\n  }\n\n  /**\n   * Hide features from a vector layer using a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.filterLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   * @param layerDef\n   * @param filter\n   */\n  filterLayer(layerDef: LayerDef, filter: DataLayerFilter<Feature, L>) {\n    this.layers.filterLayer(layerDef, filter);\n  }\n\n  removeLayerFilter(layerDef: LayerDef) {\n    this.layers.removeLayerFilter(layerDef);\n  }\n\n  /**\n   * Sets the GeoJSON data for given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON').then((layer) => {\n   *   webMap.setLayerData(layer, geojson);\n   * });\n   * ```\n   */\n  setLayerData(layerDef: LayerDef, data: GeoJsonObject) {\n    this.layers.setLayerData(layerDef, data);\n  }\n\n  /**\n   * Push new the GeoJSON features into given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson_features_5}).then((layer) => {\n   *   console.log(layer.getLayers().length) // > 5;\n   *   webMap.addLayerData(layer, geojson_features_3);\n   *   console.log(layer.getLayers().length) // > 8;\n   * });\n   * ```\n   */\n  addLayerData(layerDef: LayerDef, data: GeoJsonObject) {\n    this.layers.addLayerData(layerDef, data);\n  }\n\n  /**\n   * Remove from vector layer all features.\n   * it is possible to remove only some objects if you specify a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.clearLayerData(layer, (feture) => feture.id === 42);\n   *   webMap.clearLayerData(layer);\n   * });\n   * ```\n   */\n  clearLayerData(layerDef: LayerDef, cb?: (feature: Feature) => boolean) {\n    this.layers.clearLayerData(layerDef, cb);\n  }\n\n  getAttributions(options: GetAttributionsOptions): string[] {\n    return this.layers.getAttributions(options);\n  }\n\n  /**\n   * Creating a universal map layout control element. Can be used with any map adapter.\n   *\n   * @example\n   * const control = webMap.createControl({\n   *   onAdd() {\n   *     return document.createElement('div');\n   *   }\n   * });\n   */\n  async createControl(control: MapControl, options?: CreateControlOptions): Promise<C | undefined> {\n    return this.controls.createControl(control, options);\n  }\n\n  async createButtonControl(options: ButtonControlOptions): Promise<C | undefined> {\n    return this.controls.createButtonControl(options);\n  }\n\n  async createToggleControl(options: ToggleControlOptions): Promise<(C & ToggleControl) | undefined> {\n    return this.controls.createToggleControl(options);\n  }\n\n  removeControl(control: any) {\n    this.controls.removeControl(control);\n  }\n\n  getControl<K extends keyof MapControls>(control: K, options?: MapControls[K]): C | undefined {\n    return this.controls.getControl<K>(control, options);\n  }\n\n  async addControl<K extends keyof MapControls>(\n    controlDef: K | C,\n    position: ControlPositions,\n    options?: MapControls[K]) {\n\n    return this.controls.addControl<K>(controlDef, position, options);\n  }\n\n  protected _emitStatusEvent(eventName: keyof E, data?: any) {\n    // ugly hack to disable type checking error\n    const _eventName = eventName as keyof WebMapEvents;\n    this._eventsStatus[_eventName] = true;\n    this.emitter.emit(_eventName, data);\n  }\n\n  private async _setupMap() {\n\n    await this.mapAdapter.create(this.options);\n    this._zoomToInitialExtent();\n\n    await this._addLayerProviders();\n    await this._onLoadSync();\n\n    this._emitStatusEvent('build-map', this.mapAdapter);\n    return this;\n  }\n\n  private _zoomToInitialExtent() {\n    if (this._extent) {\n      this.mapAdapter.fit(this._extent);\n    } else if (this.options.bounds) {\n      this.fitBounds(this.options.bounds);\n    } else {\n      const { center, zoom } = this.options;\n      this.setView(center, zoom);\n    }\n  }\n\n  private async _addLayerProviders() {\n    try {\n      for await (const kit of this._starterKits) {\n        if (kit.getLayerAdapters) {\n          const adapters = await kit.getLayerAdapters.call(kit);\n          if (adapters) {\n            for await (const adapter of adapters) {\n              const newAdapter = await adapter.createAdapter(this);\n              if (newAdapter) {\n                this.mapAdapter.layerAdapters[adapter.name] = newAdapter;\n              }\n            }\n          }\n        }\n      }\n    } catch (er) {\n      throw new Error(er);\n    }\n  }\n\n  private async _onLoadSync() {\n    for await (const kit of this._starterKits) {\n      if (kit.onLoadSync) {\n        try {\n          await kit.onLoadSync.call(kit, this);\n        } catch (er) {\n          console.error(er);\n        }\n      }\n    }\n\n  }\n\n  private _addEventsListeners() {\n    // propagate map click event\n    const events: Array<keyof WebMapEvents> = [\n      'click',\n      'zoomstart',\n      'zoom',\n      'zoomend',\n      'movestart',\n      'move',\n      'moveend'\n    ];\n\n    events.forEach((x) => {\n      this.mapAdapter.emitter.on(x, (data) => {\n        this.emitter.emit(x, data);\n      });\n    });\n    this.onMapLoad().then(() => {\n      // universal events\n    });\n  }\n\n}\n","/**\n * @module webmap\n * @preferred\n */\n\nimport { WebMap } from './WebMap';\n\nexport * from './WebMap';\nexport * from './interfaces/BaseTypes';\nexport * from './interfaces/WebMapApp';\nexport * from './interfaces/MapAdapter';\nexport * from './interfaces/DialogAdapter';\nexport * from './interfaces/MapControl';\nexport * from './interfaces/LayerAdapter';\nexport * from './interfaces/StarterKit';\nexport * from './interfaces/RuntimeParams';\nexport * from './interfaces/Events';\n\nexport { WebMap };\nexport default WebMap;\n","import { WebMap, BaseLayerAdapter, LayerAdaptersOptions, Type, AdapterOptions } from '@nextgis/webmap';\nimport { QmsAdapterOptions, QmsBasemap, QmsLayerType, QmsAdapter as QA} from './interfaces';\n\nconst alias: { [key in QmsLayerType]: keyof LayerAdaptersOptions } = {\n  tms: 'TILE',\n};\n\nexport function createQmsAdapter(webMap: WebMap, url = 'https://qms.nextgis.com'): Type<BaseLayerAdapter> {\n\n  class QmsAdapter implements BaseLayerAdapter, QA {\n    qms?: QmsBasemap;\n\n    constructor(public map: any, public options: QmsAdapterOptions) {\n      this.options = options;\n      this.options.baseLayer = true;\n    }\n\n    async addLayer(options: QmsAdapterOptions) {\n\n      // qmsId for request, id for store\n      if (!this.qms && options.qmsId) {\n        this.qms = await loadJSON<QmsBasemap>(url + '/api/v1/geoservices/' + options.qmsId);\n      }\n      const qms = this.qms;\n      if (qms) {\n        const type = alias[qms.type || 'tms'];\n        const webMapAdapter = webMap.mapAdapter.layerAdapters[type];\n        if (webMapAdapter) {\n          if (type === 'TILE') {\n\n            options = {\n              maxZoom: webMap.options.maxZoom,\n              minZoom: webMap.options.minZoom,\n              ...this.options,\n              ...updateQmsOptions(qms)\n            };\n            this.options = options;\n            const adapter = new webMapAdapter(this.map, options);\n            return adapter.addLayer(options);\n          }\n        }\n      }\n    }\n  }\n  return QmsAdapter;\n}\n\nexport function updateQmsOptions(qms: QmsBasemap): AdapterOptions & { url: string } {\n  const protocol = (location.protocol === 'https:' ? 'https' : 'http') + '://';\n  const serviceUrl = qms.url.replace(/^(https?|ftp):\\/\\//, protocol);\n  return {\n    url: serviceUrl,\n    name: qms.name,\n    attribution: qms.copyright_text,\n    maxZoom: qms.z_max,\n    minZoom: qms.z_min\n  };\n}\n\nexport function loadJSON<T = any>(url: string): Promise<T> {\n  return new Promise<T>((resolve, reject) => {\n    const xmlHttp = new XMLHttpRequest();\n    xmlHttp.onreadystatechange = () => {\n      if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {\n        if (xmlHttp.responseText) {\n          try {\n            resolve(JSON.parse(xmlHttp.responseText));\n          } catch (er) {\n            reject(er);\n          }\n        }\n      }\n    };\n    xmlHttp.open('GET', fixUrlStr(url), true); // true for asynchronous\n    xmlHttp.send();\n  });\n}\n\nexport function fixUrlStr(url: string): string {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n","/**\n * @module qms-kit\n */\n\nimport { QmsKit } from './QmsKit';\n\nexport * from './interfaces';\n\nexport { QmsKit };\nexport default QmsKit;\n","/**\n * @module qms-kit\n */\n\nimport WebMap, { StarterKit, Type, BaseLayerAdapter } from '@nextgis/webmap';\nimport { QmsOptions } from './interfaces';\nimport { createQmsAdapter } from './utility';\n\nexport class QmsKit implements StarterKit {\n\n  static utils = {\n    createQmsAdapter\n  };\n\n  options: QmsOptions = {\n    url: 'https://qms.nextgis.com',\n  };\n\n  url: string;\n\n  constructor(options?: QmsOptions) {\n    this.options = { ...this.options, ...options };\n    this.url = this.options.url;\n  }\n\n  getLayerAdapters() {\n    return Promise.resolve([{\n      name: 'QMS',\n      createAdapter: (webmap: WebMap) => Promise.resolve(this._createAdapter(webmap)),\n    }]);\n  }\n\n  private _createAdapter(webMap: WebMap): Type<BaseLayerAdapter> {\n    return createQmsAdapter(webMap, this.url);\n  }\n}\n","import { NgwLayerOptions } from './interfaces';\nimport WebMap, { VectorLayerAdapter, Type, GeoJsonAdapterOptions } from '@nextgis/webmap';\nimport NgwConnector from '@nextgis/ngw-connector';\nimport { GeoJsonObject } from 'geojson';\nimport { toWgs84 } from './utils';\n\nexport async function createGeoJsonAdapter(\n  options: NgwLayerOptions,\n  webMap: WebMap,\n  connector: NgwConnector) {\n\n  const adapter = webMap.mapAdapter.layerAdapters.GEOJSON as Type<VectorLayerAdapter>;\n\n  const geoJsonAdapterCb = connector.makeQuery('/api/resource/{id}/geojson', {\n    id: options.resourceId\n  });\n\n  const onLoad = (data: GeoJsonObject) => {\n    data = toWgs84(data);\n    const geoJsonOptions: GeoJsonAdapterOptions = {\n      data,\n    };\n    if (options.id) {\n      geoJsonOptions.id = options.id;\n    }\n    return WebMap.utils.updateGeojsonAdapterOptions(geoJsonOptions);\n  };\n  return class Adapter extends adapter {\n    async addLayer(_opt: any) {\n      const data = await geoJsonAdapterCb;\n      const opt = onLoad(data);\n      return super.addLayer({ ..._opt, ...opt });\n    }\n    beforeRemove() {\n      geoJsonAdapterCb.cancel();\n    }\n  };\n}\n","import { NgwLayerOptions, ResourceAdapter } from './interfaces';\nimport WebMap, { BaseLayerAdapter, Type, ImageAdapterOptions, TileAdapterOptions } from '@nextgis/webmap';\nimport { getLayerAdapterOptions } from './utils';\nimport { ResourceItem } from '@nextgis/ngw-connector';\n\nexport async function createRasterAdapter(\n  options: NgwLayerOptions,\n  webMap: WebMap,\n  baseUrl: string): Promise<Type<BaseLayerAdapter> | undefined> {\n\n  let adapter = options.adapter || 'IMAGE';\n\n  if (adapter === 'IMAGE') {\n    const layerAdapters = webMap.getLayerAdapters();\n    const isImageAllowed = layerAdapters ? layerAdapters.IMAGE : true;\n    if (!isImageAllowed) {\n      adapter = 'TILE';\n    }\n  }\n  if (adapter === 'IMAGE' || adapter === 'TILE' || adapter === 'MVT') {\n\n    const adapterClass = webMap.mapAdapter.layerAdapters[adapter] as Type<BaseLayerAdapter>;\n\n    return class Adapter extends adapterClass implements ResourceAdapter {\n\n      // options = {};\n      item?: ResourceItem;\n      resourceId = options.resourceId;\n\n      constructor(public map: any, _options: any) {\n        super(map, _options);\n        const opt = getLayerAdapterOptions(options, webMap, baseUrl);\n        if (opt) {\n          if (opt.resourceId) {\n            const layerAdapterOptions: ImageAdapterOptions = { ...opt, resourceId: opt.resourceId };\n            this.options = {...this.options, ...layerAdapterOptions};\n          } else {\n            const tileAdapterOptions: TileAdapterOptions = opt;\n            this.options = {...this.options, ...tileAdapterOptions};\n          }\n        }\n      }\n      addLayer(addOptions: any) {\n        return super.addLayer({...this.options, ...addOptions});\n      }\n\n      async getIdentificationIds() {\n        const id = this.item && this.item.resource.parent.id;\n        if (id) {\n          return [id];\n        }\n      }\n      // beforeRemove() {\n\n      // }\n\n    };\n  } else {\n    throw new Error(adapter + ' not supported yet. Only TILE');\n  }\n}\n","export type SelfFilter<X extends any> = (x: X) => boolean;\nexport type RelationFunction<X extends any> = (x: X) => X | X[] | undefined;\n\nexport function filterIn<F extends any = any>(\n  item: F | F[],\n  filterFunc: SelfFilter<F> = (x: F) => !!x,\n  relationFunc: RelationFunction<F>,\n  _filtered: F[] = []): F[] {\n\n  let children: F[] = [];\n  if (Array.isArray(item)) {\n    children = item;\n  } else {\n    const filter = filterFunc(item);\n    if (filter) {\n      _filtered.push(item);\n    }\n    const relChild = relationFunc(item);\n    if (relChild) {\n      if (Array.isArray(relChild)) {\n        children = relChild;\n      } else {\n        children.push(relChild);\n      }\n    }\n  }\n\n  for (let fry = 0; fry < children.length; fry++) {\n    if (children[fry]) {\n      filterIn(children[fry], filterFunc, relationFunc, _filtered);\n    }\n  }\n\n  return _filtered;\n}\n","/**\n * @module item\n */\n\nimport { Item } from './Item';\nimport { filterIn } from './TreeUtil';\n\nexport class TreeHelper {\n\n  item: Item;\n\n  private _children: Item[] = [];\n  private _parent?: Item;\n\n  constructor(item: Item) {\n    this.item = item;\n  }\n\n  // region Parents\n  setParent(parent: Item) {\n    this._parent = parent;\n  }\n\n  addChild(child: Item) {\n    this._children.push(child);\n  }\n\n  getParent(): Item | undefined {\n    return this._parent;\n  }\n\n  getParents(filterFunc?: (item: Item) => boolean): Item[] {\n    const parent = this.getParent();\n    if (parent) {\n      return filterIn(parent, filterFunc, (x: Item) => x.tree.getParent());\n    }\n    return [];\n  }\n  // endregion\n\n  // region Child\n  find(filterFunc?: (item: Item) => boolean) {\n    return filterIn(this._children, filterFunc, (x) => {\n      return x.tree.getChildren();\n    })[0];\n  }\n\n  // getDescendants shortcut\n  all(filterFunc?: (item: Item) => boolean): any[] {\n    return this.getDescendants(filterFunc);\n  }\n\n  getDescendants(filterFunc?: (item: Item) => boolean): any[] {\n    return filterIn(this._children, filterFunc, (x) => {\n      return x.tree.getChildren();\n    });\n  }\n\n  getChildren(): Item[] {\n    return this._children;\n  }\n}\n","import { Item } from '../Item';\nimport { ItemBasePropertyOptions } from '../interfaces';\n\nlet events;\ntry {\n  events = require('events');\n} catch (er) {\n  // ignore\n}\n// tslint:disable-next-line:variable-name\nconst EventEmitter = events && events.EventEmitter;\n\n// import StrictEventEmitter from 'strict-event-emitter-types/types/src';\n\n// export interface BasePropertyEvents<V, O> {\n//   'change': {value: V, options: O};\n//   'change-tree': {value: V, options: O, item: Item};\n// }\n\nexport abstract class BaseProperty<V = any, O extends ItemBasePropertyOptions<V> = ItemBasePropertyOptions<V>> {\n\n  options: O;\n\n  // emitter: StrictEventEmitter<EventEmitter, BasePropertyEvents<V, O>> = new EventEmitter();\n  emitter = EventEmitter && new EventEmitter();\n  name: string;\n\n  item: Item;\n  protected _blocked: boolean = false;\n  protected _container?: HTMLElement;\n  protected _value?: V;\n\n  private _removeEventsListener?: () => void;\n\n  constructor(name: string, item: Item, options: O) {\n    this.item = item;\n    this.options = Object.assign({}, options);\n    this.name = name;\n    this._value = this.getProperty();\n  }\n\n  getProperty() {\n    if (typeof this.options.getProperty === 'function') {\n      return this.options.getProperty.call(this, this.item);\n    }\n    return this.options.value;\n  }\n\n  getParents(): Item[] {\n    return this.item.tree.getParents() || [];\n  }\n\n  getParent() {\n    return this.item.tree.getParent();\n  }\n\n  isGroup() {\n    const children = this.item.tree.getDescendants();\n    return children.length;\n  }\n\n  isBlocked() {\n    if (this._blocked === undefined) {\n      const parents = this.item.tree.getParents();\n      if (parents) {\n        const isBlocked = parents.find((x: Item) => {\n          const parentProp = x.properties && x.properties.property(this.name);\n          if (parentProp) {\n            return !parentProp.get();\n          }\n          return false;\n        });\n        this._blocked = !!isBlocked;\n      } else {\n        this._blocked = false;\n      }\n    }\n    return this._blocked;\n  }\n\n  set(value?: V, options?: O) {\n    this._value = this._prepareValue(value);\n\n    this.update(this._value, options);\n    this._fireChangeEvent(this._value, options);\n  }\n\n  // shortcut for getValue\n  get(): V | undefined {\n    return this.getValue();\n  }\n\n  update(value?: V, options?: O) {\n    this._callOnSet(value, options);\n  }\n\n  getContainer() {\n    return this._container;\n  }\n\n  destroy() {\n    if (this._container) {\n      const parentNode = this._container.parentNode;\n      if (parentNode) {\n      parentNode.removeChild(this._container);\n      }\n    }\n    if (this._removeEventsListener) {\n      this._removeEventsListener();\n    }\n  }\n\n  getValue(): V | undefined {\n    return this._value !== undefined ? this._value : this.getProperty();\n  }\n\n  protected _prepareValue(value?: V): V | undefined {\n    return value;\n  }\n\n  protected _callOnSet<W extends V = V>(value?: W, options?: O) {\n    if (this.options.onSet) {\n      this.options.onSet.call(this, value, options, this.item);\n    }\n  }\n\n  protected _fireChangeEvent(value?: V, options?: O) {\n    if (this.emitter) {\n      value = value !== undefined ? value : this.getValue();\n      this.emitter.emit('change', { value, options });\n      const parents = this.item.tree.getParents();\n      parents.forEach((x) => {\n        const prop = x.properties && x.properties.property(this.name);\n        if (prop) {\n          prop.emitter.emit('change-tree', { value, options, item: this.item });\n        }\n      });\n    }\n  }\n}\n","/**\n * @module item\n */\n\nimport { TreeHelper } from './TreeHelper';\nimport { ItemProperties } from './properties/ItemProperties';\nimport { ItemOptions } from './interfaces';\n\nlet events;\ntry {\n  events = require('events');\n} catch (er) {\n  // ignore\n}\n// tslint:disable-next-line:variable-name\nconst EventEmitter = events && events.EventEmitter;\n\nexport class Item<O extends ItemOptions = ItemOptions> {\n\n  options: O = {} as O;\n\n  properties: ItemProperties | undefined;\n  tree: TreeHelper;\n\n  emitter = EventEmitter && new EventEmitter();\n\n  constructor(options?: O) {\n    this.options = {  ...options } as O;\n    this.tree = new TreeHelper(this);\n  }\n\n  initProperties() {\n    this.properties = new ItemProperties(this, this.options.properties);\n  }\n}\n","import { BaseProperty } from './BaseProperty';\nimport { Item } from '../Item';\n\nimport { ICheckOptions } from '../interfaces';\n\ntype VAL = boolean;\n\nexport class CheckProperty\n  <V extends VAL = VAL, O extends ICheckOptions<VAL> =  ICheckOptions<VAL>>\n  extends BaseProperty<VAL, ICheckOptions<VAL>> {\n\n  static options: ICheckOptions = {\n    hierarchy: true,\n    bubble: false,\n    propagation: false,\n    label: 'Toggle',\n    // PropertyContainer: IndicatorContainer\n  };\n\n  constructor(name: string, item: Item, options: O) {\n    super(name, item, {...CheckProperty.options, ...options});\n    this.set(this.get());\n  }\n\n  update(value?: V, options?: O) {\n    if (value) {\n      const bubble = (options && options.bubble) || this.options.bubble;\n      if (bubble) {\n        this.unBlock(options);\n        const parent = this.getParent();\n        const property = parent &&  parent.properties && parent.properties.property(this.name);\n        if (property) {\n          property.set(value, Object.assign({}, options, { bubble: true, propagation: false }));\n        }\n      }\n      if (!this.isBlocked()) {\n        this._turnOn(options);\n      }\n    } else {\n      this._turnOff(options);\n    }\n    const propagation = (options && options.propagation) || this.options.propagation;\n    if (propagation) {\n      this._propagation(value, options);\n    }\n  }\n\n  getHierarchyValue() {\n    return this.get() && this.getParents().every((x) => {\n      const property = x.properties && x.properties.get(this.name);\n      return property && property.get();\n    });\n  }\n\n  _prepareValue(value?: any): V | undefined {\n    return value;\n  }\n\n  _turnOff(options?: O) {\n    if (this.options.turnOff) {\n      this.options.turnOff.call(this, options);\n    }\n    this._callOnSet(false, options);\n    if (this.options.hierarchy && this.isGroup()) {\n      this.blockChilds(options);\n    }\n  }\n\n  _turnOn(options?: O) {\n    if (this.options.turnOn) {\n      this.options.turnOn.call(this, options);\n    }\n    this._callOnSet(true, options);\n    if (this.options.hierarchy && this.isGroup()) {\n      this.unblockChilds(options);\n    }\n  }\n\n  block(options?: O) {\n    this._blocked = true;\n    this._block(options);\n  }\n\n  _block(options?: O) {\n    this._turnOff(options);\n  }\n\n  unBlock(options?: O) {\n    this._blocked = false;\n    if (this.getValue()) {\n      this._unBlock(options);\n    }\n  }\n\n  _unBlock(options?: O) {\n    this._turnOn(options);\n  }\n\n  blockChilds(options?: O) {\n    this.item.tree.getDescendants().forEach((x) => this._blockChild(x, options));\n  }\n\n  unblockChilds(options?: O) {\n    this.item.tree.getChildren().forEach((x) => this._unBlockChild(x, options));\n  }\n\n  _blockChild(item: Item, options?: O) {\n    const prop = item.properties && item.properties.property(this.name) as CheckProperty<V, O>;\n    if (prop && prop.block) {\n      prop.block(options);\n    }\n  }\n\n  _unBlockChild(item: Item, options?: O) {\n    const prop = item.properties && item.properties.property(this.name) as CheckProperty<V, O>;\n    if (prop && prop.unBlock) {\n      prop.unBlock(options);\n    }\n  }\n\n  _propagation(value?: V, options?: O) {\n    if (this.isGroup()) {\n      const children = this.item.tree.getChildren();\n      for (let fry = 0; fry < children.length; fry++) {\n        const child = children[fry];\n        const property = child.properties && child.properties.property(this.name) as CheckProperty<V, O>;\n        if (property) {\n          property.set(value, {\n            ...options, ...{\n              propagation: true,\n              bubble: false,\n            }\n          });\n        }\n      }\n    }\n  }\n}\n","/**\n * @module item\n */\n\nimport { BaseProperty } from './BaseProperty';\nimport { CheckProperty } from './CheckProperty';\nimport { Item } from '../Item';\n\nimport { ItemBasePropertyOptions, Type, ItemPropertyConfig, ItemPropertyTypes } from '../interfaces';\n\nexport class ItemProperties {\n\n  static handlers: { [name: string]: Type<BaseProperty> } = {\n    CheckProperty,\n  };\n\n  options = {};\n\n  private _properties: { [propName: string]: BaseProperty } = {};\n  private _propertiesList: string[];\n\n  constructor(public item: Item, propertiesList?: Array<ItemPropertyConfig<keyof ItemPropertyTypes>>) {\n\n    this._propertiesList = []; // ordered list\n    if (propertiesList) {\n      propertiesList.forEach(this._setPropertyHandler.bind(this));\n    }\n  }\n\n  add(propOpt: ItemPropertyConfig<keyof ItemPropertyTypes>) {\n    this._setPropertyHandler(propOpt);\n  }\n\n  _setPropertyHandler(propOpt: ItemPropertyConfig<keyof ItemPropertyTypes>) {\n    const handlers = ItemProperties.handlers;\n    let handler = propOpt.handler;\n    if (!handler && propOpt.type) {\n      switch (propOpt.type) {\n        case 'boolean':\n          handler = handlers.CheckProperty;\n          break;\n        case 'string':\n          handler = handlers.BaseProperty;\n          break;\n        default:\n          handler = handlers.BaseProperty;\n      }\n    }\n    if (handler && propOpt.name) {\n      const options = { ...propOpt || {} };\n      this._properties[propOpt.name] = new handler(\n        propOpt.name,\n        this.item,\n        options,\n      );\n      this._propertiesList.push(propOpt.name);\n    }\n  }\n\n  update() {\n    this.list().forEach((x) => {\n      x.update();\n    });\n  }\n\n  get(name: string) {\n    const prop = this.property(name);\n    if (prop) {\n      return prop.get();\n    }\n  }\n\n  set<K extends keyof ItemPropertyTypes>(\n    name: string,\n    value: ItemPropertyTypes[K],\n    options?: ItemBasePropertyOptions<ItemPropertyTypes[K]>) {\n    const prop = this.property(name);\n    if (prop) {\n      return prop.set(value, options);\n    }\n  }\n\n  property(name: string) {\n    return this._properties[name];\n  }\n\n  list() {\n    return this._propertiesList.map((x) => this._properties[x]);\n  }\n\n  destroy() {\n    for (const p in this._properties) {\n      if (this._properties.hasOwnProperty(p)) {\n        const prop = this.property(p);\n        if (prop && prop.destroy) {\n          prop.destroy();\n        }\n      }\n    }\n    this._properties = {};\n    this._propertiesList = [];\n  }\n}\n","/**\n * @module item\n */\n\nimport { Item } from './Item';\n\nexport * from './interfaces';\nexport * from './properties/BaseProperty';\nexport * from './properties/CheckProperty';\nexport * from './properties/ItemProperties';\n\nexport { Item };\nexport default Item;\n","/**\n * @module ngw-kit\n */\n\nimport Item, { ItemOptions } from '@nextgis/item';\n\nimport WebMap, { LayerAdaptersOptions, LayerAdapter } from '@nextgis/webmap';\nimport { TreeGroup, TreeLayer } from './interfaces';\nimport { pixelsInMeterWidth, setScaleRatio } from './utils';\n\nexport class WebMapLayerItem extends Item<ItemOptions> {\n  static options: ItemOptions = {\n    properties: [\n      {\n        type: 'boolean',\n        name: 'visibility',\n        getProperty(item?: WebMapLayerItem) {\n          if (item) {\n            if (item.item.item_type === 'group') {\n              return true;\n            } else if (item.item.item_type === 'layer') {\n              return item.item.layer_enabled;\n            } else if (item.item.item_type === 'root') {\n              return true;\n            }\n          }\n          return false;\n        },\n        onSet(value: boolean, options?: any, item?: WebMapLayerItem) {\n          if (item && item.layer && item.item.item_type === 'layer') {\n            if (value) {\n              item.webMap.showLayer(item.layer);\n            } else {\n              item.webMap.hideLayer(item.layer);\n            }\n            item.item.layer_enabled = value;\n          }\n        },\n      }\n    ],\n  };\n\n  item: TreeGroup | TreeLayer;\n  layer?: LayerAdapter;\n\n  constructor(public webMap: WebMap,\n    item: TreeGroup | TreeLayer,\n    options?: ItemOptions,\n    parent?: WebMapLayerItem) {\n\n    super({ ...WebMapLayerItem.options, ...options });\n\n    this.item = item;\n    if (parent) {\n      this.tree.setParent(parent);\n    }\n    this.initProperties();\n    this._init(item);\n  }\n\n  async initItem(item: TreeGroup | TreeLayer) {\n    let newLayer = item._layer;\n    if (item.item_type === 'group' || item.item_type === 'root') {\n      if (item.children && item.children.length) {\n\n        item.children.reverse().sort((a, b) => {\n          if (a.item_type === 'layer' && b.item_type === 'layer') {\n            return b.draw_order_position - a.draw_order_position;\n          }\n          return 0;\n        }).forEach((x) => {\n          const children = new WebMapLayerItem(this.webMap, x, this.options, this);\n          this.tree.addChild(children);\n        });\n      }\n    } else if (item.item_type === 'layer') {\n      const adapter = (item.adapter || item.layer_adapter.toUpperCase()) as keyof LayerAdaptersOptions;\n      const maxZoom = item.layer_max_scale_denom ?\n        this._mapScaleToZoomLevel(item.layer_max_scale_denom) : this.webMap.options.maxZoom;\n      const minZoom = item.layer_min_scale_denom ?\n        this._mapScaleToZoomLevel(item.layer_min_scale_denom) : this.webMap.options.minZoom;\n      const options: any = {\n        maxZoom,\n        minZoom,\n        ...item,\n        headers: this.options.headers,\n      };\n      newLayer = await this.webMap.addLayer(adapter, options);\n    }\n    if (newLayer) {\n      item._layer = newLayer;\n      this.layer = newLayer;\n      if (this.properties && item.item_type === 'layer' && item.layer_enabled) {\n        this.properties.property('visibility').set(true);\n      }\n      const transparency = item.item_type === 'layer' && item.layer_transparency;\n      if (transparency !== undefined) {\n        const opacity = (100 - transparency) / 100;\n        this.webMap.setLayerOpacity(newLayer, opacity);\n      }\n    } else {\n      // this.properties.get('visibility').set(true);\n    }\n  }\n\n  bringToFront() {\n    //\n  }\n\n  fit(): void {\n    if (this.item.item_type === 'layer') {\n      console.log(this.item);\n    }\n  }\n\n  private _mapScaleToZoomLevel(scale: number) {\n    return setScaleRatio(scale);\n  }\n\n  private async _init(item: TreeGroup | TreeLayer) {\n    await this.initItem(item);\n    this.emitter.emit('init');\n  }\n\n}\n","import WebMap, {\n  Type,\n  LayerAdapter,\n  LngLatBoundsArray,\n  MapClickEvent\n} from '@nextgis/webmap';\nimport NgwConnector, { WebmapResource, ResourceItem, FeatureLayersIdentify } from '@nextgis/ngw-connector';\nimport { createAsyncAdapter } from './createAsyncAdapter';\nimport { NgwLayerOptions, WebMapAdapterOptions, IdentifyRequestOptions, ResourceAdapter } from './interfaces';\nimport { WebMapLayerAdapter } from './WebMapLayerAdapter';\n// @ts-ignore\nimport { toWgs84 as WGS84 } from 'reproject';\n// @ts-ignore\nimport { parse } from 'wellknown';\nimport { GeoJsonObject } from 'geojson';\n\nconst epsg = {\n  // tslint:disable-next-line:max-line-length\n  'EPSG:3857': '+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs'\n};\n\nexport function toWgs84(geojson: GeoJsonObject) {\n  return WGS84(geojson, epsg['EPSG:3857'], epsg);\n}\n\nexport function wktToGeoJson(geom: string) {\n  const geojson = parse(geom) as GeoJsonObject;\n  return toWgs84(geojson);\n}\n\nexport function fixUrlStr(url: string) {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n\nexport function updateWmsParams(params: any, resourceId: number) {\n  const { bbox, width, height } = params;\n  return {\n    resource: resourceId,\n    extent: bbox,\n    size: width + ',' + height,\n    timestamp: Date.now(),\n  };\n}\n\nexport function getLayerAdapterOptions(options: NgwLayerOptions, webMap: WebMap, baseUrl: string) {\n  let adapter = options.adapter || 'IMAGE';\n  let url: string;\n  const layerAdapters = webMap.getLayerAdapters();\n  const isImageAllowed = layerAdapters ? layerAdapters.IMAGE : true;\n  if (adapter === 'IMAGE') {\n    if (isImageAllowed) {\n      url = baseUrl + '/api/component/render/image';\n      return {\n        url,\n        resourceId: options.resourceId,\n        headers: options.headers,\n        updateWmsParams: (params: any) => updateWmsParams(params, options.resourceId)\n      };\n    } else {\n      adapter = 'TILE';\n    }\n  }\n  if (adapter === 'MVT') {\n    url = baseUrl + '/api/component/feature_layer/mvt?x={x}&y={y}&z={z}&' +\n    'resource=' + options.resourceId +\n      '&simplification=' + (options.simplification || 0);\n    // url = baseUrl + '/api/resource/' + options.resourceId + '/{z}/{x}/{y}.mvt';\n    return {\n      url\n    };\n  }\n  if (adapter === 'TILE') {\n    url = baseUrl + '/api/component/render/tile?z={z}&x={x}&y={y}&resource=' + options.resourceId;\n    return { url, adapter };\n  }\n}\n\nexport function addNgwLayer(options: NgwLayerOptions,\n  webMap: WebMap,\n  baseUrl: string,\n  connector: NgwConnector): Promise<Type<ResourceAdapter> | undefined> {\n\n  const headers = connector.getAuthorizationHeaders();\n  if (headers) {\n    options.headers = headers;\n  }\n\n  return createAsyncAdapter(options, webMap, baseUrl, connector);\n}\n\nexport function getWebMapExtent(webmap: WebmapResource): LngLatBoundsArray | undefined {\n  const { extent_bottom, extent_left, extent_top, extent_right } = webmap;\n  if (extent_bottom && extent_left && extent_top && extent_right) {\n    const extent: LngLatBoundsArray = [extent_left, extent_bottom, extent_right, extent_top];\n    if (extent[3] > 82) {\n      extent[3] = 82;\n    }\n    if (extent[1] < -82) {\n      extent[1] = -82;\n    }\n    return extent;\n  }\n}\n\nexport function getNgwLayerExtent(id: number, connector: NgwConnector): Promise<LngLatBoundsArray | undefined> {\n  return connector.get('layer.extent', name, { id }).then((resp) => {\n    if (resp) {\n      const { maxLat, maxLon, minLat, minLon } = resp.extent;\n      const extenrArray: LngLatBoundsArray = [minLon, minLat, maxLon, maxLat];\n      return extenrArray;\n    }\n  });\n}\n\nexport async function getNgwResourceExtent(\n  item: ResourceItem, connector: NgwConnector): Promise<LngLatBoundsArray | undefined> {\n  if (item.webmap) {\n    return getWebMapExtent(item.webmap);\n  } else {\n    const resource = item.resource;\n    if (resource.cls.indexOf('style') !== -1) {\n      return connector.get('resource.item', null, {\n        id: resource.parent.id\n      }).then((res) => {\n        return getNgwLayerExtent(res.resource.id, connector);\n      });\n    } else {\n      return getNgwLayerExtent(resource.id, connector);\n    }\n  }\n}\n\ninterface FeatureIdentifyRequestOptions {\n  /**\n   * WKT Polygon geometry\n   */\n  geom: string;\n  srs: 3857;\n  layers: number[];\n}\n\nexport function sendIdentifyRequest(\n  ev: MapClickEvent,\n  options: IdentifyRequestOptions,\n  // webMap: WebMap\n): Promise<FeatureLayersIdentify> {\n\n  // webMap.emitter.emit('start-identify', { ev });\n  const geom = getCirclePoly(ev.latLng.lng, ev.latLng.lat, options.radius);\n\n  // create wkt string\n  const polygon: string[] = [];\n\n  // webMap.addLayer('GEOJSON', {\n  //   visibility: true,\n  //   data: {\n  //     type: 'Feature',\n  //     geometry: {\n  //       type: 'Polygon',\n  //       coordinates: [geom]\n  //     }\n  //   }\n  // })\n\n  geom.forEach(([lng, lat]) => {\n    const [x, y] = degrees2meters(lng, lat);\n    polygon.push(x + ' ' + y);\n  });\n\n  const wkt = `POLYGON((${polygon.join(', ')}))`;\n\n  const layers: number[] = options.layers;\n\n  const data: FeatureIdentifyRequestOptions = {\n    geom: wkt,\n    srs: 3857,\n    layers,\n  };\n\n  return options.connector.post('feature_layer.identify', { data });\n}\n\nconst d2r = Math.PI / 180; // degrees to radians\nconst r2d = 180 / Math.PI; // radians to degrees\nconst earthsradius = 3963; // 3963 is the radius of the earth in miles\n\nexport function getCirclePoly(lng: number, lat: number, radius = 10, points = 6) {\n\n  // find the radius in lat/lon\n  const rlat = (radius / earthsradius) * r2d;\n  const rlng = rlat / Math.cos(lat * d2r);\n\n  const extp = [];\n  for (let i = 0; i < points + 1; i++) {// one extra here makes sure we connect the\n\n    const theta = Math.PI * (i / (points / 2));\n    const ex = lng + (rlng * Math.cos(theta)); // center a + radius x * cos(theta)\n    const ey = lat + (rlat * Math.sin(theta)); // center b + radius y * sin(theta)\n    extp.push([ex, ey]);\n  }\n\n  // add the circle to the map\n  return extp;\n}\n\nexport function degrees2meters(lng: number, lat: number): [number, number] {\n  const x = lng * 20037508.34 / 180;\n  let y = Math.log(Math.tan((90 + lat) * Math.PI / 360)) / (Math.PI / 180);\n  y = y * 20037508.34 / 180;\n  return [x, y];\n}\n\ninterface ExtendWebMapLayerAdapterOptions {\n  webMap: WebMap;\n  connector: NgwConnector;\n  baseUrl?: string;\n}\n\nexport function extendWebMapLayerAdapter(opt: ExtendWebMapLayerAdapterOptions): Type<WebMapLayerAdapter> {\n  class A extends WebMapLayerAdapter {\n    constructor(map: any, options: WebMapAdapterOptions) {\n      options = { ...opt, ...options };\n      super(map, options);\n    }\n  }\n  return A;\n}\n\nlet _pixelsInMeter: number;\n\nexport function pixelsInMeterWidth() {\n  if (_pixelsInMeter === undefined) {\n    const div = document.createElement('div');\n    div.style.cssText = 'position: absolute;  left: -100%;  top: -100%;  width: 100cm;';\n    document.body.appendChild(div);\n    const px = div.offsetWidth;\n    document.body.removeChild(div);\n    _pixelsInMeter = px;\n  }\n  return _pixelsInMeter;\n}\n\nexport function applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach((baseCtor) => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n      const descriptor = Object.getOwnPropertyDescriptor(baseCtor.prototype, name);\n      if (descriptor) {\n        Object.defineProperty(derivedCtor.prototype, name, descriptor);\n      }\n    });\n  });\n}\n\n// Returns width of map in meters on specified latitude.\nexport function getMapWidthForLanInMeters(lat: number): number {\n  return 6378137 * 2 * Math.PI * Math.cos(lat * Math.PI / 180);\n}\n\nexport function getZoomFromScale(scale: number) {\n  return Math.log(scale / 256) / Math.LN2;\n}\n\nexport function setScaleRatio(scale: number) {\n\n  // TODO: get real center\n  // webmap does not contain center yet\n  const center = [104, 45]; // this.webMap.getCenter();\n  if (center) {\n    const centerLat = center[1];\n    const crsScale = pixelsInMeterWidth() * getMapWidthForLanInMeters(centerLat) / scale;\n    const zoom = getZoomFromScale(crsScale);\n    return zoom;\n  }\n  return Math.round(Math.log(591657550.500000 / (scale / 2)) / Math.log(2));\n\n}\n","import WebMap, { LngLatBoundsArray, MapClickEvent } from '@nextgis/webmap';\nimport { ResourceItem, CancelablePromise } from '@nextgis/ngw-connector';\nimport {\n  fixUrlStr,\n  getLayerAdapterOptions,\n  updateWmsParams,\n  sendIdentifyRequest,\n  getWebMapExtent\n} from './utils';\nimport { WebMapLayerItem } from './WebMapLayerItem';\nimport { ItemOptions } from '@nextgis/item';\n\nimport StrictEventEmitter from 'strict-event-emitter-types';\nimport { EventEmitter } from 'events';\n\nimport {\n  TreeGroup,\n  TreeLayer,\n  NgwLayerAdapterType,\n  WebMapAdapterOptions,\n  WebMapLayerAdapterEvents,\n  ResourceAdapter\n} from './interfaces';\n\nexport class WebMapLayerAdapter implements ResourceAdapter {\n\n  layer?: WebMapLayerItem;\n\n  /**\n   * Radius for searching objects in pixels\n   */\n  pixelRadius = 10; // webmapSettings.identify_radius,\n  resourceId!: number;\n  readonly emitter: StrictEventEmitter<EventEmitter, WebMapLayerAdapterEvents> = new EventEmitter();\n  private response?: ResourceItem;\n  private _webmapLayersIds?: number[];\n\n  private $$onMapClick?: (ev: MapClickEvent) => void;\n\n  constructor(public map: any, public options: WebMapAdapterOptions) {\n    const r = options.resourceId;\n    if (Array.isArray(r)) {\n      this.resourceId = r[0];\n      this.options.id = r[1];\n    } else {\n      this.resourceId = r;\n    }\n\n    if (!this.resourceId) {\n      throw new Error('NGW `resourceId` is not defined');\n    }\n  }\n\n  async addLayer(options: WebMapAdapterOptions): Promise<any> {\n    this.options = { ...this.options, ...options };\n\n    this.layer = await this._getWebMapLayerItem();\n\n    if (this.options.identification) {\n      const ids = await this._getWebmapIds();\n      if (ids) {\n        this._webmapLayersIds = ids;\n        this.$$onMapClick = (ev: MapClickEvent) => this._onMapClick(ev);\n        this.options.webMap.emitter.on('click', this.$$onMapClick);\n      }\n    }\n    return this.layer;\n  }\n\n  removeLayer() {\n    const mapAdapter = this.options.webMap.mapAdapter;\n    if (this.$$onMapClick) {\n      this.options.webMap.emitter.off('click', this.$$onMapClick);\n    }\n    this.getDependLayers().forEach((x) => {\n      // @ts-ignore Update x interface\n      mapAdapter.removeLayer(x.layer.layer);\n    });\n    this.$$onMapClick = undefined;\n    delete this.options;\n    delete this.layer;\n    delete this.response;\n    delete this._webmapLayersIds;\n\n  }\n\n  showLayer() {\n    if (this.layer && this.layer.properties) {\n      this.layer.properties.property('visibility').set(true);\n    }\n  }\n\n  hideLayer() {\n    if (this.layer && this.layer.properties) {\n      this.layer.properties.property('visibility').set(false);\n    }\n  }\n\n  getExtent(): LngLatBoundsArray | undefined {\n    const webmap = this.response && this.response.webmap;\n    if (webmap) {\n      return getWebMapExtent(webmap);\n    }\n  }\n\n  getDependLayers(): Array<TreeGroup | TreeLayer> {\n    return (this.layer && this.layer.tree.getDescendants()) || [];\n  }\n\n  async getIdentificationIds() {\n    if (this._webmapLayersIds) {\n      return this._webmapLayersIds;\n    } else {\n      return await this._getWebmapIds();\n    }\n  }\n\n  private async _getWebMapLayerItem(): Promise<WebMapLayerItem | undefined> {\n    if (this.resourceId) {\n      const webmap = await this.getWebMapConfig(this.resourceId);\n      if (webmap && webmap.root_item) {\n        return new Promise<WebMapLayerItem>((resolve) => {\n          const options: ItemOptions = {};\n          if (this.options.connector && this.options.connector.options.auth) {\n            const headers = this.options.connector.getAuthorizationHeaders();\n            if (headers) {\n              options.headers = headers;\n            }\n          }\n\n          const layer = new WebMapLayerItem(this.options.webMap, webmap.root_item, options);\n          layer.emitter.on('init', () => resolve(layer));\n        });\n      }\n    }\n  }\n\n  private async getWebMapConfig(id: number) {\n    try {\n      const data = await this.options.connector.get('resource.item', null, { id });\n      this.response = data;\n      const webmap = data.webmap;\n      if (webmap) {\n        this._updateItemsParams(webmap.root_item, this.options.webMap);\n        return webmap;\n      } else {\n        // TODO: resource is no webmap\n      }\n    } catch (er) {\n      throw er;\n    }\n  }\n\n  private _updateItemsParams(item: TreeGroup | TreeLayer, webMap: WebMap) {\n    if (item) {\n      if (item.item_type === 'group' || item.item_type === 'root') {\n        if (item.children) {\n          item.children = item.children.map((x) => this._updateItemsParams(x, webMap));\n        }\n      } else if (item.item_type === 'layer') {\n        const url = fixUrlStr(this.options.baseUrl + '/api/component/render/image');\n        const resourceId = item.layer_style_id;\n        item.url = url;\n        item.resourceId = resourceId;\n        item.updateWmsParams = (params) => updateWmsParams(params, resourceId);\n        item = {\n          ...item,\n          ...getLayerAdapterOptions({\n            adapter: item.layer_adapter.toUpperCase() as NgwLayerAdapterType,\n            resourceId,\n          }, webMap, this.options.baseUrl)\n        };\n      }\n    }\n    return item;\n  }\n\n  private async _getWebmapIds(): Promise<number[] | undefined> {\n    const webMapItem = this.layer;\n    if (webMapItem && webMapItem.item.item_type === 'root') {\n      const layers = webMapItem.item.children;\n      const promises: Array<CancelablePromise<any>> = [];\n      layers.forEach((x) => {\n        if (x.item_type === 'layer') {\n          const id = x.layer_style_id;\n          const promise = this.options.connector.get('resource.item', {}, { id }).then((y) => {\n            if (y) {\n              const parentId = Number(y.resource.parent.id);\n              x.parentId = parentId;\n              return parentId;\n            }\n          });\n          promises.push(promise);\n        }\n      });\n      const ids = await Promise.all(promises);\n      return ids.filter((x) => x !== undefined);\n      // const id = item['layer_style_id']\n    }\n  }\n\n  // options is temporal to set list of layers id, because layers id is not item parameter now\n  private _sendIdentifyRequest(ev: MapClickEvent, options: { layers?: string[] } = {}) {\n    if (this._webmapLayersIds) {\n      return sendIdentifyRequest(ev, {\n        layers: this._webmapLayersIds,\n        connector: this.options.connector,\n        radius: this.pixelRadius\n      }).then((resp) => {\n        this.emitter.emit('identify', { ev, data: resp });\n        return resp;\n      });\n    }\n  }\n\n  private _onMapClick(ev: MapClickEvent) {\n    this._sendIdentifyRequest(ev);\n  }\n}\n","import NgwConnector, { ResourceItem } from '@nextgis/ngw-connector';\nimport { getNgwResourceExtent } from './utils';\n\nexport class NgwResource {\n  item!: ResourceItem;\n  connector!: NgwConnector;\n\n  async getExtent() {\n    if (this.item) {\n      return getNgwResourceExtent(this.item, this.connector);\n    }\n  }\n}\n","import NgwConnector, { ResourceCls, ResourceItem } from '@nextgis/ngw-connector';\nimport WebMap, { LayerAdapter, Type } from '@nextgis/webmap';\nimport QmsKit, { QmsAdapter } from '@nextgis/qms-kit';\nimport { NgwLayerOptions, ResourceAdapter } from './interfaces';\n\nimport { createGeoJsonAdapter } from './createGeoJsonAdapter';\nimport { createRasterAdapter } from './createRasterAdapter';\nimport { createWebMapAdapter } from './createWebMapAdapter';\nimport { applyMixins } from './utils';\nimport { NgwResource } from './NgwResource';\n\nconst styles: ResourceCls[] = ['mapserver_style', 'qgis_vector_style', 'raster_style'];\n\nexport async function createAsyncAdapter(\n  options: NgwLayerOptions,\n  webMap: WebMap,\n  baseUrl: string,\n  connector: NgwConnector): Promise<Type<ResourceAdapter> | undefined> {\n\n  let adapter: Promise<Type<LayerAdapter> | undefined> | undefined;\n  let item: ResourceItem;\n  try {\n    item = await connector.get('resource.item', null, { id: options.resourceId });\n    if (item.webmap) {\n      adapter = createWebMapAdapter(options, webMap, baseUrl, connector);\n    } else if (styles.indexOf(item.resource.cls) !== -1) {\n      if (options.adapter === 'GEOJSON') {\n        const parentOptions: NgwLayerOptions = {\n          ...options,\n          resourceId: item.resource.parent.id,\n        };\n        adapter = createGeoJsonAdapter(parentOptions, webMap, connector);\n      } else {\n        adapter = createRasterAdapter(options, webMap, baseUrl);\n      }\n    } else if (item.resource.cls === 'vector_layer') {\n      if (options.adapter && options.adapter !== 'GEOJSON') {\n        if (options.adapter === 'MVT') {\n          adapter = createRasterAdapter(options, webMap, baseUrl);\n          // adapter = Promise.resolve(webMap.mapAdapter.layerAdapters.MVT);\n        } else {\n          return createAdapterFromFirstStyle(item.resource.id, options, webMap, baseUrl, connector);\n        }\n      } else {\n        adapter = createGeoJsonAdapter(options, webMap, connector);\n      }\n    } else if (item.resource.cls === 'raster_layer') {\n      return createAdapterFromFirstStyle(item.resource.id, options, webMap, baseUrl, connector);\n    } else if (item.basemap_layer && item.basemap_layer.qms) {\n      adapter = Promise.resolve(QmsKit.utils.createQmsAdapter(webMap));\n      adapter.then((x) => {\n        if (x && item.basemap_layer && item.basemap_layer.qms) {\n          const qms = JSON.parse(item.basemap_layer.qms);\n          x.prototype.qms = qms;\n          x.prototype.baseLayer = true;\n        }\n      });\n    }\n  } catch (er) {\n    if (options.adapter === 'GEOJSON') {\n      adapter = createGeoJsonAdapter(options, webMap, connector);\n    } else {\n      adapter = createRasterAdapter(options, webMap, baseUrl);\n    }\n  }\n  if (adapter) {\n    return adapter.then((x) => {\n      if (x) {\n        const resourceAdapter = x as Type<ResourceAdapter>;\n        resourceAdapter.prototype.item = item;\n        resourceAdapter.prototype.connector = connector;\n\n        applyMixins(resourceAdapter, [NgwResource]);\n\n        return resourceAdapter;\n      }\n    });\n  }\n}\n\nasync function createAdapterFromFirstStyle(\n  parent: number,\n  options: NgwLayerOptions,\n  webMap: WebMap,\n  baseUrl: string,\n  connector: NgwConnector) {\n  const childrenStyles = await connector.get('resource.collection', null, { parent });\n  const firstStyle = childrenStyles && childrenStyles[0];\n  if (firstStyle) {\n    return createAsyncAdapter(\n      { ...options, resourceId: firstStyle.resource.id },\n      webMap, baseUrl, connector\n    );\n  }\n}\n","import { NgwLayerOptions } from './interfaces';\nimport WebMap, { Type } from '@nextgis/webmap';\nimport NgwConnector from '@nextgis/ngw-connector';\nimport { WebMapLayerAdapter } from './WebMapLayerAdapter';\n\nexport async function createWebMapAdapter(\n  options: NgwLayerOptions,\n  webMap: WebMap,\n  baseUrl: string,\n  connector: NgwConnector): Promise<Type<WebMapLayerAdapter>> {\n\n  return class Adapter extends WebMapLayerAdapter {\n\n    constructor(map: any) {\n      super(map, {\n        webMap,\n        resourceId: options.resourceId,\n        baseUrl,\n        connector\n      });\n    }\n\n    // async addLayer(_opt: any) {\n    //   const data = await geoJsonAdapterCb;\n    //   const opt = onLoad(data);\n    //   return super.addLayer({ ..._opt, ...opt });\n    // }\n    // beforeRemove() {\n    //   geoJsonAdapterCb.cancel();\n    // }\n  };\n}\n","/**\n * @module ngw-kit\n */\n\nimport { NgwKit } from './NgwKit';\n\nexport * from './interfaces';\nexport * from './WebMapLayerAdapter';\nexport * from './WebMapLayerItem';\n\nexport { NgwKit };\nexport default NgwKit;\n","/**\n * @module ngw-kit\n */\n\nimport NgwConnector from '@nextgis/ngw-connector';\nimport WebMap, { StarterKit, Type } from '@nextgis/webmap';\nimport {\n  toWgs84,\n  getNgwResourceExtent,\n  sendIdentifyRequest,\n  pixelsInMeterWidth,\n  updateWmsParams,\n  wktToGeoJson,\n  getLayerAdapterOptions,\n  addNgwLayer,\n  extendWebMapLayerAdapter\n} from './utils';\n\nimport { NgwKitOptions, WebMapAdapterOptions } from './interfaces';\nimport { WebMapLayerAdapter } from './WebMapLayerAdapter';\n\nexport class NgwKit implements StarterKit {\n\n  static utils = {\n    toWgs84,\n    wktToGeoJson,\n    addNgwLayer,\n    getNgwResourceExtent,\n    sendIdentifyRequest,\n    pixelsInMeterWidth\n  };\n\n  static updateWmsParams = updateWmsParams;\n\n  static getLayerAdapterOptions = getLayerAdapterOptions;\n\n  static addNgwLayer = addNgwLayer;\n\n  url: string;\n  connector: NgwConnector;\n  webMap?: WebMap;\n\n  constructor(public options: NgwKitOptions) {\n\n    if (this.options.baseUrl) {\n      this.url = this.options.baseUrl;\n    } else {\n      throw new Error('url is not defined');\n    }\n    this.connector = new NgwConnector({ baseUrl: this.url, auth: this.options.auth });\n  }\n\n  async onLoadSync(webMap: WebMap) {\n    if (this.options.resourceId && this.options.baseUrl) {\n      // TODO: resources from array\n      const resourceIds = [this.options.resourceId];\n\n      if (resourceIds.length) {\n        for (const r of resourceIds) {\n          const options: WebMapAdapterOptions = {\n            resourceId: r,\n            connector: this.connector,\n            baseUrl: this.options.baseUrl,\n            webMap\n          };\n          const layer = await webMap.addLayer(WebMapLayerAdapter, {\n            visibility: true,\n            fit: true,\n            identification: this.options.identification,\n            pixelRadius: this.options.pixelRadius,\n            ...options\n          }) as WebMapLayerAdapter;\n        }\n      }\n    }\n  }\n\n  getLayerAdapters() {\n    return Promise.resolve([this._getLayerAdapter()]);\n  }\n\n  private _getLayerAdapter() {\n    return {\n      name: 'WEBMAP',\n      createAdapter: (webmap: WebMap) => Promise.resolve(this._createAdapter(webmap)),\n    };\n  }\n\n  private _createAdapter(webMap: WebMap): Type<WebMapLayerAdapter> {\n    const connector = this.connector;\n    const baseUrl = this.options.baseUrl;\n    return extendWebMapLayerAdapter({\n      webMap, connector, baseUrl\n    });\n  }\n\n}\n","/**\n * @module icons\n */\n\n// tslint:disable:max-line-length\nimport { IconOptions as WebmapIcoOptions } from '@nextgis/webmap';\n\nconst svgPath: { [name: string]: string | GetPathCallback } = {\n  brill: '<path d=\"m6 0-5 6 5 6 5-6z\"/>',\n  circle: '<circle cx=\"6\" cy=\"6\" r=\"6\"/>',\n  rect: '<rect width=\"12\" height=\"12\"/>',\n  marker: '<path d=\"m6 0c-1.85 0-4 1.19-4 4.22 0 2.05 3.08 6.59 4 7.78 0.821-1.19 4-5.62 4-7.78 0-3.03-2.15-4.22-4-4.22z\"/>',\n  cross: '<path d=\"M 2.4,12 6,8.4 9.6,12 12,9.6 8.4,6 12,2.4 9.6,0 6,3.6 2.4,0 0,2.4 3.6,6 0,9.6 Z\"/>',\n  star: '<path d=\"m6 0.25 1.71 4.18 4.29-1.04e-4 -3.43 3.14 0.857 4.18-3.43-3.14-3.43 3.14 0.857-4.18-3.43-3.14 4.29-0.209z\"/>',\n  triangle: '<path d=\"m12 11.7h-12l6-11.2z\"/>',\n  plus: '<path d=\"m7.5 12v-4.5h4.5v-3h-4.5v-4.5h-3v4.5h-4.5v3h4.5v4.5z\"/>',\n  minus: '<path d=\"m12 7.5v-3h-12v3z\"/>',\n  asterisk: '<path d=\"m7.59 12v-3.27l2.83 1.64 1.58-2.74-2.85-1.64 2.83-1.64-1.56-2.74-2.83 1.64v-3.24h-3.17v3.24l-2.85-1.64-1.57 2.74 2.84 1.64-2.84 1.64 1.57 2.74 2.85-1.64v3.27z\"/>',\n};\n\nexport interface IconOptions {\n  shape?: 'circle' | 'brill' | 'rect' | 'marker' | 'star' | 'asterisk' | 'triangle' | 'plus' | 'minus';\n  color?: string;\n  size?: number;\n  stroke?: number;\n  strokeColor?: string;\n  rotate?: number;\n}\n\nconst STROKE = 0.8;\n\nfunction insertSvg(width: number, height: number, stroke = 0, content?: string) {\n  const s = stroke / 2;\n  const svg = `<svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"${width}\"\n    height=\"${height}\"\n    viewBox=\"-${s} -${s} ${width + stroke} ${height + stroke}\"\n  >${content}</svg>`;\n  const oParser = new DOMParser();\n  const oDOM = oParser.parseFromString(svg, 'image/svg+xml');\n  return oDOM.documentElement;\n}\n\ntype GetPathCallback = (opt?: IconOptions) => string;\n\nexport function getIcon(opt: IconOptions = {}): WebmapIcoOptions {\n  // default values\n  const shape = opt.shape || 'circle';\n  const color = opt.color || 'blue';\n  const strokeColor = opt.strokeColor || 'white';\n  const size = opt.size || 12;\n\n  const anchor = size / 2;\n  const defSize = 12;\n  const stroke = typeof opt.stroke === 'number' ? opt.stroke : STROKE;\n  const scale = size / defSize;\n\n  const pathAlias = svgPath[shape] || 'circle';\n\n  const path = typeof pathAlias === 'string' ? pathAlias : pathAlias(opt);\n  const svg = insertSvg(size, size, stroke * scale, path);\n  const fistChild = svg.firstChild as SVGElement;\n\n  const transform = `scale(${scale})`;\n\n  fistChild.setAttribute('fill', color);\n  if (stroke) {\n    fistChild.setAttribute('stroke', strokeColor);\n    fistChild.setAttribute('stroke-width', String(stroke));\n  }\n  fistChild.setAttribute('transform', transform);\n  const s = new XMLSerializer();\n  return {\n    type: 'icon',\n    iconSize: [size, size],\n    iconAnchor: [anchor, anchor],\n    html: s.serializeToString(svg)\n  };\n}\n","import WebMap from '@nextgis/webmap';\nimport { NgwMapEvents } from './interfaces';\n\n/**\n * Decorator to run action only after map is created\n */\nexport function onMapLoad() {\n  return WebMap.decorators.onLoad<NgwMapEvents>('build-map');\n}\n","import { NgwResourceDefinition, NgwLayerOptions } from './interfaces';\nimport { NgwLayerOptionsAdditional } from '@nextgis/ngw-kit';\n\nexport function fixUrlStr(url: string) {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n\nexport function deepmerge(target: any, src: any, mergeArray = false) {\n  const array = Array.isArray(src);\n  let dst: any = array && [] || {};\n\n  if (array) {\n\n    if (mergeArray) {\n      target = target || [];\n      dst = dst.concat(target);\n      src.forEach(function (e: any, i: any) {\n        if (typeof dst[i] === 'undefined') {\n          dst[i] = e;\n        } else if (typeof e === 'object') {\n          dst[i] = deepmerge(target[i], e, mergeArray);\n        } else {\n          if (target.indexOf(e) === -1) {\n            dst.push(e);\n          }\n        }\n      });\n    } else { // Replace array. Do not merge by default\n      dst = src;\n    }\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(function (key) {\n        dst[key] = target[key];\n      });\n    }\n    Object.keys(src).forEach(function (key) {\n      if (typeof src[key] !== 'object' || !src[key]) {\n        dst[key] = src[key];\n      } else {\n        if (typeof target[key] === 'object' && typeof src[key] === 'object') {\n          dst[key] = deepmerge(target[key], src[key], mergeArray);\n        } else {\n          dst[key] = src[key];\n        }\n      }\n    });\n  }\n  return dst;\n}\n\nexport function appendNgwResources(\n  options: NgwLayerOptions[],\n  resource?: NgwResourceDefinition,\n  defOptions?: NgwLayerOptionsAdditional) {\n\n  if (typeof resource === 'number') {\n    options.push({\n      ...defOptions,\n      resourceId: resource,\n    });\n  } else if (Array.isArray(resource)) {\n    const [resourceId, id] = resource;\n    options.push({ ...defOptions, resourceId, id});\n  } else if (typeof resource === 'object') {\n    options.push({ ...defOptions, ...resource});\n  }\n}\n","/**\n * @module ngw-map\n */\nimport StrictEventEmitter from 'strict-event-emitter-types';\nimport { EventEmitter } from 'events';\n\nimport WebMap, {\n  MapAdapter,\n  StarterKit,\n  ControlPositions,\n  MapControls,\n  WebMapEvents,\n  LayerDef,\n  MapClickEvent,\n  LayerAdapter\n} from '@nextgis/webmap';\nimport NgwConnector, { ResourceItem } from '@nextgis/ngw-connector';\nimport QmsKit, { QmsAdapterOptions } from '@nextgis/qms-kit';\nimport NgwKit, { NgwLayerOptions, ResourceAdapter, WebMapLayerItem } from '@nextgis/ngw-kit';\nimport { getIcon } from '@nextgis/icons';\n\nimport { onMapLoad } from './decorators';\nimport { fixUrlStr, deepmerge, appendNgwResources } from './utils';\n\nimport { NgwMapOptions, ControlOptions, NgwMapEvents, NgwLayersMem, NgwLayers } from './interfaces';\n\nconst OPTIONS: NgwMapOptions = {\n  target: 'map',\n  baseUrl: 'http://dev.nextgis.com/sandbox',\n  controls: ['ZOOM', 'ATTRIBUTION'],\n  controlsOptions: {\n    ZOOM: { position: 'top-left' },\n    ATTRIBUTION: {\n      position: 'bottom-right',\n      customAttribution: [\n        '<a href=\"http://nextgis.ru\" target=\"_blank\">©NextGIS</a>',\n      ]\n    }\n  },\n  pixelRadius: 10\n};\n\nfunction prepareWebMapOptions(mapAdapter: MapAdapter, options: NgwMapOptions) {\n  const opt: NgwMapOptions = deepmerge(OPTIONS, options);\n  const kits: StarterKit[] = [new QmsKit()];\n  kits.push(new NgwKit({\n    baseUrl: opt.baseUrl,\n    auth: opt.auth,\n    identification: opt.identification\n  }));\n  return {\n    mapAdapter,\n    starterKits: kits\n  };\n}\n\n/**\n * Base class containing the logic of interaction WebMap with NextGIS services.\n *\n * @example\n * ```javascript\n * import NgwMap from '@nextgis/ngw-map';\n * import MapAdapter from '@nextgis/leaflet-map-adapter';\n * // styles are not included in the leaflet-map-adapter\n * import 'leaflet/dist/leaflet.css';\n *\n * const ngwMap = new NgwMap(new MapAdapter(), {\n *   target: 'map',\n *   qmsId: 487,\n *   baseUrl: 'https://demo.nextgis.com',\n *   webmapId: 3985\n * });\n * ```\n */\nexport class NgwMap<M = any, L = any, C = any> extends WebMap<M, L, C, NgwMapEvents> {\n\n  static utils = { ...WebMap.utils, fixUrlStr, deepmerge };\n  static decorators = { onMapLoad, ...WebMap.decorators };\n  static getIcon = getIcon;\n  static toWgs84 = NgwKit.utils.toWgs84;\n  static wktToGeoJson = NgwKit.utils.wktToGeoJson;\n\n  readonly emitter: StrictEventEmitter<EventEmitter, NgwMapEvents> = new EventEmitter();\n\n  options: NgwMapOptions<C> = {};\n  connector: NgwConnector;\n\n  protected _ngwLayers: NgwLayers = {};\n\n  /**\n   * @param mapAdapter #noapi\n   * @param options\n   */\n  constructor(mapAdapter: MapAdapter, options: NgwMapOptions<C>) {\n    super(prepareWebMapOptions(mapAdapter, options));\n\n    this.options = deepmerge(OPTIONS, options);\n    this.connector = options.connector ||\n      new NgwConnector({ baseUrl: this.options.baseUrl, auth: this.options.auth });\n\n    this._createWebMap().then(() => {\n      const container = this.getContainer();\n      if (container) {\n        container.classList.add('ngw-map-container');\n      }\n      this._addControls();\n    });\n  }\n\n  /**\n   * Pans and zooms the map to the initial position specified in the options\n   */\n  fit() {\n    const { center, zoom, bounds } = this.options;\n    if (center) {\n      this.setCenter(center);\n      if (zoom) {\n        this.setZoom(zoom);\n      }\n    } else if (bounds) {\n      this.fitBounds(bounds);\n    }\n  }\n\n  /**\n   * Organized addition to the map design and controls elements,\n   * calling `control.onAdd(this.webMap.mapAdapter)`\n   * @param control - object with onAdd and onRemove methods\n   *                or a string value indicating the name of the control installed in the map adapter\n   * @param position - position relative to the map angles\n   * @param [options] - initialization parameters if the control is set as a string value\n   *\n   * @example\n   * ```javascript\n   * ngwMap.addControl(new CustomControl(), 'bottom-left');\n   * ngwMap.addControl('ZOOM', 'top-right')\n   * ```\n   */\n  @WebMap.decorators.onLoad<NgwMapEvents>('controls:create')\n  async addControl<K extends keyof MapControls>(\n    controlDef: K | C,\n    position: ControlPositions,\n    options?: MapControls[K]) {\n    return super.addControl(controlDef, position, options);\n  }\n\n  /**\n   * Add raster layer by NGW style id or vector data layer by resource id.\n   * @param options - set layer identification parameters and render method.\n   * @param [adapterOptions] - parameters for the selected adapter\n   *\n   * @example\n   * ```javascript\n   * var ngwMap = new NgwMap({ baseUrl: 'https://demo.nextgis.com', target: 'map' });\n   * // add raster layer resourceId is the style of 4004 layer\n   * ngwMap.addNgwLayer({ resourceId: 4005 });\n   * // add vector data from layer GEOJSON source\n   * ngwMap.addNgwLayer({\n   *   resourceId: 4038,\n   *   adapter: 'GEOJSON',\n   *   adapterOptions: { paint: { color: 'red' } }\n   * });\n   * ```\n   */\n  @onMapLoad()\n  async addNgwLayer(\n    options: NgwLayerOptions): Promise<ResourceAdapter | undefined> {\n\n    if (!options.resourceId) {\n      throw new Error('resourceId is required parameter to add NGW layer');\n    }\n    if (this.options.baseUrl) {\n      try {\n        const adapter = NgwKit.utils.addNgwLayer(options, this, this.options.baseUrl, this.connector);\n\n        const layer = await this.addLayer(adapter, {\n          // TODO: all options into one object\n          ...options,\n          ...options.adapterOptions\n        }) as ResourceAdapter;\n        const id = layer && this.getLayerId(layer);\n        if (layer && id) {\n          this._ngwLayers[id] = { layer, resourceId: options.resourceId };\n\n          if (layer.options.baseLayer) {\n            const visibleLayerBaseLayer = this.getActiveBaseLayer();\n            if (visibleLayerBaseLayer) {\n              return layer;\n            }\n          }\n\n          this.showLayer(layer);\n          if (options.fit && layer.getExtent) {\n            const extent = await layer.getExtent();\n            if (extent) {\n              this.fitBounds(extent);\n            }\n          }\n        }\n\n        return layer;\n      } catch (er) {\n        console.error('can\\'t add ngw layer', er);\n      }\n    }\n  }\n\n  async getNgwLayers(): Promise<NgwLayers> {\n    await this.onLoad();\n    return this._ngwLayers;\n  }\n\n  async getNgwLayerByResourceId(id: number): Promise<LayerAdapter | undefined> {\n    for (const n in this._ngwLayers) {\n      if (this._ngwLayers.hasOwnProperty(n)) {\n        const mem = this._ngwLayers[n];\n        if (mem.resourceId === id) {\n          return mem && mem.layer;\n        } else if (mem.layer.getIdentificationIds) {\n          const ids = await mem.layer.getIdentificationIds();\n          if (ids && ids.some((x) => x === id)) {\n            return mem.layer;\n          }\n        }\n        if (mem.layer.getDependLayers) {\n          const dependLayers = mem.layer.getDependLayers() as WebMapLayerItem[];\n          const dependFit = dependLayers.find((x) => {\n            return x.item && x.item.parentId === id;\n          });\n          if (dependFit) {\n            return dependFit.layer;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Move map to layer. If the layer is NGW resource, extent will be received from the server\n   * @param layerDef\n   *\n   * @example\n   * ```javascript\n   * const ngwLayer = ngwMap.addNgwLayer({ id: 'ngw_layer_name', resourceId: 4005 });\n   * ngwMap.zoomToLayer(ngwLayer);\n   * ngwMap.zoomToLayer('ngw_layer_name');\n   * ```\n   */\n  async zoomToLayer(layerDef: string | ResourceAdapter) {\n    let id: string | undefined;\n    if (typeof layerDef === 'string' || typeof layerDef === 'number') {\n      id = String(id);\n    } else {\n      id = layerDef.id;\n    }\n    const ngwLayer = id && this._ngwLayers[id];\n    if (ngwLayer) {\n      if (ngwLayer.layer.getExtent) {\n        const extent = await ngwLayer.layer.getExtent();\n        if (extent) {\n          this.fitBounds(extent);\n        }\n      } else {\n        let item: ResourceItem;\n        if (ngwLayer.layer.item) {\n          item = ngwLayer.layer.item;\n        } else {\n          const resourceId = ngwLayer.resourceId;\n          item = await this.connector.get('resource.item', null, { id: resourceId });\n        }\n\n        NgwKit.utils.getNgwResourceExtent(item, this.connector).then((extent) => {\n          if (extent) {\n            this.fitBounds(extent);\n          }\n        });\n      }\n    }\n  }\n\n  onLoad(event: keyof NgwMapEvents = 'ngw-map:create'): Promise<this> {\n    return super.onLoad(event as keyof WebMapEvents);\n  }\n\n  removeLayer(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const layerId = this.getLayerId(layer);\n      if (layerId) {\n        delete this._ngwLayers[layerId];\n      }\n      super.removeLayer(layer);\n    }\n  }\n\n  private async _createWebMap() {\n    await this.create({ ...this.options });\n    if (this.options.qmsId) {\n      let qmsId: number;\n      let qmsLayerName: string | undefined;\n      if (Array.isArray(this.options.qmsId)) {\n        qmsId = this.options.qmsId[0];\n        qmsLayerName = this.options.qmsId[1];\n      } else {\n        qmsId = this.options.qmsId;\n      }\n      const qmsLayerOptions: QmsAdapterOptions = {\n        qmsId,\n      };\n      if (qmsLayerName) {\n        qmsLayerOptions.id = qmsLayerName;\n      }\n\n      await this.addBaseLayer('QMS', qmsLayerOptions).then((layer) => {\n        this.showLayer(layer);\n      });\n    }\n\n    const resources: NgwLayerOptions[] = [];\n    appendNgwResources(resources, this.options.webmapId, { fit: true });\n    if (this.options.resources && Array.isArray(this.options.resources)) {\n      this.options.resources.forEach((x) => {\n        appendNgwResources(resources, x);\n      });\n    }\n\n    for (const r of resources) {\n      await this.addNgwLayer(r);\n    }\n\n    // this.fit();\n    this._emitStatusEvent('ngw-map:create', this);\n\n    this.emitter.on('click', (ev: MapClickEvent) => this._selectFromNgw(ev));\n  }\n\n  private _addControls() {\n    if (this.options.controls) {\n      this.options.controls.forEach((x) => {\n        let controlAdapterName = x;\n        let controlOptions: ControlOptions = {};\n        if (typeof x === 'string' && this.options.controlsOptions) {\n          if (this.options.controlsOptions[x]) {\n            controlOptions = this.options.controlsOptions[x];\n            if (controlOptions.control !== undefined) {\n              controlAdapterName = controlOptions.control;\n            }\n          }\n        }\n        const { position, ...options } = controlOptions;\n        this.addControl(controlAdapterName, position || 'top-left', options);\n      });\n    }\n    this._emitStatusEvent('controls:create');\n  }\n\n  private async _selectFromNgw(ev: MapClickEvent) {\n    const promises: Array<Promise<number[] | undefined>> = [];\n    for (const nl in this._ngwLayers) {\n      if (this._ngwLayers.hasOwnProperty(nl)) {\n        const layer = this._ngwLayers[nl].layer;\n        if (layer.getIdentificationIds && layer.options.selectable) {\n          promises.push(layer.getIdentificationIds());\n        }\n      }\n    }\n    const getIds = await Promise.all(promises);\n    const ids: number[] = [];\n    getIds.forEach((x) => {\n      if (x) {\n        x.forEach((y) => ids.push(y));\n      }\n    });\n    if (ids.length) {\n      const pixelRadius = this.options.pixelRadius || 10;\n      const center = this.getCenter();\n      const zoom = this.getZoom();\n      if (center && zoom) {\n        const metresPerPixel = 40075016.686 * Math.abs(Math.cos(center[1] * 180 / Math.PI)) / Math.pow(2, zoom + 8);\n        // FIXME: understand the circle creation function\n        const radius = pixelRadius * metresPerPixel * 0.0005;\n        return NgwKit.utils.sendIdentifyRequest(ev, {\n          layers: ids,\n          connector: this.connector,\n          radius,\n        }).then((resp) => {\n          this._emitStatusEvent('ngw:select', resp);\n          return resp;\n        });\n      }\n    }\n  }\n}\n","/**\n * @module ngw-map\n */\n\nimport { NgwMap } from './NgwMap';\n\nexport * from '@nextgis/webmap';\nexport * from './interfaces';\n\nexport { NgwMap };\nexport default NgwMap;\n","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=script&lang=ts&\"","import { MapOptions, VectorLayerAdapter } from '@nextgis/webmap';\nimport MapAdapter from '@nextgis/mapboxgl-map-adapter';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n// import MapAdapter from '@nextgis/leaflet-map-adapter';\n// import 'leaflet/dist/leaflet.css';\nimport { Vue, Component, Prop } from 'vue-property-decorator';\n// @ts-ignore\nimport geojsonExtent from '@mapbox/geojson-extent';\nimport config from '../../../config.json';\nimport NgwMap, { NgwMapOptions } from '@nextgis/ngw-map';\nimport { url } from '../../api/ngw';\n\n\nimport { BdMainItem } from '../../api/ngw';\nimport { getIcon, IconOptions } from '@nextgis/icons';\nimport { Feature, FeatureCollection, Point } from 'geojson';\n\nexport interface NgwMapComponentOptions {\n  mapOptions: NgwMapOptions;\n}\n\n@Component\nexport class NgwMapComponent extends Vue {\n\n  @Prop() center: [number, number];\n  @Prop() zoom: number;\n\n  ngwMap: NgwMap;\n\n  ready: boolean = false;\n\n  mapObject: any;\n  layer: VectorLayerAdapter;\n\n  options: NgwMapComponentOptions = {\n    mapOptions: {\n      target: 'map',\n      controlsOptions: {\n        ZOOM: { position: 'top-right' },\n        ATTRIBUTION: { position: 'bottom-right' },\n      }\n    }\n  };\n\n  markers: { [name: string]: boolean } = {};\n  selected: VectorLayerAdapter;\n\n  mounted() {\n    const target = this.$el as HTMLElement;\n    this.createWebMap({ target, center: this.center, zoom: this.zoom }).then(() => {\n      this.ready = true;\n      const items = this.$store.state.bdMain.filtered;\n      if (items && items.length) {\n        const _items = JSON.parse(JSON.stringify(items));\n        this.addMarkers(_items);\n      }\n\n      this.$store.watch((state) => state.bdMain.filtered, (_items) => {\n        _items = JSON.parse(JSON.stringify(_items));\n        this.addMarkers(_items);\n        this.zoomToFiltered();\n      });\n\n      this.$store.watch((state) => state.bdMain.detailItem, (detail: BdMainItem) => {\n        this.setSelected(detail);\n      });\n\n      this.$store.watch((state) => state.app.center, (id: number) => {\n        this.zoomTo(id);\n      });\n    });\n  }\n\n  createWebMap(options?: MapOptions) {\n\n    const mapOptions = { ...JSON.parse(JSON.stringify(this.options.mapOptions)), ...options };\n\n    this.ngwMap = new NgwMap(new MapAdapter(), {\n      baseUrl: url,\n      qmsId: config.qmsId, // 487,\n      // to remove observal\n      ...mapOptions\n    });\n    this.options.mapOptions = mapOptions;\n    return this.ngwMap.onLoad().then((x) => {\n      this.mapObject = this.ngwMap.mapAdapter.map;\n      this.ngwMap.addNgwLayer({ resourceId: config.districtsLayer });\n    });\n  }\n\n  findFirsVueParent(firstVueParent) {\n    let found = false;\n    while (!found) {\n      if (firstVueParent.mapObject === undefined) {\n        firstVueParent = firstVueParent.$parent;\n      } else {\n        found = true;\n      }\n    }\n    return firstVueParent;\n  }\n\n  addMarkers(features: BdMainItem[]) {\n    const collection: FeatureCollection = {\n      type: 'FeatureCollection',\n      features\n    };\n    const data = NgwMap.toWgs84(collection);\n    if (!this.layer) {\n      return this.ngwMap.addGeoJsonLayer({\n        data,\n        paint: (feature) => {\n          return this.getHistoryIcon(feature, { size: 20 });\n        },\n        selectedPaint: (feature) => {\n          return this.getHistoryIcon(feature, { size: 40 });\n        },\n        selectable: true,\n        unselectOnSecondClick: true\n      }).then((layerId) => {\n        const l = this.ngwMap.getLayer(layerId) as VectorLayerAdapter;\n        this.layer = l;\n        this.ngwMap.showLayer(l);\n        this.ngwMap.emitter.on('layer:click', ({ layer, feature, selected }) => {\n          if (layer.id === l.id) {\n            this.$store.dispatch('bdMain/setDetail', selected ? Number(feature.properties.id) : null);\n          }\n        });\n      });\n    } else {\n      this.layer.filter(({ feature }) => {\n        const id = feature.properties.id;\n        return features.some((x) => x.properties.id === id);\n      });\n    }\n\n    return this.layer;\n  }\n\n  zoomTo(id: number) {\n    if (id) {\n      const layers = this.layer && this.layer.getLayers();\n      if (layers && layers.length) {\n        const layer = layers.find((x) => x.feature.properties.id === id);\n        const feature = layer && layer.feature as Feature<Point>;\n        const lngLat = feature && feature.geometry.coordinates as [number, number];\n        if (lngLat) {\n          this.ngwMap.setView(lngLat, 14);\n          // reset zoomTo storage value\n          this.$store.dispatch('app/zoomTo', null);\n        }\n      }\n    }\n  }\n\n  setSelected(item: BdMainItem) {\n    if (item) {\n      this.layer.select(({ feature }) => feature.properties.id === (item && item.id));\n    } else {\n      // unselect all\n      this.layer.unselect();\n    }\n  }\n\n  zoomToFiltered() {\n    if (this.layer) {\n      const features = this.layer.getLayers().filter((x) => {\n        return x.visible;\n      }).map((x) => x.feature);\n      if (features.length) {\n        const extent = geojsonExtent({\n          type: 'FeatureCollection',\n          features\n        });\n        this.ngwMap.fitBounds(extent, { maxZoom: 16 });\n      }\n    }\n  }\n\n  private getHistoryIcon(feature: Feature, options?: IconOptions) {\n\n    const featureStyles = {\n      'водоем': { color: '#0000ff', shape: 'marker' },\n      'ландшафт': { color: '#008000', shape: 'marker' },\n      'памятник': { color: '#ff0000', shape: 'marker' },\n      'строение': { color: '#ffa500', shape: 'marker' },\n      'улица': { color: '#ffff00', shape: 'marker' },\n      'зона': { color: '#bbbbbb', shape: 'marker' },\n      'населенный пункт': { color: '#49423d', shape: 'marker' },\n      'район': { color: '#808080', shape: 'marker' },\n      'другой': { color: '#000000', shape: 'marker' },\n      'метро': { color: '#ffa500', shape: 'brill' },\n      'метро-2': { color: '#ff0000', shape: 'brill' },\n      'другие подземные объекты': { color: '#808080', shape: 'brill' },\n    };\n\n    let style: IconOptions = { color: '#fff', shape: 'marker' };\n    if (feature.properties.type) {\n      const featureType: string = feature.properties.type;\n      const styleId = Object.keys(featureStyles).find((x) => featureType.search(x) !== -1);\n      if (featureStyles[styleId]) {\n        style = featureStyles[styleId];\n      }\n    }\n\n    return getIcon({\n      ...style, ...options\n    });\n  }\n}\n","import { render, staticRenderFns } from \"./NgwMap.vue?vue&type=template&id=7098f862&\"\nimport script from \"./NgwMap.vue?vue&type=script&lang=ts&\"\nexport * from \"./NgwMap.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NgwMap.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7098f862', component.options)\n    } else {\n      api.reload('7098f862', component.options)\n    }\n    module.hot.accept(\"./NgwMap.vue?vue&type=template&id=7098f862&\", function () {\n      api.rerender('7098f862', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/NgwMap/NgwMap.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-form\",\n    {\n      ref: \"form\",\n      staticClass: \"pl-3 pr-3 pt-0 pb-0\",\n      model: {\n        value: _vm.form,\n        callback: function($$v) {\n          _vm.form = $$v\n        },\n        expression: \"form\"\n      }\n    },\n    [\n      _c(\"v-autocomplete\", {\n        attrs: {\n          items: _vm.areas,\n          label: \"Район\",\n          \"no-data-text\": \"Не найдено\"\n        },\n        on: { change: _vm.updateFilter },\n        model: {\n          value: _vm.rayon,\n          callback: function($$v) {\n            _vm.rayon = $$v\n          },\n          expression: \"rayon\"\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemsFilter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemsFilter.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\nimport { BdMainItemProperties } from '../../api/ngw';\n\n@Component\nexport class ItemsFilter extends Vue {\n\n  form = false;\n  years: [number, number] = [1900, 2018];\n  minYear: number = 1900;\n  maxYear: number = 2018;\n  moscow: Array<{ name: string, param: string, value?: boolean }> = [\n    { name: 'дворовая', param: 'mos1' },\n    { name: 'легендарная', param: 'mos2' },\n    { name: 'бездомная', param: 'mos3' },\n    { name: 'подземная', param: 'mos4' },\n    { name: 'церковная', param: 'mos5' },\n    { name: 'субкультурная', param: 'mos6', value: false },\n  ];\n  rayon = 'Все';\n  areas: string[] = ['Все'];\n\n  mounted() {\n\n    this.moscow.forEach((x) => {\n      x.value = x.value !== undefined ? x.value : true;\n    });\n\n    if (this.$store.state.bdMain.items) {\n      this.updateFilterAreas(this.$store.state.bdMain.items);\n    }\n    this.$store.watch((state) => state.bdMain.items, (items) => {\n      this.updateFilterAreas(items);\n    });\n\n  }\n\n  updateFilterAreas(items) {\n    const areas = {};\n    items.forEach((x) => {\n      const prop = x.properties;\n      areas[prop.rayon] = true;\n    });\n    this.areas = this.areas.concat(Object.keys(areas).sort());\n  }\n\n  updateFilter() {\n    const items = this.$store.state.bdMain.items.slice();\n\n    const filtered = items.filter((x) => {\n      const prop: BdMainItemProperties = x.properties;\n\n      if (this.rayon && this.rayon !== 'Все' && prop.rayon !== this.rayon) {\n        return false;\n      }\n      return true;\n    });\n\n    this.$store.dispatch('bdMain/setFilter', filtered);\n\n  }\n\n}\n","import { render, staticRenderFns } from \"./ItemsFilter.vue?vue&type=template&id=39e05881&\"\nimport script from \"./ItemsFilter.vue?vue&type=script&lang=ts&\"\nexport * from \"./ItemsFilter.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib'\nimport { VForm } from 'vuetify/lib'\ninstallComponents(component, {VAutocomplete,VForm})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('39e05881', component.options)\n    } else {\n      api.reload('39e05881', component.options)\n    }\n    module.hot.accept(\"./ItemsFilter.vue?vue&type=template&id=39e05881&\", function () {\n      api.rerender('39e05881', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/ItemsFilter/ItemsFilter.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.detail && _vm.meta\n    ? _c(\n        \"div\",\n        [\n          _vm.photos && _vm.photos.length\n            ? _c(\n                \"div\",\n                [\n                  _vm._l(_vm.photos, function(photo) {\n                    return _c(\n                      \"a\",\n                      {\n                        key: photo.id,\n                        on: {\n                          click: function($event) {\n                            _vm.dialog = true\n                            _vm.bigImgSrc = photo.link_big\n                          }\n                        }\n                      },\n                      [\n                        _c(\"v-img\", {\n                          staticClass: \"grey lighten-2\",\n                          attrs: { src: photo.link_small }\n                        })\n                      ],\n                      1\n                    )\n                  }),\n                  _vm._v(\" \"),\n                  _c(\n                    \"v-dialog\",\n                    {\n                      attrs: {\n                        scrollable: \"\",\n                        \"content-class\": \"photo-dialog\"\n                      },\n                      model: {\n                        value: _vm.dialog,\n                        callback: function($$v) {\n                          _vm.dialog = $$v\n                        },\n                        expression: \"dialog\"\n                      }\n                    },\n                    [\n                      _c(\n                        \"v-btn\",\n                        {\n                          staticClass: \"close-img-dialog-btn\",\n                          attrs: { color: \"info\" },\n                          on: {\n                            click: function($event) {\n                              _vm.dialog = false\n                            }\n                          }\n                        },\n                        [_vm._v(\"\\n          Закрыть\\n        \")]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\"v-img\", {\n                        attrs: { src: _vm.bigImgSrc, contain: \"\" }\n                      })\n                    ],\n                    1\n                  )\n                ],\n                2\n              )\n            : _vm._e(),\n          _vm._v(\" \"),\n          _c(\n            \"v-list\",\n            { attrs: { dense: \"\" } },\n            _vm._l(_vm.meta, function(item) {\n              return _vm.detail[item.value] && (!item.noHide ? _vm.more : true)\n                ? _c(\n                    \"v-list-item\",\n                    { key: item.value, staticClass: \"detail-prop-list pb-3\" },\n                    [\n                      _c(\n                        \"v-list-item-content\",\n                        [\n                          _c(\"v-list-item-sub-title\", [\n                            _vm._v(_vm._s(item.text))\n                          ]),\n                          _vm._v(\" \"),\n                          item.type === \"Story\"\n                            ? _c(\n                                \"span\",\n                                [\n                                  _c(_vm.components[item.type], {\n                                    tag: \"component\",\n                                    attrs: { text: _vm.getText(item) }\n                                  })\n                                ],\n                                1\n                              )\n                            : _c(\"v-list-item-title\", {\n                                domProps: {\n                                  innerHTML: _vm._s(_vm.getText(item))\n                                }\n                              })\n                        ],\n                        1\n                      )\n                    ],\n                    1\n                  )\n                : _vm._e()\n            }),\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"text-xs-center\" },\n            [\n              _vm.needMore\n                ? _c(\n                    \"v-btn\",\n                    {\n                      attrs: { color: \"info\", small: \"\" },\n                      on: {\n                        click: function($event) {\n                          _vm.more = !_vm.more\n                        }\n                      }\n                    },\n                    [\n                      !_vm.more\n                        ? _c(\"span\", [_vm._v(\"Подробнее\")])\n                        : _c(\"span\", [_vm._v(\"Свернуть\")])\n                    ]\n                  )\n                : _vm._e()\n            ],\n            1\n          )\n        ],\n        1\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\nimport { BdMainItemProperties, BdPhotoProperties } from '../../api/ngw';\nimport ShowMoreField from '../ShowMoreField/ShowMoreField.vue';\n\ninterface Alias {\n  text: string;\n  value: string;\n  type: 'NarratorLink';\n  noHide?: boolean;\n}\n\n@Component\nexport class Detail extends Vue {\n\n  url: string = '';\n  more = false;\n  bigImgSrc: string = '';\n  dialog = false;\n\n  components = {\n    Story: ShowMoreField\n  };\n\n  get photos(): BdPhotoProperties[] {\n    const photo = this.$store.state.bdMain.photos.find((x: BdPhotoProperties) => {\n      return x.link_small && (x.id_obj === this.detail.id1);\n    });\n    return photo ? [photo] : [];\n    // return this.$store.state.bdMain.photos.filter((x: BdPhotoProperties) => x.id_obj === this.detail.id1);\n  }\n\n  get detail(): BdMainItemProperties {\n    return this.$store.state.bdMain.detailItem && this.$store.state.bdMain.detailItem.properties;\n  }\n\n  get meta(): Alias[] {\n    return this.$store.state.bdMain.meta;\n  }\n\n  get needMore(): boolean {\n    return this.meta.some((x) => {\n      return !x.noHide ? this.detail[x.value] : true;\n    });\n  }\n\n  getText(alias: Alias) {\n    if (alias.type) {\n      const value = this.detail[alias.value];\n      if (alias.type === 'NarratorLink') {\n        const names = value && this.detail[alias.value].split(',').map((x) => x.trim());\n        const links = this.detail.nar_codes && this.detail.nar_codes.split(',').map((x) => x.trim());\n        return names.map((x, i) => {\n          const link = links ? links[i] || links[0] : '';\n          const href = (this.url + '/' + link).replace(/([^:]\\/)\\/+/g, '$1');\n          return `<a href=\"${href}\">${x}</a>`;\n        }).join(', ');\n      } else if (alias.type === 'Mos') {\n        return value === 1 ? `<i\n          aria-hidden=\"true\"\n          class=\"v-icon material-icons theme--light lighten-1--text\"\n          style=\"color: green;\"\n        >check\n        </i>` : `<i\n          aria-hidden=\"true\"\n          class=\"v-icon material-icons theme--light lighten-1--text\"\n          style=\"color: red;\"\n        >close\n        </i>`;\n      }\n    }\n\n    return this.detail[alias.value];\n\n  }\n}\n","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=0f60746f&\"\nimport script from \"./Detail.vue?vue&type=script&lang=ts&\"\nexport * from \"./Detail.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VDialog } from 'vuetify/lib'\nimport { VImg } from 'vuetify/lib'\nimport { VList } from 'vuetify/lib'\nimport { VListTile } from 'vuetify/lib'\nimport { VListTileContent } from 'vuetify/lib'\nimport { VListTileSubTitle } from 'vuetify/lib'\nimport { VListTileTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VDialog,VImg,VList,VListTile,VListTileContent,VListTileSubTitle,VListTileTitle})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0f60746f', component.options)\n    } else {\n      api.reload('0f60746f', component.options)\n    }\n    module.hot.accept(\"./Detail.vue?vue&type=template&id=0f60746f&\", function () {\n      api.rerender('0f60746f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/Detail/Detail.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"drawer-container\" },\n    [\n      _vm.hasHeaderSlot\n        ? _c(\n            \"div\",\n            { staticClass: \"drawer-titlebar\" },\n            [\n              _c(\n                \"v-toolbar\",\n                [\n                  _c(\n                    \"v-toolbar-title\",\n                    { staticClass: \"drawer-title\" },\n                    [_vm._t(\"header\")],\n                    2\n                  )\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\"v-divider\")\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"drawer-content\" }, [_vm._t(\"default\")], 2),\n      _vm._v(\" \"),\n      _vm.hasFooterSlot ? _c(\"v-footer\", [_vm._t(\"footer\")], 2) : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/ts-loader/index.js??ref--1!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=script&lang=ts&\"","import { Vue, Component, Prop } from 'vue-property-decorator';\n\n@Component\nexport class DrawerContainer extends Vue {\n  @Prop() header: string;\n\n  get hasFooterSlot() {\n    return this.hasSlot('footer');\n  }\n\n  get hasHeaderSlot() {\n    return this.hasSlot('header');\n  }\n\n  hasSlot(name = 'default') {\n    return !!this.$slots[ name ] || !!this.$scopedSlots[ name ];\n  }\n}\n","import { render, staticRenderFns } from \"./DrawerContainer.vue?vue&type=template&id=42acd271&\"\nimport script from \"./DrawerContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./DrawerContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VDivider } from 'vuetify/lib'\nimport { VFooter } from 'vuetify/lib'\nimport { VToolbar } from 'vuetify/lib'\nimport { VToolbarTitle } from 'vuetify/lib'\ninstallComponents(component, {VDivider,VFooter,VToolbar,VToolbarTitle})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('42acd271', component.options)\n    } else {\n      api.reload('42acd271', component.options)\n    }\n    module.hot.accept(\"./DrawerContainer.vue?vue&type=template&id=42acd271&\", function () {\n      api.rerender('42acd271', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/DrawerContainer/DrawerContainer.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [_vm._t(\"default\")], 2)\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","function capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport default (vueElement, leafletElement, props, options?) => {\n  const keys = Object.keys(props);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const setMethodName = 'set' + capitalizeFirstLetter(key);\n    const deepValue = (props[key].type === Object) ||\n      (props[key].type === Array) ||\n      (Array.isArray(props[key].type));\n    if (props[key].custom) {\n      vueElement.$watch(key, (newVal, oldVal) => {\n        vueElement[setMethodName](newVal, oldVal);\n      }, {\n        deep: deepValue\n      });\n    } else if (setMethodName === 'setOptions') {\n      vueElement.$watch(key, (newVal, oldVal) => {\n        leafletElement.options = leafletElement.options || {};\n        leafletElement.options = {...leafletElement.options, ...newVal};\n      }, {\n        deep: deepValue\n      });\n    } else {\n      vueElement.$watch(key, (newVal, oldVal) => {\n        leafletElement[setMethodName](newVal);\n      }, {\n        deep: deepValue\n      });\n    }\n  }\n};\n","export const collectionCleaner = (options) => {\n  const result = {};\n  for (const key in options) {\n    if (options.hasOwnProperty(key)) {\n      const value = options[key];\n      if (value !== null && value !== undefined) {\n        result[key] = value;\n      }\n    }\n  }\n  return result;\n};\n\nexport const optionsMerger = (props, instance) => {\n  const options = instance.options && instance.options.constructor === Object ? instance.options : {};\n  props = props && props.constructor === Object ? props : {};\n  const result = { ...collectionCleaner(options) };\n  props = collectionCleaner(props);\n  const defaultProps = instance.$options.props;\n  for (const key in props) {\n    if (props.hasOwnProperty(key)) {\n      const def = defaultProps[key] ? defaultProps[key].default : Symbol('unique');\n      if (result[key] && def !== props[key]) {\n        console.warn(`${key} props is overriding the value passed in the options props`);\n        result[key] = props[key];\n      } else if (!result[key]) {\n        result[key] = props[key];\n      }\n    }\n  }\n  return result;\n};\n","export default {\n  props: {\n    position: {\n      type: String,\n      default: 'topright'\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  mounted() {\n    this.controlOptions = {\n      position: this.position\n    };\n  },\n  beforeDestroy() {\n    if (this.mapObject) {\n      this.mapObject.remove();\n    }\n  }\n};\n","import { EventEmitter } from 'events';\nimport {ControlPositions} from '@nextgis/webmap';\n\nexport interface PanelOptions {\n  headerText?: string;\n  addClass?: string;\n  position: ControlPositions;\n}\n\nexport class PanelControl {\n\n  element;\n\n  options: PanelOptions;\n\n  emitter = new EventEmitter();\n\n  _header: HTMLElement;\n  _blocked: boolean = false;\n  private _container: HTMLElement;\n  private _body: HTMLElement;\n\n\n  constructor(options?: PanelOptions) {\n    this.options = Object.assign({}, this.options, options);\n    this._header = null;\n    this._body = null;\n    this._container = this._createContainer();\n  }\n\n  onAdd() {\n    return this.element;\n  }\n\n  setElement(el) {\n    this.element = el;\n  }\n\n  onRemove() {\n    this.removeFrom();\n  }\n\n  removeFrom() {\n    const parentNode = this._container && this._container.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(this._container);\n    }\n  }\n\n  updateBody(content: string | HTMLElement) {\n    this._cleanBody();\n    if (typeof content === 'string') {\n      this._body.innerHTML = content;\n    } else if (content instanceof HTMLElement) {\n      this._body.appendChild(content);\n    }\n  }\n\n  hide() {\n    this._container.classList.add('panel-hide');\n    this.emitter.emit('toggle', false);\n  }\n\n  show() {\n    if (!this._blocked) {\n      this._container.classList.remove('panel-hide');\n      this.emitter.emit('toggle', true);\n    }\n  }\n\n  private _cleanBody() {\n    if (this._body) {\n      this._body.innerHTML = '';\n    }\n  }\n\n  private _createContainer() {\n    const element = document.createElement('div');\n    // element.className = 'leaflet-bar leaflet-control';\n    if (this.options.addClass) {\n      this.options.addClass.split('-').forEach((x) => element.classList.add(x));\n    }\n    if (this.options.headerText) {\n      element.appendChild(this._createHeader());\n    }\n    element.appendChild(this._createBody());\n    return element;\n  }\n\n  private _createHeader() {\n    const element = document.createElement('div');\n    element.className = 'panel-header';\n\n    element.innerHTML = this.options.headerText;\n\n    this._header = element;\n    return element;\n  }\n\n  private _createBody() {\n    const element = document.createElement('div');\n    element.className = 'panel-body';\n\n    this._body = element;\n    return element;\n  }\n}\n","import mod from \"-!../../../../node_modules/ts-loader/index.js??ref--1!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/ts-loader/index.js??ref--1!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Panel.vue?vue&type=script&lang=ts&\"","import propsBinder from './utils/propsBinder';\nimport findRealParent from './utils/findRealParent';\nimport { optionsMerger } from './utils/optionsUtils';\nimport Control from './mixins/Control';\nimport { PanelControl, PanelOptions } from './PanelControl';\nimport NgwMap from '@nextgis/ngw-map';\n\nexport const panel = {\n  name: 'LControl',\n  mixins: [Control],\n  mounted() {\n    this.parentContainer = findRealParent(this.$parent);\n    const ngwMap = this.parentContainer.ngwMap as NgwMap;\n    const options = optionsMerger(this.controlOptions, this) as PanelOptions;\n    this.control = new PanelControl(options);\n    this.mapObject = ngwMap.createControl(this.control);\n    propsBinder(this, this.mapObject, this.$options.props);\n    this.control.setElement(this.$el);\n    ngwMap.addControl(this.mapObject, options.position);\n  }\n};\n","export default (firstVueParent) => {\n  let found = false;\n  while (!found) {\n    if (firstVueParent.ngwMap === undefined) {\n      firstVueParent = firstVueParent.$parent;\n    } else {\n      found = true;\n    }\n  }\n  return firstVueParent;\n};\n","import { render, staticRenderFns } from \"./Panel.vue?vue&type=template&id=90301248&\"\nimport script from \"./Panel.vue?vue&type=script&lang=ts&\"\nexport * from \"./Panel.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('90301248', component.options)\n    } else {\n      api.reload('90301248', component.options)\n    }\n    module.hot.accept(\"./Panel.vue?vue&type=template&id=90301248&\", function () {\n      api.rerender('90301248', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/NgwMap/controls/Panel.vue\"\nexport default component.exports","import mod from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\nimport List from './components/List/List.vue';\nimport NgwMap from './components/NgwMap/NgwMap.vue';\nimport ItemsFilter from './components/ItemsFilter/ItemsFilter.vue';\nimport Detail from './components/Detail/Detail.vue';\nimport DrawerContainer from './components/DrawerContainer/DrawerContainer.vue';\nimport { BdMainItemProperties } from './api/ngw';\nimport MapControl from './components/NgwMap/controls/Panel.vue';\nimport { AppPages } from './store/modules/app';\nimport throttle from './store/utils/throttle';\n\n@Component({\n  components: {List, NgwMap, ItemsFilter, Detail, DrawerContainer, MapControl},\n})\nexport class Main extends Vue {\n\n  throtleSave;\n\n  get listSearchText(): string {\n    return this.$store.state.app.listSearchText;\n  }\n\n  set listSearchText(value: string) {\n    this.throtleSave(value);\n  }\n\n  get page(): AppPages {\n    return this.$store.state.app.page;\n  }\n\n  set page(value: AppPages) {\n    this.$store.dispatch('app/setPage', value);\n  }\n\n  get zoomTo(): number {\n    return this.$store.state.app.zoomTo;\n  }\n\n  set zoomTo(value: number) {\n    this.$store.dispatch('app/zoomTo', value);\n  }\n\n  get drawer(): boolean {\n    return this.$store.state.app.drawer;\n  }\n\n  set drawer(value: boolean) {\n    this.$store.dispatch('app/toggleDrawer', value);\n  }\n\n  get items(): BdMainItemProperties[] {\n    return this.$store.state.bdMain.items.map((x) => x.properties);\n  }\n\n  get detail(): BdMainItemProperties {\n    return this.$store.state.bdMain.detailItem;\n  }\n\n  set detail(value: BdMainItemProperties) {\n    this.$store.dispatch('bdMain/setDetail', value);\n  }\n\n  mounted() {\n    this.throtleSave = throttle(this.setListSearchText, 1000, this);\n  }\n\n  created() {\n    this.$store.dispatch('bdMain/getAllItems');\n    this.$store.dispatch('bdMain/getPhotos');\n  }\n\n  setListSearchText(value) {\n    this.$store.dispatch('app/setListSearchText', value);\n  }\n\n}\n","export default function throttle(fn, time, context?) {\n  let lock;\n  let args;\n  let wrapperFn;\n  let later;\n\n  later = function() {\n    // reset lock and call if queued\n    lock = false;\n    if (args) {\n      wrapperFn.apply(context, args);\n      args = false;\n    }\n  };\n\n  wrapperFn = function() {\n    if (lock) {\n      // called too soon, queue to call later\n      args = arguments;\n\n    } else {\n      // call and lock until later\n      fn.apply(context, arguments);\n      setTimeout(later, time);\n      lock = true;\n    }\n  };\n\n  return wrapperFn;\n}\n","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=3ffae6b2&\"\nimport script from \"./Main.vue?vue&type=script&lang=ts&\"\nexport * from \"./Main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VBtn } from 'vuetify/lib'\nimport { VContent } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VItemGroup } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\nimport { VNavigationDrawer } from 'vuetify/lib'\nimport { VProgressCircular } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\ninstallComponents(component, {VApp,VBtn,VContent,VIcon,VItemGroup,VLayout,VNavigationDrawer,VProgressCircular,VTextField})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3ffae6b2', component.options)\n    } else {\n      api.reload('3ffae6b2', component.options)\n    }\n    module.hot.accept(\"./Main.vue?vue&type=template&id=3ffae6b2&\", function () {\n      api.rerender('3ffae6b2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/Main.vue\"\nexport default component.exports","import mod from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/ts-loader/index.js??ref--1!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { Vue, Component } from 'vue-property-decorator';\nimport { AppPages } from './store/modules/app';\nimport AboutComponent from './components/NextGIS/About.vue';\nimport TableComponent from './components/Table/Table.vue';\nimport MainComponent from './Main.vue';\n\n@Component({\n  components: { MainComponent, TableComponent, AboutComponent }\n})\nexport class App extends Vue {\n\n  tableSearch: string = '';\n  pagination: any = null;\n\n  get page(): AppPages {\n    return this.$store.state.app.page;\n  }\n\n  set page(value: AppPages) {\n    this.$store.dispatch('app/setPage', value);\n  }\n\n\n  get pages() {\n    if (this.pagination && (this.pagination.rowsPerPage === null ||\n      this.pagination.totalItems === null)) {\n      return 0;\n    }\n\n    return Math.ceil(this.pagination.totalItems / this.pagination.rowsPerPage);\n  }\n\n  paginationSync(value) {\n    this.pagination = value;\n  }\n}\n","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7ba5bd90&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/artemiy/nextgis/oralhistory/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib'\nimport { VBtn } from 'vuetify/lib'\nimport { VCard } from 'vuetify/lib'\nimport { VDialog } from 'vuetify/lib'\nimport { VFooter } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VPagination } from 'vuetify/lib'\nimport { VSpacer } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\nimport { VToolbar } from 'vuetify/lib'\nimport { VToolbarItems } from 'vuetify/lib'\ninstallComponents(component, {VApp,VBtn,VCard,VDialog,VFooter,VIcon,VPagination,VSpacer,VTextField,VToolbar,VToolbarItems})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/artemiy/nextgis/oralhistory/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7ba5bd90', component.options)\n    } else {\n      api.reload('7ba5bd90', component.options)\n    }\n    module.hot.accept(\"./App.vue?vue&type=template&id=7ba5bd90&\", function () {\n      api.rerender('7ba5bd90', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/App.vue\"\nexport default component.exports","import Vue from 'vue';\n// import VueRouter from 'vue-router';\n// import { router } from './routes';\nimport store from './store';\nimport App from './App.vue';\nimport { version } from '../package.json';\nimport Vuetify from 'vuetify/lib';\nimport 'vuetify/src/stylus/app.styl';\n// import 'material-design-icons-iconfont/dist/material-design-icons.css';\n\nVue.use(Vuetify);\n// Vue.use(VueRouter);\n\nconst app = new Vue({\n  // router,\n  store,\n  render: h => h(App),\n});\napp.$mount('#app');\n\ndeclare global {\n  interface Window {\n    version: string;\n  }\n}\n\nwindow.version = version;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1105c31d\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"48d11e2d\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"de092f2e\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NgwMap.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7b48c236\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"341cfa2f\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawerContainer.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6b7af3b1\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"23e247aa\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/sass-loader/lib/loader.js??ref--7-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\n/* tslint:disable */\n// https://github.com/taylorhakes/promise-polyfill\n// Copyright (c) 2014 Taylor Hakes\n// Copyright (c) 2014 Forbes Lindesay\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n// @ts-ignore\n!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n():\"function\"==typeof define&&define.amd?define(n):n()}(0,function(){\"use strict\";function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e){if(!(this instanceof t))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],u(e,this)}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(f){return void i(n.promise,f)}r(n.promise,o)}else(1===e._state?r:i)(n.promise,e._value)})):e._deferreds.push(n)}function r(e,n){try{if(n===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(n&&(\"object\"==typeof n||\"function\"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if(\"function\"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments)}}(o,n),e)}e._state=1,e._value=n,f(e)}catch(r){i(e,r)}}function i(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var n=0,r=e._deferreds.length;r>n;n++)o(e,e._deferreds[n]);e._deferreds=null}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,r(n,e))},function(e){t||(t=!0,i(n,e))})}catch(o){if(t)return;t=!0,i(n,o)}}var c=setTimeout;t.prototype[\"catch\"]=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof n?n:null,this.promise=t}(e,t,r)),r},t.prototype[\"finally\"]=e,t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&(\"object\"==typeof f||\"function\"==typeof f)){var u=f.then;if(\"function\"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0==--i&&n(r)}catch(c){t(c)}}if(!e||\"undefined\"==typeof e.length)throw new TypeError(\"Promise.all accepts an array\");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f])})},t.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===t?e:new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,t){t(e)})},t.race=function(e){return new t(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t)})},t._immediateFn=\"function\"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e)};var l=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof global)return global;throw Error(\"unable to locate global object\")}();\"Promise\"in l?l.Promise.prototype[\"finally\"]||(l.Promise.prototype[\"finally\"]=e):l.Promise=t});\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".logo {\\n  width: 300px;\\n  vertical-align: middle;\\n  cursor: pointer;\\n}\\n.logo .logo__item--dark,\\n  .logo .logo__item--light {\\n    fill: #aec8e0;\\n    transition: fill .3s;\\n}\\n.logo .logo__item--dark {\\n    fill: rgba(35, 31, 32, 0.685);\\n}\\n.logo .logo__item--light {\\n    fill: rgba(23, 111, 193, 0.747);\\n}\\n.logo:hover .logo__item--dark {\\n    fill: #231F20;\\n}\\n.logo:hover .logo__item--light {\\n    fill: #176FC1;\\n}\\n.logo--mini {\\n  width: 20px;\\n  height: 20px;\\n  left: 10px;\\n  top: 14px;\\n  z-index: 10;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/artemiy/nextgis/oralhistory/src/components/NextGIS/About.vue\"],\"names\":[],\"mappings\":\"AA+CA;EACI,YAAY;EACZ,sBAAsB;EACtB,eAAe;AAAA;AAHnB;;IAOI,aATe;IAUf,oBAAoB;AAAA;AARxB;IAYI,6BAA6B;AAAA;AAZjC;IAeI,+BAA+B;AAAA;AAfnC;IAqBM,aAAa;AAAA;AArBnB;IAwBM,aAAa;AAAA;AAKnB;EACI,WAAW;EACX,YAAY;EACZ,UAAU;EACV,SAAS;EACT,WAAW;AAAA\",\"file\":\"About.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n$dark-blue: #aec8e0;\\n\\n.logo{\\n    width: 300px;\\n    vertical-align: middle;\\n    cursor: pointer;\\n\\n  .logo__item--dark,\\n  .logo__item--light{\\n    fill: $dark-blue;\\n    transition: fill .3s;\\n  }\\n\\n  .logo__item--dark{\\n    fill: rgba(35, 31, 32, 0.685);\\n  }\\n  .logo__item--light{\\n    fill: rgba(23, 111, 193, 0.747);\\n  }\\n\\n\\n  &:hover{\\n    .logo__item--dark{\\n      fill: #231F20;\\n    }\\n    .logo__item--light{\\n      fill: #176FC1;\\n    }\\n  }\\n}\\n\\n.logo--mini{\\n    width: 20px;\\n    height: 20px;\\n    left: 10px;\\n    top: 14px;\\n    z-index: 10;\\n}\\n\"]}]);\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--7-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/lib/loader.js??ref--7-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".v-table__overflow {\\n  overflow-x: inherit;\\n  overflow-y: inherit;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/artemiy/nextgis/oralhistory/src/components/Table/Table.vue\"],\"names\":[],\"mappings\":\"AAkCA;EACE,mBAAmB;EACnB,mBAAmB;AAAA\",\"file\":\"Table.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.v-table__overflow {\\n  overflow-x: inherit;\\n  overflow-y: inherit;\\n}\\n\"]}]);\n"],"sourceRoot":""}