(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(t,e,n){"use strict";var r=n(41);n.n(r).a},152:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,"#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n","",{version:3,sources:["/Users/artemiy/nextgis/oralhistory/src/components/NgwMap/NgwMap.vue"],names:[],mappings:"AAWA;EACE,kBAAkB;EAClB,MAAM;EACN,SAAS;EACT,WAAW;EACX,YAAY;EACZ,WAAW;AAAA",file:"NgwMap.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n"]}])},155:function(t,e,n){"use strict";var r=n(42);n.n(r).a},156:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,".detail-prop-list .v-list__tile {\n  height: auto !important;\n}\n.show-photo-card .v-card__text {\n  padding: 0;\n}\n.photo-dialog {\n  box-shadow: none;\n  max-height: 100% !important;\n  margin: 0 !important;\n}\n.close-img-dialog-btn {\n  position: absolute !important;\n  right: 0;\n  z-index: 500;\n  overflow: visible;\n}\n","",{version:3,sources:["/Users/artemiy/nextgis/oralhistory/src/components/Detail/Detail.vue"],names:[],mappings:"AA2DA;EACE,uBAAsB;AAAA;AAGxB;EACE,UAAU;AAAA;AAGZ;EACE,gBAAgB;EAChB,2BAA2B;EAC3B,oBAAoB;AAAA;AAGtB;EACE,6BAA6B;EAC7B,QAAQ;EACR,YAAY;EACZ,iBAAiB;AAAA",file:"Detail.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.detail-prop-list .v-list__tile {\n  height: auto!important;\n}\n\n.show-photo-card .v-card__text {\n  padding: 0;\n}\n\n.photo-dialog {\n  box-shadow: none;\n  max-height: 100% !important;\n  margin: 0 !important;\n}\n\n.close-img-dialog-btn {\n  position: absolute !important;\n  right: 0;\n  z-index: 500;\n  overflow: visible;\n}\n\n"]}])},165:function(t,e,n){"use strict";var r=n(43);n.n(r).a},166:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,".drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.drawer-titlebar {\n  flex-shrink: 0;\n}\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.drawer-title {\n  width: 100%;\n}\n","",{version:3,sources:["/Users/artemiy/nextgis/oralhistory/src/components/DrawerContainer/DrawerContainer.vue"],names:[],mappings:"AA4BA;EACE,WAAW;EACX,YAAY;EACZ,aAAa;EACb,sBAAsB;AAAA;AAGxB;EAEE,cAAc;AAAA;AAGhB;EACE,YAAY;EACZ,gBAAgB;EAChB,kBAAkB;AAAA;AAGpB;EACE,WACF;AAAA",file:"DrawerContainer.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.drawer-titlebar {\n  // height: 35px;\n  flex-shrink: 0;\n}\n\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.drawer-title {\n  width: 100%\n}\n"]}])},171:function(t,e,n){"use strict";var r=n(44);n.n(r).a},172:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,".drawe-icon.active {\n  -webkit-transform: rotate(-180deg);\n  transform: rotate(-180deg);\n}\n.bottom-button {\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n}\n.bottom-button .v-btn {\n    flex-grow: 1;\n    margin: 0;\n}\n","",{version:3,sources:["/Users/artemiy/nextgis/oralhistory/src/Main.vue"],names:[],mappings:"AAiIA;EAEI,kCAAkC;EAClC,0BAA0B;AAAA;AAI9B;EACE,WAAW;EACX,aAAa;EACb,6BAA6B;AAAA;AAH/B;IAKI,YAAY;IACZ,SAAS;AAAA",file:"Main.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drawe-icon {\n  &.active {\n    -webkit-transform: rotate(-180deg);\n    transform: rotate(-180deg);\n  }\n}\n\n.bottom-button {\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  .v-btn {\n    flex-grow: 1;\n    margin: 0;\n  }\n}\n"]}])},181:function(t,e,n){"use strict";var r=n(45);n.n(r).a},182:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,"* {\n  padding: 0;\n  margin: 0;\n}\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden !important;\n}\n.fullscreen-dialog .dialog-titlebar {\n  flex-shrink: 0;\n}\n.fullscreen-dialog .dialog-body {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: auto;\n}\n","",{version:3,sources:["/Users/artemiy/nextgis/oralhistory/src/App.vue"],names:[],mappings:"AAmDA;EACE,UAAU;EACV,SAAS;AAAA;AAGX;EACE,WAAW;EACX,YAAY;EACZ,2BAA2B;AAAA;AAG7B;EAGI,cAAc;AAAA;AAHlB;EAOI,YAAY;EACZ,gBAAgB;EAChB,gBAAgB;AAAA",file:"App.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n* {\n  padding: 0;\n  margin: 0;\n}\n\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden !important;\n}\n\n.fullscreen-dialog {\n\n  .dialog-titlebar {\n    flex-shrink: 0;\n  }\n\n  .dialog-body {\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: auto;\n  }\n}\n\n"]}])},189:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(73),i=(n(87),function(t,e,n,r){try{t(n(r))}catch(t){e(t)}}),a=function(){function t(t,e){this.onCancel=e,this._canceled=!1,this._promise=new Promise(t)}return t.prototype.then=function(e,n){var r=this,o=new t(function(t,a){r._promise&&r._promise.then(function(n){r._canceled&&o.cancel(),e&&!r._canceled?i(t,a,e,n):t(n)},function(e){r._canceled&&o.cancel(),n&&!r._canceled?i(t,a,n,e):a(e)})},function(){r.cancel()});return o},t.prototype.catch=function(t){return this.then(void 0,t)},t.prototype.cancel=function(t){return this._canceled=!0,t&&this._promise&&this._promise.catch(t),this.onCancel&&this.onCancel(),this._destroy(),this},t.prototype.finally=function(t){return this._promise?this._promise.finally(t):Promise.reject(t)},t.prototype._destroy=function(){this.onCancel=void 0,this._promise=void 0},t}();var s=/\{ *([\w_-]+) *\}/g;function c(t,e){return t.replace(s,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for letiable "+t);return"function"==typeof r&&(r=r(e)),r})}var u=n(15),l=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},p=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},f=function(){function t(t){void 0===t&&(t={}),this.options=t,this.emitter=new u.EventEmitter,this.routeStr="/api/component/pyramid/route",this._loadingQueue={},this._loadingStatus={},this.options.route&&(this.routeStr=this.options.route)}return t.prototype.connect=function(){return l(this,void 0,a,function(){var t,e,n,r=this;return p(this,function(o){switch(o.label){case 0:return this.route?[2,Promise.resolve(this.route)]:[3,1];case 1:return this.options.auth?(t=this.options.auth,e=t.login,n=t.password,e&&n?[4,this.getUserInfo({login:e,password:n})]:[3,3]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.makeQuery(this.routeStr,{},{}).then(function(t){return r.route=t,t})];case 4:return[2,o.sent()]}})})},t.prototype.login=function(t){return l(this,void 0,void 0,function(){return p(this,function(e){return this.logout(),[2,this.getUserInfo(t)]})})},t.prototype.logout=function(){this._rejectLoadingQueue(),this._loadingStatus={},this.options.auth=void 0,this.route=void 0,this.user=void 0},t.prototype.getUserInfo=function(t){var e=this;t&&(this.options.auth=t);var n={headers:this.getAuthorizationHeaders(t)};return this.makeQuery("/api/component/auth/current_user",{},n).then(function(t){return e.user=t,e.emitter.emit("login",t),t}).catch(function(t){throw e.emitter.emit("login:error",t),t})},t.prototype.getAuthorizationHeaders=function(t){var e=this.makeClientId(t);if(e)return{Authorization:"Basic "+e}},t.prototype.makeClientId=function(t){if(t=t||this.options.auth){var e=t.login,n=t.password;return window.btoa(unescape(encodeURIComponent(e+":"+n)))}},t.prototype.request=function(t,e,n){return void 0===e&&(e={}),l(this,void 0,a,function(){var r,o,i,a,s,u,l,f;return p(this,function(p){switch(p.label){case 0:return[4,this.connect()];case 1:if(r=p.sent(),o=r&&r[t]){if(o=o.slice(),i=o.shift(),o.length){for(a={},s=0;s<o.length;s++)if(u=o[s],a[s]="{"+u+"}",void 0===e[u])throw new Error("`"+u+"` url api argument is not specified");i&&(i=c(i,a))}if(e){for(f in l=[],e)e.hasOwnProperty(f)&&-1===o.indexOf(f)&&l.push(f+"="+e[f]);l.length&&(i=i+"?"+l.join("&"))}if(i)return[2,this.makeQuery(i,e,n)];throw new Error("request url is not set")}return[2]}})})},t.prototype.post=function(t,e,n){return(e=e||{}).method="POST",e.nocache=!0,this.request(t,n,e)},t.prototype.get=function(t,e,n){return(e=e||{}).method="GET",e.nocache=!0,this.request(t,n,e)},t.prototype.makeQuery=function(t,e,n){var r=this;if(void 0===n&&(n={}),t=(this.options.baseUrl?this.options.baseUrl:"")+t)return e&&(t=c(t,e)),t=t.replace(/([^:]\/)\/+/g,"$1"),!this._loadingStatus[t]||n.nocache?(this._loadingStatus[t]=!0,this._getJson(t,n).then(function(e){return r._loadingStatus[t]=!1,r._executeLoadingQueue(t,e),e}).catch(function(e){throw r._loadingStatus[t]=!1,r._executeLoadingQueue(t,e,!0),r.emitter.emit("error",e),e})):(this._loadingStatus[t]=!1,new a(function(e,n){r._setLoadingQueue(t,e,n)}));throw new Error("No `url` parameter set for option "+name)},t.prototype._setLoadingQueue=function(t,e,n){this._loadingQueue[t]=this._loadingQueue[t]||{name:t,waiting:[]},this._loadingQueue[t].waiting.push({resolve:e,reject:n,timestamp:new Date})},t.prototype._rejectLoadingQueue=function(){for(var t in this._loadingQueue){if(this._loadingQueue.hasOwnProperty(t))this._loadingQueue[t].waiting.forEach(function(t){t.reject()}),delete this._loadingQueue[t]}},t.prototype._executeLoadingQueue=function(t,e,n){var r=this._loadingQueue[t];if(r){for(var o=0;o<r.waiting.length;o++){var i=r.waiting[o];n?i.reject&&i.reject():i.resolve(e)}r.waiting=[]}},t.prototype._getJson=function(t,e){var n=this,r=[];return new a(function(o,i){n.user&&((e=e||{}).headers=n.getAuthorizationHeaders()),function(t,e,n,r,o){var i;void 0===n&&(n={}),n.method=n.method||"GET",(i=new XMLHttpRequest).open(n.method||"GET",t,!0);var a=function(t){void 0===t&&(t=!1);var n=t?r:e;if(i.responseText)try{n(JSON.parse(i.responseText))}catch(t){r({message:""})}else r({message:""})};i.onreadystatechange=function(){4===i.readyState&&200===i.status||3===i.readyState&&201===i.status?a():3===i.readyState&&400===i.status?a():4===i.readyState&&500===i.status?a():4===i.readyState&&401===i.status?r(i.statusText):4===i.readyState&&r("request error")},i.onerror=function(t){r(t)},i.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;n.onProgress&&n.onProgress(e)}};var s,c=n.headers;if(c)for(var u in c)if(c.hasOwnProperty(u)){var l=c[u];"string"==typeof l&&i.setRequestHeader(u,l)}if(void 0!==n.withCredentials&&(i.withCredentials=n.withCredentials),n.file){if((s=new FormData).append("file",n.file),n.data)for(var p in s)s.hasOwnProperty(p)&&s.append(p,s[p])}else s=n.data?JSON.stringify(n.data):null;o&&o.push(function(){i.abort()}),i.send(s)}(t,o,e,i,r)},function(){r.forEach(function(t){return t()})})},t}(),h=n(26),d=h.baseUrl.replace(/^(https?|ftp):\/\//,("https:"===location.protocol?"https":"http")+"://"),y=new f({baseUrl:d}),v=function(t){y.request("feature_layer.geojson",{id:h.ngwMarkerLayerId,fid:"id"}).then(function(e){e.features.forEach(function(t,e){t.id=t.properties.id}),t(e.features)})},m=function(t){y.request("feature_layer.geojson",{id:h.layerWithPhotos,fid:"id"}).then(function(e){t(e.features.map(function(t){return t.id=t.properties.id,t.properties}))})},b=function(t){t([{text:"Адрес",value:"addr",noHide:!0},{text:"Название объекта",value:"name",noHide:!0},{text:"Статус объекта",value:"status",noHide:!0},{text:"Район",value:"rayon",noHide:!0},{text:"Неофициальное название",value:"unoff",noHide:!0},{text:"ОПИСАНИЕ",value:"description",noHide:!0},{text:"Истории о прошлом",value:"narrativ_l",type:"Story"},{text:"Семейные истории",value:"narrativ_b",type:"Story"},{text:"Практики горожан",value:"narrativ_p",type:"Story"},{text:"Характеристика места",value:"descript2",type:"Story"},{text:"Рассказчик",value:"narrator",type:"NarratorLink"},{text:"Визуальные материалы",value:"visual"},{text:"Москва дворовая",value:"mos1",type:"Mos"},{text:"Москва церковная",value:"mos2",type:"Mos"},{text:"Москва бездомная",value:"mos3",type:"Mos"},{text:"Москва подземная",value:"mos4",type:"Mos"},{text:"Москва субкультурная",value:"mos5",type:"Mos"},{text:"Москва легендарная",value:"mos6",type:"Mos"}])},g={namespaced:!0,state:{items:[],photos:[],meta:!1,filtered:[],detailItem:!1},getters:{features:function(t,e,n){return t.filtered},sortFeatures:function(t,e,n){return t.filtered.slice().sort(function(t,e){return t.properties.name.toUpperCase()>e.properties.name.toUpperCase()?1:-1})}},actions:{getAllItems:function(t){var e=t.commit;b(function(t){e("setMeta",t),v(function(t){e("setItems",t)})})},getPhotos:function(t){var e=t.commit;m(function(t){e("setPhotos",t)})},setFilter:function(t,e){var n=t.commit,r=t.state;n("setFilter",e);var o=r.detailItem;o&&(e.find(function(t){return t.properties.id===o.id})||n("setDetail",!1))},setDetail:function(t,e){var n=t.commit,r=t.state,o=r.filtered.find(function(t){return t.properties.id===e}),i=r.detailItem;i&&i.id===e&&(o=!1),n("setDetail",o)}},mutations:{setItems:function(t,e){t.items=e,t.filtered=e},setFilter:function(t,e){t.filtered=e},setDetail:function(t,e){t.detailItem=e},setMeta:function(t,e){t.meta=e},setPhotos:function(t,e){t.photos=e}}},_={namespaced:!0,state:{drawer:!0,page:"main",center:null,listSearchText:""},getters:{},actions:{showDrawer:function(t){(0,t.commit)("showDrawer")},hideDrawer:function(t){(0,t.commit)("hideDrawer")},setListSearchText:function(t,e){return(0,t.commit)("setListSearchText",e)},toggleDrawer:function(t,e){var n=t.commit;n(e?"showDrawer":"hideDrawer")},setPage:function(t,e){(0,t.commit)("setPage",e)},zoomTo:function(t,e){(0,t.commit)("setCenter",e)}},mutations:{showDrawer:function(t){t.drawer=!0},hideDrawer:function(t){t.drawer=!1},setPage:function(t,e){t.page=e},setCenter:function(t,e){t.center=e},setListSearchText:function(t,e){t.listSearchText=e}}};r.a.use(o.a);var w=new o.a.Store({modules:{bdMain:g,app:_},strict:!1}),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("main-component"),t._v(" "),n("v-dialog",{attrs:{value:"table"===t.page,fullscreen:"",scrollable:"",transition:"dialog-bottom-transition"}},[n("v-card",{staticClass:"fullscreen-dialog"},[n("v-toolbar",{staticClass:"dialog-titlebar",attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.page="main"}}},[n("v-icon",[t._v("close")])],1),t._v(" "),n("span",{staticClass:"title ml-3 mr-5"},[t._v("Устная память Москвы "),n("span",{staticClass:"font-weight-light"},[t._v("Таблица")])]),t._v(" "),n("v-text-field",{attrs:{"solo-inverted":"",flat:"","hide-details":"",label:"Поиск","prepend-inner-icon":"search"},model:{value:t.tableSearch,callback:function(e){t.tableSearch=e},expression:"tableSearch"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",flat:""}},[t._v("Сохранить")])],1)],1),t._v(" "),n("div",{staticClass:"dialog-body"},["table"===t.page?n("table-component",{attrs:{search:t.tableSearch,paginationSync:t.paginationSync}}):"about"===t.page?n("about-component"):t._e()],1),t._v(" "),t.pagination&&t.pagination.page?n("v-footer",{staticClass:"pt-3 pb-4"},[n("div",{staticClass:"text-xs-center pt-1"},[n("v-pagination",{attrs:{length:t.pages,"total-visible":7},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)]):t._e()],1)],1)],1)};A._withStripped=!0;var L=n(9),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-layout",{attrs:{"align-center":"","justify-center":"",column:"","fill-height":""}},[n("div",{staticClass:"title font-weight-thin pa-3"},[t._v("Разработано в")]),t._v(" "),n("div",{staticClass:"logo",on:{click:t.openNextGIS}},[n("svg",{staticClass:"logo hidden-xs",staticStyle:{"enable-background":"new 0 0 818.8 111.5"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 818.8 111.5","xml:space":"preserve"}},[n("path",{staticClass:"logo__item--dark",attrs:{d:"M0,111.5V0.1h7.4l69.9,69.8V0.1h22.3v111.4h-8.2L22.3,42.4v69.1\n              H0"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M225.8,111.5V0.1l-81.9-0.1v20.8h59.6v23.8h-34v20.7h34v25.3H144\n              v20.8L225.8,111.5"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M502.3,0.1v20.8h-37.1v90.6h-22.3V20.9h-37.1V0.1L502.3,0.1"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M550.4,95.5c-10.7-10.6-16-23.9-16-39.9\n              c0.1-15.7,5.4-28.8,16-39.5c10.6-10.7,23.9-16,39.6-16c15.9,0,29.5,5,40.9,14.9l-14.9,16.3c-7.6-5.9-16.3-8.9-26.1-8.9\n              c-10,0-18.1,3.2-24.2,9.4c-6.1,6.2-9.2,14.1-9.2,23.8c0.1,10.4,3.2,18.6,9.3,24.7c6.1,6.1,14.2,9.1,24.2,9.1c8,0,14.2-1.6,18.5-4.8\n              V65.4l-14.9,0.1V44.7H631v52c-11.3,9.9-25,14.9-40.9,14.9C574.3,111.5,561,106.1,550.4,95.5"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M674.9,111.5h22.2V0h-22.2V111.5z"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M801.4,3.8c5.7,2.5,11,6.2,16,11.2l-14.9,14.9\n              c-5-6-11.9-8.9-20.8-8.9c-8.9,0-14.6,2.1-17.1,6.3c-2.5,4.2-2.5,7.8,0,10.8c2.5,3,8.2,5.2,17.1,6.7c9.4,1,18,4.1,25.6,9.3\n              c7.7,5.2,11.5,13.5,11.5,24.9c0,8.9-4.1,16.6-12.3,23c-8.2,6.4-17.7,9.7-28.6,9.7c-10.3,0-19-1.5-25.9-4.4\n              c-6.9-3-12.9-6.9-17.8-11.9L749,80.3c5,6,13.4,9.4,25.3,10.4c9.9,0,16.1-2.1,18.5-6.3c2.5-4.2,2.5-8.4,0-12.6\n              c-2.4-4.2-8.6-6.8-18.5-7.8c-8.9-1-17.1-3.7-24.5-8.2c-7.4-4.5-11.2-12.1-11.2-23c0-9.9,4.2-17.8,12.7-23.7c8.4-6,17.1-9,26-9\n              C787.6,0.1,795.7,1.3,801.4,3.8"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M340.2,43.3l31.6-43.2h-26.2L327,25.4L340.2,43.3"}}),t._v(" "),n("path",{staticClass:"logo__item--light",attrs:{d:"M332.8,53.5L293.6,0.1h-26.2l39,53.4l-42.6,58h26.5L332.8,53.5"}}),t._v(" "),n("path",{staticClass:"logo__item--dark",attrs:{d:"M340.2,63.6l-13.2,18l21.9,29.9h26.4L340.2,63.6"}})])])])],1)};O._withStripped=!0;var x,C=n(17),P=(x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.prototype.openNextGIS=function(){window.location.href="http://nextgis.com/"},e=k([C.b],e)}(r.a),I=(n(90),n(11)),j=n(14),S=n.n(j),M=n(196),T=n(63),F=Object(I.a)(E,O,[],!1,null,null,null);S()(F,{VApp:M.a,VLayout:T.a}),F.options.__file="src/components/NextGIS/About.vue";var B=F.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-data-table",{attrs:{headers:t.headers,items:t.items,search:t.search,pagination:t.pagination,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[n("v-tooltip",{attrs:{bottom:""}},[n("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n          "+t._s(e.header.text)+"\n        ")])])]}},{key:"items",fn:function(e){return t._l(t.headers,function(r){return n("td",{key:r.value},[e.item[r.value]&&e.item[r.value].length<40?n("span",[t._v(t._s(e.item[r.value]))]):n("span",[n("show-more-field",{attrs:{text:e.item[r.value],charCount:40}})],1)])})}}])})],1)};D._withStripped=!0;var R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.text&&String(t.text).length>t.charCount?n("span",[n("span",[t._v(t._s(t.toShow))]),t._v(" "),n("a",{on:{click:t.onClick}},[t.expand?n("span",[t._v("<<<")]):n("span",[t._v(">>>")])])]):n("span",[t._v(t._s(t.text))])])};R._withStripped=!0;var N=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},V=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.expand=!1,e}return N(e,t),Object.defineProperty(e.prototype,"toShow",{get:function(){return this.expand?this.text:this.text.slice(0,this.charCount)+"..."},enumerable:!0,configurable:!0}),e.prototype.onClick=function(){this.expand=!this.expand},$([Object(L.b)({default:""}),V("design:type",String)],e.prototype,"text",void 0),$([Object(L.b)({default:40}),V("design:type",Number)],e.prototype,"charCount",void 0),e=$([L.a],e)}(L.c),z=Object(I.a)(G,R,[],!1,null,null,null);z.options.__file="src/components/ShowMoreField/ShowMoreField.vue";var U=z.exports,Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},W=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={rowsPerPage:20},e.headers=[{text:"Адрес",value:"addr"},{text:"долгота",value:"lat"},{text:"широта",value:"lon"},{text:"Название объекта",value:"name"},{text:"Тип объекта",value:"type"},{text:"Статус объекта",value:"status"},{text:"Район",value:"rayon"},{text:"Неофициальное название",value:"unoff"},{text:"ОПИСАНИЕ",value:"description"},{text:"Локальный нарратив",value:"narrativ_l"},{text:"Биографический нарратив",value:"narrativ_b"},{text:"Нарратив о практиках",value:"narrativ_p"},{text:"Описание места",value:"descript2"},{text:"Рассказчик",value:"narrator"},{text:"Визуальные материалы",value:"visual"},{text:"Москва дворовая",value:"mos1"},{text:"Москва церковная",value:"mos2"},{text:"Москва бездомная",value:"mos3"},{text:"Москва подземная",value:"mos4"},{text:"Москва субкультурная",value:"mos5"},{text:"Москва легендарная",value:"mos6"}],e}return Z(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.getters["bdMain/sortFeatures"].map(function(t){return t.properties})},enumerable:!0,configurable:!0}),e.prototype.setPagination=function(t){this.paginationSync(t)},H([Object(L.b)(),W("design:type",String)],e.prototype,"search",void 0),H([Object(L.b)(),W("design:type",Object)],e.prototype,"paginationSync",void 0),H([Object(L.d)("pagination"),W("design:type",Function),W("design:paramtypes",[Object]),W("design:returntype",void 0)],e.prototype,"setPagination",null),e=H([Object(L.a)({components:{ShowMoreField:U}})],e)}(L.c),J=(n(95),n(195)),Q=n(190),Y=Object(I.a)(q,D,[],!1,null,null,null);S()(Y,{VApp:M.a,VDataTable:J.a,VTooltip:Q.a}),Y.options.__file="src/components/Table/Table.vue";var K=Y.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-content",[n("ngw-map",{attrs:{center:[37.63,55.75],zoom:10}},[n("map-control",{attrs:{position:"top-left"}},[t.drawer?t._e():n("div",[n("v-layout",{attrs:{"align-center":"","justify-start":"",row:"","fill-height":""}},[n("v-btn",{attrs:{fab:"",small:""},on:{click:function(e){t.drawer=!t.drawer}}},[n("v-icon",{staticClass:"drawe-icon",class:{active:t.drawer},attrs:{large:""}},[t._v("chevron_right")])],1),t._v(" "),n("span",{staticClass:"title"},[t._v("Устная память Москвы")])],1)],1)])],1)],1),t._v(" "),n("v-navigation-drawer",{attrs:{stateless:"",fixed:"",app:"",width:"350"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("drawer-container",[n("div",{attrs:{slot:"header"},slot:"header"},[n("v-layout",{attrs:{"justify-space-between":""}},[t._v("\n          Устная память Москвы\n          "),n("v-btn",{staticClass:"pa-0 ma-0",attrs:{flat:"",icon:""},on:{click:function(e){t.drawer=!1}}},[n("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),t.items&&t.items.length?n("div",[n("div",[n("items-filter"),t._v(" "),n("div",{staticClass:"pl-3 pr-3"},[n("v-text-field",{staticClass:"pa-0",attrs:{"hide-details":"",solo:"",clearable:"",label:"Поиск","prepend-inner-icon":"search"},model:{value:t.listSearchText,callback:function(e){t.listSearchText=e},expression:"listSearchText"}})],1)],1),t._v(" "),n("div",[n("list")],1)]):n("div",[n("div",{staticClass:"pa-3 text-xs-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]),t._v(" "),n("template",{slot:"footer"},[n("v-item-group",{staticClass:"bottom-button"},[n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("save_alt")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"},on:{click:function(e){t.page="table"}}},[n("v-icon",{on:{click:function(e){t.page="table"}}},[t._v("table_chart")])],1)],1)],1)],2)],1),t._v(" "),n("v-navigation-drawer",{attrs:{value:!!t.detail,stateless:"",width:"400",absolute:"",app:"",right:""}},[t.detail?n("drawer-container",[n("template",{slot:"header"},[n("v-btn",{staticClass:"pa-0 ma-0",attrs:{flat:"",icon:""},on:{click:function(e){t.detail=!1}}},[n("v-icon",[t._v("close")])],1),t._v("\n        "+t._s(t.detail.properties.name)+"\n      ")],1),t._v(" "),n("detail"),t._v(" "),n("template",{slot:"footer"},[n("v-item-group",{staticClass:"bottom-button"},[n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("feedback")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"}},[n("v-icon",[t._v("save_alt")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",color:"grey"},on:{click:function(e){t.zoomTo=t.detail.id}}},[n("v-icon",[t._v("place")])],1)],1)],1)],2):t._e()],1)],1)};X._withStripped=!0;var tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-list",{attrs:{dense:""}},t._l(t.portion,function(e){return n("v-list-item",{key:e.id},[n("v-list-item-content",[n("v-list-item-title",{attrs:{title:e.name}},[t._v(t._s(e.name))])],1),t._v(" "),n("v-list-item-action",{staticClass:"pa-0"},[n("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(n){return t.setDetail(e.id)}}},[n("v-icon",{style:{color:e.id===(t.detail&&t.detail.id)?"orange":"grey"},attrs:{color:"lighten-1"}},[t._v("\n            info\n          ")])],1)],1)],1)}),1),t._v(" "),t.displayItems.length>t.portion.length?n("div",{staticClass:"text-xs-center"},[n("v-btn",{attrs:{flat:"",small:""},on:{click:t.addPortion}},[t._v("Показать ещё")])],1):t._e()],1)};tt._withStripped=!0;var et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},rt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.portionCount=30,e.portion=[],e}return et(e,t),Object.defineProperty(e.prototype,"listSearchText",{get:function(){return this.$store.state.app.listSearchText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.getters["bdMain/sortFeatures"].map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){var t=this;this.addPortion(),this.$store.watch(function(t){return t.bdMain.filtered},function(e){t.resetPortions()}),this.$store.watch(function(t){return t.app.listSearchText},function(e){t.resetPortions()})},Object.defineProperty(e.prototype,"displayItems",{get:function(){return this.getDisplayItems()},enumerable:!0,configurable:!0}),e.prototype.getDisplayItems=function(){var t=this;return this.listSearchText&&this.listSearchText.length>1?this.items.filter(function(e){for(var n in e){if(e.hasOwnProperty(n))if(-1!==String(e[n]).toLowerCase().indexOf(t.listSearchText.toLowerCase()))return!0}return!1}):this.items},e.prototype.setDetail=function(t){this.$store.dispatch("bdMain/setDetail",t),this.$store.dispatch("app/zoomTo",t)},e.prototype.resetPortions=function(){this.portion=[],this.addPortion()},e.prototype.addPortion=function(){var t=this.getDisplayItems(),e=this.portion.length,n=t.length;if(e<n)for(var r=e+this.portionCount,o=r>n?n:r,i=e;i<o;i++)this.portion.push(t[i])},e=nt([L.a],e)}(L.c),ot=n(70),it=n(71),at=n(68),st=n(65),ct=n(66),ut=n(74),lt=Object(I.a)(rt,tt,[],!1,null,null,null);S()(lt,{VBtn:ot.a,VIcon:it.a,VList:at.a,VListTile:st.a,VListTileAction:ct.a,VListTileContent:ut.a,VListTileTitle:ut.c}),lt.options.__file="src/components/List/List.vue";var pt=lt.exports,ft=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"map"}},[this.ready?this._t("default"):this._e()],2)};ft._withStripped=!0;var ht,dt=0,yt=function(){function t(t,e){this.map=t,this.options=e,this._layerId="layer-"+dt++}return t.prototype.addLayer=function(t){return[""]},t}(),vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mt=function(){return(mt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vt(e,t),e.prototype.addLayer=function(t){t=this.options=mt({},this.options,t||{});var e=String(t.id),n={id:e,type:t.type||"fill","source-layer":t["source-layer"]||e,source:{type:"vector",tiles:[t.url]},layout:{visibility:"none"}};return t.paint&&(n.paint=t.paint),this.map.addLayer(n),this.layer=[e],this.layer},e}(yt),gt=n(24),_t=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(){return(wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.addLayer=function(t){var e={type:"raster",tiles:(t=wt({},this.options,t||{}))&&t.subdomains?t.subdomains.split("").map(function(e){return t.url.replace("{s}",e)}):[t.url],tileSize:256};return t.attribution&&(e.attribution=t.attribution),this.map.addLayer({id:this._layerId,type:"raster",layout:{visibility:"none"},source:e},t.before),this.layer=[this._layerId]},e}(yt),Lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot={url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright" target="_blank">OpenStreetMap</a> contributors',subdomains:"abc"},xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lt(e,t),e.prototype.addLayer=function(e){return t.prototype.addLayer.call(this,Object.assign({},Ot,e))},e}(At),Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pt=function(){return(Pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},kt=function(t){function e(e){void 0===e&&(e={});return e=Pt({},e,{showCompass:!1}),t.call(this,e)||this}return Ct(e,t),e.prototype._createButton=function(e,n,r){var o=t.prototype._createButton.call(this,e,n,r),i={"Zoom in":"zoomInTitle","Zoom out":"zoomOutTitle"}[n],a=i&&this.options[i];return a&&(o.title=a,o.setAttribute("aria-label",a)),o},e}(gt.NavigationControl),Et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),It=function(t){function e(e){void 0===e&&(e={});return e=Object.assign({},e,{showZoom:!1}),t.call(this,e)||this}return Et(e,t),e}(gt.NavigationControl),jt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jt(e,t),e}(gt.AttributionControl);try{ht=n(140)}catch(t){}function Mt(t,e){var n=window.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.setAttribute("width",String(e.width)),n.setAttribute("height",String(e.height)),!ht&&t instanceof HTMLImageElement?r.drawImage(t,0,0,e.width,e.height):"string"==typeof t&&ht(n,t),r.getImageData(0,0,e.width,e.height)}var Tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ft=function(){return(Ft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Bt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Dt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Rt={circle:[["fillColor","color"],["fillOpacity","opacity"],["strokeColor","stroke-color"],["strokeOpacity","stroke-opacity"],["weight","stroke-width"],"radius"],line:[["strokeColor","color"],["strokeOpacity","opacity"],["weight","width"]],fill:[["fillColor","color"],["fillOpacity","opacity"]],icon:["color","opacity"].concat([])},Nt={Point:"circle",LineString:"line",MultiPoint:"circle",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill",GeometryCollection:"fill"},$t={circle:"Point",line:"LineString",fill:"Polygon",icon:"Point"},Vt={icon:["Point"]};for(var Gt in Nt)if(Nt.hasOwnProperty(Gt)){var zt=Nt[Gt],Ut=Vt[zt]||[];Ut.push(Gt),Vt[zt]=Ut}var Zt={color:"blue",opacity:1,radius:10},Ht=0,Wt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.map=e,r.options=n,r.selected=!1,r._features=[],r._selectedFeatureIds=[],r._filteredFeatureIds=[],r._types=["fill","circle","line"],r._sourceId="source-"+r._layerId,r._selectionName=r._layerId+"-highlighted",r.$onLayerClick=r._onLayerClick.bind(r),r}return Tt(e,t),e.prototype.addLayer=function(t){return Bt(this,void 0,void 0,function(){var e,n,r,o,i,a,s,c,u;return Dt(this,function(l){switch(l.label){case 0:t=this.options=Ft({},this.options,t||{}),this.map.addSource(this._sourceId,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.layer=[],e=this._types=t.type?[t.type]:this._types,n=0,r=e,l.label=1;case 1:return n<r.length?(o=r[n],t.paint&&(i=$t[o])?(a=o,"circle"===o&&"icon"===this._detectPaintType(t.paint)&&(a="icon"),s=this._getLayerNameFromType(o),c=["==","$type",i],[4,this._addLayer(s,a,c)]):[3,4]):[3,5];case 2:return l.sent(),this.layer.push(s),t.selectedPaint?(u=this._getSelectionLayerNameFromType(o),[4,this._addLayer(u,a,["all",c,["in","_rendrom_id",""]])]):[3,4];case 3:l.sent(),this.layer.push(u),l.label=4;case 4:return n++,[3,1];case 5:return this.options.data&&this.addData(this.options.data),this._addEventsListeners(),[2,this.layer]}})})},e.prototype.removeLayer=function(){var t=this.map;this.layer&&(this.layer.forEach(function(e){t.removeLayer(e)}),t.removeSource(this._sourceId))},e.prototype.clearLayer=function(t){var e=[],n=this.map.getSource(this._sourceId);t&&(e=this._features=this._features.filter(function(e){return!t(e)})),n.setData({type:"FeatureCollection",features:e})},e.prototype.addData=function(t){return Bt(this,void 0,void 0,function(){var e,n;return Dt(this,function(r){switch(r.label){case 0:return this.options.type&&(e=this.options.type),!e&&t&&(n=function(t){var e;if("FeatureCollection"===t.type){var n=t.features.map(function(t){return t.geometry.type});e=Jt(n)}else if("GeometryCollection"===t.type){var r=t.geometries.map(function(t){return t.type});e=Jt(r)}else e="Feature"===t.type?t.geometry.type:t.type;return e}(t),e=Nt[n]),t&&e?(this.filterGeometries(t,e).forEach(function(t){var e="_"+Ht++;t._rendrom_id=e,t.properties&&(t.properties._rendrom_id=e)}),this._filterFun&&this._filter(this._filterFun),[4,this._updateLayerPaint(e)]):[3,2];case 1:r.sent(),this.map.getSource(this._sourceId).setData({type:"FeatureCollection",features:this._features}),r.label=2;case 2:return[2]}})})},e.prototype.getLayers=function(){var t=this,e=this._filteredFeatureIds.length;return this._features.map(function(n){var r=!1;if(e){var o=t._getRendromId(n);void 0!==o&&(r=-1!==t._filteredFeatureIds.indexOf(o))}return{feature:n,visible:r}})},e.prototype.filter=function(t){this._filterFun=t,this._filter(t)},e.prototype.removeFilter=function(){this._filterFun=void 0,this._filteredFeatureIds=[],this._updateFilter()},e.prototype.getSelected=function(){var t=this,e=[];return this._features.forEach(function(n){var r=t._getRendromId(n);r&&-1!==t._selectedFeatureIds.indexOf(r)&&e.push({feature:n})}),e},e.prototype.select=function(t){if(t){var e=this._features.filter(function(e){return t({feature:e})});this._selectFeature(e)}else this.selected||this._selectFeature(this._features);this.selected=!0},e.prototype.unselect=function(t){if(t){var e=this._features.filter(function(e){return t({feature:e})});this._unselectFeature(e)}else this.selected&&this._unselectFeature(this._features);this.selected=!!this._selectedFeatureIds.length},e.prototype._filter=function(t){var e=this;this._filteredFeatureIds=[],this._features.forEach(function(n){var r=t({feature:n}),o=e._getRendromId(n);r&&o&&e._filteredFeatureIds.push(o)}),this._updateFilter()},e.prototype._getLayerNameFromType=function(t){return t+"-"+this._layerId},e.prototype._getSelectionLayerNameFromType=function(t){return t+"-"+this._selectionName},e.prototype._addLayer=function(t,e,n){return Bt(this,void 0,void 0,function(){var r;return Dt(this,function(o){return r={id:t,type:"icon"===e?"symbol":e,source:this._sourceId,layout:{visibility:"none"},filter:n},this.map.addLayer(r),[2]})})},e.prototype._updateLayerPaint=function(t){return Bt(this,void 0,void 0,function(){var e,n,r,o,i,a,s,c,u,l;return Dt(this,function(p){switch(p.label){case 0:if(e=this._getLayerNameFromType(t),!this.options.paint)return[3,4];n=[[e,this.options.paint]],this.options.selectedPaint&&(r=this._getSelectionLayerNameFromType(t),n.push([r,this.options.selectedPaint])),o=0,i=n,p.label=1;case 1:return o<i.length?(a=i[o],s=a[0],c=a[1],[4,this._createPaintForType(c,t,s)]):[3,4];case 2:if("icon-image"in(u=p.sent()))for(l in u["icon-allow-overlap"]=!0,u)u.hasOwnProperty(l)&&this.map.setLayoutProperty(s,l,u[l]);else for(l in u)u.hasOwnProperty(l)&&this.map.setPaintProperty(s,l,u[l]);p.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.filterGeometries=function(t,e){var n=[];if("FeatureCollection"===t.type)n=t.features=t.features.filter(function(t){return qt(t.geometry.type,e)});else if("Feature"===t.type){if(!qt(t.geometry.type,e))return[];n.push(t)}else if("GeometryCollection"===t.type){var r=t;r.geometries=r.geometries.filter(function(t){return qt(t.type,e)}),n=r.geometries.map(function(t){return{type:"Feature",geometry:t,properties:{}}})}else if(Nt[t.type]){n=[{type:"Feature",geometry:t,properties:{}}]}return this._features=this._features.concat(n),n},e.prototype._createPaintForType=function(t,e,n){return Bt(this,void 0,void 0,function(){var r,o,i,a;return Dt(this,function(s){switch(s.label){case 0:return"function"!=typeof t?[3,2]:[4,this._getPaintFromCallback(t,e,n)];case 1:return[2,s.sent()];case 2:return r={},o=Ft({},Zt,t||{}),"icon"===t.type&&t.html?[4,this._registerImage(t)]:[3,4];case 3:return s.sent(),[2,{"icon-image":t.html}];case 4:for(a in i=function(t){if(o.hasOwnProperty(t)){var n=Rt[e];if(n){var i=n.find(function(e){return"string"==typeof e?e===t:!!Array.isArray(e)&&e[0]===t});if(i){var a=Array.isArray(i)?i[1]:i;r[e+"-"+a]=o[t]}}}},o)i(a);return[2,r]}})})},e.prototype._getPaintFromCallback=function(t,e,n){return Bt(this,void 0,void 0,function(){var r,o,i,a,s,c,u;return Dt(this,function(l){switch(l.label){case 0:r={},o=0,i=this._features,l.label=1;case 1:return o<i.length?(a=i[o],"icon"!==(s=t(a)).type?[3,3]:[4,this._registerImage(s)]):[3,5];case 2:return l.sent(),a.properties&&(a.properties["_icon-image-"+n]=s.html),r["icon-image"]="{_icon-image-"+n+"}",[3,4];case 3:for(c in s)s.hasOwnProperty(c)&&(u=s[c],a.properties&&(a.properties["_paint_"+c+"_"+n]=u),r[c]=["get","_paint_"+c+"_"+n]);l.label=4;case 4:return o++,[3,1];case 5:return"icon-image"in r?[2,r]:[2,this._createPaintForType(r,e,n)]}})})},e.prototype._registerImage=function(t){return Bt(this,void 0,void 0,function(){var e,n,r;return Dt(this,function(o){switch(o.label){case 0:return t.html?this.map.hasImage(t.html)?[3,2]:(e=12,n=12,t.iconSize&&(e=t.iconSize[0],n=t.iconSize[1]),[4,(i=t.html,a={width:e,height:n},new Promise(function(t){if(ht)t(Mt(i,a));else{var e=new Image;e.crossOrigin="Anonymous",e.src="data:image/svg+xml;base64,"+btoa(i),e.onload=function(){var n=Mt(e,a);t(n)}}}))]):[3,2];case 1:r=o.sent(),this.map.addImage(t.html,r),o.label=2;case 2:return[2]}var i,a})})},e.prototype._onLayerClick=function(t){t.preventDefault();var e=this.map.queryRenderedFeatures(t.point,{layers:this.layer})[0];if(e){var n=this._getRendromId(e);if(void 0!==n){var r=-1!==this._selectedFeatureIds.indexOf(n);r?this.options&&this.options.unselectOnSecondClick&&(this._unselectFeature(e),r=!1):(this._selectFeature(e),r=!0),this.options.onLayerClick&&this.options.onLayerClick({layer:this,feature:e,selected:r})}}},e.prototype._selectFeature=function(t){var e=this;this.options&&!this.options.multiselect&&(this._selectedFeatureIds=[]);(Array.isArray(t)?t:[t]).forEach(function(t){var n=e._getRendromId(t);void 0!==n&&e._selectedFeatureIds.push(n)}),this._updateFilter()},e.prototype._unselectFeature=function(t){var e=this;(Array.isArray(t)?t:[t]).forEach(function(t){var n=e._getRendromId(t);if(void 0!==n){var r=e._selectedFeatureIds.indexOf(n);-1!==r&&e._selectedFeatureIds.splice(r,1)}}),this._updateFilter()},e.prototype._updateFilter=function(){var t=this,e=[],n=[];this._filteredFeatureIds.length?this._features.forEach(function(r){var o=t._getRendromId(r);void 0!==o&&-1!==t._filteredFeatureIds.indexOf(o)&&(-1!==t._selectedFeatureIds.indexOf(o)?e.push(o):n.push(o))}):e=this._selectedFeatureIds;var r=this.layer;r&&this._types.forEach(function(o){var i=$t[o];if(i){var a=["==","$type",i],s=t._getLayerNameFromType(o),c=t._getSelectionLayerNameFromType(o);-1!==r.indexOf(c)&&t._selectionName&&t.map.setFilter(c,["all",a,["in","_rendrom_id"].concat(e)]),-1!==r.indexOf(s)&&(t._filteredFeatureIds.length?t.map.setFilter(s,["all",a,["in","_rendrom_id"].concat(n)]):t.map.setFilter(s,["all",a,["!in","_rendrom_id"].concat(e)]))}})},e.prototype._detectPaintType=function(t){if("type"in t)return t.type;if("function"==typeof t)try{var e=t({type:"Feature",properties:{},geometry:{}});return this._detectPaintType(e)}catch(t){}},e.prototype._addEventsListeners=function(){var t=this;this.layer&&this.options&&this.options.selectable&&this.layer.forEach(function(e){if(t.$onLayerClick){var n=t.$onLayerClick;t.map.on("click",e,function(t){n(t)})}t.map.on("mousemove",e,function(){t.map.getCanvas().style.cursor="pointer"}),t.map.on("mouseleave",e,function(){t.map.getCanvas().style.cursor=""})})},e.prototype._getRendromId=function(t){var e=t._rendrom_id;return void 0!==e?e:t.properties&&void 0!==t.properties._rendrom_id?t.properties._rendrom_id:void 0},e}(yt);function qt(t,e){var n=Vt[e];return!!n&&-1!==n.indexOf(t)}function Jt(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1+(e[t[n]]||0);var r="";for(var o in e)if(e.hasOwnProperty(o)){var i=r?e[r]:0;e[o]>i&&(r=o)}return r}function Qt(t,e){return void 0===e&&(e={}),new(function(){function n(){}return n.prototype.getDefaultPosition=function(){return"top-left"},n.prototype.onAdd=function(n){var r=document.createElement("div"),o=t.onAdd();return r.classList.add("mapboxgl-ctrl"),e.bar&&r.classList.add("mapboxgl-bar"),e.addClass&&r.classList.add(e.addClass),r.appendChild(o),this._container=r,this._container},n.prototype.onRemove=function(){if(this._container){var e=this._container.parentNode;e&&e.removeChild(this._container)}return t.onRemove()},n.prototype.remove=function(){this.onRemove()},n}())}var Yt=function(){return(Yt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Kt={padding:100},Xt=function(){function t(){this.options={},this.emitter=new u.EventEmitter,this.layerAdapters=t.layerAdapters,this.controlAdapters=t.controlAdapters,this.isLoaded=!1,this._universalEvents=["zoomstart","zoom","zoomend","movestart","move","moveend"],this._sourceDataLoading={}}return t.prototype.create=function(t){var e=this;if(!this.map&&(this.options=t,t.target)){var n={container:t.target,attributionControl:!1,bounds:t.bounds,fitBoundsOptions:Yt({},t.fitOptions,Kt),style:{version:8,name:"Empty style",sources:{},layers:[]}};void 0!==t.center&&(n.center=t.center),t.zoom&&(n.zoom=t.zoom),this.map=new gt.Map(n),this._addEventsListeners(),this.map.once("load",function(){e.isLoaded=!0,e.emitter.emit("create",e)})}},t.prototype.getContainer=function(){return this.map&&this.map.getContainer()},t.prototype.setView=function(t,e){this.map&&this.map.jumpTo({center:t,zoom:e-1})},t.prototype.setCenter=function(t){this.map&&this.map.setCenter(t)},t.prototype.getCenter=function(){if(this.map){var t=this.map.getCenter();return[t.lng,t.lat]}},t.prototype.setZoom=function(t){this.map&&this.map.setZoom(t-1)},t.prototype.getZoom=function(){if(this.map)return this.map.getZoom()+1},t.prototype.fit=function(t,e){void 0===e&&(e={}),this.map&&this.map.fitBounds([[t[0],t[1]],[t[2],t[3]]],Yt({linear:!0},e,Kt))},t.prototype.setRotation=function(t){},t.prototype.showLayer=function(t){var e=this;t.forEach(function(t){e._toggleLayer(t,!0)})},t.prototype.hideLayer=function(t){var e=this;t.forEach(function(t){e._toggleLayer(t,!1)})},t.prototype.removeLayer=function(t){if(this.map){var e=this.map;t.forEach(function(t){e.removeLayer(t),e.removeSource(t)})}},t.prototype.setLayerOrder=function(t,e,n){var r=this;this._sortTimerId&&window.clearTimeout(this._sortTimerId),this._sortTimerId=window.setTimeout(function(){return r._setLayerOrder(n)})},t.prototype.setLayerOpacity=function(t,e){var n=this,r=this.map;r&&t.forEach(function(t){n._onMapLoad().then(function(){var n=r.getLayer(t);n&&r.setPaintProperty(t,n.type+"-opacity",e)})})},t.prototype.createControl=function(t){return Qt(t)},t.prototype.createButtonControl=function(t){return function(t){var e=document.createElement("button");if(e.className="mapboxgl-ctrl-icon",e.setAttribute("role","button"),t.title&&(e.title=t.title,e.setAttribute("aria-label",t.title)),t.html){t.html instanceof HTMLElement?e.appendChild(t.html):e.innerHTML=t.html;var n=e.firstElementChild;n.style.width="100%",n.style.height="100%",n.style.lineHeight=(e.offsetHeight||30)+"px"}t.addClass&&t.addClass.split(" ").forEach(function(t){return e.classList.add(t)});var r=function(e){e.stopPropagation(),t.onClick()};return t.onClick&&e.addEventListener("click",r),Qt({onAdd:function(){return e},onRemove:function(){var n=e.parentNode;n&&n.removeChild(e),t.onClick&&e.removeEventListener("click",r)}},{bar:!0,addClass:"mapboxgl-ctrl-group"})}(t)},t.prototype.addControl=function(t,e){if(this.map)return this.map.addControl(t,e),t},t.prototype.removeControl=function(t){this.map&&this.map.removeControl(t)},t.prototype.onMapClick=function(t){var e=t.lngLat,n=t.point,r=n.x,o=n.y;this.emitter.emit("click",{latLng:e,pixel:{top:o,left:r}})},t.prototype._onMapLoad=function(t){var e=this;return new Promise(function(n){var r=function(){t&&t(),e.map&&n(e.map)};e.isLoaded?r():e.map&&e.emitter.once("create",function(){r()})})},t.prototype._setLayerOrder=function(t){var e=this.map;if(e){var n=[],r=[];for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];i.options.baseLayer?n.push(i):r.push(i)}r=r.sort(function(t,e){return void 0!==t.options.order&&void 0!==e.options.order?t.options.order-e.options.order:0});for(var a=function(t){var n=r[t+1],o=n&&n.layer&&n.layer[0],i=r[t];s._getLayerIds(i).forEach(function(t){e.moveLayer(t,o)})},s=this,c=0;c<r.length;c++)a(c);var u=r.find(function(t){return Array.isArray(t.layer)});if(u){var l=this._getLayerIds(u)[0];n.forEach(function(t){t.layer&&t.layer.forEach(function(t){e.moveLayer(t,l)})})}}},t.prototype._getLayerIds=function(t){var e=[];return t&&(Array.isArray(t.layer)?e=t.layer:t.getDependLayers&&t.getDependLayers().forEach(function(t){t.forEach(function(t){e.push(t)})})),e},t.prototype._toggleLayer=function(t,e){this._onMapLoad().then(function(n){n.setLayoutProperty(t,"visibility",e?"visible":"none")})},t.prototype._onMapSourceData=function(t){var e=this;if("source"===t.dataType){var n=t.isSourceLoaded;this._onDataLoad(t,n,function(t){e.emitter.emit("data-loaded",{target:t})})}},t.prototype._onMapError=function(t){var e=this;if(this._sourceDataLoading[t.sourceId]){var n=t.isSourceLoaded;this._onDataLoad(t,n,function(t){e.emitter.emit("data-error",{target:t})})}},t.prototype._onDataLoad=function(t,e,n){if(void 0===e&&(e=!1),e)Object.keys(this._sourceDataLoading).forEach(function(t){n(t)}),this._sourceDataLoading={};else{var r=this._sourceDataLoading[t.sourceId];if(r&&t.tile){var o=r.indexOf(t.tile);-1!==o&&this._sourceDataLoading[t.sourceId].splice(o,1),r.length||(n(t.sourceId),delete this._sourceDataLoading[t.sourceId])}}},t.prototype._addEventsListeners=function(){var t=this,e=this.map;e&&(e.on("sourcedataloading",function(e){t._sourceDataLoading[e.sourceId]=t._sourceDataLoading[e.sourceId]||[],e.tile&&t._sourceDataLoading[e.sourceId].push(e.tile)}),e.on("sourcedata",this._onMapSourceData.bind(this)),e.on("error",this._onMapError.bind(this)),e.on("click",function(e){t.onMapClick(e)}),this._universalEvents.forEach(function(n){e.on(n,function(){return t.emitter.emit(n,t)})}))},t.layerAdapters={TILE:At,MVT:bt,OSM:xt,GEOJSON:Wt},t.controlAdapters={ZOOM:kt,COMPASS:It,ATTRIBUTION:St},t}(),te=(n(143),n(80)),ee=n.n(te);function ne(t,e){var n=document.createElement("div"),r=!1;e.getStatus?r=e.getStatus():e.status&&(r=e.status);var o=e.title||"",i=e.html;function a(){o&&(n.title="string"==typeof o?o:r?o.on:o.off,n.setAttribute("aria-label",n.title))}function s(t){t instanceof HTMLElement?(n.innerHTML="",n.appendChild(t)):"string"==typeof t&&(n.innerHTML=t)}function c(){i&&("string"==typeof i||i instanceof HTMLElement?s(i):s(r?i.on:i.off),n.setAttribute("aria-label",n.title))}function u(t,e){t.split(" ").forEach(function(t){e?n.classList.add(t):n.classList.remove(t)})}function l(){e.addClassOn&&u(e.addClassOn,r),e.addClassOff&&u(e.addClassOff,!r)}a(),c(),e.addClass&&u(e.addClass,!0),l();var p=function(t){r=void 0!==t?t:!r,c(),a(),l(),e.onClick(r)},f=t({html:n,onClick:p});return f.onClick=p,f}var re=function(){return function(){this.backspace=8,this.tab=9,this.enter=13,this.shift=16,this.ctrl=17,this.alt=18,this["pause/break"]=19,this.caps_lock=20,this.escape=27,this.page_up=33,this.page_down=34,this.end=35,this.home=36,this.left_arrow=37,this.up_arrow=38,this.right_arrow=39,this.down_arrow=40,this.insert=45,this.delete=46,this.left_window_key=91,this.right_window_key=92,this.select_key=93,this.numpad_0=96,this.numpad_1=97,this.numpad_2=98,this.numpad_3=99,this.numpad_4=100,this.numpad_5=101,this.numpad_6=102,this.numpad_7=103,this.numpad_8=104,this.numpad_9=105,this.multiply=106,this.add=107,this.subtract=109,this.decimal_point=110,this.divide=111,this.f1=112,this.f2=113,this.f3=114,this.f4=115,this.f5=116,this.f6=117,this.f7=118,this.f8=119,this.f9=120,this.f10=121,this.f11=122,this.f12=123,this.num_lock=144,this.scroll_lock=145,this["semi-colon"]=186,this.equal_sign=187,this[","]=188,this["-"]=189,this["."]=190,this["/"]=191,this["`"]=192,this["["]=219,this["\\"]=220,this["]"]=221,this["'"]=222}}(),oe=function(){function t(){this.keyCodeAlias=new re,this.keys={},this._windowOnFocus=this.windowOnFocus.bind(this),this._keysPressed=this.keysPressed.bind(this),this._keysReleased=this.keysReleased.bind(this),this.addKeyboardEventsListener()}return t.prototype.pressed=function(t){var e=this.keyCodeAlias[t];return!!e&&this.keys[e]},t.prototype.addKeyboardEventsListener=function(){window.addEventListener("focus",this._windowOnFocus,!1),window.addEventListener("keydown",this._keysPressed,!1),window.addEventListener("keyup",this._keysReleased,!1)},t.prototype.removeKeyboardEventsListener=function(){window.removeEventListener("focus",this._windowOnFocus,!1),window.removeEventListener("keydown",this._keysPressed,!1),window.removeEventListener("keyup",this._keysReleased,!1)},t.prototype.keysPressed=function(t){t.stopPropagation(),this.keys[t.keyCode]||(this.keys[t.keyCode]=!0)},t.prototype.keysReleased=function(t){t.stopPropagation(),this.keys[t.keyCode]=!1},t.prototype.windowOnFocus=function(){this.keys={}},t}();function ie(t){return function(e,n,r){var o=r.value;return r.value=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise(function(r,i){var a=function(){var t=o.apply(e,n);t&&t.then?t.then(r).catch(i):r(t)};e.getEventStatus(t)?a():e.emitter.once(t,function(){a()})})},r}}function ae(t,e,n){void 0===n&&(n=!1);var r=Array.isArray(e),o=r&&[]||{};return r?n?(t=t||[],o=o.concat(t),e.forEach(function(e,r){void 0===o[r]?o[r]=e:"object"==typeof e?o[r]=ae(t[r],e,n):-1===t.indexOf(e)&&o.push(e)})):o=e:(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),Object.keys(e).forEach(function(r){"object"==typeof e[r]&&e[r]&&t[r]?o[r]=ae(t[r],e[r],n):o[r]=e[r]})),o}function se(t){var e;if("FeatureCollection"===t.type)e=ce(t.features.map(function(t){return t.geometry.type}));else if("GeometryCollection"===t.type){e=ce(t.geometries.map(function(t){return t.type}))}else e="Feature"===t.type?t.geometry.type:t.type;return e}function ce(t){for(var e,n={},r=0;r<t.length;r++)n[t[r]]=1+(n[t[r]]||0);for(var o in n)if(n.hasOwnProperty(o)){var i=void 0!==e?n[e]:0;n[o]>(i||0)&&(e=o)}return e}var ue={Point:"circle",LineString:"line",MultiPoint:"circle",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill"};function le(t){if(t.data){var e=ue[se(t.data)],n=t.paint;"object"==typeof n&&(n.type=n.type?n.type:"fill"===e||"line"===e?"path":"html"in n||"className"in n?"icon":e),t.type=e}return t}var pe=function(){return(pe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function fe(t,e,n){var r;if("function"==typeof t)return function(r){return fe(t(r),e,n)};if("get-paint"===t.type){var o=function(t,e){if("function"==typeof t.from)return t.from(t.options);if("string"==typeof t.from&&e){var n=e[t.from];if(n)return n(t.options)}}(t,n);o&&(r=fe(o,e,n))}else{if("icon"===t.type)return t;(r=pe({},t)).fill=void 0===r.fill||r.fill,r.stroke=void 0!==r.stroke?r.stroke:!r.fill||!(!r.strokeColor&&!r.strokeOpacity)}if(r){if("function"==typeof r)return r;r=pe({},e,r)}else r=pe({},e);return"color"in r&&(r.strokeColor||(r.strokeColor=r.color),r.fillColor||(r.fillColor=r.color)),"opacity"in r&&(void 0===r.strokeOpacity&&(r.strokeOpacity=r.opacity),void 0===r.fillOpacity&&(r.fillOpacity=r.opacity)),r}var he=function(){return(he=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},de=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},ye=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ve=function(){function t(t){this.webMap=t,this._layersIds=1,this._baseLayers=[],this._layers={},this._selectedLayers=[]}return t.prototype.fitLayer=function(t){return de(this,void 0,void 0,function(){var e,n;return ye(this,function(r){switch(r.label){case 0:return(e=this.getLayer(t))&&e.getExtent?[4,e.getExtent()]:[3,2];case 1:(n=r.sent())&&this.webMap.fitBounds(n),r.label=2;case 2:return[2]}})})},t.prototype.isBaseLayer=function(t){var e=this.getLayer(t);if(e&&e.id)return-1!==this._baseLayers.indexOf(e.id)},t.prototype.getBaseLayers=function(){return this._baseLayers},t.prototype.getLayer=function(t){return"string"==typeof t?this._layers[t]:t},t.prototype.getLayerId=function(t){var e=this.getLayer(t);if(e&&e.options)return e.options.id;throw new Error("No id for layer")},t.prototype.getLayers=function(){return Object.keys(this._layers)},t.prototype.findLayer=function(t){for(var e in this._layers)if(this._layers.hasOwnProperty(e)){var n=this._layers[e];if(t(n))return n}},t.prototype.isLayerVisible=function(t){var e=this.getLayer(t);return!(!e||void 0===e.options.visibility)&&e.options.visibility},t.prototype.addBaseLayer=function(t,e){return de(this,void 0,void 0,function(){return ye(this,function(n){switch(n.label){case 0:return[4,this.addLayer(t,he({},e,{baseLayer:!0}))];case 1:return[2,n.sent()]}})})},t.prototype.addLayer=function(t,e,n){return de(this,void 0,void 0,function(){var r,o,i,a,s,c,u,l,p,f,h,d;return ye(this,function(y){switch(y.label){case 0:return r=n||this._layersIds++,"string"!=typeof t?[3,1]:(o=this.webMap.getLayerAdapter(t),[3,4]);case 1:return"function"!=typeof t?[3,2]:(o=t,[3,4]);case 2:return t.then?[4,t]:[3,4];case 3:o=y.sent(),y.label=4;case 4:return void 0===o?[3,9]:(i=e,e.strongOptions||this._updateGeoJsonOptions(i),a=this.webMap.options,s=a.maxZoom,c=a.minZoom,e=he({id:String(r),order:r,maxZoom:s,minZoom:c},e),u=e.visibility,e.visibility=!1,e.baseLayer&&(e.order=0),(l=new o(this.webMap.mapAdapter.map,e)).options.baseLayer&&(e.baseLayer=!0,e.order=0),(p=l.options.id)&&(this._layers[p]=l),this.webMap.emitter.emit("layer:preadd",l),[4,this.webMap.onMapLoad()]);case 5:return y.sent(),[4,l.addLayer(e)];case 6:return f=y.sent(),l.layer=f,l.id=l.options.id,(p=l.options.id)&&(i.filter&&this.filterLayer(l,i.filter),e.baseLayer&&this._baseLayers.push(p),this._layers[p]=l,u&&this.showLayer(p)),e.fit&&l.getExtent?[4,l.getExtent()]:[3,8];case 7:(h=y.sent())&&this.webMap.fitBounds(h),y.label=8;case 8:return void 0!==(d=e.opacity)&&d<=1&&this.setLayerOpacity(l,d),this.webMap.emitter.emit("layer:add",l),[2,l];case 9:return[2,Promise.reject("No adapter")]}})})},t.prototype.addLayerFromAsyncAdapter=function(t,e,n){return de(this,void 0,void 0,function(){var r,o;return ye(this,function(i){switch(i.label){case 0:return r=n||this._layersIds++,[4,t()];case 1:return(o=i.sent())?[2,this.addLayer(o,e,r)]:[2,Promise.reject("No adapter")]}})})},t.prototype.removeLayers=function(t){for(var e in this._layers)if(this._layers.hasOwnProperty(e)){var n=!0;t&&(n=t(e,this._layers[e])),n&&(this.removeLayer(e),delete this._layers[e])}},t.prototype.removeOverlays=function(){this.removeLayers(function(t,e){return!e.options.baseLayer})},t.prototype.removeLayer=function(t){var e=this.getLayer(t),n=e&&this.getLayerId(e);if(e&&n){if(this.webMap.emitter.emit("layer:preremove",e),e.beforeRemove&&e.beforeRemove(),e.beforeRemove&&e.beforeRemove(),e.removeLayer?e.removeLayer():this.webMap.mapAdapter.removeLayer(e.layer),e.options&&e.options.baseLayer){var r=this._baseLayers.indexOf(n);r&&this._baseLayers.splice(r,1)}delete this._layers[n],this.webMap.emitter.emit("layer:remove",e)}},t.prototype.addGeoJsonLayer=function(t,e){return de(this,void 0,void 0,function(){var n;return ye(this,function(r){switch(r.label){case 0:return(t=t||{}).multiselect=void 0!==t.multiselect&&t.multiselect,t.unselectOnSecondClick=void 0===t.unselectOnSecondClick||t.unselectOnSecondClick,e||(t=le(t)),t.paint=t.paint||{},[4,this.addLayer(e||"GEOJSON",t)];case 1:return n=r.sent(),this.showLayer(n),[2,n]}})})},t.prototype.showLayer=function(t,e){void 0===e&&(e={}),this.toggleLayer(t,!0,e)},t.prototype.hideLayer=function(t,e){void 0===e&&(e={}),this.toggleLayer(t,!1,e)},t.prototype.toggleLayer=function(t,e,n){var r=this;void 0===n&&(n={});var o=this.getLayer(t),i=o&&o.options.visibility,a=void 0!==e?e:!i,s=void 0!==n.silent&&n.silent,c=function(t,e){e.options.visibility=a;var n=a?"layer:preshow":"layer:prehide",o=a?"layer:show":"layer:hide";if(s||r.webMap.emitter.emit(n,e),a&&t){var i=e.options.baseLayer?0:e.options.order;if(0===i&&r._baseLayers.length){var c=r._baseLayers.find(function(t){return t!==e.id&&r.isLayerVisible(t)});c&&r.hideLayer(c)}e.showLayer?e.showLayer.call(e,e.layer):r.webMap.mapAdapter.showLayer(e.layer),void 0!==i&&r.webMap.mapAdapter.setLayerOrder(e.layer,i,r._layers)}else e.hideLayer?e.hideLayer.call(e,e.layer):r.webMap.mapAdapter.hideLayer(e.layer);s||r.webMap.emitter.emit(o,e)};o&&o.options.visibility!==a&&(this.webMap.mapAdapter.map?c(this.webMap.mapAdapter,o):this.webMap.mapAdapter.emitter.once("create",function(t){c(t.map,o)}))},t.prototype.updateLayer=function(t){var e=this.getLayer(t);e&&this.isLayerVisible(e)&&(this.hideLayer(e,{silent:!0}),this.showLayer(e,{silent:!0}))},t.prototype.setLayerOpacity=function(t,e){var n=this.getLayer(t);n&&this.webMap.mapAdapter.setLayerOpacity&&n&&this.webMap.mapAdapter.setLayerOpacity(n.layer,e)},t.prototype.selectLayer=function(t,e){var n=this.getLayer(t);if(n){var r=n;r&&r.select&&r.select(e);var o=this.getLayerId(n);o&&this._selectedLayers.push(o)}},t.prototype.unSelectLayer=function(t,e){var n=this.getLayer(t);if(n){var r=n&&n;r.unselect&&r.unselect(e);var o=this.getLayerId(n);if(o){var i=this._selectedLayers.indexOf(o);-1!==i&&this._selectedLayers.splice(i,1)}}},t.prototype.filterLayer=function(t,e){var n=this.getLayer(t);n.filter&&n.filter(e)},t.prototype.removeLayerFilter=function(t){var e=this.getLayer(t);e.removeFilter?e.removeFilter():e.filter&&e.filter(function(){return!0})},t.prototype.setLayerData=function(t,e){var n=this.getLayer(t);n.setData?n.setData(e):n.clearLayer&&n.addData&&(n.clearLayer(),n.addData(e))},t.prototype.addLayerData=function(t,e){var n=this.getLayer(t);n.addData&&n.addData(e)},t.prototype.clearLayerData=function(t,e){var n=this.getLayer(t);n.clearLayer&&n.clearLayer(e)},t.prototype.getAttributions=function(t){var e=[];for(var n in this._layers)if(this._layers.hasOwnProperty(n)){var r=this._layers[n];if(!(void 0===t.onlyVisible||t.onlyVisible)||r.options.visibility){var o=r.options&&r.options.attribution;o&&e.push(o)}}return e},t.prototype._onLayerClick=function(t){return de(this,void 0,void 0,function(){return ye(this,function(e){return this.webMap.emitter.emit("layer:click",t),[2,Promise.resolve(t)]})})},t.prototype._updateGeoJsonOptions=function(t){var e=this,n=t.onLayerClick;t.onLayerClick=function(t){return n&&n(t),e._onLayerClick(t)},this.webMap.options.paint&&(t.paint=fe(t.paint||{},this.webMap.options.paint,this.webMap.getPaintFunctions)),t.selectedPaint&&this.webMap.options.selectedPaint&&(t.selectedPaint=fe(t.selectedPaint,this.webMap.options.selectedPaint,this.webMap.getPaintFunctions))},t}(),me=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},be=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ge=function(){function t(t){this.webMap=t}return t.prototype.addControl=function(t,e,n){return me(this,void 0,void 0,function(){var r,o;return be(this,function(i){switch(i.label){case 0:return(r="string"==typeof t?this.getControl(t,n):t)?[4,r]:[3,2];case 1:return o=i.sent(),[2,this.webMap.mapAdapter.addControl(o,e)];case 2:return[2]}})})},t.prototype.createControl=function(t,e){return me(this,void 0,void 0,function(){return be(this,function(n){switch(n.label){case 0:return[4,this.webMap.onLoad("build-map")];case 1:return n.sent(),this.webMap.mapAdapter.createControl?[2,this.webMap.mapAdapter.createControl(t,e)]:[2]}})})},t.prototype.createButtonControl=function(t){return me(this,void 0,void 0,function(){return be(this,function(e){switch(e.label){case 0:return[4,this.webMap.onLoad("build-map")];case 1:return e.sent(),this.webMap.mapAdapter.createButtonControl?[2,this.webMap.mapAdapter.createButtonControl(t)]:[2]}})})},t.prototype.createToggleControl=function(t){return me(this,void 0,void 0,function(){return be(this,function(e){switch(e.label){case 0:return[4,this.webMap.onLoad("build-map")];case 1:return e.sent(),this.webMap.mapAdapter.createToggleControl?[2,this.webMap.mapAdapter.createToggleControl(t)]:this.webMap.mapAdapter.createButtonControl?[2,Oe.utils.createToggleControl(this.webMap.mapAdapter.createButtonControl,t)]:[2]}})})},t.prototype.removeControl=function(t){t.remove?t.remove():this.webMap.mapAdapter.removeControl&&this.webMap.mapAdapter.removeControl(t)},t.prototype.getControl=function(e,n){var r=this.webMap.mapAdapter.controlAdapters[e];if(r)return new r(n);var o=t.controls[e];return o?o(this.webMap,n):void 0},t.controls={CONTROL:function(t,e){return t.createControl(e.control,e.options)},BUTTON:function(t,e){return t.createButtonControl(e)},TOGGLE:function(t,e){return t.createToggleControl(e)}},t}(),_e=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},we=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ae=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,o,(e=t[n](e)).done,e.value)})}}},Le={minZoom:0,maxZoom:21,paint:{color:"blue",opacity:1,radius:8,weight:1},selectedPaint:{color:"darkblue",opacity:1,radius:12,weight:1}},Oe=function(){function t(e){this.options=Le,this.emitter=new u.EventEmitter,this.keys=t.keys,this.runtimeParams=[],this.getPaintFunctions=t.getPaintFunctions,this._eventsStatus={},this.layers=new ve(this),this.controls=new ge(this),this.mapAdapter=e.mapAdapter,this._starterKits=e.starterKits||[],e.mapOptions&&(this.options=ae(Le||{},e.mapOptions)),this._addEventsListeners(),e.create&&this.create(this.options)}return t.prototype.create=function(t){return _e(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.getEventStatus("create")?[3,2]:(this.options=ae(Le||{},t),[4,this._setupMap()]);case 1:e.sent(),this._emitStatusEvent("create",this),e.label=2;case 2:return[2,this]}})})},t.prototype.getContainer=function(){if(this.mapAdapter.getContainer)return this.mapAdapter.getContainer();if(this.options.target){if(this.options.target instanceof HTMLElement)return this.options.target;if("string"==typeof this.options.target){var t=document.getElementById(this.options.target);if(t)return t}}},t.prototype.setCursor=function(t){this.mapAdapter.setCursor&&this.mapAdapter.setCursor(t)},t.prototype.setCenter=function(t){return this.mapAdapter.setCenter(t),this},t.prototype.getCenter=function(){return this.mapAdapter.getCenter()},t.prototype.setZoom=function(t){return this.mapAdapter.setZoom(t),this},t.prototype.getZoom=function(){return this.mapAdapter.getZoom()},t.prototype.setView=function(t,e){this.mapAdapter.setView&&t&&e?this.mapAdapter.setView(t,e):(t&&this.mapAdapter.setCenter(t),e&&this.mapAdapter.setZoom(e))},t.prototype.fitBounds=function(t,e){return this.mapAdapter.fit(t,e),this},t.prototype.getEventStatus=function(t){var e=t,n=this._eventsStatus[e];return void 0!==n&&n},t.prototype.onLoad=function(t){var e=this;return void 0===t&&(t="create"),new Promise(function(n){e.getEventStatus(t)?n(e):e.emitter.once(t,function(){n(e)})})},t.prototype.onMapLoad=function(t){var e=this;return new Promise(function(n){var r=function(){var r=e.mapAdapter;t&&t(r),r&&n(r)},o=void 0===e.mapAdapter.isLoaded||e.mapAdapter.isLoaded;e.mapAdapter.map&&o?r():e.mapAdapter.emitter.once("create",function(){r()})})},t.prototype.fitLayer=function(t){return _e(this,void 0,void 0,function(){return we(this,function(e){return this.layers.fitLayer(t),[2]})})},t.prototype.isBaseLayer=function(t){return this.layers.isBaseLayer(t)},t.prototype.getActiveBaseLayer=function(){var t=this,e=this.getBaseLayers().find(function(e){return t.isLayerVisible(e)});if(e)return this.getLayer(e)},t.prototype.getBaseLayers=function(){return this.layers.getBaseLayers()},t.prototype.getLayerAdapters=function(){return this.mapAdapter.layerAdapters},t.prototype.getLayerAdapter=function(t){return this.mapAdapter.layerAdapters[t]},t.prototype.getLayer=function(t){return this.layers.getLayer(t)},t.prototype.getLayerId=function(t){return this.layers.getLayerId(t)},t.prototype.getLayers=function(){return this.layers.getLayers()},t.prototype.findLayer=function(t){return this.layers.findLayer(t)},t.prototype.isLayerVisible=function(t){return this.layers.isLayerVisible(t)},t.prototype.addBaseLayer=function(t,e){return _e(this,void 0,void 0,function(){return we(this,function(n){return[2,this.layers.addBaseLayer(t,e)]})})},t.prototype.addLayer=function(t,e,n){return _e(this,void 0,void 0,function(){return we(this,function(r){return[2,this.layers.addLayer(t,e,n)]})})},t.prototype.addLayerFromAsyncAdapter=function(t,e,n){return _e(this,void 0,void 0,function(){return we(this,function(r){return[2,this.layers.addLayerFromAsyncAdapter(t,e,n)]})})},t.prototype.removeLayers=function(t){this.layers.removeLayers(t)},t.prototype.removeOverlays=function(){this.layers.removeOverlays()},t.prototype.removeLayer=function(t){this.layers.removeLayer(t)},t.prototype.addGeoJsonLayer=function(t,e){return _e(this,void 0,void 0,function(){return we(this,function(n){return[2,this.layers.addGeoJsonLayer(t,e)]})})},t.prototype.showLayer=function(t){return this.layers.showLayer(t)},t.prototype.hideLayer=function(t){this.layers.hideLayer(t)},t.prototype.toggleLayer=function(t,e){this.layers.toggleLayer(t,e)},t.prototype.updateLayer=function(t){this.layers.updateLayer(t)},t.prototype.setLayerOpacity=function(t,e){this.layers.setLayerOpacity(t,e)},t.prototype.selectLayer=function(t,e){this.layers.selectLayer(t,e)},t.prototype.unSelectLayer=function(t,e){this.layers.unSelectLayer(t,e)},t.prototype.filterLayer=function(t,e){this.layers.filterLayer(t,e)},t.prototype.removeLayerFilter=function(t){this.layers.removeLayerFilter(t)},t.prototype.setLayerData=function(t,e){this.layers.setLayerData(t,e)},t.prototype.addLayerData=function(t,e){this.layers.addLayerData(t,e)},t.prototype.clearLayerData=function(t,e){this.layers.clearLayerData(t,e)},t.prototype.getAttributions=function(t){return this.layers.getAttributions(t)},t.prototype.createControl=function(t,e){return _e(this,void 0,void 0,function(){return we(this,function(n){return[2,this.controls.createControl(t,e)]})})},t.prototype.createButtonControl=function(t){return _e(this,void 0,void 0,function(){return we(this,function(e){return[2,this.controls.createButtonControl(t)]})})},t.prototype.createToggleControl=function(t){return _e(this,void 0,void 0,function(){return we(this,function(e){return[2,this.controls.createToggleControl(t)]})})},t.prototype.removeControl=function(t){this.controls.removeControl(t)},t.prototype.getControl=function(t,e){return this.controls.getControl(t,e)},t.prototype.addControl=function(t,e,n){return _e(this,void 0,void 0,function(){return we(this,function(r){return[2,this.controls.addControl(t,e,n)]})})},t.prototype._emitStatusEvent=function(t,e){var n=t;this._eventsStatus[n]=!0,this.emitter.emit(n,e)},t.prototype._setupMap=function(){return _e(this,void 0,void 0,function(){return we(this,function(t){switch(t.label){case 0:return[4,this.mapAdapter.create(this.options)];case 1:return t.sent(),this._zoomToInitialExtent(),[4,this._addLayerProviders()];case 2:return t.sent(),[4,this._onLoadSync()];case 3:return t.sent(),this._emitStatusEvent("build-map",this.mapAdapter),[2,this]}})})},t.prototype._zoomToInitialExtent=function(){if(this._extent)this.mapAdapter.fit(this._extent);else if(this.options.bounds)this.fitBounds(this.options.bounds);else{var t=this.options,e=t.center,n=t.zoom;this.setView(e,n)}},t.prototype._addLayerProviders=function(){var t,e,n,r;return _e(this,void 0,void 0,function(){var o,i,a,s,c,u,l,p,f,h,d;return we(this,function(y){switch(y.label){case 0:y.trys.push([0,26,,27]),y.label=1;case 1:y.trys.push([1,19,20,25]),o=Ae(this._starterKits),y.label=2;case 2:return[4,o.next()];case 3:return(i=y.sent()).done?[3,18]:(a=i.value).getLayerAdapters?[4,a.getLayerAdapters.call(a)]:[3,17];case 4:if(!(s=y.sent()))return[3,17];y.label=5;case 5:y.trys.push([5,11,12,17]),c=Ae(s),y.label=6;case 6:return[4,c.next()];case 7:return(u=y.sent()).done?[3,10]:[4,(l=u.value).createAdapter(this)];case 8:(p=y.sent())&&(this.mapAdapter.layerAdapters[l.name]=p),y.label=9;case 9:return[3,6];case 10:return[3,17];case 11:return f=y.sent(),n={error:f},[3,17];case 12:return y.trys.push([12,,15,16]),u&&!u.done&&(r=c.return)?[4,r.call(c)]:[3,14];case 13:y.sent(),y.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[3,2];case 18:return[3,25];case 19:return h=y.sent(),t={error:h},[3,25];case 20:return y.trys.push([20,,23,24]),i&&!i.done&&(e=o.return)?[4,e.call(o)]:[3,22];case 21:y.sent(),y.label=22;case 22:return[3,24];case 23:if(t)throw t.error;return[7];case 24:return[7];case 25:return[3,27];case 26:throw d=y.sent(),new Error(d);case 27:return[2]}})})},t.prototype._onLoadSync=function(){var t,e;return _e(this,void 0,void 0,function(){var n,r,o,i,a;return we(this,function(s){switch(s.label){case 0:s.trys.push([0,8,9,14]),n=Ae(this._starterKits),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,7];if(!(o=r.value).onLoadSync)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,o.onLoadSync.call(o,this)];case 4:return s.sent(),[3,6];case 5:return i=s.sent(),console.error(i),[3,6];case 6:return[3,1];case 7:return[3,14];case 8:return a=s.sent(),t={error:a},[3,14];case 9:return s.trys.push([9,,12,13]),r&&!r.done&&(e=n.return)?[4,e.call(n)]:[3,11];case 10:s.sent(),s.label=11;case 11:return[3,13];case 12:if(t)throw t.error;return[7];case 13:return[7];case 14:return[2]}})})},t.prototype._addEventsListeners=function(){var t=this;["click","zoomstart","zoom","zoomend","movestart","move","moveend"].forEach(function(e){t.mapAdapter.emitter.on(e,function(n){t.emitter.emit(e,n)})}),this.onMapLoad().then(function(){})},t.keys=new oe,t.utils={detectGeometryType:se,findMostFrequentGeomType:ce,updateGeojsonAdapterOptions:le,createToggleControl:ne},t.decorators={onLoad:ie},t.controls=ge.controls,t}(),xe=Oe,Ce=function(){return(Ce=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Pe=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},ke=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ee={tms:"TILE"};function Ie(t,e){return void 0===e&&(e="https://qms.nextgis.com"),function(){function n(t,e){this.map=t,this.options=e,this.options=e,this.options.baseLayer=!0}return n.prototype.addLayer=function(n){return Pe(this,void 0,void 0,function(){var r,o,i,a;return ke(this,function(s){switch(s.label){case 0:return this.qms||!n.qmsId?[3,2]:(r=this,[4,je(e+"/api/v1/geoservices/"+n.qmsId)]);case 1:r.qms=s.sent(),s.label=2;case 2:return(o=this.qms)&&(i=Ee[o.type||"tms"],(a=t.mapAdapter.layerAdapters[i])&&"TILE"===i)?(n=Ce({maxZoom:t.options.maxZoom,minZoom:t.options.minZoom},this.options,function(t){var e=("https:"===location.protocol?"https":"http")+"://";return{url:t.url.replace(/^(https?|ftp):\/\//,e),name:t.name,attribution:t.copyright_text,maxZoom:t.z_max,minZoom:t.z_min}}(o)),this.options=n,[2,new a(this.map,n).addLayer(n)]):[2]}})})},n}()}function je(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&200===r.status&&r.responseText)try{e(JSON.parse(r.responseText))}catch(t){n(t)}},r.open("GET",function(t){return t.replace(/([^:]\/)\/+/g,"$1")}(t),!0),r.send()})}var Se=function(){return(Se=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Me=function(){function t(t){this.options={url:"https://qms.nextgis.com"},this.options=Se({},this.options,t),this.url=this.options.url}return t.prototype.getLayerAdapters=function(){var t=this;return Promise.resolve([{name:"QMS",createAdapter:function(e){return Promise.resolve(t._createAdapter(e))}}])},t.prototype._createAdapter=function(t){return Ie(t,this.url)},t.utils={createQmsAdapter:Ie},t}(),Te=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(){return(Fe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Be=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},De=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Re(t,e,n){return Be(this,void 0,void 0,function(){var r,o,i;return De(this,function(a){return r=e.mapAdapter.layerAdapters.GEOJSON,o=n.makeQuery("/api/resource/{id}/geojson",{id:t.resourceId}),i=function(e){var n={data:e=Mn(e)};return t.id&&(n.id=t.id),xe.utils.updateGeojsonAdapterOptions(n)},[2,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Te(e,t),e.prototype.addLayer=function(e){return Be(this,void 0,void 0,function(){var n,r;return De(this,function(a){switch(a.label){case 0:return[4,o];case 1:return n=a.sent(),r=i(n),[2,t.prototype.addLayer.call(this,Fe({},e,r))]}})})},e.prototype.beforeRemove=function(){o.cancel()},e}(r)]})})}var Ne=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$e=function(){return($e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ve=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Ge=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function ze(t,e,n){return Ve(this,void 0,void 0,function(){var r,o;return Ge(this,function(i){if("IMAGE"===(r=t.adapter||"IMAGE")&&(o=e.getLayerAdapters(),!o||o.IMAGE||(r="TILE")),"IMAGE"===r||"TILE"===r||"MVT"===r)return[2,function(r){function o(o,i){var a=r.call(this,o,i)||this;a.map=o,a.resourceId=t.resourceId;var s=Bn(t,e,n);if(s)if(s.resourceId){var c=$e({},s,{resourceId:s.resourceId});a.options=$e({},a.options,c)}else{var u=s;a.options=$e({},a.options,u)}return a}return Ne(o,r),o.prototype.addLayer=function(t){return r.prototype.addLayer.call(this,$e({},this.options,t))},o.prototype.getIdentificationIds=function(){return Ve(this,void 0,void 0,function(){var t;return Ge(this,function(e){return(t=this.item&&this.item.resource.parent.id)?[2,[t]]:[2]})})},o}(e.mapAdapter.layerAdapters[r])];throw new Error(r+" not supported yet. Only TILE")})})}function Ue(t,e,n,r){void 0===e&&(e=function(t){return!!t}),void 0===r&&(r=[]);var o=[];if(Array.isArray(t))o=t;else{e(t)&&r.push(t);var i=n(t);i&&(Array.isArray(i)?o=i:o.push(i))}for(var a=0;a<o.length;a++)o[a]&&Ue(o[a],e,n,r);return r}var Ze,He=function(){function t(t){this._children=[],this.item=t}return t.prototype.setParent=function(t){this._parent=t},t.prototype.addChild=function(t){this._children.push(t)},t.prototype.getParent=function(){return this._parent},t.prototype.getParents=function(t){var e=this.getParent();return e?Ue(e,t,function(t){return t.tree.getParent()}):[]},t.prototype.find=function(t){return Ue(this._children,t,function(t){return t.tree.getChildren()})[0]},t.prototype.all=function(t){return this.getDescendants(t)},t.prototype.getDescendants=function(t){return Ue(this._children,t,function(t){return t.tree.getChildren()})},t.prototype.getChildren=function(){return this._children},t}();try{Ze=n(15)}catch(t){}var We,qe=Ze&&Ze.EventEmitter,Je=function(){function t(t,e,n){this.emitter=qe&&new qe,this._blocked=!1,this.item=e,this.options=Object.assign({},n),this.name=t,this._value=this.getProperty()}return t.prototype.getProperty=function(){return"function"==typeof this.options.getProperty?this.options.getProperty.call(this,this.item):this.options.value},t.prototype.getParents=function(){return this.item.tree.getParents()||[]},t.prototype.getParent=function(){return this.item.tree.getParent()},t.prototype.isGroup=function(){return this.item.tree.getDescendants().length},t.prototype.isBlocked=function(){var t=this;if(void 0===this._blocked){var e=this.item.tree.getParents();if(e){var n=e.find(function(e){var n=e.properties&&e.properties.property(t.name);return!!n&&!n.get()});this._blocked=!!n}else this._blocked=!1}return this._blocked},t.prototype.set=function(t,e){this._value=this._prepareValue(t),this.update(this._value,e),this._fireChangeEvent(this._value,e)},t.prototype.get=function(){return this.getValue()},t.prototype.update=function(t,e){this._callOnSet(t,e)},t.prototype.getContainer=function(){return this._container},t.prototype.destroy=function(){if(this._container){var t=this._container.parentNode;t&&t.removeChild(this._container)}this._removeEventsListener&&this._removeEventsListener()},t.prototype.getValue=function(){return void 0!==this._value?this._value:this.getProperty()},t.prototype._prepareValue=function(t){return t},t.prototype._callOnSet=function(t,e){this.options.onSet&&this.options.onSet.call(this,t,e,this.item)},t.prototype._fireChangeEvent=function(t,e){var n=this;this.emitter&&(t=void 0!==t?t:this.getValue(),this.emitter.emit("change",{value:t,options:e}),this.item.tree.getParents().forEach(function(r){var o=r.properties&&r.properties.property(n.name);o&&o.emitter.emit("change-tree",{value:t,options:e,item:n.item})}))},t}(),Qe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(){return(Ye=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ke=function(t){function e(n,r,o){var i=t.call(this,n,r,Ye({},e.options,o))||this;return i.set(i.get()),i}return Qe(e,t),e.prototype.update=function(t,e){if(t){if(e&&e.bubble||this.options.bubble){this.unBlock(e);var n=this.getParent(),r=n&&n.properties&&n.properties.property(this.name);r&&r.set(t,Object.assign({},e,{bubble:!0,propagation:!1}))}this.isBlocked()||this._turnOn(e)}else this._turnOff(e);(e&&e.propagation||this.options.propagation)&&this._propagation(t,e)},e.prototype.getHierarchyValue=function(){var t=this;return this.get()&&this.getParents().every(function(e){var n=e.properties&&e.properties.get(t.name);return n&&n.get()})},e.prototype._prepareValue=function(t){return t},e.prototype._turnOff=function(t){this.options.turnOff&&this.options.turnOff.call(this,t),this._callOnSet(!1,t),this.options.hierarchy&&this.isGroup()&&this.blockChilds(t)},e.prototype._turnOn=function(t){this.options.turnOn&&this.options.turnOn.call(this,t),this._callOnSet(!0,t),this.options.hierarchy&&this.isGroup()&&this.unblockChilds(t)},e.prototype.block=function(t){this._blocked=!0,this._block(t)},e.prototype._block=function(t){this._turnOff(t)},e.prototype.unBlock=function(t){this._blocked=!1,this.getValue()&&this._unBlock(t)},e.prototype._unBlock=function(t){this._turnOn(t)},e.prototype.blockChilds=function(t){var e=this;this.item.tree.getDescendants().forEach(function(n){return e._blockChild(n,t)})},e.prototype.unblockChilds=function(t){var e=this;this.item.tree.getChildren().forEach(function(n){return e._unBlockChild(n,t)})},e.prototype._blockChild=function(t,e){var n=t.properties&&t.properties.property(this.name);n&&n.block&&n.block(e)},e.prototype._unBlockChild=function(t,e){var n=t.properties&&t.properties.property(this.name);n&&n.unBlock&&n.unBlock(e)},e.prototype._propagation=function(t,e){if(this.isGroup())for(var n=this.item.tree.getChildren(),r=0;r<n.length;r++){var o=n[r],i=o.properties&&o.properties.property(this.name);i&&i.set(t,Ye({},e,{propagation:!0,bubble:!1}))}},e.options={hierarchy:!0,bubble:!1,propagation:!1,label:"Toggle"},e}(Je),Xe=function(){return(Xe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},tn=function(){function t(t,e){this.item=t,this.options={},this._properties={},this._propertiesList=[],e&&e.forEach(this._setPropertyHandler.bind(this))}return t.prototype.add=function(t){this._setPropertyHandler(t)},t.prototype._setPropertyHandler=function(e){var n=t.handlers,r=e.handler;if(!r&&e.type)switch(e.type){case"boolean":r=n.CheckProperty;break;case"string":r=n.BaseProperty;break;default:r=n.BaseProperty}if(r&&e.name){var o=Xe({},e||{});this._properties[e.name]=new r(e.name,this.item,o),this._propertiesList.push(e.name)}},t.prototype.update=function(){this.list().forEach(function(t){t.update()})},t.prototype.get=function(t){var e=this.property(t);if(e)return e.get()},t.prototype.set=function(t,e,n){var r=this.property(t);if(r)return r.set(e,n)},t.prototype.property=function(t){return this._properties[t]},t.prototype.list=function(){var t=this;return this._propertiesList.map(function(e){return t._properties[e]})},t.prototype.destroy=function(){for(var t in this._properties)if(this._properties.hasOwnProperty(t)){var e=this.property(t);e&&e.destroy&&e.destroy()}this._properties={},this._propertiesList=[]},t.handlers={CheckProperty:Ke},t}(),en=function(){return(en=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};try{We=n(15)}catch(t){}var nn=We&&We.EventEmitter,rn=function(){function t(t){this.options={},this.emitter=nn&&new nn,this.options=en({},t),this.tree=new He(this)}return t.prototype.initProperties=function(){this.properties=new tn(this,this.options.properties)},t}(),on=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(){return(an=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},sn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},cn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},un=function(t){function e(n,r,o,i){var a=t.call(this,an({},e.options,o))||this;return a.webMap=n,a.item=r,i&&a.tree.setParent(i),a.initProperties(),a._init(r),a}return on(e,t),e.prototype.initItem=function(t){return sn(this,void 0,void 0,function(){var n,r,o,i,a,s,c,u=this;return cn(this,function(l){switch(l.label){case 0:return n=t._layer,"group"!==t.item_type&&"root"!==t.item_type?[3,1]:(t.children&&t.children.length&&t.children.reverse().sort(function(t,e){return"layer"===t.item_type&&"layer"===e.item_type?e.draw_order_position-t.draw_order_position:0}).forEach(function(t){var n=new e(u.webMap,t,u.options,u);u.tree.addChild(n)}),[3,3]);case 1:return"layer"!==t.item_type?[3,3]:(r=t.adapter||t.layer_adapter.toUpperCase(),o=t.layer_max_scale_denom?this._mapScaleToZoomLevel(t.layer_max_scale_denom):this.webMap.options.maxZoom,i=t.layer_min_scale_denom?this._mapScaleToZoomLevel(t.layer_min_scale_denom):this.webMap.options.minZoom,a=an({maxZoom:o,minZoom:i},t,{headers:this.options.headers}),[4,this.webMap.addLayer(r,a)]);case 2:n=l.sent(),l.label=3;case 3:return n&&(t._layer=n,this.layer=n,this.properties&&"layer"===t.item_type&&t.layer_enabled&&this.properties.property("visibility").set(!0),void 0!==(s="layer"===t.item_type&&t.layer_transparency)&&(c=(100-s)/100,this.webMap.setLayerOpacity(n,c))),[2]}})})},e.prototype.bringToFront=function(){},e.prototype.fit=function(){"layer"===this.item.item_type&&console.log(this.item)},e.prototype._mapScaleToZoomLevel=function(t){return function(t){var e=[104,45];if(e){var n=e[1],r=Hn()*(i=n,12756274*Math.PI*Math.cos(i*Math.PI/180))/t,o=function(t){return Math.log(t/256)/Math.LN2}(r);return o}var i;return Math.round(Math.log(591657550.5/(t/2))/Math.log(2))}(t)},e.prototype._init=function(t){return sn(this,void 0,void 0,function(){return cn(this,function(e){switch(e.label){case 0:return[4,this.initItem(t)];case 1:return e.sent(),this.emitter.emit("init"),[2]}})})},e.options={properties:[{type:"boolean",name:"visibility",getProperty:function(t){if(t){if("group"===t.item.item_type)return!0;if("layer"===t.item.item_type)return t.item.layer_enabled;if("root"===t.item.item_type)return!0}return!1},onSet:function(t,e,n){n&&n.layer&&"layer"===n.item.item_type&&(t?n.webMap.showLayer(n.layer):n.webMap.hideLayer(n.layer),n.item.layer_enabled=t)}}]},e}(rn),ln=function(){return(ln=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},pn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},fn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},hn=function(){function t(t,e){this.map=t,this.options=e,this.pixelRadius=10,this.emitter=new u.EventEmitter;var n=e.resourceId;if(Array.isArray(n)?(this.resourceId=n[0],this.options.id=n[1]):this.resourceId=n,!this.resourceId)throw new Error("NGW `resourceId` is not defined")}return t.prototype.addLayer=function(t){return pn(this,void 0,void 0,function(){var e,n,r=this;return fn(this,function(o){switch(o.label){case 0:return this.options=ln({},this.options,t),e=this,[4,this._getWebMapLayerItem()];case 1:return e.layer=o.sent(),this.options.identification?[4,this._getWebmapIds()]:[3,3];case 2:(n=o.sent())&&(this._webmapLayersIds=n,this.$$onMapClick=function(t){return r._onMapClick(t)},this.options.webMap.emitter.on("click",this.$$onMapClick)),o.label=3;case 3:return[2,this.layer]}})})},t.prototype.removeLayer=function(){var t=this.options.webMap.mapAdapter;this.$$onMapClick&&this.options.webMap.emitter.off("click",this.$$onMapClick),this.getDependLayers().forEach(function(e){t.removeLayer(e.layer.layer)}),this.$$onMapClick=void 0,delete this.options,delete this.layer,delete this.response,delete this._webmapLayersIds},t.prototype.showLayer=function(){this.layer&&this.layer.properties&&this.layer.properties.property("visibility").set(!0)},t.prototype.hideLayer=function(){this.layer&&this.layer.properties&&this.layer.properties.property("visibility").set(!1)},t.prototype.getExtent=function(){var t=this.response&&this.response.webmap;if(t)return Rn(t)},t.prototype.getDependLayers=function(){return this.layer&&this.layer.tree.getDescendants()||[]},t.prototype.getIdentificationIds=function(){return pn(this,void 0,void 0,function(){return fn(this,function(t){switch(t.label){case 0:return this._webmapLayersIds?[2,this._webmapLayersIds]:[3,1];case 1:return[4,this._getWebmapIds()];case 2:return[2,t.sent()]}})})},t.prototype._getWebMapLayerItem=function(){return pn(this,void 0,void 0,function(){var t,e=this;return fn(this,function(n){switch(n.label){case 0:return this.resourceId?[4,this.getWebMapConfig(this.resourceId)]:[3,2];case 1:if((t=n.sent())&&t.root_item)return[2,new Promise(function(n){var r={};if(e.options.connector&&e.options.connector.options.auth){var o=e.options.connector.getAuthorizationHeaders();o&&(r.headers=o)}var i=new un(e.options.webMap,t.root_item,r);i.emitter.on("init",function(){return n(i)})})];n.label=2;case 2:return[2]}})})},t.prototype.getWebMapConfig=function(t){return pn(this,void 0,void 0,function(){var e,n;return fn(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.options.connector.get("resource.item",null,{id:t})];case 1:return e=r.sent(),this.response=e,(n=e.webmap)?(this._updateItemsParams(n.root_item,this.options.webMap),[2,n]):[3,3];case 2:throw r.sent();case 3:return[2]}})})},t.prototype._updateItemsParams=function(t,e){var n=this;if(t)if("group"===t.item_type||"root"===t.item_type)t.children&&(t.children=t.children.map(function(t){return n._updateItemsParams(t,e)}));else if("layer"===t.item_type){var r=function(t){return t.replace(/([^:]\/)\/+/g,"$1")}(this.options.baseUrl+"/api/component/render/image"),o=t.layer_style_id;t.url=r,t.resourceId=o,t.updateWmsParams=function(t){return Fn(t,o)},t=ln({},t,Bn({adapter:t.layer_adapter.toUpperCase(),resourceId:o},e,this.options.baseUrl))}return t},t.prototype._getWebmapIds=function(){return pn(this,void 0,void 0,function(){var t,e,n,r=this;return fn(this,function(o){switch(o.label){case 0:return(t=this.layer)&&"root"===t.item.item_type?(e=t.item.children,n=[],e.forEach(function(t){if("layer"===t.item_type){var e=t.layer_style_id,o=r.options.connector.get("resource.item",{},{id:e}).then(function(e){if(e){var n=Number(e.resource.parent.id);return t.parentId=n,n}});n.push(o)}}),[4,Promise.all(n)]):[3,2];case 1:return[2,o.sent().filter(function(t){return void 0!==t})];case 2:return[2]}})})},t.prototype._sendIdentifyRequest=function(t,e){var n=this;if(void 0===e&&(e={}),this._webmapLayersIds)return Vn(t,{layers:this._webmapLayersIds,connector:this.options.connector,radius:this.pixelRadius}).then(function(e){return n.emitter.emit("identify",{ev:t,data:e}),e})},t.prototype._onMapClick=function(t){this._sendIdentifyRequest(t)},t}(),dn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},vn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};var mn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},bn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},gn=function(){function t(){}return t.prototype.getExtent=function(){return mn(this,void 0,void 0,function(){return bn(this,function(t){return this.item?[2,$n(this.item,this.connector)]:[2]})})},t}(),_n=function(){return(_n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},wn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},An=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ln=["mapserver_style","qgis_vector_style","raster_style"];function On(t,e,n,r){return wn(this,void 0,void 0,function(){var o,i,a;return An(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,r.get("resource.item",null,{id:t.resourceId})];case 1:if((i=s.sent()).webmap)o=function(t,e,n,r){return yn(this,void 0,void 0,function(){return vn(this,function(o){return[2,function(o){function i(i){return o.call(this,i,{webMap:e,resourceId:t.resourceId,baseUrl:n,connector:r})||this}return dn(i,o),i}(hn)]})})}(t,e,n,r);else if(-1!==Ln.indexOf(i.resource.cls))"GEOJSON"===t.adapter?(a=_n({},t,{resourceId:i.resource.parent.id}),o=Re(a,e,r)):o=ze(t,e,n);else if("vector_layer"===i.resource.cls)if(t.adapter&&"GEOJSON"!==t.adapter){if("MVT"!==t.adapter)return[2,xn(i.resource.id,t,e,n,r)];o=ze(t,e,n)}else o=Re(t,e,r);else{if("raster_layer"===i.resource.cls)return[2,xn(i.resource.id,t,e,n,r)];i.basemap_layer&&i.basemap_layer.qms&&(o=Promise.resolve(Me.utils.createQmsAdapter(e))).then(function(t){if(t&&i.basemap_layer&&i.basemap_layer.qms){var e=JSON.parse(i.basemap_layer.qms);t.prototype.qms=e,t.prototype.baseLayer=!0}})}return[3,3];case 2:return s.sent(),o="GEOJSON"===t.adapter?Re(t,e,r):ze(t,e,n),[3,3];case 3:return o?[2,o.then(function(t){if(t){var e=t;return e.prototype.item=i,e.prototype.connector=r,n=e,[gn].forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t.prototype,e);r&&Object.defineProperty(n.prototype,e,r)})}),e}var n})]:[2]}})})}function xn(t,e,n,r,o){return wn(this,void 0,void 0,function(){var i,a;return An(this,function(s){switch(s.label){case 0:return[4,o.get("resource.collection",null,{parent:t})];case 1:return i=s.sent(),(a=i&&i[0])?[2,On(_n({},e,{resourceId:a.resource.id}),n,r,o)]:[2]}})})}var Cn=n(81),Pn=n(82),kn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),En=function(){return(En=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},In=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},jn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Sn={"EPSG:3857":"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"};function Mn(t){return Object(Cn.toWgs84)(t,Sn["EPSG:3857"],Sn)}function Tn(t){return Mn(Object(Pn.parse)(t))}function Fn(t,e){return{resource:e,extent:t.bbox,size:t.width+","+t.height,timestamp:Date.now()}}function Bn(t,e,n){var r=t.adapter||"IMAGE",o=e.getLayerAdapters(),i=!o||o.IMAGE;if("IMAGE"===r){if(i)return{url:n+"/api/component/render/image",resourceId:t.resourceId,headers:t.headers,updateWmsParams:function(e){return Fn(e,t.resourceId)}};r="TILE"}return"MVT"===r?{url:n+"/api/component/feature_layer/mvt?x={x}&y={y}&z={z}&resource="+t.resourceId+"&simplification="+(t.simplification||0)}:"TILE"===r?{url:n+"/api/component/render/tile?z={z}&x={x}&y={y}&resource="+t.resourceId,adapter:r}:void 0}function Dn(t,e,n,r){var o=r.getAuthorizationHeaders();return o&&(t.headers=o),On(t,e,n,r)}function Rn(t){var e=t.extent_bottom,n=t.extent_left,r=t.extent_top,o=t.extent_right;if(e&&n&&r&&o){var i=[n,e,o,r];return i[3]>82&&(i[3]=82),i[1]<-82&&(i[1]=-82),i}}function Nn(t,e){return e.get("layer.extent",name,{id:t}).then(function(t){if(t){var e=t.extent,n=e.maxLat,r=e.maxLon,o=e.minLat;return[e.minLon,o,r,n]}})}function $n(t,e){return In(this,void 0,void 0,function(){var n;return jn(this,function(r){return t.webmap?[2,Rn(t.webmap)]:-1!==(n=t.resource).cls.indexOf("style")?[2,e.get("resource.item",null,{id:n.parent.id}).then(function(t){return Nn(t.resource.id,e)})]:[2,Nn(n.id,e)]})})}function Vn(t,e){var n=function(t,e,n,r){void 0===n&&(n=10);void 0===r&&(r=6);for(var o=n/Zn*Un,i=o/Math.cos(e*zn),a=[],s=0;s<r+1;s++){var c=Math.PI*(s/(r/2)),u=t+i*Math.cos(c),l=e+o*Math.sin(c);a.push([u,l])}return a}(t.latLng.lng,t.latLng.lat,e.radius),r=[];n.forEach(function(t){var e=function(t,e){var n=20037508.34*t/180,r=Math.log(Math.tan((90+e)*Math.PI/360))/(Math.PI/180);return[n,r=20037508.34*r/180]}(t[0],t[1]),n=e[0],o=e[1];r.push(n+" "+o)});var o={geom:"POLYGON(("+r.join(", ")+"))",srs:3857,layers:e.layers};return e.connector.post("feature_layer.identify",{data:o})}var Gn,zn=Math.PI/180,Un=180/Math.PI,Zn=3963;function Hn(){if(void 0===Gn){var t=document.createElement("div");t.style.cssText="position: absolute;  left: -100%;  top: -100%;  width: 100cm;",document.body.appendChild(t);var e=t.offsetWidth;document.body.removeChild(t),Gn=e}return Gn}var Wn=function(){return(Wn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},qn=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},Jn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Qn=function(){function t(t){if(this.options=t,!this.options.baseUrl)throw new Error("url is not defined");this.url=this.options.baseUrl,this.connector=new f({baseUrl:this.url,auth:this.options.auth})}return t.prototype.onLoadSync=function(t){return qn(this,void 0,void 0,function(){var e,n,r,o,i;return Jn(this,function(a){switch(a.label){case 0:if(!this.options.resourceId||!this.options.baseUrl)return[3,4];if(!(e=[this.options.resourceId]).length)return[3,4];n=0,r=e,a.label=1;case 1:return n<r.length?(o=r[n],i={resourceId:o,connector:this.connector,baseUrl:this.options.baseUrl,webMap:t},[4,t.addLayer(hn,Wn({visibility:!0,fit:!0,identification:this.options.identification,pixelRadius:this.options.pixelRadius},i))]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.getLayerAdapters=function(){return Promise.resolve([this._getLayerAdapter()])},t.prototype._getLayerAdapter=function(){var t=this;return{name:"WEBMAP",createAdapter:function(e){return Promise.resolve(t._createAdapter(e))}}},t.prototype._createAdapter=function(t){var e,n=this.connector,r=this.options.baseUrl;return e={webMap:t,connector:n,baseUrl:r},function(t){function n(n,r){return r=En({},e,r),t.call(this,n,r)||this}return kn(n,t),n}(hn)},t.utils={toWgs84:Mn,wktToGeoJson:Tn,addNgwLayer:Dn,getNgwResourceExtent:$n,sendIdentifyRequest:Vn,pixelsInMeterWidth:Hn},t.updateWmsParams=Fn,t.getLayerAdapterOptions=Bn,t.addNgwLayer=Dn,t}(),Yn={brill:'<path d="m6 0-5 6 5 6 5-6z"/>',circle:'<circle cx="6" cy="6" r="6"/>',rect:'<rect width="12" height="12"/>',marker:'<path d="m6 0c-1.85 0-4 1.19-4 4.22 0 2.05 3.08 6.59 4 7.78 0.821-1.19 4-5.62 4-7.78 0-3.03-2.15-4.22-4-4.22z"/>',cross:'<path d="M 2.4,12 6,8.4 9.6,12 12,9.6 8.4,6 12,2.4 9.6,0 6,3.6 2.4,0 0,2.4 3.6,6 0,9.6 Z"/>',star:'<path d="m6 0.25 1.71 4.18 4.29-1.04e-4 -3.43 3.14 0.857 4.18-3.43-3.14-3.43 3.14 0.857-4.18-3.43-3.14 4.29-0.209z"/>',triangle:'<path d="m12 11.7h-12l6-11.2z"/>',plus:'<path d="m7.5 12v-4.5h4.5v-3h-4.5v-4.5h-3v4.5h-4.5v3h4.5v4.5z"/>',minus:'<path d="m12 7.5v-3h-12v3z"/>',asterisk:'<path d="m7.59 12v-3.27l2.83 1.64 1.58-2.74-2.85-1.64 2.83-1.64-1.56-2.74-2.83 1.64v-3.24h-3.17v3.24l-2.85-1.64-1.57 2.74 2.84 1.64-2.84 1.64 1.57 2.74 2.85-1.64v3.27z"/>'},Kn=.8;function Xn(t){void 0===t&&(t={});var e=t.shape||"circle",n=t.color||"blue",r=t.strokeColor||"white",o=t.size||12,i=o/2,a="number"==typeof t.stroke?t.stroke:Kn,s=o/12,c=Yn[e]||"circle",u=function(t,e,n,r){void 0===n&&(n=0);var o=n/2,i='<svg\n    version="1.1"\n    xmlns="http://www.w3.org/2000/svg"\n    width="'+t+'"\n    height="'+e+'"\n    viewBox="-'+o+" -"+o+" "+(t+n)+" "+(e+n)+'"\n  >'+r+"</svg>";return(new DOMParser).parseFromString(i,"image/svg+xml").documentElement}(o,o,a*s,"string"==typeof c?c:c(t)),l=u.firstChild,p="scale("+s+")";return l.setAttribute("fill",n),a&&(l.setAttribute("stroke",r),l.setAttribute("stroke-width",String(a))),l.setAttribute("transform",p),{type:"icon",iconSize:[o,o],iconAnchor:[i,i],html:(new XMLSerializer).serializeToString(u)}}function tr(){return xe.decorators.onLoad("build-map")}var er=function(){return(er=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function nr(t){return t.replace(/([^:]\/)\/+/g,"$1")}function rr(t,e,n){void 0===n&&(n=!1);var r=Array.isArray(e),o=r&&[]||{};return r?n?(t=t||[],o=o.concat(t),e.forEach(function(e,r){void 0===o[r]?o[r]=e:"object"==typeof e?o[r]=rr(t[r],e,n):-1===t.indexOf(e)&&o.push(e)})):o=e:(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),Object.keys(e).forEach(function(r){"object"==typeof e[r]&&e[r]&&"object"==typeof t[r]&&"object"==typeof e[r]?o[r]=rr(t[r],e[r],n):o[r]=e[r]})),o}function or(t,e,n){if("number"==typeof e)t.push(er({},n,{resourceId:e}));else if(Array.isArray(e)){var r=e[0],o=e[1];t.push(er({},n,{resourceId:r,id:o}))}else"object"==typeof e&&t.push(er({},n,e))}var ir=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ar=function(){return(ar=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},sr=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},cr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ur=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},lr=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pr=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},fr={target:"map",baseUrl:"http://dev.nextgis.com/sandbox",controls:["ZOOM","ATTRIBUTION"],controlsOptions:{ZOOM:{position:"top-left"},ATTRIBUTION:{position:"bottom-right",customAttribution:['<a href="http://nextgis.ru" target="_blank">©NextGIS</a>']}},pixelRadius:10};var hr=function(t){function e(e,n){var r=t.call(this,function(t,e){var n=rr(fr,e),r=[new Me];return r.push(new Qn({baseUrl:n.baseUrl,auth:n.auth,identification:n.identification})),{mapAdapter:t,starterKits:r}}(e,n))||this;return r.emitter=new u.EventEmitter,r.options={},r._ngwLayers={},r.options=rr(fr,n),r.connector=n.connector||new f({baseUrl:r.options.baseUrl,auth:r.options.auth}),r._createWebMap().then(function(){var t=r.getContainer();t&&t.classList.add("ngw-map-container"),r._addControls()}),r}return ir(e,t),e.prototype.fit=function(){var t=this.options,e=t.center,n=t.zoom,r=t.bounds;e?(this.setCenter(e),n&&this.setZoom(n)):r&&this.fitBounds(r)},e.prototype.addControl=function(e,n,r){return ur(this,void 0,void 0,function(){return lr(this,function(o){return[2,t.prototype.addControl.call(this,e,n,r)]})})},e.prototype.addNgwLayer=function(t){return ur(this,void 0,void 0,function(){var e,n,r,o,i;return lr(this,function(a){switch(a.label){case 0:if(!t.resourceId)throw new Error("resourceId is required parameter to add NGW layer");if(!this.options.baseUrl)return[3,6];a.label=1;case 1:return a.trys.push([1,5,,6]),e=Qn.utils.addNgwLayer(t,this,this.options.baseUrl,this.connector),[4,this.addLayer(e,ar({},t,t.adapterOptions))];case 2:return n=a.sent(),r=n&&this.getLayerId(n),n&&r?(this._ngwLayers[r]={layer:n,resourceId:t.resourceId},n.options.baseLayer&&this.getActiveBaseLayer()?[2,n]:(this.showLayer(n),t.fit&&n.getExtent?[4,n.getExtent()]:[3,4])):[3,4];case 3:(o=a.sent())&&this.fitBounds(o),a.label=4;case 4:return[2,n];case 5:return i=a.sent(),console.error("can't add ngw layer",i),[3,6];case 6:return[2]}})})},e.prototype.getNgwLayers=function(){return ur(this,void 0,void 0,function(){return lr(this,function(t){switch(t.label){case 0:return[4,this.onLoad()];case 1:return t.sent(),[2,this._ngwLayers]}})})},e.prototype.getNgwLayerByResourceId=function(t){return ur(this,void 0,void 0,function(){var e,n,r,o,i,a,s,c;return lr(this,function(u){switch(u.label){case 0:for(n in e=[],this._ngwLayers)e.push(n);r=0,u.label=1;case 1:return r<e.length?(o=e[r],this._ngwLayers.hasOwnProperty(o)?(i=this._ngwLayers[o]).resourceId!==t?[3,2]:[2,i&&i.layer]:[3,5]):[3,6];case 2:return i.layer.getIdentificationIds?[4,i.layer.getIdentificationIds()]:[3,4];case 3:if((a=u.sent())&&a.some(function(e){return e===t}))return[2,i.layer];u.label=4;case 4:if(i.layer.getDependLayers&&(s=i.layer.getDependLayers(),c=s.find(function(e){return e.item&&e.item.parentId===t})))return[2,c.layer];u.label=5;case 5:return r++,[3,1];case 6:return[2]}})})},e.prototype.zoomToLayer=function(t){return ur(this,void 0,void 0,function(){var e,n,r,o,i,a=this;return lr(this,function(s){switch(s.label){case 0:return e="string"==typeof t||"number"==typeof t?String(e):t.id,(n=e&&this._ngwLayers[e])?n.layer.getExtent?[4,n.layer.getExtent()]:[3,2]:[3,6];case 1:return(r=s.sent())&&this.fitBounds(r),[3,6];case 2:return o=void 0,n.layer.item?(o=n.layer.item,[3,5]):[3,3];case 3:return i=n.resourceId,[4,this.connector.get("resource.item",null,{id:i})];case 4:o=s.sent(),s.label=5;case 5:Qn.utils.getNgwResourceExtent(o,this.connector).then(function(t){t&&a.fitBounds(t)}),s.label=6;case 6:return[2]}})})},e.prototype.onLoad=function(e){return void 0===e&&(e="ngw-map:create"),t.prototype.onLoad.call(this,e)},e.prototype.removeLayer=function(e){var n=this.getLayer(e);if(n){var r=this.getLayerId(n);r&&delete this._ngwLayers[r],t.prototype.removeLayer.call(this,n)}},e.prototype._createWebMap=function(){return ur(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s=this;return lr(this,function(c){switch(c.label){case 0:return[4,this.create(ar({},this.options))];case 1:return c.sent(),this.options.qmsId?(t=void 0,e=void 0,Array.isArray(this.options.qmsId)?(t=this.options.qmsId[0],e=this.options.qmsId[1]):t=this.options.qmsId,n={qmsId:t},e&&(n.id=e),[4,this.addBaseLayer("QMS",n).then(function(t){s.showLayer(t)})]):[3,3];case 2:c.sent(),c.label=3;case 3:or(r=[],this.options.webmapId,{fit:!0}),this.options.resources&&Array.isArray(this.options.resources)&&this.options.resources.forEach(function(t){or(r,t)}),o=0,i=r,c.label=4;case 4:return o<i.length?(a=i[o],[4,this.addNgwLayer(a)]):[3,7];case 5:c.sent(),c.label=6;case 6:return o++,[3,4];case 7:return this._emitStatusEvent("ngw-map:create",this),this.emitter.on("click",function(t){return s._selectFromNgw(t)}),[2]}})})},e.prototype._addControls=function(){var t=this;this.options.controls&&this.options.controls.forEach(function(e){var n=e,r={};"string"==typeof e&&t.options.controlsOptions&&t.options.controlsOptions[e]&&void 0!==(r=t.options.controlsOptions[e]).control&&(n=r.control);var o=r.position,i=pr(r,["position"]);t.addControl(n,o||"top-left",i)}),this._emitStatusEvent("controls:create")},e.prototype._selectFromNgw=function(t){return ur(this,void 0,void 0,function(){var e,n,r,o,i,a,s,c,u,l,p=this;return lr(this,function(f){switch(f.label){case 0:for(n in e=[],this._ngwLayers)this._ngwLayers.hasOwnProperty(n)&&(r=this._ngwLayers[n].layer).getIdentificationIds&&r.options.selectable&&e.push(r.getIdentificationIds());return[4,Promise.all(e)];case 1:return o=f.sent(),i=[],o.forEach(function(t){t&&t.forEach(function(t){return i.push(t)})}),i.length&&(a=this.options.pixelRadius||10,s=this.getCenter(),c=this.getZoom(),s&&c)?(u=40075016.686*Math.abs(Math.cos(180*s[1]/Math.PI))/Math.pow(2,c+8),l=a*u*5e-4,[2,Qn.utils.sendIdentifyRequest(t,{layers:i,connector:this.connector,radius:l}).then(function(t){return p._emitStatusEvent("ngw:select",t),t})]):[2]}})})},e.utils=ar({},xe.utils,{fixUrlStr:nr,deepmerge:rr}),e.decorators=ar({onMapLoad:tr},xe.decorators),e.getIcon=Xn,e.toWgs84=Qn.utils.toWgs84,e.wktToGeoJson=Qn.utils.wktToGeoJson,sr([xe.decorators.onLoad("controls:create"),cr("design:type",Function),cr("design:paramtypes",[Object,String,Object]),cr("design:returntype",Promise)],e.prototype,"addControl",null),sr([tr(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",Promise)],e.prototype,"addNgwLayer",null),e}(xe),dr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yr=function(){return(yr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},vr=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},mr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},br=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ready=!1,e.options={mapOptions:{target:"map",controlsOptions:{ZOOM:{position:"top-right"},ATTRIBUTION:{position:"bottom-right"}}}},e.markers={},e}return dr(e,t),e.prototype.mounted=function(){var t=this,e=this.$el;this.createWebMap({target:e,center:this.center,zoom:this.zoom}).then(function(){t.ready=!0;var e=t.$store.state.bdMain.filtered;if(e&&e.length){var n=JSON.parse(JSON.stringify(e));t.addMarkers(n)}t.$store.watch(function(t){return t.bdMain.filtered},function(e){e=JSON.parse(JSON.stringify(e)),t.addMarkers(e),t.zoomToFiltered()}),t.$store.watch(function(t){return t.bdMain.detailItem},function(e){t.setSelected(e)}),t.$store.watch(function(t){return t.app.center},function(e){t.zoomTo(e)})})},e.prototype.createWebMap=function(t){var e=this,n=yr({},JSON.parse(JSON.stringify(this.options.mapOptions)),t);return this.ngwMap=new hr(new Xt,yr({baseUrl:d,qmsId:h.qmsId},n)),this.options.mapOptions=n,this.ngwMap.onLoad().then(function(t){e.mapObject=e.ngwMap.mapAdapter.map,e.ngwMap.addNgwLayer({resourceId:h.districtsLayer})})},e.prototype.findFirsVueParent=function(t){for(var e=!1;!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t},e.prototype.addMarkers=function(t){var e=this,n={type:"FeatureCollection",features:t},r=hr.toWgs84(n);return this.layer?(this.layer.filter(function(e){var n=e.feature.properties.id;return t.some(function(t){return t.properties.id===n})}),this.layer):this.ngwMap.addGeoJsonLayer({data:r,paint:function(t){return e.getHistoryIcon(t,{size:20})},selectedPaint:function(t){return e.getHistoryIcon(t,{size:40})},selectable:!0,unselectOnSecondClick:!0}).then(function(t){var n=e.ngwMap.getLayer(t);e.layer=n,e.ngwMap.showLayer(n),e.ngwMap.emitter.on("layer:click",function(t){var r=t.layer,o=t.feature,i=t.selected;r.id===n.id&&e.$store.dispatch("bdMain/setDetail",i?Number(o.properties.id):null)})})},e.prototype.zoomTo=function(t){if(t){var e=this.layer&&this.layer.getLayers();if(e&&e.length){var n=e.find(function(e){return e.feature.properties.id===t}),r=n&&n.feature,o=r&&r.geometry.coordinates;o&&(this.ngwMap.setView(o,14),this.$store.dispatch("app/zoomTo",null))}}},e.prototype.setSelected=function(t){t?this.layer.select(function(e){return e.feature.properties.id===(t&&t.id)}):this.layer.unselect()},e.prototype.zoomToFiltered=function(){if(this.layer){var t=this.layer.getLayers().filter(function(t){return t.visible}).map(function(t){return t.feature});if(t.length){var e=ee()({type:"FeatureCollection",features:t});this.ngwMap.fitBounds(e,{maxZoom:16})}}},e.prototype.getHistoryIcon=function(t,e){var n={"водоем":{color:"#0000ff",shape:"marker"},"ландшафт":{color:"#008000",shape:"marker"},"памятник":{color:"#ff0000",shape:"marker"},"строение":{color:"#ffa500",shape:"marker"},"улица":{color:"#ffff00",shape:"marker"},"зона":{color:"#bbbbbb",shape:"marker"},"населенный пункт":{color:"#49423d",shape:"marker"},"район":{color:"#808080",shape:"marker"},"другой":{color:"#000000",shape:"marker"},"метро":{color:"#ffa500",shape:"brill"},"метро-2":{color:"#ff0000",shape:"brill"},"другие подземные объекты":{color:"#808080",shape:"brill"}},r={color:"#fff",shape:"marker"};if(t.properties.type){var o=t.properties.type,i=Object.keys(n).find(function(t){return-1!==o.search(t)});n[i]&&(r=n[i])}return Xn(yr({},r,e))},vr([Object(L.b)(),mr("design:type",Array)],e.prototype,"center",void 0),vr([Object(L.b)(),mr("design:type",Number)],e.prototype,"zoom",void 0),e=vr([L.a],e)}(L.c),gr=(n(151),Object(I.a)(br,ft,[],!1,null,null,null));gr.options.__file="src/components/NgwMap/NgwMap.vue";var _r=gr.exports,wr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",staticClass:"pl-3 pr-3 pt-0 pb-0",model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("v-autocomplete",{attrs:{items:t.areas,label:"Район","no-data-text":"Не найдено"},on:{change:t.updateFilter},model:{value:t.rayon,callback:function(e){t.rayon=e},expression:"rayon"}})],1)};wr._withStripped=!0;var Ar=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lr=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Or=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form=!1,e.years=[1900,2018],e.minYear=1900,e.maxYear=2018,e.moscow=[{name:"дворовая",param:"mos1"},{name:"легендарная",param:"mos2"},{name:"бездомная",param:"mos3"},{name:"подземная",param:"mos4"},{name:"церковная",param:"mos5"},{name:"субкультурная",param:"mos6",value:!1}],e.rayon="Все",e.areas=["Все"],e}return Ar(e,t),e.prototype.mounted=function(){var t=this;this.moscow.forEach(function(t){t.value=void 0===t.value||t.value}),this.$store.state.bdMain.items&&this.updateFilterAreas(this.$store.state.bdMain.items),this.$store.watch(function(t){return t.bdMain.items},function(e){t.updateFilterAreas(e)})},e.prototype.updateFilterAreas=function(t){var e={};t.forEach(function(t){var n=t.properties;e[n.rayon]=!0}),this.areas=this.areas.concat(Object.keys(e).sort())},e.prototype.updateFilter=function(){var t=this,e=this.$store.state.bdMain.items.slice().filter(function(e){var n=e.properties;return!t.rayon||"Все"===t.rayon||n.rayon===t.rayon});this.$store.dispatch("bdMain/setFilter",e)},e=Lr([L.a],e)}(L.c),xr=n(31),Cr=n(191),Pr=Object(I.a)(Or,wr,[],!1,null,null,null);S()(Pr,{VAutocomplete:xr.a,VForm:Cr.a}),Pr.options.__file="src/components/ItemsFilter/ItemsFilter.vue";var kr=Pr.exports,Er=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.detail&&t.meta?n("div",[t.photos&&t.photos.length?n("div",[t._l(t.photos,function(e){return n("a",{key:e.id,on:{click:function(n){t.dialog=!0,t.bigImgSrc=e.link_big}}},[n("v-img",{staticClass:"grey lighten-2",attrs:{src:e.link_small}})],1)}),t._v(" "),n("v-dialog",{attrs:{scrollable:"","content-class":"photo-dialog"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-btn",{staticClass:"close-img-dialog-btn",attrs:{color:"info"},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Закрыть\n        ")]),t._v(" "),n("v-img",{attrs:{src:t.bigImgSrc,contain:""}})],1)],2):t._e(),t._v(" "),n("v-list",{attrs:{dense:""}},t._l(t.meta,function(e){return t.detail[e.value]&&(e.noHide||t.more)?n("v-list-item",{key:e.value,staticClass:"detail-prop-list pb-3"},[n("v-list-item-content",[n("v-list-item-sub-title",[t._v(t._s(e.text))]),t._v(" "),"Story"===e.type?n("span",[n(t.components[e.type],{tag:"component",attrs:{text:t.getText(e)}})],1):n("v-list-item-title",{domProps:{innerHTML:t._s(t.getText(e))}})],1)],1):t._e()}),1),t._v(" "),n("div",{staticClass:"text-xs-center"},[t.needMore?n("v-btn",{attrs:{color:"info",small:""},on:{click:function(e){t.more=!t.more}}},[t.more?n("span",[t._v("Свернуть")]):n("span",[t._v("Подробнее")])]):t._e()],1)],1):t._e()};Er._withStripped=!0;var Ir=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jr=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Sr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url="",e.more=!1,e.bigImgSrc="",e.dialog=!1,e.components={Story:U},e}return Ir(e,t),Object.defineProperty(e.prototype,"photos",{get:function(){var t=this,e=this.$store.state.bdMain.photos.find(function(e){return e.link_small&&e.id_obj===t.detail.id1});return e?[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem&&this.$store.state.bdMain.detailItem.properties},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meta",{get:function(){return this.$store.state.bdMain.meta},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needMore",{get:function(){var t=this;return this.meta.some(function(e){return!!e.noHide||t.detail[e.value]})},enumerable:!0,configurable:!0}),e.prototype.getText=function(t){var e=this;if(t.type){var n=this.detail[t.value];if("NarratorLink"===t.type){var r=n&&this.detail[t.value].split(",").map(function(t){return t.trim()}),o=this.detail.nar_codes&&this.detail.nar_codes.split(",").map(function(t){return t.trim()});return r.map(function(t,n){var r=o?o[n]||o[0]:"";return'<a href="'+(e.url+"/"+r).replace(/([^:]\/)\/+/g,"$1")+'">'+t+"</a>"}).join(", ")}if("Mos"===t.type)return 1===n?'<i\n          aria-hidden="true"\n          class="v-icon material-icons theme--light lighten-1--text"\n          style="color: green;"\n        >check\n        </i>':'<i\n          aria-hidden="true"\n          class="v-icon material-icons theme--light lighten-1--text"\n          style="color: red;"\n        >close\n        </i>'}return this.detail[t.value]},e=jr([L.a],e)}(L.c),Mr=(n(155),n(192)),Tr=n(199),Fr=Object(I.a)(Sr,Er,[],!1,null,null,null);S()(Fr,{VBtn:ot.a,VDialog:Mr.a,VImg:Tr.a,VList:at.a,VListTile:st.a,VListTileContent:ut.a,VListTileSubTitle:ut.b,VListTileTitle:ut.c}),Fr.options.__file="src/components/Detail/Detail.vue";var Br=Fr.exports,Dr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawer-container"},[t.hasHeaderSlot?n("div",{staticClass:"drawer-titlebar"},[n("v-toolbar",[n("v-toolbar-title",{staticClass:"drawer-title"},[t._t("header")],2)],1),t._v(" "),n("v-divider")],1):t._e(),t._v(" "),n("div",{staticClass:"drawer-content"},[t._t("default")],2),t._v(" "),t.hasFooterSlot?n("v-footer",[t._t("footer")],2):t._e()],1)};Dr._withStripped=!0;var Rr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nr=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},$r=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Vr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rr(e,t),Object.defineProperty(e.prototype,"hasFooterSlot",{get:function(){return this.hasSlot("footer")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHeaderSlot",{get:function(){return this.hasSlot("header")},enumerable:!0,configurable:!0}),e.prototype.hasSlot=function(t){return void 0===t&&(t="default"),!!this.$slots[t]||!!this.$scopedSlots[t]},Nr([Object(L.b)(),$r("design:type",String)],e.prototype,"header",void 0),e=Nr([L.a],e)}(L.c),Gr=(n(165),n(67)),zr=n(193),Ur=n(72),Zr=n(200),Hr=Object(I.a)(Vr,Dr,[],!1,null,null,null);S()(Hr,{VDivider:Gr.a,VFooter:zr.a,VToolbar:Ur.a,VToolbarTitle:Zr.b}),Hr.options.__file="src/components/DrawerContainer/DrawerContainer.vue";var Wr=Hr.exports,qr=function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)};qr._withStripped=!0;var Jr=function(){return(Jr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var Qr=function(){return(Qr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yr=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(e[n]=r)}return e},Kr={props:{position:{type:String,default:"topright"},options:{type:Object,default:function(){return{}}}},mounted:function(){this.controlOptions={position:this.position}},beforeDestroy:function(){this.mapObject&&this.mapObject.remove()}},Xr=function(){function t(t){this.emitter=new u.EventEmitter,this._blocked=!1,this.options=Object.assign({},this.options,t),this._header=null,this._body=null,this._container=this._createContainer()}return t.prototype.onAdd=function(){return this.element},t.prototype.setElement=function(t){this.element=t},t.prototype.onRemove=function(){this.removeFrom()},t.prototype.removeFrom=function(){var t=this._container&&this._container.parentNode;t&&t.removeChild(this._container)},t.prototype.updateBody=function(t){this._cleanBody(),"string"==typeof t?this._body.innerHTML=t:t instanceof HTMLElement&&this._body.appendChild(t)},t.prototype.hide=function(){this._container.classList.add("panel-hide"),this.emitter.emit("toggle",!1)},t.prototype.show=function(){this._blocked||(this._container.classList.remove("panel-hide"),this.emitter.emit("toggle",!0))},t.prototype._cleanBody=function(){this._body&&(this._body.innerHTML="")},t.prototype._createContainer=function(){var t=document.createElement("div");return this.options.addClass&&this.options.addClass.split("-").forEach(function(e){return t.classList.add(e)}),this.options.headerText&&t.appendChild(this._createHeader()),t.appendChild(this._createBody()),t},t.prototype._createHeader=function(){var t=document.createElement("div");return t.className="panel-header",t.innerHTML=this.options.headerText,this._header=t,t},t.prototype._createBody=function(){var t=document.createElement("div");return t.className="panel-body",this._body=t,t},t}(),to={name:"LControl",mixins:[Kr],mounted:function(){this.parentContainer=function(t){for(var e=!1;!e;)void 0===t.ngwMap?t=t.$parent:e=!0;return t}(this.$parent);var t=this.parentContainer.ngwMap,e=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var r=Qr({},Yr(n));t=Yr(t);var o=e.$options.props;for(var i in t)if(t.hasOwnProperty(i)){var a=o[i]?o[i].default:Symbol("unique");r[i]&&a!==t[i]?(console.warn(i+" props is overriding the value passed in the options props"),r[i]=t[i]):r[i]||(r[i]=t[i])}return r}(this.controlOptions,this);this.control=new Xr(e),this.mapObject=t.createControl(this.control),function(t,e,n,r){for(var o=Object.keys(n),i=function(r){var i,a=o[r],s="set"+((i=a).charAt(0).toUpperCase()+i.slice(1)),c=n[a].type===Object||n[a].type===Array||Array.isArray(n[a].type);n[a].custom?t.$watch(a,function(e,n){t[s](e,n)},{deep:c}):"setOptions"===s?t.$watch(a,function(t,n){e.options=e.options||{},e.options=Jr({},e.options,t)},{deep:c}):t.$watch(a,function(t,n){e[s](t)},{deep:c})},a=0;a<o.length;a++)i(a)}(this,this.mapObject,this.$options.props),this.control.setElement(this.$el),t.addControl(this.mapObject,e.position)}},eo=Object(I.a)(to,qr,[],!1,null,null,null);eo.options.__file="src/components/NgwMap/controls/Panel.vue";var no=eo.exports;var ro=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oo=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ro(e,t),Object.defineProperty(e.prototype,"listSearchText",{get:function(){return this.$store.state.app.listSearchText},set:function(t){this.throtleSave(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.$store.state.app.page},set:function(t){this.$store.dispatch("app/setPage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomTo",{get:function(){return this.$store.state.app.zoomTo},set:function(t){this.$store.dispatch("app/zoomTo",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawer",{get:function(){return this.$store.state.app.drawer},set:function(t){this.$store.dispatch("app/toggleDrawer",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.state.bdMain.items.map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem},set:function(t){this.$store.dispatch("bdMain/setDetail",t)},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){var t,e,n,r,o,i,a;this.throtleSave=(t=this.setListSearchText,e=1e3,n=this,a=function(){r=!1,o&&(i.apply(n,o),o=!1)},i=function(){r?o=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)})},e.prototype.created=function(){this.$store.dispatch("bdMain/getAllItems"),this.$store.dispatch("bdMain/getPhotos")},e.prototype.setListSearchText=function(t){this.$store.dispatch("app/setListSearchText",t)},e=oo([Object(L.a)({components:{List:pt,NgwMap:_r,ItemsFilter:kr,Detail:Br,DrawerContainer:Wr,MapControl:no}})],e)}(L.c),ao=(n(171),n(69)),so=n(202),co=n(203),uo=n(64),lo=n(201),po=Object(I.a)(io,X,[],!1,null,null,null);S()(po,{VApp:M.a,VBtn:ot.a,VContent:ao.a,VIcon:it.a,VItemGroup:so.a,VLayout:T.a,VNavigationDrawer:co.a,VProgressCircular:uo.a,VTextField:lo.a}),po.options.__file="src/Main.vue";var fo=po.exports,ho=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yo=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},vo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tableSearch="",e.pagination=null,e}return ho(e,t),Object.defineProperty(e.prototype,"page",{get:function(){return this.$store.state.app.page},set:function(t){this.$store.dispatch("app/setPage",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return!this.pagination||null!==this.pagination.rowsPerPage&&null!==this.pagination.totalItems?Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage):0},enumerable:!0,configurable:!0}),e.prototype.paginationSync=function(t){this.pagination=t},e=yo([Object(L.a)({components:{MainComponent:fo,TableComponent:K,AboutComponent:B}})],e)}(L.c),mo=(n(181),n(197)),bo=n(194),go=n(198),_o=Object(I.a)(vo,A,[],!1,null,null,null);S()(_o,{VApp:M.a,VBtn:ot.a,VCard:mo.a,VDialog:Mr.a,VFooter:zr.a,VIcon:it.a,VPagination:bo.a,VSpacer:go.a,VTextField:lo.a,VToolbar:Ur.a,VToolbarItems:Zr.a}),_o.options.__file="src/App.vue";var wo=_o.exports,Ao=n(83),Lo=n(4);n(187);r.a.use(Lo.a),new r.a({store:w,render:function(t){return t(wo)}}).$mount("#app"),window.version=Ao.a},26:function(t){t.exports={baseUrl:"http://pastandnow.nextgis.com",qmsId:2577,ngwMarkerLayerId:14,layerWithPhotos:12,districtsLayer:9}},39:function(t,e,n){var r=n(91);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(6).default)("1105c31d",r,!1,{})},40:function(t,e,n){var r=n(96);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(6).default)("48d11e2d",r,!1,{})},41:function(t,e,n){var r=n(152);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(6).default)("de092f2e",r,!1,{})},42:function(t,e,n){var r=n(156);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(6).default)("7b48c236",r,!1,{})},43:function(t,e,n){var r=n(166);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(6).default)("341cfa2f",r,!1,{})},44:function(t,e,n){var r=n(172);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(6).default)("6b7af3b1",r,!1,{})},45:function(t,e,n){var r=n(182);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(6).default)("23e247aa",r,!1,{})},83:function(t){t.exports={a:"2.4.0"}},87:function(t,e,n){(function(t,e){!function(){"use strict";function n(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void s(e.promise,t)}a(e.promise,r)}else(1===t._state?a:s)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void u(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){s(t,e)}}function s(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;n>e;e++)i(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}var l=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return i(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=n,o.all=function(t){return new o(function(e,n){function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}o[t]=a,0==--i&&e(o)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var i=o.length,a=0;o.length>a;a++)r(a,o[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,o=t.length;o>r;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){l(t,0)},o._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw Error("unable to locate global object")}();"Promise"in p?p.Promise.prototype.finally||(p.Promise.prototype.finally=n):p.Promise=o}()}).call(this,n(75).setImmediate,n(35))},90:function(t,e,n){"use strict";var r=n(39);n.n(r).a},91:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,".logo {\n  width: 300px;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.logo .logo__item--dark,\n  .logo .logo__item--light {\n    fill: #aec8e0;\n    transition: fill .3s;\n}\n.logo .logo__item--dark {\n    fill: rgba(35, 31, 32, 0.685);\n}\n.logo .logo__item--light {\n    fill: rgba(23, 111, 193, 0.747);\n}\n.logo:hover .logo__item--dark {\n    fill: #231F20;\n}\n.logo:hover .logo__item--light {\n    fill: #176FC1;\n}\n.logo--mini {\n  width: 20px;\n  height: 20px;\n  left: 10px;\n  top: 14px;\n  z-index: 10;\n}\n","",{version:3,sources:["/Users/artemiy/nextgis/oralhistory/src/components/NextGIS/About.vue"],names:[],mappings:"AA+CA;EACI,YAAY;EACZ,sBAAsB;EACtB,eAAe;AAAA;AAHnB;;IAOI,aATe;IAUf,oBAAoB;AAAA;AARxB;IAYI,6BAA6B;AAAA;AAZjC;IAeI,+BAA+B;AAAA;AAfnC;IAqBM,aAAa;AAAA;AArBnB;IAwBM,aAAa;AAAA;AAKnB;EACI,WAAW;EACX,YAAY;EACZ,UAAU;EACV,SAAS;EACT,WAAW;AAAA",file:"About.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$dark-blue: #aec8e0;\n\n.logo{\n    width: 300px;\n    vertical-align: middle;\n    cursor: pointer;\n\n  .logo__item--dark,\n  .logo__item--light{\n    fill: $dark-blue;\n    transition: fill .3s;\n  }\n\n  .logo__item--dark{\n    fill: rgba(35, 31, 32, 0.685);\n  }\n  .logo__item--light{\n    fill: rgba(23, 111, 193, 0.747);\n  }\n\n\n  &:hover{\n    .logo__item--dark{\n      fill: #231F20;\n    }\n    .logo__item--light{\n      fill: #176FC1;\n    }\n  }\n}\n\n.logo--mini{\n    width: 20px;\n    height: 20px;\n    left: 10px;\n    top: 14px;\n    z-index: 10;\n}\n"]}])},95:function(t,e,n){"use strict";var r=n(40);n.n(r).a},96:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,".v-table__overflow {\n  overflow-x: inherit;\n  overflow-y: inherit;\n}\n","",{version:3,sources:["/Users/artemiy/nextgis/oralhistory/src/components/Table/Table.vue"],names:[],mappings:"AAkCA;EACE,mBAAmB;EACnB,mBAAmB;AAAA",file:"Table.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.v-table__overflow {\n  overflow-x: inherit;\n  overflow-y: inherit;\n}\n"]}])}},[[189,27,21,9,5,6,26,20,1,2,3,4,7,8,10,11,12,13,14,15,17,18,19,16,22,23,24,25]]]);
//# sourceMappingURL=main-ba94e6b.js.map