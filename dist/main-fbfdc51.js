(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(t,e,n){var r=n(27);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("8ae7e2e0",r,!1,{})},function(t,e,n){var r=n(40);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("3ac048d0",r,!1,{})},function(t,e,n){var r=n(42);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("2b1a1ab0",r,!1,{})},function(t,e,n){var r=n(44);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("250da29d",r,!1,{})},function(t,e,n){var r=n(46);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("5a661168",r,!1,{})},function(t,e,n){var r=n(48);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("e901ada6",r,!1,{})},function(t,e,n){var r=n(50);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("37cf091c",r,!1,{})},function(t,e,n){var r=n(52);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("1ea68dd8",r,!1,{})},,,,,function(t){t.exports={a:"1.1.1"}},,,,function(t,e,n){"use strict";var r=n(10);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"List.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},,,,,,,function(t,e,n){t.exports=n.p+"marker-icon.png?2273e3d8ad9264b7daa5bdbf8e6b47f8"},function(t,e,n){t.exports=n.p+"marker-icon-2x.png?401d815dc206b8dc1b17cd0e37695975"},function(t,e,n){t.exports=n.p+"marker-shadow.png?44a526eed258222515aa21eaffd14a96"},function(t,e,n){t.exports=n.p+"marker-icon_selected.png?b2aa7f36f5ac75dab9a5685722ad9018"},function(t,e,n){t.exports=n.p+"marker-icon-2x_selected.png?78ad5b5c56acfb7d1e290984642cc624"},function(t,e,n){"use strict";var r=n(11);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"\n#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/NgwMap/C:/Users/rendr/nextgis/oralhistory/src/components/NgwMap/NgwMap.vue"],names:[],mappings:";AAWA;EACE,mBAAkB;EAClB,OAAM;EACN,UAAS;EACT,YAAW;EACX,aAAY;EACZ,YAAW;CACZ",file:"NgwMap.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n#map, .map-container {\n  position: relative;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n}\n"],sourceRoot:""}])},function(t,e,n){"use strict";var r=n(12);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ItemsFilter.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},function(t,e,n){"use strict";var r=n(13);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Detail.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},function(t,e,n){"use strict";var r=n(14);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"\n.drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.drawer-titlebar {\n  flex-shrink: 0;\n}\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.drawer-title {\n  width: 100%;\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/components/DrawerContainer/C:/Users/rendr/nextgis/oralhistory/src/components/DrawerContainer/DrawerContainer.vue"],names:[],mappings:";AA4BA;EACE,YAAW;EACX,aAAY;EACZ,cAAa;EACb,uBAAsB;CACvB;AAED;EAEE,eAAc;CACf;AAED;EACE,aAAY;EACZ,iBAAgB;EAChB,mBAAkB;CACnB;AAED;EACE,YACF;CAAC",file:"DrawerContainer.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.drawer-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.drawer-titlebar {\n  // height: 35px;\n  flex-shrink: 0;\n}\n\n.drawer-content {\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.drawer-title {\n  width: 100%\n}\n"],sourceRoot:""}])},function(t,e,n){"use strict";var r=n(15);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Panel.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},function(t,e,n){"use strict";var r=n(16);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"\n* {\n  padding: 0;\n  margin: 0;\n}\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden !important;\n}\n.drawe-icon.active {\n  -webkit-transform: rotate(-180deg);\n  transform: rotate(-180deg);\n}\n","",{version:3,sources:["C:/Users/rendr/nextgis/oralhistory/src/C:/Users/rendr/nextgis/oralhistory/src/App.vue"],names:[],mappings:";AAoFA;EACE,WAAU;EACV,UAAS;CACV;AAED;EACE,YAAW;EACX,aAAY;EACZ,4BAA2B;CAC5B;AAED;EAEI,mCAAkC;EAClC,2BAA0B;CAC3B",file:"App.vue?vue&type=style&index=0&lang=scss&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n* {\n  padding: 0;\n  margin: 0;\n}\n\nhtml, body {\n  width: 100%;\n  height: 100%;\n  overflow: hidden !important;\n}\n\n.drawe-icon {\n  &.active {\n    -webkit-transform: rotate(-180deg);\n    transform: rotate(-180deg);\n  }\n}\n\n"],sourceRoot:""}])},function(t,e,n){"use strict";var r=n(17);n.n(r).a},function(t,e,n){(t.exports=n(3)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"TestRouter.vue?vue&type=style&index=0&lang=scss&",sourceRoot:""}])},function(e,n,r){(function(e,n){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n){"use strict";if(null==e)throw new TypeError("Cannot convert first argument to object");for(let t=Object(e),n=1;n<arguments.length;n++){let e=arguments[n];if(null!=e)for(let n=Object.keys(Object(e)),r=0,o=n.length;r<o;r++){let o=n[r],i=Object.getOwnPropertyDescriptor(e,o);void 0!==i&&i.enumerable&&(t[o]=e[o])}}return t}}),function(){"use strict";function t(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void a(e.promise,t)}s(e.promise,r)}else(1===t._state?s:a)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void u(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){a(t,e)}}function a(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;n>e;e++)i(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,a(e,t))})}catch(t){if(n)return;n=!0,a(e,t)}}var p=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return i(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=t,o.all=function(t){return new o(function(e,n){function r(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){r(t,e)},n)}o[t]=s,0==--i&&e(o)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var i=o.length,s=0;o.length>s;s++)r(s,o[s])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,o=t.length;o>r;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){p(t,0)},o._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw Error("unable to locate global object")}();"Promise"in l?l.Promise.prototype.finally||(l.Promise.prototype.finally=t):l.Promise=o}()}).call(this,r(20).setImmediate,r(9))},,,function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(18),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-navigation-drawer",{attrs:{stateless:"",fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("drawer-container",[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("Устная память Москвы")]),t._v(" "),t.items&&t.items.length?n("div",[n("div",[n("v-expansion-panel",{attrs:{expand:""}},[n("v-expansion-panel-content",[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("Фильтр")]),t._v(" "),n("items-filter")],1)],1),t._v(" "),n("v-divider")],1),t._v(" "),n("div",[n("list")],1)]):n("div",[n("div",{staticClass:"text-xs-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)])])],1),t._v(" "),n("v-navigation-drawer",{attrs:{value:!!t.detail,stateless:"",width:"400",app:"",right:""}},[t.detail?n("drawer-container",[n("div",{attrs:{slot:"header"},slot:"header"},[n("v-btn",{staticClass:"pa-0 ma-0",attrs:{flat:"",icon:""},on:{click:function(e){t.detail=!1}}},[n("v-icon",[t._v("close")])],1),t._v("\n        "+t._s(t.detail.name)+"\n      ")],1),t._v(" "),n("detail")],1):t._e()],1),t._v(" "),n("v-content",[n("ngw-map",{attrs:{center:[55.75,37.63],zoom:10}},[n("map-control",{attrs:{position:"topleft"}},[n("v-btn",{attrs:{fab:"",small:""},on:{click:function(e){t.drawer=!t.drawer}}},[n("v-icon",{staticClass:"drawe-icon",class:{active:t.drawer},attrs:{large:""}},[t._v("chevron_right")])],1)],1)],1)],1),t._v(" "),n("router-view")],1)};i._withStripped=!0;var s=n(0),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{attrs:{dense:""}},t._l(t.items,function(e){return n("v-list-tile",{key:e.id},[n("v-list-tile-content",[n("v-list-tile-title",{attrs:{title:e.name}},[t._v(t._s(e.name))])],1),t._v(" "),n("v-list-tile-action",{staticClass:"pa-0"},[n("v-btn",{attrs:{icon:"",ripple:""}},[n("v-icon",{style:{color:e.id===(t.detail&&t.detail.id)?"orange":"grey"},attrs:{color:"lighten-1"},on:{click:function(n){t.setDetail(e.id)}}},[t._v("\n          info\n        ")])],1)],1)],1)}))};a._withStripped=!0;var c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.state.bdMain.filtered.map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem},enumerable:!0,configurable:!0}),e.prototype.setDetail=function(t){this.$store.dispatch("bdMain/setDetail",t)},e=u([s.a],e)}(s.c),l=(n(26),n(1)),f=Object(l.a)(p,a,[],!1,null,null,null);f.options.__file="src/components/List/List.vue";var h=f.exports,d=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"map"}},[this.ready?this._t("default"):this._e()],2)};d._withStripped=!0;Object.prototype.toString;var y=n(5);function v(t,e,n,r){var o;if(void 0===e&&(e=function(t){return t}),void 0===r&&(r=[]),Array.isArray(t))o=t;else{e(t)&&r.push(t);var i=n(t);i&&(o=[].concat(i))}if(o)for(var s=0;s<o.length;s++)o[s]&&v(o[s],e,n,r);return r}var m=function(){function t(t){this._children=[],this.entry=t}return t.prototype.setParent=function(t){this._parent=t},t.prototype.addChildren=function(t){this._children.push(t)},t.prototype.getParent=function(){return this._parent},t.prototype.getParents=function(t){return this.getParent()?v(this._parent,t,function(t){return t.tree.getParent()}):[]},t.prototype.getDescendants=function(t){return v(this._children,t,function(t){return t.tree.getChildren()})},t.prototype.getChildren=function(){return this._children},t}(),_=function(){function t(t,e,n){this.emitter=new y.EventEmitter,this.entry=e,this.options=Object.assign({},n),this.name=t,this._value=this.getProperty()}return t.prototype.getProperty=function(){return"function"==typeof this.options.getProperty?this.options.getProperty.call(this):this.options.value},t.prototype.getParents=function(){return this.entry.tree.getParents()||[]},t.prototype.getParent=function(){return this.entry.tree.getParent()},t.prototype.isGroup=function(){return this.entry.tree.getDescendants().length},t.prototype.isBlocked=function(){var t=this;if(void 0===this._blocked){var e=this.entry.tree.getParents();if(e){var n=e.find(function(e){var n=e.properties.get(t.name);if(n)return!n.value()});this._blocked=!!n}else this._blocked=!1}return this._blocked},t.prototype.set=function(t,e){this._value=this._prepareValue(t),this.update(this._value,e),this._fireChangeEvent(this._value,e)},t.prototype.value=function(){return this.getValue()},t.prototype.update=function(t,e){this._callOnSet(t,e)},t.prototype.getContainer=function(){return this._container},t.prototype.destroy=function(){this._container&&this._container.parentNode.removeChild(this._container),this._removeEventsListener&&this._removeEventsListener()},t.prototype.getValue=function(){return void 0!==this._value?this._value:this.getProperty()},t.prototype._prepareValue=function(t){return t},t.prototype._callOnSet=function(t,e){this.options.onSet&&this.options.onSet.call(this,t,e)},t.prototype._fireChangeEvent=function(t,e){var n=this;t=void 0!==t?t:this.getValue(),this.emitter.emit("change",{value:t,options:e}),this.entry.tree.getParents().forEach(function(r){var o=r.properties.get(n.name);o&&o.emitter.emit("change-tree",{value:t,options:e,entry:n.entry})})},t}(),b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},w=function(t){function e(n,r,o){var i=t.call(this,n,r,Object.assign({},e.options,o))||this;return i.set(i.value()),i}return b(e,t),e.prototype.update=function(t,e){if(t){if(e&&e.bubble||this.options.bubble){this.unBlock(e);var n=this.getParent(),r=n&&n.properties.get(this.name);r&&r.set(t,Object.assign({},e,{bubble:!0,propagation:!1}))}this.isBlocked()||this._turnOn(e)}else this._turnOff(e);(e&&e.propagation||this.options.propagation)&&this._propagation(t,e)},e.prototype.getHierarchyValue=function(){var t=this;return this.value()&&this.getParents().every(function(e){var n=e.properties[t.name];return n&&n.get()})},e.prototype._prepareValue=function(t){return!!t},e.prototype._turnOff=function(t){this.options.turnOff&&this.options.turnOff.call(this,t),this._callOnSet(!1,t),this.options.hierarchy&&this.isGroup()&&this.blockChilds(t)},e.prototype._turnOn=function(t){this.options.turnOn&&this.options.turnOn.call(this,t),this._callOnSet(!0,t),this.options.hierarchy&&this.isGroup()&&this.unblockChilds(t)},e.prototype.block=function(t){this._blocked=!0,this._block(t)},e.prototype._block=function(t){this._turnOff(t)},e.prototype.unBlock=function(t){this._blocked=!1,this.getValue()&&this._unBlock(t)},e.prototype._unBlock=function(t){this._turnOn(t)},e.prototype.blockChilds=function(t){this.entry.tree.getDescendants().forEach(this._blockChild.bind(this,t))},e.prototype.unblockChilds=function(t){this.entry.tree.getChildren().forEach(this._unBlockChild.bind(this,t))},e.prototype._blockChild=function(t,e){var n=e.properties.get(this.name);n.block&&n.block(t)},e.prototype._unBlockChild=function(t,e){var n=e.properties.get(this.name);n.unBlock&&n.unBlock(t)},e.prototype._propagation=function(t,e){if(this.isGroup())for(var n=this.entry.tree.getChildren(),r=0;r<n.length;r++){var o=n[r].properties.get(this.name);o&&o.set(t,g({},e,{propagation:!0,bubble:!1}))}},e.options={hierarchy:!0,bubble:!1,propagation:!1,label:"Toggle"},e}(_),O=function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},A=function(){function t(t,e){this.options={},this.entry=t,this._properties={},this._propertiesList=[],e&&e.forEach(this._setPropertyHandler.bind(this))}return t.prototype.add=function(t){this._setPropertyHandler(t)},t.prototype._setPropertyHandler=function(e){var n=t.handlers,r=e.handler;if(!r&&e.type)switch(e.type){case"boolean":r=n.CheckProperty;break;case"string":r=n.BaseProperty;break;default:r=n.BaseProperty}if(r){var o=O({},e||{});this._properties[e.name]=new r(e.name,this.entry,o),this._propertiesList.push(e.name)}},t.prototype.update=function(){this.list().forEach(function(t){t.update()})},t.prototype.value=function(t){var e=this.get(t);if(e)return e.value},t.prototype.set=function(t,e,n){var r=this.get(t);if(r)return r.set(e,n)},t.prototype.get=function(t){return this._properties[t]},t.prototype.list=function(){var t=this;return this._propertiesList.map(function(e){return t._properties[e]})},t.prototype.destroy=function(){for(var t in this._properties)if(this._properties.hasOwnProperty(t)){var e=this.get(t);e&&e.destroy&&e.destroy()}this._properties=null,this._propertiesList=[]},t.handlers={CheckProperty:w},t}(),x=0,k=function(){function t(t){this.emitter=new y.EventEmitter,this.options=Object.assign({},this.options,t),this.id=String(x++),this.tree=new m(this)}return t.prototype.initProperties=function(){this.properties=new A(this,this.options.properties)},t}(),P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(t){function e(n,r,o,i){var s=t.call(this,Object.assign({},e.options,o))||this;return s.map=n,s.item=r,i&&s.tree.setParent(i),s.initProperties(),s.initItem(r),s}return P(e,t),e.prototype.initItem=function(t){var n=this,r=t._layer;if("group"===t.item_type||"root"===t.item_type)t.children&&t.children.length&&t.children.forEach(function(t){var r=new e(n.map,t,n.options,n);n.tree.addChildren(r)});else if("layer"===t.item_type){var o=t.layer_adapter.toUpperCase();r=this.map.addLayer(o,Object.assign({id:this.id},t))}r&&(t._layer=r,"layer"===t.item_type&&t.layer_enabled&&this.properties.get("visibility").set(!0))},e.prototype.fit=function(){"layer"===this.item.item_type&&console.log(this.item)},e.options={properties:[{type:"boolean",name:"visibility",getProperty:function(){var t=this.entry;return"group"===t.item.item_type||("layer"===t.item.item_type?t.item.layer_enabled:"root"===t.item.item_type)},onSet:function(t){var e=this.entry;"layer"===e.item.item_type&&(t?e.map.showLayer(e.id):e.map.hideLayer(e.id),e.item.layer_enabled=t)}}]},e}(k),C=function(){return function(){this.backspace=8,this.tab=9,this.enter=13,this.shift=16,this.ctrl=17,this.alt=18,this["pause/break"]=19,this.caps_lock=20,this.escape=27,this.page_up=33,this.page_down=34,this.end=35,this.home=36,this.left_arrow=37,this.up_arrow=38,this.right_arrow=39,this.down_arrow=40,this.insert=45,this.delete=46,this.left_window_key=91,this.right_window_key=92,this.select_key=93,this.numpad_0=96,this.numpad_1=97,this.numpad_2=98,this.numpad_3=99,this.numpad_4=100,this.numpad_5=101,this.numpad_6=102,this.numpad_7=103,this.numpad_8=104,this.numpad_9=105,this.multiply=106,this.add=107,this.subtract=109,this.decimal_point=110,this.divide=111,this.f1=112,this.f2=113,this.f3=114,this.f4=115,this.f5=116,this.f6=117,this.f7=118,this.f8=119,this.f9=120,this.f10=121,this.f11=122,this.f12=123,this.num_lock=144,this.scroll_lock=145,this["semi-colon"]=186,this.equal_sign=187,this[","]=188,this["-"]=189,this["."]=190,this["/"]=191,this["`"]=192,this["["]=219,this["\\"]=220,this["]"]=221,this["'"]=222}}(),E=function(){function t(){this.keyCodeAlias=new C,this.keys={},this._windowOnFocus=this.windowOnFocus.bind(this),this._keysPressed=this.keysPressed.bind(this),this._keysReleased=this.keysReleased.bind(this),this.addKeyboardEventsListener()}return t.prototype.pressed=function(t){var e=this.keyCodeAlias[t];if(e)return this.keys[e]},t.prototype.addKeyboardEventsListener=function(){window.addEventListener("focus",this._windowOnFocus,!1),window.addEventListener("keydown",this._keysPressed,!1),window.addEventListener("keyup",this._keysReleased,!1)},t.prototype.removeKeyboardEventsListener=function(){window.removeEventListener("focus",this._windowOnFocus,!1),window.removeEventListener("keydown",this._keysPressed,!1),window.removeEventListener("keyup",this._keysReleased,!1)},t.prototype.keysPressed=function(t){t.stopPropagation(),this.keys[t.keyCode]||(this.keys[t.keyCode]=!0)},t.prototype.keysReleased=function(t){t.stopPropagation(),this.keys[t.keyCode]=!1},t.prototype.windowOnFocus=function(){this.keys={}},t}(),L=function(){return(L=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},S=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})},M=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},I=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,o,(e=t[n](e)).done,e.value)})}}},R=function(){function t(t){this.displayProjection="EPSG:3857",this.lonlatProjection="EPSG:4326",this.emitter=new y.EventEmitter,this.keys=new E,this.settingsIsLoading=!1,this._baseLayers=[],this.map=t.mapAdapter,this._starterKits=t.starterKits||[],this._addEventsListeners()}return t.prototype.create=function(t){return S(this,void 0,void 0,function(){return M(this,function(e){switch(e.label){case 0:return this.options=function t(e,n,r){void 0===r&&(r=!1);var o=Array.isArray(n),i=o&&[]||{};return o?r?(e=e||[],i=i.concat(e),n.forEach(function(n,o){void 0===i[o]?i[o]=n:"object"==typeof n?i[o]=t(e[o],n,r):-1===e.indexOf(n)&&i.push(n)})):i=n:(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){i[t]=e[t]}),Object.keys(n).forEach(function(o){"object"==typeof n[o]&&n[o]&&e[o]?i[o]=t(e[o],n[o],r):i[o]=n[o]})),i}(this.options||{},t),this.settings||!this._starterKits.length?[3,2]:[4,this.getSettings()];case 1:e.sent(),e.label=2;case 2:return[4,this._setupMap()];case 3:return e.sent(),[2,this]}})})},t.prototype.getSettings=function(){return S(this,void 0,void 0,function(){var t,e,n,r,o,i,s=this;return M(this,function(a){switch(a.label){case 0:return this.settings?[2,Promise.resolve(this.settings)]:this.settingsIsLoading?[2,new Promise(function(t){var e=function(n){t(n),s.emitter.removeListener("load-settings",e)};s.emitter.on("load-settings",e)})]:[3,1];case 1:this.settingsIsLoading=!0,t=void 0,a.label=2;case 2:a.trys.push([2,7,,8]),t={},e=0,n=this._starterKits.filter(function(t){return t.getSettings}),a.label=3;case 3:return e<n.length?[4,(r=n[e]).getSettings.call(r)]:[3,6];case 4:(o=a.sent())&&Object.assign(t,o),a.label=5;case 5:return e++,[3,3];case 6:return[3,8];case 7:throw i=a.sent(),this.settingsIsLoading=!1,new Error(i);case 8:if(t)return this.settings=t,this.settingsIsLoading=!1,this.emitter.emit("load-settings",t),[2,t];a.label=9;case 9:return[2]}})})},t.prototype.addBaseLayer=function(t,e,n){var r=this;return this.map.addLayer(e,L({},n,{id:t}),!0).then(function(t){return t&&r._baseLayers.push(t.name),t})},t.prototype.isBaseLayer=function(t){return-1!==this._baseLayers.indexOf(t)},t.prototype._setupMap=function(){return S(this,void 0,void 0,function(){var t,e,n,r,o,i;return M(this,function(s){switch(s.label){case 0:return this.settings&&(t=this.settings,e=t.extent_bottom,n=t.extent_left,r=t.extent_top,o=t.extent_right,e&&n&&r&&o&&(this._extent=[n,e,o,r],(i=this._extent)[3]>82&&(i[3]=82),i[1]<-82&&(i[1]=-82))),this.map.displayProjection=this.displayProjection,this.map.lonlatProjection=this.lonlatProjection,this.map.create(this.options),this._addTreeLayers(),[4,this._addLayerProviders()];case 1:return s.sent(),this._zoomToInitialExtent(),this.emitter.emit("build-map",this.map),[2,this]}})})},t.prototype._addTreeLayers=function(){return S(this,void 0,void 0,function(){var t,e;return M(this,function(n){switch(n.label){case 0:return[4,this.getSettings()];case 1:return(t=n.sent())&&(e=t.root_item)&&(this.layers=new j(this.map,e),this.emitter.emit("add-layers",this.layers)),[2]}})})},t.prototype._zoomToInitialExtent=function(){if(this._extent)this.map.fit(this._extent);else{var t=this.options,e=t.center,n=t.zoom;e&&this.map.setCenter(e),n&&this.map.setZoom(n)}},t.prototype._addLayerProviders=function(){return S(this,void 0,void 0,function(){var t,e,n,r,o,i,s,a,c,u,p,l,f,h,d;return M(this,function(y){switch(y.label){case 0:y.trys.push([0,26,,27]),y.label=1;case 1:y.trys.push([1,19,20,25]),o=I(this._starterKits.filter(function(t){return t.getLayerAdapters})),y.label=2;case 2:return[4,o.next()];case 3:return(i=y.sent()).done?[3,18]:[4,(s=i.value).getLayerAdapters.call(s)];case 4:if(!(a=y.sent()))return[3,17];y.label=5;case 5:y.trys.push([5,11,12,17]),c=I(a),y.label=6;case 6:return[4,c.next()];case 7:return(u=y.sent()).done?[3,10]:[4,(p=u.value).createAdapter(this.map)];case 8:(l=y.sent())&&(this.map.layerAdapters[p.name]=l),y.label=9;case 9:return[3,6];case 10:return[3,17];case 11:return f=y.sent(),n={error:f},[3,17];case 12:return y.trys.push([12,,15,16]),u&&!u.done&&(r=c.return)?[4,r.call(c)]:[3,14];case 13:y.sent(),y.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[3,2];case 18:return[3,25];case 19:return h=y.sent(),t={error:h},[3,25];case 20:return y.trys.push([20,,23,24]),i&&!i.done&&(e=o.return)?[4,e.call(o)]:[3,22];case 21:y.sent(),y.label=22;case 22:return[3,24];case 23:if(t)throw t.error;return[7];case 24:return[7];case 25:return[3,27];case 26:throw d=y.sent(),new Error(d);case 27:return[2]}})})},t.prototype._addEventsListeners=function(){var t=this;this.map.emitter.on("click",function(e){return t._onMapClick(e)})},t.prototype._onMapClick=function(t){var e=this;this.emitter.emit("click",t),this._starterKits.forEach(function(n){n.onMapClick&&n.onMapClick(t,e)})},t}(),D=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})},T=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};window.buildWebMap=function(t,e){return D(this,void 0,void 0,function(){var n;return T(this,function(r){switch(r.label){case 0:return[4,(n=new R(t)).create(e)];case 1:return r.sent(),[2,n]}})})};var $=n(6),B=1,F=function(){function t(t,e){this.map=t,this.name=e.id||String(B++),this.options=Object.assign({},this.options,e)}return t.prototype.addLayer=function(t){return null},t}(),N=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},G=1,H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return N(e,t),e.prototype.addLayer=function(t){this.name=t.id||"tile-"+G++;var e=t.url,n=U(t,["url"]);return new $.TileLayer(e,n)},e}(F),Q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=1,Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.addLayer=function(t){return this.name=t.id||"geojson-"+q++,new $.GeoJSON(t.data,t)},e}(F),z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(t){function e(e){var n=t.call(this,e)||this;e.customAttribution&&[].concat(e.customAttribution).forEach(function(t){return n.addAttribution(t)});return n}return z(e,t),e}($.Control.Attribution),Y=function(){function t(){this.options={target:"map"},this.layerAdapters=t.layerAdapters,this.displayProjection="EPSG:3857",this.lonlatProjection="EPSG:4326",this.emitter=new y.EventEmitter,this._layers={},this.DPI=1e3/39.37/.28,this.IPM=39.37,this._order=0,this._length=9999,this._baseLayers=[]}return t.prototype.create=function(t){void 0===t&&(t={target:"map"}),this.options=Object.assign({},t),this.map=new $.Map(this.options.target,{zoomControl:!1,attributionControl:!1}),this.emitter.emit("create",{map:this.map}),this._addMapListeners()},t.prototype.getContainer=function(){return this.map.getContainer()},t.prototype.onMapLoad=function(t){return new Promise(function(e){e(t&&t())})},t.prototype.setCenter=function(t){this.map.setView(t,this.map.getZoom())},t.prototype.setZoom=function(t){this.map.setZoom(t)},t.prototype.fit=function(t){this.map.fitBounds([[t[0],t[1]],[t[2],t[3]]])},t.prototype.getLayerAdapter=function(e){return t.layerAdapters[e]},t.prototype.getLayer=function(t){return void 0!==this._layers[t]},t.prototype.getLayers=function(){return Object.keys(this._layers)},t.prototype.isLayerOnTheMap=function(t){return this._layers[t].onMap},t.prototype.addControl=function(e,n,r){var o;if("string"==typeof e){var i=t.controlAdapters[e];i&&(o=new i(r))}else o=e;if(o)return o.options.position=n.replace("-",""),this.map.addControl(o),o},t.prototype.addLayer=function(t,e,n){var r,o=this;if("string"==typeof t&&(r=this.getLayerAdapter(t)),r){var i=new r(this.map,e),s=i.addLayer(e),a=i.addLayer(e),c=function(t){var r=i.name,s={layer:t,onMap:!1};return n?s.baseLayer=!0:s.order=e.order||o._order++,o._layers[r]=s,o._length++,o._baseLayers.push(r),i};return a.then?a.then(function(t){return c(t)}):Promise.resolve(c(s))}return Promise.reject("No adapter")},t.prototype.removeLayer=function(t){},t.prototype.showLayer=function(t){this.toggleLayer(t,!0)},t.prototype.hideLayer=function(t){this.toggleLayer(t,!1)},t.prototype.setLayerOpacity=function(t,e){},t.prototype.getScaleForResolution=function(t,e){return parseFloat(t)*(e*this.IPM*this.DPI)},t.prototype.getResolutionForScale=function(t,e){return parseFloat(t)/(e*this.IPM*this.DPI)},t.prototype.toggleLayer=function(t,e){var n=this,r=function(t,r){if(e){if(t instanceof $.Map){r.layer.addTo(t);var o=r.baseLayer?0:n._length-r.order;r.layer.setZIndex(o)}}else t.removeLayer(r.layer);r.onMap=e},o=this._layers[t];o&&o.onMap!==e&&(this.map?r(this.map,o):this.emitter.once("create",function(t){r(t.map,o)}))},t.prototype.onMapClick=function(t){var e=t.containerPoint,n=t.latlng;this.emitter.emit("click",{latLng:n,pixel:{left:e.x,top:e.y},source:t})},t.prototype._addMapListeners=function(){var t=this;this.map.on("click",function(e){t.onMapClick(e)})},t.layerAdapters={TILE:H,GEOJSON:Z},t.controlAdapters={ZOOM:$.Control.Zoom,ATTRIBUTION:J},t}(),V=function(){return(V=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},K=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})},W=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},X=function(){function t(t){this.options={url:"https://qms.nextgis.com"},this.options=V({},this.options,t),this.url=this.options.url}return t.prototype.getLayerAdapters=function(){var t=this;return Promise.resolve([{name:"QMS",createAdapter:function(e){return Promise.resolve(t._createAdapter(e))}}])},t.prototype.getQmsServices=function(){return K(this,void 0,void 0,function(){return W(this,function(t){return[2,tt(this.url+"/api/v1/geoservices/")]})})},t.prototype._createAdapter=function(t){var e=this.url;this.map=t;var n={tms:"TILE"},r=function(t,e){this.map=t,this.name=e.id};return r.prototype.addLayer=function(r){var o=this;return tt(e+"/api/v1/geoservices/"+r.qmsid).then(function(e){if(e){var i=n[e.type],s=t.layerAdapters[i];if(s&&"TILE"===i)return r.url=e.url,s.prototype.addLayer.call(o,r)}})},r},t}();function tt(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&200===r.status&&r.responseText)try{e(JSON.parse(r.responseText))}catch(t){n(t)}},r.open("GET",function(t){return t.replace(/([^:]\/)\/+/g,"$1")}(t),!0),r.send(null)})}var et=n(8),nt=(n(28),n(34),n(35),n(36),n(37),n(38),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),rt=function(){return(rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ot=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},it=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},st={iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},at=rt({},st,{iconUrl:"marker-icon_selected.png",iconRetinaUrl:"marker-icon-2x_selected.png"}),ct=et.Icon.extend({options:st}),ut=et.Icon.extend({options:at}),pt=new ct,lt=new ut,ft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.webMap=new R({mapAdapter:new Y,starterKits:[new X]}),e.ready=!1,e.options={mapOptions:{target:"map"}},e.markers={},e}return nt(e,t),e.prototype.mounted=function(){var t=this;this.mapObject=this.webMap.map.map;var e=this.$el;this.createWebMap({target:e,center:this.center,zoom:this.zoom}).then(function(){t.ready=!0;var e=t.$store.state.bdMain.filtered;e&&e.length&&t.addMarkers(e),t.$store.watch(function(t){return t.bdMain.filtered},function(e){e=JSON.parse(JSON.stringify(e)),t.addMarkers(e)}),t.$store.watch(function(t){return t.bdMain.detailItem},function(e){t.setSelected(e)})})},e.prototype.createWebMap=function(t){var e=this.webMap;return this.options.mapOptions=rt({},this.options.mapOptions,t),e.create(t).then(function(){e.map.addControl("ZOOM","top-right"),e.map.addControl("ATTRIBUTION","bottom-right",{customAttribution:['<a href="http://nextgis.ru" target="_blank">©NextGIS</a>']}),e.addBaseLayer("sputnik","QMS",{qmsid:487}).then(function(t){e.map.showLayer(t.name)})})},e.prototype.findFirsVueParent=function(t){for(var e=!1;!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t},e.prototype.addMarkers=function(t){var e=this,n=t.map(function(t){var n=String(t.properties.id);if(void 0===e.markers[n]){e.markers[n]=!1;var r=t.geometry.coordinates,o=r[0],i=r[1],s=et.Projection.SphericalMercator.unproject(new et.Point(o,i)),a=s.lat,c=s.lng;return t.geometry.coordinates=[c,a],e.webMap.map.addLayer("GEOJSON",{data:t,id:n}).then(function(t){var r=e.webMap.map._layers[t.name].layer;r.on("click",function(){e.$store.dispatch("bdMain/setDetail",Number(n))}),e._unselectMarker(r)})}return Promise.resolve()}),r=t.map(function(t){return String(t.properties.id)});Promise.all(n).then(function(){for(var t in e.markers)e.markers.hasOwnProperty(t)&&(-1!==r.indexOf(t)?e.markers[t]||(e.markers[t]=!0,e.webMap.map.showLayer(t)):e.markers[t]&&(e.markers[t]=!1,e.webMap.map.hideLayer(t)))})},e.prototype.setSelected=function(t){if(t){var e=this.webMap.map._layers[t.id],n=e&&e.layer;n&&n!==this.selected&&(this.selected&&this._unselectMarker(this.selected),this.selected=n,this._selectMarker(n))}else this.selected&&this._unselectMarker(this.selected)},e.prototype._selectMarker=function(t){t.eachLayer(function(t){t.setIcon(lt),t.setZIndexOffset(100)})},e.prototype._unselectMarker=function(t){t.eachLayer(function(t){t.setIcon(pt),t.setZIndexOffset(10)})},ot([Object(s.b)(),it("design:type",Array)],e.prototype,"center",void 0),ot([Object(s.b)(),it("design:type",Number)],e.prototype,"zoom",void 0),e=ot([s.a],e)}(s.c),ht=(n(39),Object(l.a)(ft,d,[],!1,null,null,null));ht.options.__file="src/components/NgwMap/NgwMap.vue";var dt=ht.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",staticClass:"pa-3 pb-0",model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("v-range-slider",{attrs:{"thumb-label":"always","thumb-size":"26",max:t.maxYear,min:t.minYear,step:1},on:{change:t.updateFilter},model:{value:t.years,callback:function(e){t.years=e},expression:"years"}}),t._v(" "),n("v-select",{attrs:{items:t.areas,label:"Район"},on:{change:t.updateFilter},model:{value:t.rayon,callback:function(e){t.rayon=e},expression:"rayon"}}),t._v(" "),t._l(t.moscow,function(e){return n("v-checkbox",{key:e.param,staticClass:"pa-0 ma-0",on:{change:t.updateFilter},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"mos.value"}},[n("template",{slot:"label"},[t._v("\n      "+t._s(e.name)+"\n    ")])],2)})],2)};yt._withStripped=!0;var vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mt=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form=!1,e.years=[1900,2018],e.minYear=1900,e.maxYear=2018,e.moscow=[{name:"дворовая",param:"mos1"},{name:"легендарная",param:"mos2"},{name:"бездомная",param:"mos3"},{name:"подземная",param:"mos4"},{name:"церковная",param:"mos5"},{name:"субкультурная",param:"mos6",value:!1}],e.rayon="Все",e.areas=["Все"],e}return vt(e,t),e.prototype.mounted=function(){var t=this;this.moscow.forEach(function(t){t.value=void 0===t.value||t.value}),this.$store.state.bdMain.items&&this.updateFilterAreas(this.$store.state.bdMain.items),this.$store.watch(function(t){return t.bdMain.items},function(e){t.updateFilterAreas(e)})},e.prototype.updateFilterAreas=function(t){var e={};t.map(function(t){var n=t.properties;return e[n.rayon]=!0,n});this.areas=this.areas.concat(Object.keys(e))},e.prototype.updateFilter=function(){var t=this,e=this.$store.state.bdMain.items.slice().filter(function(e){var n=e.properties;return!t.rayon||"Все"===t.rayon||n.rayon===t.rayon});this.$store.dispatch("bdMain/setFilter",e)},e=mt([s.a],e)}(s.c),bt=(n(41),Object(l.a)(_t,yt,[],!1,null,null,null));bt.options.__file="src/components/ItemsFilter/ItemsFilter.vue";var gt=bt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.detail&&t.meta?n("div",[n("v-list",{attrs:{dense:""}},t._l(t.meta,function(e){return n("v-list-tile",{key:e.value},[n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(e.text)+" - "+t._s(t.detail[t.value]))])],1)],1)}))],1):t._e()};wt._withStripped=!0;var Ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),At=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ot(e,t),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem&&this.$store.state.bdMain.detailItem.properties},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meta",{get:function(){return this.$store.state.bdMain.meta},enumerable:!0,configurable:!0}),e.prototype.getKeyAlias=function(t){if(this.meta){var e=this.meta.find(function(e){return e.value===t});if(e)return e.text}return t},e=At([s.a],e)}(s.c),kt=(n(43),Object(l.a)(xt,wt,[],!1,null,null,null));kt.options.__file="src/components/Detail/Detail.vue";var Pt=kt.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawer-container"},[t.hasHeaderSlot?n("div",{staticClass:"drawer-titlebar"},[n("v-toolbar",[n("v-toolbar-title",{staticClass:"drawer-title"},[t._t("header")],2)],1),t._v(" "),n("v-divider")],1):t._e(),t._v(" "),n("div",{staticClass:"drawer-content"},[t._t("default")],2),t._v(" "),t.hasFooterSlot?n("div",[n("v-footer",[t._t("footer")],2)],1):t._e()])};jt._withStripped=!0;var Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},Lt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),Object.defineProperty(e.prototype,"hasFooterSlot",{get:function(){return this.hasSlot("footer")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHeaderSlot",{get:function(){return this.hasSlot("header")},enumerable:!0,configurable:!0}),e.prototype.hasSlot=function(t){return void 0===t&&(t="default"),!!this.$slots[t]||!!this.$scopedSlots[t]},Et([Object(s.b)(),Lt("design:type",String)],e.prototype,"header",void 0),e=Et([s.a],e)}(s.c),Mt=(n(45),Object(l.a)(St,jt,[],!1,null,null,null));Mt.options.__file="src/components/DrawerContainer/DrawerContainer.vue";var It=Mt.exports,Rt=function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)};Rt._withStripped=!0;var Dt=function(){return(Dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var Tt=function(){return(Tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$t=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!==r&&void 0!==r&&(e[n]=r)}return e},Bt={props:{position:{type:String,default:"topright"},options:{type:Object,default:function(){return{}}}},mounted:function(){this.controlOptions={position:this.position}},beforeDestroy:function(){this.mapObject&&this.mapObject.remove()}},Ft=function(){function t(t){this.emitter=new y.EventEmitter,this._blocked=!1,this.options=Object.assign({},this.options,t),this._header=null,this._body=null,this._container=this._createContainer()}return t.prototype.onAdd=function(){return this.element},t.prototype.setElement=function(t){this.element=t},t.prototype.onRemove=function(){this.removeFrom()},t.prototype.addTo=function(t){var e=this._container=this.onAdd(),n=this.options.position,r=t._controlCorners[n];return e.classList.add("leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this},t.prototype.removeFrom=function(){},t.prototype.updateBody=function(t){this._cleanBody(),"string"==typeof t?this._body.innerHTML=t:t instanceof HTMLElement&&this._body.appendChild(t)},t.prototype.hide=function(){this._container.classList.add("panel-hide"),this.emitter.emit("toggle",!1)},t.prototype.show=function(){this._blocked||(this._container.classList.remove("panel-hide"),this.emitter.emit("toggle",!0))},t.prototype._cleanBody=function(){this._body&&(this._body.innerHTML="")},t.prototype._createContainer=function(){var t=document.createElement("div");return this.options.addClass&&this.options.addClass.split("-").forEach(function(e){return t.classList.add(e)}),this.options.headerText&&t.appendChild(this._createHeader()),t.appendChild(this._createBody()),t},t.prototype._createHeader=function(){var t=document.createElement("div");return t.className="panel-header",t.innerHTML=this.options.headerText,this._header=t,t},t.prototype._createBody=function(){var t=document.createElement("div");return t.className="panel-body",this._body=t,t},t}(),Nt={name:"LControl",mixins:[Bt],mounted:function(){var t=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var r=Tt({},$t(n));t=$t(t);var o=e.$options.props;for(var i in t)if(t.hasOwnProperty(i)){var s=o[i]?o[i].default:Symbol("unique");r[i]&&s!==t[i]?(console.warn(i+" props is overriding the value passed in the options props"),r[i]=t[i]):r[i]||(r[i]=t[i])}return r}(this.controlOptions,this);this.mapObject=new Ft(t),function(t,e,n,r){for(var o=Object.keys(n),i=function(r){var i=o[r],s="set"+function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom?t.$watch(i,function(e,n){t[s](e,n)},{deep:a}):"setOptions"===s?t.$watch(i,function(t,n){e.options=e.options||{},e.options=Dt({},e.options,t)},{deep:a}):t.$watch(i,function(t,n){e[s](t)},{deep:a})},s=0;s<o.length;s++)i(s)}(this,this.mapObject,this.$options.props),this.parentContainer=function(t){for(var e=!1;!e;)void 0===t.webMap?t=t.$parent:e=!0;return t}(this.$parent),this.mapObject.setElement(this.$el),this.mapObject.addTo(this.parentContainer.webMap.map.map)}},Ut=(n(47),Object(l.a)(Nt,Rt,[],!1,null,null,null));Ut.options.__file="src/components/NgwMap/controls/Panel.vue";var Gt=Ut.exports,Ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ht(e,t),Object.defineProperty(e.prototype,"drawer",{get:function(){return this.$store.state.app.drawer},set:function(t){this.$store.dispatch("app/toggleDrawer",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.$store.state.bdMain.items.map(function(t){return t.properties})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detail",{get:function(){return this.$store.state.bdMain.detailItem&&this.$store.state.bdMain.detailItem.properties},set:function(t){this.$store.dispatch("bdMain/setDetail",t)},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.$store.dispatch("bdMain/getAllItems")},e=Qt([Object(s.a)({components:{List:h,NgwMap:dt,ItemsFilter:gt,Detail:Pt,DrawerContainer:It,MapControl:Gt}})],e)}(s.c),Zt=(n(49),Object(l.a)(qt,i,[],!1,null,null,null));Zt.options.__file="src/App.vue";var zt=Zt.exports,Jt=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"my-app"},[this._v("\n  1234\n")])};Jt._withStripped=!0;var Yt=n(21),Vt=n.n(Yt),Kt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wt=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kt(e,t),e=Wt([Vt.a],e)}(r.default),te=(n(51),Object(l.a)(Xt,Jt,[],!1,null,null,null));te.options.__file="src/components/NextGIS/TestRouter.vue";var ee=[{path:"/"},{path:"/test",component:te.exports}],ne=new o.a({mode:"history",routes:ee}),re=n(19),oe=(n(53),function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})}),ie=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},se={route:"/api/component/pyramid/route"};var ae=/\{ *([\w_-]+) *\}/g;function ce(t,e){return t.replace(ae,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for letiable "+t);return"function"==typeof r&&(r=r(e)),r})}var ue=new(function(){function t(t){this.options={},this._loadingQueue={},this._loadingStatus={},this.options=Object.assign({},se,t||{})}return t.prototype.connect=function(){return oe(this,void 0,void 0,function(){var t,e,n,r=this;return ie(this,function(o){switch(o.label){case 0:return this.route?[2,Promise.resolve(this.route)]:[3,1];case 1:return this.options.auth?(console.log(1234),t=this.options.auth,e=t.login,n=t.password,e&&n?[4,this.getUserInfo()]:[3,3]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.makeQuery(this.options.route,{},{}).then(function(t){return r.route=t,t})];case 4:return[2,o.sent()]}})})},t.prototype.getUserInfo=function(){var t=this,e=this.makeClientId();return this.makeQuery("/api/component/auth/current_user",{},{headers:{Authorization:"Basic "+e,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"},mode:"cors"}).then(function(e){console.log(e),"guest"!==e.keyname&&(e.clientId=t.makeClientId(),localStorage&&localStorage.setItem("nguser",JSON.stringify(e)))})},t.prototype.makeClientId=function(){var t=this.options.auth,e=t.login,n=t.password;return window.btoa(unescape(encodeURIComponent(e+":"+n)))},t.prototype.request=function(t,e,n){var r=this;return this.connect().then(function(o){for(var i in o)if(o.hasOwnProperty(i)&&i===t){var s=o[i].slice(),a=s.shift();if(s.length){e=e||{};for(var c={},u=0;u<s.length;u++){var p=s[u];if(c[u]="{"+p+"}",void 0===e[p])throw new Error("`"+p+"` url api argument is not specified")}a=ce(a,c)}return r.makeQuery(a,e,n)}})},t.prototype.post=function(t,e,n){return(e=e||{}).method="POST",this.request(t,n,e)},t.prototype.makeQuery=function(t,e,n){var r=this;if(t=(this.options.baseUrl?this.options.baseUrl:"")+t)return e&&(t=ce(t,e)),t=t.replace(/([^:]\/)\/+/g,"$1"),this._loadingStatus[t]?(this._loadingStatus[t]=!1,new Promise(function(e,n){r._setLoadingQueue(t,e,n)})):(this._loadingStatus[t]=!0,this._getJson(t,n).then(function(e){return r._loadingStatus[t]=!1,r._exequteLoadingQueue(t,e),e}).catch(function(e){r._loadingStatus[t]=!1,r._exequteLoadingQueue(t,e,!0)}));throw new Error("No `url` parameter set for option "+name)},t.prototype._setLoadingQueue=function(t,e,n){this._loadingQueue[t]=this._loadingQueue[t]||{name:t,waiting:[]},this._loadingQueue[t].waiting.push({resolve:e,reject:n,timestamp:new Date})},t.prototype._exequteLoadingQueue=function(t,e,n){var r=this._loadingQueue[t];if(r){for(var o=0;o<r.waiting.length;o++){var i=r.waiting[o];n?i.reject&&i.reject():i.resolve(e)}r.waiting=[]}},t.prototype._getJson=function(t,e){return new Promise(function(n,r){!function(t,e,n,r){void 0===n&&(n={});var o;n.method=n.method||"GET","cors"===n.mode?o=function(t,e){var n=new XMLHttpRequest;if("withCredentials"in n)n.open(t,e,!0);else{var r=XDomainRequest;void 0!==r?(n=new r).open(t,e):n=null}return n}(n.method,t):(o=new XMLHttpRequest).open(n.method||"GET",t,!0);o.onreadystatechange=function(){if(4===o.readyState&&200===o.status&&o.responseText)try{e(JSON.parse(o.responseText))}catch(t){r(t)}};var i=n.headers;if(i)for(var s in i)i.hasOwnProperty(s)&&o.setRequestHeader(s,i[s]);o.withCredentials=n.withCredentials,o.send(n.data?JSON.stringify(n.data):null)}(t,n,e,r)})},t}())({baseUrl:"http://pastandnow.nextgis.com"}),pe=function(t){ue.request("feature_layer.geojson",{id:4}).then(function(e){e.features.forEach(function(t,e){t.properties.id=Number(t.id||e)}),t(e.features)})},le=function(t){t([{text:"Адрес",value:"addr"},{text:"долгота",value:"lat"},{text:"широта",value:"lon"},{text:"Название объекта",value:"name"},{text:"Тип объекта",value:"type"},{text:"Статус объекта",value:"status"},{text:"Район",value:"rayon"},{text:"Неофициальное название",value:"unoff"},{text:"ОПИСАНИЕ",value:"description"},{text:"Локальный нарратив",value:"narrativ_l"},{text:"Биографический нарратив",value:"narrativ_b"},{text:"Нарратив о практиках",value:"narrativ_p"},{text:"Описание места",value:"descript2"},{text:"Рассказчик",value:"narrator"},{text:"Визуальные материалы",value:"visual"},{text:"Москва дворовая",value:"mos1"},{text:"Москва церковная",value:"mos2"},{text:"Москва бездомная",value:"mos3"},{text:"Москва подземная",value:"mos4"},{text:"Москва субкультурная",value:"mos5"},{text:"Москва легендарная",value:"mos6"}])},fe={namespaced:!0,state:{items:[],meta:!1,filtered:[],detailItem:!1},getters:{features:function(t,e,n){return t.filtered}},actions:{getAllItems:function(t){var e=t.commit;le(function(t){e("setMeta",t),pe(function(t){e("setItems",t)})})},setFilter:function(t,e){var n=t.commit,r=t.state;n("setFilter",e);var o=r.detailItem;o&&(e.find(function(t){return t.id===o.id})||n("setDetail",!1))},setDetail:function(t,e){var n=t.commit,r=t.state,o=r.filtered.find(function(t){return t.id===e}),i=r.detailItem;i&&i.id===e&&(o=!1),n("setDetail",o)}},mutations:{setItems:function(t,e){t.items=e,t.filtered=e},setFilter:function(t,e){t.filtered=e},setDetail:function(t,e){t.detailItem=e},setMeta:function(t,e){t.meta=e}}},he={namespaced:!0,state:{drawer:!0},getters:{},actions:{showDrawer:function(t){(0,t.commit)("showDrawer")},hideDrawer:function(t){(0,t.commit)("hideDrawer")},toggleDrawer:function(t,e){var n=t.commit;n(e?"showDrawer":"hideDrawer")}},mutations:{showDrawer:function(t){t.drawer=!0},hideDrawer:function(t){t.drawer=!1}}};r.default.use(re.a);var de=new re.a.Store({modules:{bdMain:fe,app:he},strict:!1}),ye=n(23),ve=n.n(ye),me=(n(54),n(22));r.default.use(ve.a),r.default.use(o.a);new r.default({el:"#app",router:ne,store:de,render:function(t){return t(zt)}});window.version=me.a}],[[56,16,3,13,1,10,12,2,4,5,6,8,9,11,7,14,15]]]);
//# sourceMappingURL=main-fbfdc51.js.map