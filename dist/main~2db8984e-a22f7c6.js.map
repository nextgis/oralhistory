{"version":3,"sources":["webpack:///./nextgisweb_frontend/packages/vue-ngw-map/src/components/VueNgwControl.ts","webpack:///./nextgisweb_frontend/packages/vue-ngw-map/src/components/VueNgwMap.ts","webpack:///./nextgisweb_frontend/packages/vue-ngw-map/src/components/VueNgwResource.ts","webpack:///./nextgisweb_frontend/packages/vue-ngw-mapbox/src/components/VueNgwMapbox.ts","webpack:///./nextgisweb_frontend/packages/vue-ngw-mapbox/src/index.ts","webpack:///./nextgisweb_frontend/packages/utils/src/dom.ts","webpack:///./nextgisweb_frontend/packages/utils/src/clipboard.ts","webpack:///./nextgisweb_frontend/packages/utils/src/events.ts","webpack:///./nextgisweb_frontend/packages/utils/src/propertiesFilter.ts","webpack:///./nextgisweb_frontend/packages/utils/src/deepmerge.ts","webpack:///./nextgisweb_frontend/packages/utils/src/index.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/preparePaint.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/geometryTypes.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/updateGeoJsonAdapterOptions.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/controls/ToggleControl.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/keys/KeysCodes.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/keys/Keys.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/decorators.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/getBoundsPolygon.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/mapStates/StateItem.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/mapStates/CenterState.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/components/mapStates/ZoomState.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/BaseWebMap.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/util/clearObject.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/WebMapLayers.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/WebMap.ts","webpack:///./nextgisweb_frontend/packages/webmap/src/index.ts","webpack:///./nextgisweb_frontend/packages/vue-ngw-map/src/utils.ts"],"names":["name","beforeDestroy","this","parentContainer","ngwMap","control","removeControl","undefined","setControl","element","adControlOptions","$props","controlOptions","controlObject","onAdd","onRemove","createControl","_control","addControl","position","mounted","$parent","$el","$nextTick","$emit","render","h","staticClass","staticStyle","attrs","$slots","default","type","String","Boolean","Object","VueNgwControl","ready","_setNgwMap","destroy","zIndex","fullFilling","width","height","data","mapAdapter","mapOptions","target","Number","VueNgwMap","layer","removeLayer","setResourceId","resourceId","oldId","order","options","adapterOptions","fit","addNgwLayer","adapter","VueNgwResource","VueNgwMapbox","create","tagName","className","container","el","window","document","createElement","appendChild","text","copy","navigator","clipboard","writeText","clipboardData","setData","copyToClipboard","console","log","e","input","value","body","copyNodeContentsToClipboard","removeChild","select","setSelectionRange","execCommand","Clipboard","emitter","_eventsStatus","setEventStatus","event","status","onLoad","promises","Array","isArray","map","x","Promise","res","getEventStatus","once","all","then","_eventName","like","a","b","iLike","toUpperCase","re","replace","RegExp","exec","operationsAliases","gt","lt","ge","le","eq","ne","in","indexOf","notin","ilike","checkIfPropertyFilter","filter","pf","length","propertiesFilter","properties","filters","logic","filterFunction","p","field","operation","operationExec","filters_","some","every","deepmerge","src","mergeArray","array","dst","concat","forEach","i","push","keys","key","fixUrlStr","url","preparePaint","paint","defaultPaint","getPaintFunctions","newPaint","opt","getPaint","from","updatePaintOptionFromCallback","fill","stroke","strokeColor","strokeOpacity","color","fillColor","opacity","fillOpacity","findMostFrequentGeomType","arr","maxName","counts","fry","c","count","detectGeometryType","geojson","geometry","features","f","geometries","g","typeAlias","Point","LineString","MultiPoint","Polygon","MultiLineString","MultiPolygon","updateGeoJsonAdapterOptions","geomType","createToggleControl","createButtonControl","link","getStatus","title","html","setTitle","on","off","setAttribute","_setHtml","htmlDef","HTMLElement","innerHTML","setHtml","_setClass","addClass","impact","split","classList","add","remove","setClass","addClassOn","addClassOff","changeStatus","status_","onClick","afterClick","resolve","catch","buttonControl","keyCodeAlias","KeyCodes","_windowOnFocus","windowOnFocus","bind","_keysPressed","keysPressed","_keysReleased","keysReleased","addKeyboardEventsListener","pressed","keyName","code","addEventListener","removeKeyboardEventsListener","removeEventListener","stopPropagation","keyCode","_target","_propertyKey","descriptor","originalMethod","reject","_resolve","origin","apply","args","getBoundsPolygon","westNorth","coordinates","webMap","setValue","getValue","val","getCenter","setCenter","toString","d","toFixed","parse","str","StateItem","getZoom","setZoom","OPTIONS","minZoom","maxZoom","radius","weight","selectedPaint","appOptions","BaseWebMap","runtimeParams","mapState","CenterState","ZoomState","_initMapState","_mapState","_mapEvents","_starterKits","starterKits","_addEventsListeners","_setInitMapState","_setupMap","_emitStatusEvent","setRuntimeParams","params","_removeEventsListeners","obj","member","clearObject","getState","state","getRuntimeParams","get","getContainer","getElementById","setCursor","cursor","lngLat","getBounds","bounds","zoom","setView","fitBounds","onMapLoad","cb","isLoaded","getLayerAdapters","layerAdapters","getLayerAdapter","locate","events","stop","eventName","emit","_addLayerProviders","_onLoadSync","_zoomToInitialExtent","center","_extent","states","X","find","y","r","set","entries","utils","decorators","_layersIds","_layersOrders","_baseLayers","_layers","_selectedLayers","fitLayer","layerDef","getLayer","getExtent","extent","isBaseLayer","id","getBaseLayers","getLayerId","Error","getLayers","allLayers","findLayer","l","layerAdapter","isLayerVisible","visibility","addBaseLayer","addLayer","baseLayer","_order","adapterEngine","geoJsonOptions","_updateGeoJsonOptions","onBeforeAddLayer","modified","_adapter","layerId","filterLayer","showLayer","setLayerOpacity","addLayerFromAsyncAdapter","removeLayers","allowCb","allow","removeOverlays","beforeRemove","index","splice","addGeoJsonLayer","multiselect","unselectOnSecondClick","toggleLayer","hideLayer","onMap","toStatus","silent","action","source","preEventName","anotherVisibleLayerBaseLayer","call","setLayerOrder","updateLayer","selectLayer","findFeatureFun","unSelectLayer","unselect","feature","removeLayerFilter","removeFilter","setLayerData","clearLayer","addData","addLayerData","clearLayerData","getAttributions","attributions","layerMem","onlyVisible","attr","attribution","getActiveBaseLayer","visibleLayerBaseLayer","_onLayerClick","onLayerClickFromOpt","onLayerClick","nativePaint","WebMap","controlDef","getControl","engine","controlAdapters","createFun","controls","kit","adapters","createAdapter","newAdapter","onLoadSync","error","CONTROL","BUTTON","TOGGLE","propsBinder","vueElement","props","setMethodName","charAt","slice","prop","deepValue","$watch","newVal","oldVal","deep","findNgwMapParent","firstVueParent","found"],"mappings":"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","file":"main~2db8984e-a22f7c6.js","sourcesContent":["import Vue, { CreateElement, VNode, VNodeData } from 'vue';\nimport Component from 'vue-class-component';\nimport { Prop } from 'vue-property-decorator';\nimport {\n  MapControl,\n  CreateControlOptions,\n  ControlPositions\n} from '@nextgis/webmap';\nimport { findNgwMapParent, propsBinder } from '../utils';\nimport VueNgwMap from './VueNgwMap';\n\n@Component\nexport class VueNgwControl extends Vue {\n  name = 'vue-ngw-control';\n\n  @Prop({ type: String }) position!: ControlPositions;\n  @Prop({ type: Boolean }) bar!: boolean;\n  @Prop({ type: Boolean }) margin!: boolean;\n  @Prop({ type: String }) addClass!: string;\n  @Prop({ type: Object, default: () => ({}) })\n  controlOptions!: CreateControlOptions;\n\n  parentContainer!: VueNgwMap;\n\n  control?: unknown;\n\n  beforeDestroy() {\n    if (this.parentContainer.ngwMap && this.control) {\n      this.parentContainer.ngwMap.removeControl(this.control);\n      this.control = undefined;\n    }\n  }\n\n  async setControl(element: HTMLElement) {\n    const ngwMap = this.parentContainer.ngwMap;\n    const control = this.control;\n    if (ngwMap) {\n      if (control) {\n        ngwMap.removeControl(control);\n      }\n      const adControlOptions: CreateControlOptions = {\n        ...this.$props,\n        ...this.$props.controlOptions\n      };\n      const controlObject: MapControl = {\n        onAdd: () => {\n          return element;\n        },\n        onRemove: () => {\n          // ignore\n        }\n      };\n      const _control = await ngwMap.createControl(\n        controlObject,\n        adControlOptions\n      );\n      this.control = ngwMap.addControl(_control, this.position);\n    }\n  }\n\n  async mounted() {\n    this.parentContainer = findNgwMapParent(this.$parent);\n\n    await this.setControl(this.$el as HTMLElement);\n\n    propsBinder(this, this.$props);\n\n    this.$nextTick(() => {\n      this.$emit('ready', this.control);\n    });\n  }\n\n  render(h: CreateElement): VNode {\n    const staticStyle: { [param: string]: string } = {\n      // zIndex: '0'\n    };\n\n    const data: VNodeData = {\n      staticClass: 'vue-ngw-control',\n      staticStyle,\n      // 'class': this.classes,\n      attrs: { 'data-app': true }\n      // domProps: { id: this.id }\n    };\n\n    return h('div', data, this.$slots.default);\n  }\n}\n\nexport default VueNgwControl;\n","import Vue, { VNode, VNodeData, CreateElement } from 'vue';\nimport { Prop } from 'vue-property-decorator';\nimport Component from 'vue-class-component';\nimport NgwMap, { NgwMapOptions, MapAdapter } from '@nextgis/ngw-map';\n\nimport NgwConnector from '@nextgis/ngw-connector';\n\n@Component\nexport class VueNgwMap<M = any> extends Vue {\n  @Prop({ type: Object }) mapAdapter!: MapAdapter;\n  @Prop({ type: Boolean }) fullFilling!: boolean;\n  @Prop({ type: NgwConnector }) connector!: NgwConnector;\n  @Prop({ type: String }) baseUrl!: string;\n  @Prop({ type: Number }) qmsId!: string;\n  @Prop({ type: String }) webMapId!: string;\n  @Prop({ type: Object }) mapOptions!: NgwMapOptions;\n  name = 'vue-ngw-map';\n  ngwMap!: NgwMap<M>;\n  ready = false;\n\n  mounted() {\n    this._setNgwMap();\n  }\n\n  beforeDestroy() {\n    this.ngwMap.destroy();\n  }\n\n  render(h: CreateElement): VNode {\n    const staticStyle: { [param: string]: string } = {\n      zIndex: '0'\n    };\n    if (this.fullFilling) {\n      staticStyle.width = '100%';\n      staticStyle.height = '100%';\n    }\n\n    const data: VNodeData = {\n      staticClass: 'vue-ngw-map',\n      staticStyle,\n      // 'class': this.classes,\n      attrs: { 'data-app': true }\n      // domProps: { id: this.id }\n    };\n\n    return this.ready ? h('div', data, this.$slots.default) : h('div', data);\n  }\n\n  private _setNgwMap() {\n    this.ngwMap = new NgwMap(this.mapAdapter, {\n      ...this.$props,\n      ...this.mapOptions,\n      target: this.$el as HTMLElement\n    });\n    this.ready = true;\n  }\n}\n\nexport default VueNgwMap;\n","import Vue, { VNode, CreateElement } from 'vue';\nimport Component from 'vue-class-component';\nimport { Prop } from 'vue-property-decorator';\nimport { findNgwMapParent, propsBinder } from '../utils';\nimport { ResourceAdapter, NgwLayerAdapterType } from '@nextgis/ngw-kit';\nimport VueNgwMap from './VueNgwMap';\nimport { AdapterOptions } from '@nextgis/webmap';\n\n@Component\nexport class VueNgwResource extends Vue {\n  name = 'vue-ngw-resource';\n\n  @Prop({ type: Number }) resourceId!: string;\n  @Prop({ type: Boolean, default: false }) fit!: boolean;\n  @Prop({ type: String }) adapter!: NgwLayerAdapterType;\n  @Prop({ type: Object, default: () => ({}) }) adapterOptions!: AdapterOptions;\n\n  parentContainer!: VueNgwMap;\n\n  layer?: ResourceAdapter;\n\n  beforeDestroy() {\n    if (this.parentContainer.ngwMap && this.layer) {\n      this.parentContainer.ngwMap.removeLayer(this.layer);\n      this.layer = undefined;\n    }\n  }\n\n  async setResourceId(resourceId: string, oldId?: number) {\n    const ngwMap = this.parentContainer.ngwMap;\n    const layer = this.layer;\n    let order: number | undefined;\n    if (ngwMap) {\n      if (layer) {\n        order = layer.options.order;\n        ngwMap.removeLayer(layer);\n      }\n      const adapterOptions: AdapterOptions = { ...this.$props.adapterOptions };\n      if (order) {\n        adapterOptions.order = order;\n      }\n      if (resourceId) {\n        const fit = this.$props.fit ? !oldId : false;\n        this.layer = await ngwMap.addNgwLayer({\n          resourceId: Number(resourceId),\n          adapter: this.$props.adapter,\n          fit,\n          adapterOptions\n        });\n      }\n    }\n  }\n\n  async mounted() {\n    this.parentContainer = findNgwMapParent(this.$parent);\n\n    await this.setResourceId(this.$props.resourceId);\n\n    propsBinder(this, this.$props);\n\n    this.$nextTick(() => {\n      this.$emit('ready', this.layer);\n    });\n  }\n\n  render(h: CreateElement): VNode {\n    return h('div', {});\n  }\n}\n\nexport default VueNgwResource;\n","import 'mapbox-gl/dist/mapbox-gl.css';\n\nimport { Map } from 'mapbox-gl';\nimport { Mixins, Prop } from 'vue-property-decorator';\nimport Component from 'vue-class-component';\nimport { VueNgwMap } from '@nextgis/vue-ngw-map';\n\nimport MapAdapter from '@nextgis/mapboxgl-map-adapter';\n\n@Component\nexport class VueNgwMapbox extends Mixins<VueNgwMap<Map>>(VueNgwMap) {\n  @Prop({ type: Object, default: () => new MapAdapter() })\n  mapAdapter!: MapAdapter;\n}\n","/**\n * @module vue-ngw-mapbox\n */\nimport { VueNgwMapbox } from './components/VueNgwMapbox';\n\nexport { VueNgwMapbox };\nexport default VueNgwMapbox;\n","/**\n * @module utils\n */\nexport function create(\n  tagName: string,\n  className?: string,\n  container?: HTMLElement\n): HTMLElement {\n  const el = window.document.createElement(tagName);\n  if (className !== undefined) el.className = className;\n  if (container) container.appendChild(el);\n  return el;\n}\n","export class Clipboard {\n  constructor(text: string) {\n    if (text) {\n      this.copy(text);\n    }\n  }\n\n  static copy = (text: string) => {\n    return new Clipboard(text);\n  };\n\n  copy(text: string) {\n    try {\n      if ((navigator as any).clipboard) {\n        (navigator as any).clipboard.writeText(text);\n      } else if ((window as any).clipboardData) {\n        (window as any).clipboardData.setData('text', text);\n      } else {\n        this.copyToClipboard(text);\n      }\n      console.log('Copied to Clipboard');\n    } catch (e) {\n      console.log('Please copy coupon manually');\n    }\n  }\n\n  private copyToClipboard(text: string) {\n    const input = document.createElement('input') as HTMLInputElement;\n    input.value = text;\n    try {\n      document.body.appendChild(input);\n      this.copyNodeContentsToClipboard(input);\n    } finally {\n      document.body.removeChild(input);\n    }\n  }\n\n  private copyNodeContentsToClipboard(input: HTMLInputElement) {\n    input.select();\n    input.setSelectionRange(0, 99999); /*For mobile devices*/\n    document.execCommand('copy');\n  }\n}\n","import { EventEmitter } from 'events';\n\nexport class Events<E = any> {\n  private readonly _eventsStatus: { [key in keyof E]?: boolean } = {};\n\n  constructor(private emitter: EventEmitter) {}\n\n  setEventStatus(event: keyof E, status: boolean) {\n    this._eventsStatus[event] = status;\n  }\n\n  onLoad(event: keyof E | (keyof E)[]): Promise<this> {\n    const events: (keyof E)[] = Array.isArray(event) ? event : [event];\n    const promises = events.map(\n      x =>\n        new Promise(res => {\n          if (this.getEventStatus(x)) {\n            res(this);\n          } else {\n            const e = x as string | symbol;\n            this.emitter.once(e, () => {\n              this.setEventStatus(x, true);\n              res(this);\n            });\n          }\n        })\n    );\n    return Promise.all(promises).then(() => this);\n  }\n\n  getEventStatus(event: keyof E): boolean {\n    // ugly hack to disable type checking error\n    const _eventName = event as keyof E;\n    const status = this._eventsStatus[_eventName];\n    return status !== undefined ? !!status : false;\n  }\n}\n","/**\n * gt - greater (>)\n * lt - lower (<)\n * ge - greater or equal (>=)\n * le - lower or equal (<=)\n * eq - equal (=)\n * ne - not equal (!=)\n * like - LIKE SQL statement (for strings compare)\n * ilike - ILIKE SQL statement (for strings compare)\n */\nexport type Operations =\n  | 'gt'\n  | 'lt'\n  | 'ge'\n  | 'le'\n  | 'eq'\n  | 'ne'\n  | 'in'\n  | 'notin'\n  | 'like'\n  | 'ilike';\n\n/**\n * field, operation, value\n * ['foo', 'eq', 'bar']\n * ['count', 'ge', 20]\n */\nexport type PropertyFilter<T extends any = any> = [string, Operations, T];\n\nexport type PropertiesFilter<T extends any = any> = (\n  | 'all'\n  | 'any'\n  | PropertyFilter<T>\n  | PropertiesFilter<T>\n)[];\n\nfunction like(a: string, b: string, iLike?: boolean) {\n  a = String(a);\n  b = String(b);\n  if (a === b) return true;\n  if (iLike && a.toUpperCase() === b.toUpperCase()) return true;\n  const re = `^${a}$`.replace(/%/g, '.*').replace('_', '.');\n  return new RegExp(re, iLike ? 'i' : '').exec(b) !== null;\n}\n\nexport const operationsAliases: {\n  [key in Operations]: (a: any, b: any) => boolean;\n} = {\n  // greater(>)\n  gt: (a: any, b: any) => a > b,\n  // lower(<)\n  lt: (a: any, b: any) => a < b,\n  // greater or equal(>=)\n  ge: (a: any, b: any) => a >= b,\n  // lower or equal(<=)\n  le: (a: any, b: any) => a <= b,\n  // equal(=)\n  eq: (a: any, b: any) => a === b,\n  //  not equal(!=)\n  ne: (a: any, b: any) => a !== b,\n\n  in: (a: any, b: any[]) => b.indexOf(a) !== -1,\n  notin: (a: any, b: any[]) => b.indexOf(a) === -1,\n  // LIKE SQL statement(for strings compare)\n  like: (a: string, b: string) => {\n    return like(a, b);\n  },\n  // ILIKE SQL statement(for strings compare)\n  ilike: (a: string, b: string) => {\n    return like(a, b, true);\n  }\n};\n\nexport function checkIfPropertyFilter(\n  filter: PropertyFilter | PropertiesFilter | string\n): filter is PropertyFilter {\n  const pf = filter as PropertyFilter;\n  if (\n    pf.length === 3 &&\n    typeof pf[0] === 'string' &&\n    typeof pf[1] === 'string'\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport function propertiesFilter(\n  properties: { [field: string]: any },\n  filters: PropertiesFilter\n): boolean {\n  const logic = typeof filters[0] === 'string' ? filters[0] : 'all';\n  const filterFunction = (p: PropertyFilter | PropertiesFilter) => {\n    if (checkIfPropertyFilter(p)) {\n      const [field, operation, value] = p;\n      const operationExec = operationsAliases[operation];\n      if (operationExec) {\n        const property = properties[field];\n        return operationExec(property, value);\n      }\n      return true;\n    } else {\n      return propertiesFilter(properties, p);\n    }\n  };\n  const filters_ = filters.filter(x => Array.isArray(x)) as (\n    | PropertyFilter\n    | PropertiesFilter\n  )[];\n  return logic === 'any'\n    ? filters_.some(filterFunction)\n    : filters_.every(filterFunction);\n}\n","export function deepmerge(target: any, src: any, mergeArray = false): any {\n  const array = Array.isArray(src);\n  let dst: any = (array && []) || {};\n\n  if (array) {\n    if (mergeArray) {\n      target = target || [];\n      dst = dst.concat(target);\n      src.forEach(function(e: any, i: any) {\n        if (typeof dst[i] === 'undefined') {\n          dst[i] = e;\n        } else if (typeof e === 'object') {\n          dst[i] = deepmerge(target[i], e, mergeArray);\n        } else {\n          if (target.indexOf(e) === -1) {\n            dst.push(e);\n          }\n        }\n      });\n    } else {\n      // Replace array. Do not merge by default\n      dst = src;\n    }\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(function(key) {\n        dst[key] = target[key];\n      });\n    }\n    Object.keys(src).forEach(function(key) {\n      if (typeof src[key] !== 'object' || !src[key]) {\n        dst[key] = src[key];\n      } else {\n        if (typeof target[key] === 'object' && typeof src[key] === 'object') {\n          dst[key] = deepmerge(target[key], src[key], mergeArray);\n        } else {\n          dst[key] = src[key];\n        }\n      }\n    });\n  }\n  return dst;\n}\n","/**\n * @module utils\n */\n\nimport * as Dom from './dom';\nexport const dom = Dom;\nexport * from './clipboard';\nexport * from './events';\nexport * from './array';\nexport * from './propertiesFilter';\nexport { deepmerge } from './deepmerge';\nexport { debounce } from './debounce';\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n * Taken from: https://github.com/mapbox/mapbox-gl-js/blob/v1.0.0/src/util/util.js#L243\n */\nexport function bindAll(\n  fns: string[],\n  context: { [method: string]: (...args: any[]) => any }\n): void {\n  fns.forEach(fn => {\n    if (!context[fn]) {\n      return;\n    }\n    context[fn] = context[fn].bind(context);\n  });\n}\n\nexport function fixUrlStr(url: string): string {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n","import {\n  Paint,\n  VectorAdapterLayerPaint,\n  GeometryPaint,\n  GetPaintFunction,\n  GetCustomPaintOptions\n} from '../interfaces/LayerAdapter';\n\nfunction updatePaintOptionFromCallback(\n  paint: GetCustomPaintOptions,\n  getPaintFunctions: { [name: string]: GetPaintFunction }\n): VectorAdapterLayerPaint | undefined {\n  if (typeof paint.from === 'function') {\n    return paint.from(paint.options);\n  } else if (typeof paint.from === 'string' && getPaintFunctions) {\n    const from = getPaintFunctions[paint.from];\n    if (from) {\n      return from(paint.options);\n    }\n  }\n}\n\nexport function preparePaint(\n  paint: Paint,\n  defaultPaint: GeometryPaint,\n  getPaintFunctions: { [name: string]: GetPaintFunction }\n): Paint {\n  let newPaint: Paint | undefined;\n  if (typeof paint === 'function') {\n    return (opt: any) => {\n      return preparePaint(\n        paint(opt),\n        defaultPaint,\n        getPaintFunctions\n      ) as VectorAdapterLayerPaint;\n    };\n  } else if (paint.type === 'get-paint') {\n    const getPaint = updatePaintOptionFromCallback(paint, getPaintFunctions);\n    if (getPaint) {\n      newPaint = preparePaint(getPaint, defaultPaint, getPaintFunctions);\n    }\n  } else if (paint.type === 'icon') {\n    return paint;\n  } else {\n    newPaint = { ...paint };\n    newPaint.fill = newPaint.fill !== undefined ? newPaint.fill : true;\n    newPaint.stroke =\n      newPaint.stroke !== undefined\n        ? newPaint.stroke\n        : !newPaint.fill || !!(newPaint.strokeColor || newPaint.strokeOpacity);\n  }\n  if (newPaint) {\n    if (typeof newPaint === 'function') {\n      return newPaint;\n    } else {\n      newPaint = { ...defaultPaint, ...newPaint };\n    }\n  } else {\n    newPaint = { ...defaultPaint };\n  }\n\n  if ('color' in newPaint) {\n    if (!newPaint.strokeColor) {\n      newPaint.strokeColor = newPaint.color;\n    }\n    if (!newPaint.fillColor) {\n      newPaint.fillColor = newPaint.color;\n    }\n  }\n  if ('opacity' in newPaint) {\n    if (newPaint.strokeOpacity === undefined) {\n      newPaint.strokeOpacity = newPaint.opacity;\n    }\n    if (newPaint.fillOpacity === undefined) {\n      newPaint.fillOpacity = newPaint.opacity;\n    }\n  }\n\n  return newPaint;\n}\n","import {\n  GeoJsonObject,\n  GeoJsonGeometryTypes,\n  FeatureCollection,\n  GeometryCollection,\n  Feature\n} from 'geojson';\n\nexport function findMostFrequentGeomType(\n  arr: GeoJsonGeometryTypes[]\n): GeoJsonGeometryTypes {\n  const counts: { [x: string]: number } = {};\n  for (let fry = 0; fry < arr.length; fry++) {\n    counts[arr[fry]] = 1 + (counts[arr[fry]] || 0);\n  }\n  let maxName;\n  for (const c in counts) {\n    const count = maxName !== undefined ? counts[maxName] : 0;\n    if (counts[c] > (count || 0)) {\n      maxName = c;\n    }\n  }\n  return maxName as GeoJsonGeometryTypes;\n}\n\nexport function detectGeometryType(\n  geojson: GeoJsonObject\n): GeoJsonGeometryTypes {\n  let geometry: GeoJsonGeometryTypes;\n  if (geojson.type === 'FeatureCollection') {\n    const featuresTypes = (geojson as FeatureCollection).features.map(\n      f => f.geometry.type\n    );\n    geometry = findMostFrequentGeomType(featuresTypes);\n  } else if (geojson.type === 'GeometryCollection') {\n    const geometryTypes = (geojson as GeometryCollection).geometries.map(\n      g => g.type\n    );\n    geometry = findMostFrequentGeomType(geometryTypes);\n  } else if (geojson.type === 'Feature') {\n    geometry = (geojson as Feature).geometry.type;\n  } else {\n    geometry = geojson.type;\n  }\n  return geometry;\n}\n","import {\n  GeoJsonAdapterOptions,\n  VectorAdapterLayerType\n} from '../interfaces/LayerAdapter';\nimport { detectGeometryType } from './geometryTypes';\n\nexport const typeAlias: { [x: string]: VectorAdapterLayerType } = {\n  Point: 'circle',\n  LineString: 'line',\n  MultiPoint: 'circle',\n  Polygon: 'fill',\n  MultiLineString: 'line',\n  MultiPolygon: 'fill'\n};\n\nexport function updateGeoJsonAdapterOptions(\n  opt: GeoJsonAdapterOptions\n): GeoJsonAdapterOptions {\n  if (opt.data) {\n    const geomType = typeAlias[detectGeometryType(opt.data)];\n    const p = opt.paint;\n    if (typeof p === 'object') {\n      // define parameter if not specified\n      p.type = p.type\n        ? p.type\n        : geomType === 'fill' || geomType === 'line'\n        ? 'path'\n        : 'html' in p || 'className' in p\n        ? 'icon'\n        : geomType;\n    }\n    opt.type = opt.type || geomType;\n  }\n  return opt;\n}\n","import {\n  ToggleControlOptions,\n  ToggleControl,\n  ButtonControlOptions\n} from '../../interfaces/MapControl';\n\nexport function createToggleControl<C = any>(\n  createButtonControl: (options: ButtonControlOptions) => C,\n  options: ToggleControlOptions\n): C & ToggleControl {\n  const link = document.createElement('div');\n\n  let status = false;\n  if (options.getStatus) {\n    status = options.getStatus();\n  } else if (options.status) {\n    status = options.status;\n  }\n\n  const title = options.title || '';\n  const html = options.html;\n\n  function setTitle() {\n    if (title) {\n      if (typeof title === 'string') {\n        link.title = title;\n      } else {\n        link.title = status ? title.on : title.off;\n      }\n      link.setAttribute('aria-label', link.title);\n    }\n  }\n  setTitle();\n\n  // DomEvent.disableClickPropagation(link);\n  // DomEvent.on(link, 'click', DomEvent.stop);\n\n  function _setHtml(htmlDef: string | HTMLElement) {\n    if (htmlDef instanceof HTMLElement) {\n      link.innerHTML = '';\n      link.appendChild(htmlDef);\n    } else if (typeof htmlDef === 'string') {\n      link.innerHTML = htmlDef;\n    }\n  }\n  function setHtml() {\n    if (html) {\n      if (typeof html === 'string' || html instanceof HTMLElement) {\n        _setHtml(html);\n      } else {\n        _setHtml(status ? html.on : html.off);\n      }\n      link.setAttribute('aria-label', link.title);\n    }\n  }\n  setHtml();\n\n  function _setClass(addClass: string, impact: boolean) {\n    addClass.split(' ').forEach(x => {\n      if (impact) {\n        link.classList.add(x);\n      } else {\n        link.classList.remove(x);\n      }\n    });\n  }\n\n  function setClass() {\n    if (options.addClassOn) {\n      _setClass(options.addClassOn, status);\n    }\n    if (options.addClassOff) {\n      _setClass(options.addClassOff, !status);\n    }\n  }\n\n  if (options.addClass) {\n    _setClass(options.addClass, true);\n  }\n  setClass();\n\n  const changeStatus = (status_?: boolean) => {\n    if (status_ !== undefined) {\n      status = status_;\n    }\n    setHtml();\n    setTitle();\n    setClass();\n  };\n\n  const onClick = (status_?: boolean) => {\n    status = status_ !== undefined ? status_ : !status;\n    if (options.onClick) {\n      const afterClick = options.onClick(status);\n      Promise.resolve(afterClick)\n        .then(() => changeStatus())\n        .catch(() => (status = !status));\n    } else {\n      changeStatus();\n    }\n  };\n\n  const buttonControl = createButtonControl({\n    html: link,\n    onClick\n  }) as C & ToggleControl;\n  buttonControl.onClick = onClick;\n  buttonControl.changeStatus = changeStatus;\n  return buttonControl;\n}\n","export class KeyCodes {\n  'backspace' = 8;\n  'tab' = 9;\n  'enter' = 13;\n  'shift' = 16;\n  'ctrl' = 17;\n  'alt' = 18;\n  'pause/break' = 19;\n  'caps_lock' = 20;\n  'escape' = 27;\n  'page_up' = 33;\n  'page_down' = 34;\n  'end' = 35;\n  'home' = 36;\n  'left_arrow' = 37;\n  'up_arrow' = 38;\n  'right_arrow' = 39;\n  'down_arrow' = 40;\n  'insert' = 45;\n  'delete' = 46;\n  'left_window_key' = 91;\n  'right_window_key' = 92;\n  'select_key' = 93;\n  'numpad_0' = 96;\n  'numpad_1' = 97;\n  'numpad_2' = 98;\n  'numpad_3' = 99;\n  'numpad_4' = 100;\n  'numpad_5' = 101;\n  'numpad_6' = 102;\n  'numpad_7' = 103;\n  'numpad_8' = 104;\n  'numpad_9' = 105;\n  'multiply' = 106;\n  'add' = 107;\n  'subtract' = 109;\n  'decimal_point' = 110;\n  'divide' = 111;\n  'f1' = 112;\n  'f2' = 113;\n  'f3' = 114;\n  'f4' = 115;\n  'f5' = 116;\n  'f6' = 117;\n  'f7' = 118;\n  'f8' = 119;\n  'f9' = 120;\n  'f10' = 121;\n  'f11' = 122;\n  'f12' = 123;\n  'num_lock' = 144;\n  'scroll_lock' = 145;\n  'semi-colon' = 186;\n  'equal_sign' = 187;\n  ',' = 188; // \"comma\";\n  '-' = 189; // \"dash\";\n  '.' = 190; // \"period\";\n  '/' = 191; // \"forward slash\";\n  '`' = 192; // \"grave accent\";\n  '[' = 219; // \"open bracket\";\n  '\\\\' = 220; // \"back slash\";\n  ']' = 221; // \"close braket\";\n  \"'\" = 222; // \"single quote\"\n}\n","import { KeyCodes } from './KeysCodes';\n\n/**\n * @param {string} key - key symbol\n * @param {string} func - action on key press\n * @param {number} [keyCode] - key code for special button like tab\n *\n * @export\n * @interface KeyControl\n */\nexport interface KeyControl {\n  key?: string;\n  keyCode?: number;\n  func: () => void;\n}\n\nexport class Keys {\n  keyCodeAlias = new KeyCodes();\n\n  keys: { [keyCode: number]: boolean } = {};\n\n  private _windowOnFocus: () => void;\n  private _keysPressed: (e: KeyboardEvent) => void;\n  private _keysReleased: (e: KeyboardEvent) => void;\n\n  constructor() {\n    this._windowOnFocus = this.windowOnFocus.bind(this);\n    this._keysPressed = this.keysPressed.bind(this);\n    this._keysReleased = this.keysReleased.bind(this);\n    this.addKeyboardEventsListener();\n  }\n\n  pressed(keyName: keyof KeyCodes): boolean {\n    const code = this.keyCodeAlias[keyName];\n    return !!code && this.keys[code];\n  }\n\n  addKeyboardEventsListener() {\n    window.addEventListener('focus', this._windowOnFocus, false);\n    window.addEventListener('keydown', this._keysPressed, false);\n    window.addEventListener('keyup', this._keysReleased, false);\n  }\n\n  removeKeyboardEventsListener() {\n    window.removeEventListener('focus', this._windowOnFocus, false);\n    window.removeEventListener('keydown', this._keysPressed, false);\n    window.removeEventListener('keyup', this._keysReleased, false);\n  }\n\n  private keysPressed(e: KeyboardEvent) {\n    e.stopPropagation();\n    if (!this.keys[e.keyCode]) {\n      this.keys[e.keyCode] = true;\n    }\n  }\n\n  private keysReleased(e: KeyboardEvent) {\n    e.stopPropagation();\n    this.keys[e.keyCode] = false;\n  }\n\n  private windowOnFocus() {\n    this.keys = {};\n  }\n}\n","import { WebMap } from '../WebMap';\nimport { WebMapEvents } from '../interfaces/Events';\n\nexport function onLoad<E extends WebMapEvents = WebMapEvents>(event: keyof E) {\n  return function(\n    _target: WebMap,\n    _propertyKey: string,\n    descriptor: PropertyDescriptor\n  ) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = function(\n      this: WebMap<unknown, unknown, unknown, E>,\n      ...args: unknown[]\n    ) {\n      return new Promise((resolve, reject) => {\n        const _resolve = (): void => {\n          const origin = originalMethod.apply(this, args);\n          origin && origin.then\n            ? origin.then(resolve).catch(reject)\n            : resolve(origin);\n        };\n        const isLoaded = this.getEventStatus(event);\n        if (isLoaded) {\n          _resolve();\n        } else {\n          this.emitter.once(event as keyof WebMapEvents, () => {\n            _resolve();\n          });\n        }\n      });\n    };\n    return descriptor;\n  };\n}\n","import { LngLatBoundsArray } from '../interfaces/BaseTypes';\nimport { Feature, Polygon } from 'geojson';\n\nexport function getBoundsPolygon(b: LngLatBoundsArray): Feature<Polygon> {\n  const westNorth = [b[0], b[1]];\n  const eastNorth = [b[2], b[1]];\n  const eastSouth = [b[2], b[3]];\n  const westSouth = [b[0], b[3]];\n\n  const feature: Feature<Polygon> = {\n    type: 'Feature',\n    properties: {},\n    geometry: {\n      type: 'Polygon',\n      coordinates: [[westNorth, eastNorth, eastSouth, westSouth, westNorth]]\n    }\n  };\n  return feature;\n}\n","import { MapStateItem } from '../../interfaces/MapState';\nimport { WebMapEvents } from '../../interfaces/Events';\nimport { WebMap } from '../../WebMap';\nimport { MapOptions } from '../../interfaces/WebMapApp';\n\nexport abstract class StateItem<V extends any | undefined = any | undefined>\n  implements MapStateItem<V | undefined> {\n  name!: keyof MapOptions;\n  event!: keyof WebMapEvents;\n  protected value?: V;\n\n  constructor(\n    protected webMap: WebMap,\n    opt?: { name?: keyof MapOptions; event?: keyof WebMapEvents; value?: V }\n  ) {\n    if (opt) {\n      if (opt.value) {\n        this.setValue(opt.value);\n      }\n      if (opt.name) {\n        this.name = opt.name;\n      }\n      if (opt.event) {\n        this.event = opt.event;\n      }\n    }\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  setValue(val: V) {\n    this.value = val;\n  }\n\n  abstract toString(data: any): string;\n  abstract parse(str: string): V;\n}\n","import { StateItem } from './StateItem';\nimport { WebMapEvents } from '../../interfaces/Events';\nimport { LngLatArray } from '../../interfaces/BaseTypes';\nimport { MapOptions } from '../../interfaces/WebMapApp';\n\nexport class CenterState extends StateItem<LngLatArray> {\n  name: keyof MapOptions = 'center';\n  event: keyof WebMapEvents = 'moveend';\n\n  getValue() {\n    return this.webMap.getCenter();\n  }\n  setValue(val: LngLatArray) {\n    this.webMap.setCenter(val);\n  }\n  toString(data: LngLatArray) {\n    const d = data.map(x => x.toFixed(5));\n    return d[0] + '_' + d[1];\n  }\n  parse(str: string) {\n    const lngLat = str.split('_').map(Number) as LngLatArray;\n    return lngLat;\n  }\n}\n","import { StateItem } from './StateItem';\nimport { WebMapEvents } from '../../interfaces/Events';\nimport { MapOptions } from '../../interfaces/WebMapApp';\n\nexport class ZoomState extends StateItem<number> {\n  name: keyof MapOptions = 'zoom';\n  event: keyof WebMapEvents = 'zoomend';\n  getValue() {\n    return this.webMap.getZoom();\n  }\n  setValue(val: number) {\n    this.webMap.setZoom(val);\n  }\n  toString(val: number) {\n    return String(val);\n  }\n  parse(str: string) {\n    return Number(str);\n  }\n}\n","/**\n * @module webmap\n */\nimport { deepmerge } from '@nextgis/utils';\nimport { GetPaintFunction } from './interfaces/LayerAdapter';\nimport { LayerAdapter } from './interfaces/LayerAdapter';\nimport {\n  MapAdapter,\n  FitOptions,\n  LocateOptions,\n  LocationEvents,\n  Locate\n} from './interfaces/MapAdapter';\nimport { MapOptions, AppOptions } from './interfaces/WebMapApp';\nimport {\n  LngLatBoundsArray,\n  Type,\n  Cursor,\n  LngLatArray\n} from './interfaces/BaseTypes';\nimport { RuntimeParams } from './interfaces/RuntimeParams';\nimport { StarterKit } from './interfaces/StarterKit';\n\nimport { createToggleControl } from './components/controls/ToggleControl';\n\nimport { Keys } from './components/keys/Keys';\n\nimport StrictEventEmitter from 'strict-event-emitter-types';\nimport { EventEmitter } from 'events';\nimport { WebMapEvents, BaseMapEvents } from './interfaces/Events';\n\nimport { onLoad } from './util/decorators';\nimport { propertiesFilter } from './util/propertiesFilter';\nimport { clearObject } from './util/clearObject';\nimport { getBoundsPolygon } from './util/getBoundsPolygon';\n\nimport {\n  detectGeometryType,\n  findMostFrequentGeomType\n} from './util/geometryTypes';\nimport { updateGeoJsonAdapterOptions } from './util/updateGeoJsonAdapterOptions';\n\nimport { CenterState } from './components/mapStates/CenterState';\nimport { ZoomState } from './components/mapStates/ZoomState';\nimport { StateItem } from './components/mapStates/StateItem';\nimport { Feature, Polygon } from 'geojson';\n\nconst OPTIONS: MapOptions = {\n  minZoom: 0,\n  maxZoom: 21,\n  paint: {\n    color: 'blue',\n    opacity: 1,\n    radius: 8,\n    weight: 1\n  },\n  selectedPaint: {\n    color: 'darkblue',\n    opacity: 1,\n    radius: 12,\n    weight: 1\n  }\n};\n\n/**\n * @class WebMap\n */\nexport class BaseWebMap<\n  M = any,\n  L = any,\n  C = any,\n  E extends WebMapEvents = WebMapEvents\n> {\n  static keys: Keys = new Keys();\n  static utils = {\n    detectGeometryType,\n    findMostFrequentGeomType,\n    updateGeoJsonAdapterOptions,\n    propertiesFilter,\n    createToggleControl,\n    getBoundsPolygon\n  };\n  static getPaintFunctions: { [name: string]: GetPaintFunction };\n  static decorators = { onLoad };\n\n  options: MapOptions = OPTIONS;\n  // `WebMapEvents` must be `E` but its not work correct\n  readonly emitter: StrictEventEmitter<\n    EventEmitter,\n    WebMapEvents\n  > = new EventEmitter();\n  readonly keys = BaseWebMap.keys;\n\n  readonly mapAdapter: MapAdapter<M>;\n  readonly runtimeParams: RuntimeParams[] = [];\n\n  getPaintFunctions = BaseWebMap.getPaintFunctions;\n  mapState: Type<StateItem>[] = [CenterState, ZoomState];\n\n  /**\n   * From runtime params\n   */\n  protected _initMapState: Record<string, any> = {};\n  protected readonly _starterKits: StarterKit[];\n  private _mapState: StateItem[] = [];\n  private _extent?: LngLatBoundsArray;\n  private readonly _eventsStatus: { [key in keyof E]?: boolean } = {};\n\n  private readonly _mapEvents: Record<string, (...args: any[]) => void> = {};\n\n  constructor(appOptions: AppOptions) {\n    this.mapAdapter = appOptions.mapAdapter;\n    this._starterKits = appOptions.starterKits || [];\n    if (appOptions.mapOptions) {\n      this.options = deepmerge(OPTIONS || {}, appOptions.mapOptions);\n    }\n    if (appOptions.runtimeParams) {\n      this.runtimeParams = appOptions.runtimeParams;\n    }\n    this._addEventsListeners();\n    if (appOptions.create) {\n      this.create(this.options);\n    }\n  }\n\n  /**\n   * Manual way to create a map. On default\n   * @example\n   * ```javascript\n   * const webMap = new WebMap(options);\n   * webMap.create(mapOptions).then(() => doSomething());\n   * ```\n   */\n  async create(options?: MapOptions): Promise<this> {\n    if (!this.getEventStatus('create')) {\n      this.options = deepmerge(OPTIONS || {}, options);\n      await this._setInitMapState(this.mapState);\n      await this._setupMap();\n      this._emitStatusEvent('create', this);\n    }\n    return this;\n  }\n\n  setRuntimeParams(params: RuntimeParams) {\n    this.runtimeParams.push(params);\n  }\n\n  /**\n   * Destroys WebMap, MapAdapter, clears all layers and turn off all event listeners\n   */\n  destroy() {\n    this._removeEventsListeners();\n    clearObject(this._emitStatusEvent);\n    if (this.mapAdapter.destroy) {\n      this.mapAdapter.destroy();\n    }\n  }\n\n  getState(): Record<string, any> {\n    const state: Record<string, any> = {};\n    this._mapState.forEach(x => {\n      state[x.name] = x.getValue();\n    });\n    return state;\n  }\n\n  getRuntimeParams(): Record<string, any> {\n    const state: Record<string, any> = {};\n    this._mapState.forEach(x => {\n      for (const r of this.runtimeParams) {\n        const val = r.get(x.name);\n        if (val !== undefined) {\n          state[x.name] = x.parse(val);\n          break;\n        }\n      }\n    });\n    return state;\n  }\n\n  /**\n   * Returns the HTML element that contains the map.\n   * @returns The map's container\n   */\n  getContainer(): HTMLElement | undefined {\n    if (this.mapAdapter.getContainer) {\n      return this.mapAdapter.getContainer();\n    } else if (this.options.target) {\n      if (this.options.target instanceof HTMLElement) {\n        return this.options.target;\n      } else if (typeof this.options.target === 'string') {\n        const element = document.getElementById(this.options.target);\n        if (element) {\n          return element;\n        }\n      }\n    }\n  }\n\n  /**\n   * Set the cursor icon to be displayed when hover icon on the map container.\n   * @param cursor available cursor name from https://developer.mozilla.org/ru/docs/Web/CSS/cursor\n   */\n  setCursor(cursor: Cursor) {\n    if (this.mapAdapter.setCursor) {\n      this.mapAdapter.setCursor(cursor);\n    }\n  }\n\n  /**\n   * Set the center of the current view.\n   * @param lngLat Array of two numbers representing longitude and latitude of the center of the map view.\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.setCenter([86.925278, 27.988056]);\n   * ```\n   */\n  setCenter(lngLat: LngLatArray): this {\n    this.mapAdapter.setCenter(lngLat);\n    return this;\n  }\n\n  /**\n   * Returns the map's geographical centerpoint.\n   * @return lngLat Array of two numbers representing longitude and latitude of the center of the map view.\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.getCenter(); // [86.925278, 27.988056]\n   * ```\n   */\n  getCenter(): LngLatArray | undefined {\n    return this.mapAdapter.getCenter();\n  }\n\n  getBounds(): LngLatBoundsArray | undefined {\n    if (this.mapAdapter.getBounds) {\n      return this.mapAdapter.getBounds();\n    }\n  }\n\n  getBoundsPolygon(): Feature<Polygon> | undefined {\n    const bounds = this.getBounds();\n    if (bounds) {\n      const feature = getBoundsPolygon(bounds);\n      return feature;\n    }\n  }\n\n  /**\n   * Zoom to a specific zoom level.\n   * @param zoom The zoom level to set (0-24).\n   */\n  setZoom(zoom: number): this {\n    this.mapAdapter.setZoom(zoom);\n    return this;\n  }\n\n  /**\n   * Returns the map's current zoom level.\n   * @return The map's current zoom level (0-24).\n   */\n  getZoom(): number | undefined {\n    return this.mapAdapter.getZoom();\n  }\n\n  /**\n   * Sets the view of the map geographical center and zoom\n   * @param lngLat Array of two numbers representing longitude and latitude of the center of the map view.\n   * @param zoom The zoom level to set (0-24).\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.setView([86.925278, 27.988056], 12)\n   * ```\n   */\n  setView(lngLat?: LngLatArray, zoom?: number) {\n    if (this.mapAdapter.setView && lngLat && zoom) {\n      this.mapAdapter.setView(lngLat, zoom);\n    } else {\n      if (lngLat) {\n        this.mapAdapter.setCenter(lngLat);\n      }\n      if (zoom) {\n        this.mapAdapter.setZoom(zoom);\n      }\n    }\n  }\n\n  /**\n   * Sets a map view that contains the given geographical bounds.\n   * @param bounds Array of coordinates, measured in degrees, in [west, south, east, north] order.\n   * @param options\n   *\n   * @example\n   * ```javascript\n   * // Whall world\n   * webMap.fitBounds([0, -90, 180, 90]);\n   * ```\n   */\n  fitBounds(bounds: LngLatBoundsArray, options?: FitOptions): this {\n    this.mapAdapter.fitBounds(bounds, options);\n    return this;\n  }\n\n  /**\n   * Checking the status of any asynchronous operation\n   * @param event The name of the event whose status is checked\n   *\n   * @example\n   * ```javascript\n   * var webMap = new WebMap(options);\n   * webMap.getEventStatus('create'); // false\n   * webMap.emitter.on('create', function () {\n   *   webMap.getEventStatus('create'); // true\n   * })\n   * ```\n   */\n  getEventStatus(event: keyof E): boolean {\n    // ugly hack to disable type checking error\n    const _eventName = event as keyof WebMapEvents;\n    const status = this._eventsStatus[_eventName];\n    return status !== undefined ? status : false;\n  }\n\n  /**\n   * helper method to wait for events to load. By default, card creation is tracked\n   * @param event The name of the event whose status is checked\n   *\n   * @example\n   * ```javascript\n   * var webMap = new WebMap(options);\n   * webMap.onLoad().then(function () {\n   *   webMap.getEventStatus('create'); // true\n   * })\n   *\n   * // use async/await syntax\n   * async function () {\n   *   await webMap.onLoad();\n   *   doSomething();\n   * }\n   *\n   * ```\n   */\n  onLoad(event: keyof WebMapEvents = 'create'): Promise<this> {\n    return new Promise(res => {\n      if (this.getEventStatus(event)) {\n        res(this);\n      } else {\n        this.emitter.once(event, () => {\n          res(this);\n        });\n      }\n    });\n  }\n\n  onMapLoad(cb?: (mapAdapter: MapAdapter) => void): Promise<MapAdapter> {\n    return new Promise(res => {\n      const _resolve = () => {\n        const mapAdapter = this.mapAdapter;\n        if (cb) {\n          cb(mapAdapter);\n        }\n        if (mapAdapter) {\n          res(mapAdapter);\n        }\n      };\n      const isLoaded =\n        this.mapAdapter.isLoaded !== undefined\n          ? this.mapAdapter.isLoaded\n          : true;\n      if (this.mapAdapter.map && isLoaded) {\n        _resolve();\n      } else {\n        this.mapAdapter.emitter.once('create', () => {\n          _resolve();\n        });\n      }\n    });\n  }\n\n  getLayerAdapters(): { [name: string]: Type<LayerAdapter> } {\n    return this.mapAdapter.layerAdapters;\n  }\n\n  getLayerAdapter(name: string): Type<LayerAdapter> {\n    const adapter = this.mapAdapter.layerAdapters[name];\n    return adapter;\n  }\n\n  locate(opt: LocateOptions, events?: LocationEvents): Locate {\n    if (this.mapAdapter && this.mapAdapter.locate) {\n      return this.mapAdapter.locate(opt, events);\n    }\n    const stop = () => ({});\n    return { stop };\n  }\n\n  protected _emitStatusEvent(eventName: keyof E, data?: any) {\n    // ugly hack to disable type checking error\n    const _eventName = eventName as keyof WebMapEvents;\n    this._eventsStatus[_eventName] = true;\n    this.emitter.emit(_eventName, data);\n  }\n\n  protected async _addLayerProviders(): Promise<void> {\n    //\n  }\n\n  protected async _onLoadSync(): Promise<void> {\n    //\n  }\n\n  private async _setupMap() {\n    await this.mapAdapter.create(this.options);\n    this._zoomToInitialExtent();\n\n    await this._addLayerProviders();\n    await this._onLoadSync();\n\n    this._emitStatusEvent('build-map', this.mapAdapter);\n    return this;\n  }\n\n  private _zoomToInitialExtent() {\n    const { center, zoom, bounds } = this.options;\n    if (this._extent) {\n      this.fitBounds(this._extent);\n    } else if (center && zoom) {\n      this.setView(center, zoom);\n    } else if (bounds) {\n      this.fitBounds(bounds);\n    }\n  }\n\n  private _setInitMapState(states: Type<StateItem>[]) {\n    for (const X of states) {\n      const state = new X(this);\n      this._mapState.push(state);\n      for (const r of this.runtimeParams) {\n        const str = r.get(state.name);\n        if (str !== undefined) {\n          const val = state.parse(str);\n          // state.setValue(val);\n          this._initMapState[state.name] = val;\n          this.options[state.name] = val;\n          break;\n        }\n      }\n    }\n  }\n\n  private _addEventsListeners(): void {\n    const events: (keyof BaseMapEvents)[] = [\n      'click',\n      'zoomstart',\n      'zoom',\n      'zoomend',\n      'movestart',\n      'move',\n      'moveend'\n    ];\n    events.forEach(x => {\n      this._mapEvents[x] = data => {\n        if (this.runtimeParams.length) {\n          const mapStatusEvent = this._mapState.find(y => y.event === x);\n          if (mapStatusEvent) {\n            const value = mapStatusEvent.toString(mapStatusEvent.getValue());\n            this.runtimeParams.forEach(r => {\n              r.set(mapStatusEvent.name, value);\n            });\n          }\n        }\n        if (this._eventsStatus) {\n          this.emitter.emit(x, data);\n        }\n      };\n      this.mapAdapter.emitter.on(x, this._mapEvents[x]);\n    });\n  }\n\n  private _removeEventsListeners(): void {\n    Object.entries(this._mapEvents).forEach(([x, event]) => {\n      this.mapAdapter.emitter.off(x, event);\n    });\n  }\n}\n","export function clearObject(obj: Record<any, any>): void {\n  for (const member in obj) {\n    delete obj[member];\n  }\n}\n","/**\n * @module webmap\n */\nimport {\n  LayerAdapter,\n  LayerAdapters,\n  AdapterConstructor,\n  LayerAdaptersOptions,\n  AdapterOptions,\n  GeoJsonAdapterOptions,\n  VectorLayerAdapter,\n  DataLayerFilter,\n  OnLayerClickOptions,\n  PropertiesFilter,\n  FilterOptions,\n  LayerDefinition\n} from './interfaces/LayerAdapter';\nimport { LayerDef, Type } from './interfaces/BaseTypes';\n\nimport { Feature, GeoJsonObject } from 'geojson';\nimport { preparePaint } from './util/preparePaint';\nimport { updateGeoJsonAdapterOptions } from './util/updateGeoJsonAdapterOptions';\nimport {\n  GetAttributionsOptions,\n  ToggleLayerOptions\n} from './interfaces/WebMapApp';\nimport { propertiesFilter } from './util/propertiesFilter';\nimport { BaseWebMap } from './BaseWebMap';\nimport { WebMapEvents } from './interfaces/Events';\n\nexport class WebMapLayers<\n  M = any,\n  L = any,\n  C = any,\n  E extends WebMapEvents = WebMapEvents\n> extends BaseWebMap<M, L, C, E> {\n  private _layersIds = 1;\n  private _layersOrders = 1;\n  private readonly _baseLayers: string[] = [];\n  private readonly _layers: { [id: string]: LayerAdapter } = {};\n  private readonly _selectedLayers: string[] = [];\n\n  /**\n   * Try to fit map view by given layer bounds.\n   * But not all layers have borders\n   * @param layerDef\n   */\n  async fitLayer(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    if (layer && layer.getExtent) {\n      const extent = await layer.getExtent();\n      if (extent) {\n        this.fitBounds(extent);\n      }\n    }\n  }\n\n  /**\n   * Check if given layer is baselayer\n   * @param layerName Check\n   */\n  isBaseLayer(layerDef: LayerDef): boolean | undefined {\n    const layer = this.getLayer(layerDef);\n    if (layer && layer.id) {\n      return this._baseLayers.indexOf(layer.id) !== -1;\n    }\n    return undefined;\n  }\n\n  getBaseLayers() {\n    return this._baseLayers;\n  }\n\n  /**\n   * Helper method to return added layer object by any definition type.\n   */\n  getLayer<LA extends LayerAdapter = LayerAdapter>(\n    layerDef: LayerDef\n  ): LA | undefined {\n    if (typeof layerDef === 'string') {\n      return this._layers[layerDef] as LA;\n    }\n    return layerDef as LA;\n  }\n\n  /**\n   * Helper method to return added layer identificator by any definition type.\n   */\n  getLayerId(layerDef: LayerDef): string | undefined {\n    const layer = this.getLayer(layerDef);\n    if (layer && layer.options) {\n      return layer.options.id;\n    } else {\n      throw new Error('No id for layer');\n    }\n  }\n\n  /**\n   * Return array of all added layer identifications.\n   */\n  getLayers(): string[] {\n    return Object.keys(this._layers);\n  }\n\n  // TODO: rename to getLayers, getLayers rename to getLayersIds\n  allLayers() {\n    return this._layers;\n  }\n\n  findLayer<T extends LayerAdapter = LayerAdapter>(\n    filter: (adapter: T) => boolean\n  ): T | undefined {\n    for (const l in this._layers) {\n      const layerAdapter = this._layers[l] as T;\n      const isFit = filter(layerAdapter);\n      if (isFit) {\n        return layerAdapter;\n      }\n    }\n  }\n\n  /**\n   * Check if the given layer on the map\n   */\n  isLayerVisible(layerDef: LayerDef): boolean {\n    const layer = this.getLayer(layerDef);\n    return layer && layer.options.visibility !== undefined\n      ? layer.options.visibility\n      : false;\n  }\n\n  /**\n   * Shortcut method to create base layer\n   * @param adapter\n   * @param options\n   */\n  async addBaseLayer<\n    K extends keyof LayerAdapters,\n    O extends AdapterOptions = AdapterOptions\n  >(\n    adapter: K | Type<LayerAdapters[K]>,\n    options: O | LayerAdaptersOptions[K]\n  ): Promise<LayerAdapter> {\n    const layer = await this.addLayer(adapter, {\n      ...options,\n      baseLayer: true\n    });\n\n    return layer;\n  }\n\n  /**\n   * Registration of map layer.\n   *\n   * @param adapter The name of layer adapter from [MapAdapter.layerAdapters](webmap#MapAdapter.layerAdapters).\n   *                May be custom object or class implemented by [BaseLayerAdapter](webmap#BaseLayerAdapter).\n   * @param options Specific options for given adapter\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', options).then((layer) => webMap.showLayer(layer));\n   *\n   * webMap.addLayer(CustomLayerAdapter, options);\n   * ```\n   */\n  async addLayer<\n    K extends keyof LayerAdapters,\n    O extends AdapterOptions = AdapterOptions\n  >(\n    adapter:\n      | K\n      | Type<LayerAdapters[K]>\n      | Promise<Type<LayerAdapters[K]> | undefined>,\n    options: O | LayerAdaptersOptions[K],\n    order?: number\n  ): Promise<LayerAdapter> {\n    const id = this._layersIds++;\n    const _order =\n      order || options.order !== undefined\n        ? options.order\n        : 0 || this._layersOrders++;\n    let adapterEngine: Type<LayerAdapter> | undefined;\n    if (typeof adapter === 'string') {\n      adapterEngine = this.getLayerAdapter(adapter);\n    } else if (typeof adapter === 'function') {\n      adapterEngine = adapter as Type<LayerAdapter>;\n    } else if (\n      'then' in (adapter as Promise<Type<LayerAdapters[K]> | undefined>)\n    ) {\n      adapterEngine = (await adapter) as Type<LayerAdapters[K]>;\n    }\n\n    const geoJsonOptions = options as GeoJsonAdapterOptions;\n\n    this._updateGeoJsonOptions(geoJsonOptions);\n\n    const { maxZoom, minZoom } = this.options;\n\n    options = {\n      id: String(id),\n      order: _order,\n      maxZoom,\n      minZoom,\n      ...options\n    };\n    // options.visibility is a layer global state, but each layer on init is not visible\n    const visibility = options.visibility;\n    options.visibility = false;\n\n    // TODO: check usage in adapter constructor and safe remove\n    if (options.baseLayer) {\n      options.order = 0;\n    }\n    if (this.options.onBeforeAddLayer) {\n      const modified = this.options.onBeforeAddLayer({\n        options,\n        adapter: adapterEngine\n      });\n      if (modified) {\n        if (modified.options) {\n          options = modified.options;\n        }\n        if (modified.adapter) {\n          adapterEngine = modified.adapter;\n        }\n      }\n    }\n    if (adapterEngine !== undefined) {\n      const _adapter = new adapterEngine(this.mapAdapter.map, options);\n      if (_adapter.options.baseLayer) {\n        options.baseLayer = true;\n        options.order = 0;\n      }\n\n      let layerId = _adapter.options.id;\n      if (layerId) {\n        this._layers[layerId] = _adapter;\n      }\n      this.emitter.emit('layer:preadd', _adapter);\n      await this.onMapLoad();\n      const layer = await _adapter.addLayer(options);\n      // checking that the original layer was inserted into the adapter anyway\n      _adapter.layer = layer;\n      // think about how to move `id` to the adapter's constructor,\n      // but that it is not required in the options\n      _adapter.id = _adapter.options.id;\n\n      layerId = _adapter.options.id;\n      if (layerId) {\n        if (geoJsonOptions.filter) {\n          this.filterLayer(_adapter, geoJsonOptions.filter);\n        }\n        if (options.baseLayer) {\n          this._baseLayers.push(layerId);\n        }\n        this._layers[layerId] = _adapter;\n\n        if (visibility) {\n          this.showLayer(layerId);\n        }\n      }\n      const opacity = options.opacity;\n      if (opacity !== undefined && opacity <= 1) {\n        this.setLayerOpacity(_adapter, opacity);\n      }\n      if (options.fit && _adapter.getExtent) {\n        const extent = await _adapter.getExtent();\n        if (extent) {\n          await this.fitBounds(extent);\n        }\n      }\n      this.emitter.emit('layer:add', _adapter);\n      return _adapter;\n    }\n    return Promise.reject('No adapter');\n  }\n\n  async addLayerFromAsyncAdapter<\n    K extends keyof LayerAdapters,\n    O extends AdapterOptions = AdapterOptions\n  >(\n    adapter: AdapterConstructor,\n    options: O | LayerAdaptersOptions[K],\n    order?: number\n  ): Promise<LayerAdapter> {\n    const _order = order || this._layersIds++;\n    const adapterConstructor = adapter as AdapterConstructor;\n    const adapterConstructorPromise = adapterConstructor();\n    const adapterEngine = await adapterConstructorPromise;\n    if (adapterEngine) {\n      return this.addLayer(adapterEngine, options, _order);\n    }\n    return Promise.reject('No adapter');\n  }\n\n  /**\n   * Remove all layer from map and memory.\n   */\n  removeLayers(allowCb?: (layer: string, adapter: LayerAdapter) => boolean) {\n    for (const l in this._layers) {\n      let allow = true;\n      if (allowCb) {\n        allow = allowCb(l, this._layers[l]);\n      }\n      if (allow) {\n        this.removeLayer(l);\n        delete this._layers[l];\n      }\n    }\n  }\n\n  /**\n   * Remove all layers but not remove basemap.\n   */\n  removeOverlays() {\n    this.removeLayers((layerId, layer) => !layer.options.baseLayer);\n  }\n\n  /**\n   * Remove specific layer from map and memory by its definition.\n   * @param layerDef\n   */\n  removeLayer(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    const layerId = layer && this.getLayerId(layer);\n    if (layer && layerId) {\n      this.emitter.emit('layer:preremove', layer);\n      if (layer.beforeRemove) {\n        layer.beforeRemove();\n      }\n      if (layer.removeLayer) {\n        layer.removeLayer();\n      } else {\n        this.mapAdapter.removeLayer(layer.layer);\n      }\n      if (layer.options && layer.options.baseLayer) {\n        const index = this._baseLayers.indexOf(layerId);\n        if (index) {\n          this._baseLayers.splice(index, 1);\n        }\n      }\n      delete this._layers[layerId];\n      this.emitter.emit('layer:remove', layer);\n    }\n  }\n\n  /**\n   * Create layer from GeoJson data. Set style and behavior for selection.\n   *\n   * @example\n   * ```javascript\n   * // Add simple layer\n   * webMap.addGeoJsonLayer({ data: geojson, paint: { color: 'red' } });\n   *\n   * // Add styled by feature property layer with selection behavior\n   * webMap.addGeoJsonLayer({\n   *   data: geojson,\n   *   paint: function (feature) {\n   *     return { color: feature.properties.color, opacity: 0.5 }\n   *   },\n   *  selectedPaint: function (feature) {\n   *    return { color: feature.properties.selcolor, opacity: 1 }\n   *  },\n   *  selectable: true,\n   *  multiselect: true\n   * });\n   *\n   * // Add marker layer styled with use [Icons](icons)\n   * webMap.addGeoJsonLayer({ data: geojson, paint: webMap.getIcon({ color: 'orange' })});\n   *\n   * // work with added layer\n   * const layer = webMap.addGeoJsonLayer({ data: geojson, id: 'my_layer_name'});\n   * // access layer by id\n   * webMap.showLayer('my_layer_name');\n   * // or access layer by instance\n   * webMap.showLayer(layer);\n   * ```\n   */\n  // @onMapLoad()\n  async addGeoJsonLayer<K extends keyof LayerAdaptersOptions>(\n    opt: GeoJsonAdapterOptions,\n    adapter?: K | Type<LayerAdapter>\n  ) {\n    opt = opt || {};\n    opt.multiselect = opt.multiselect !== undefined ? opt.multiselect : false;\n    opt.unselectOnSecondClick =\n      opt.unselectOnSecondClick !== undefined\n        ? opt.unselectOnSecondClick\n        : true;\n    if (!adapter) {\n      opt = updateGeoJsonAdapterOptions(opt);\n    }\n    opt.paint = opt.paint || {};\n    const layer = await this.addLayer(adapter || 'GEOJSON', opt);\n    this.showLayer(layer);\n    return layer;\n  }\n\n  /**\n   * Show added layer on the map by it definition.\n   */\n  showLayer(layerDef: LayerDef, options: ToggleLayerOptions = {}) {\n    this.toggleLayer(layerDef, true, options);\n  }\n\n  /**\n   * Hide added layer on the map by it definition.\n   */\n  hideLayer(layerDef: LayerDef, options: ToggleLayerOptions = {}) {\n    this.toggleLayer(layerDef, false, options);\n  }\n\n  /**\n   * Change added layer visibility on the map by given status or inverse current status.\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', {id: 'my_layer', url: ''}).then((layer) => {\n   *   webMap.toggleLayer(layer, true);\n   *   webMap.toggleLayer('my_layer', false);\n   *   webMap.toggleLayer('my_layer');\n   *   webMap.isLayerVisible(layer); // true\n   * });\n   * ```\n   */\n  toggleLayer(\n    layerDef: LayerDef,\n    status?: boolean,\n    options: ToggleLayerOptions = {}\n  ) {\n    const layer = this.getLayer(layerDef);\n    const onMap = layer && layer.options.visibility;\n    const toStatus = status !== undefined ? status : !onMap;\n    const silent = options.silent !== undefined ? options.silent : false;\n    const action = (source: any, l: LayerAdapter) => {\n      l.options.visibility = toStatus;\n\n      const preEventName = toStatus ? 'layer:preshow' : 'layer:prehide';\n      const eventName = toStatus ? 'layer:show' : 'layer:hide';\n      if (!silent) {\n        this.emitter.emit(preEventName, l);\n      }\n      if (toStatus && source) {\n        const order = l.options.baseLayer ? 0 : l.options.order;\n\n        // do not show baselayer if another on the map\n        if (order === 0 && this._baseLayers.length) {\n          const anotherVisibleLayerBaseLayer = this._baseLayers.find(x => {\n            return x !== l.id && this.isLayerVisible(x);\n          });\n          if (anotherVisibleLayerBaseLayer) {\n            this.hideLayer(anotherVisibleLayerBaseLayer);\n          }\n        }\n\n        if (l.showLayer) {\n          l.showLayer.call(l, l.layer);\n        } else {\n          this.mapAdapter.showLayer(l.layer);\n        }\n        if (order !== undefined) {\n          this.mapAdapter.setLayerOrder(l.layer, order, this._layers);\n        }\n      } else {\n        if (l.hideLayer) {\n          l.hideLayer.call(l, l.layer);\n        } else {\n          this.mapAdapter.hideLayer(l.layer);\n        }\n      }\n      if (!silent) {\n        this.emitter.emit(eventName, l);\n      }\n    };\n    if (layer && layer.options.visibility !== toStatus) {\n      if (this.mapAdapter.map) {\n        action(this.mapAdapter, layer);\n      } else {\n        this.mapAdapter.emitter.once('create', adapter => {\n          action(adapter.map, layer);\n        });\n      }\n    }\n  }\n\n  updateLayer(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      if (layer.updateLayer) {\n        layer.updateLayer();\n      } else if (this.isLayerVisible(layer)) {\n        this.hideLayer(layer, { silent: true });\n        this.showLayer(layer, { silent: true });\n      }\n    }\n  }\n\n  /**\n   * Set transparency for a given layer by number from 0 to 1\n   */\n  setLayerOpacity(layerDef: LayerDef, value: number) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      if (this.mapAdapter.setLayerOpacity) {\n        if (layer) {\n          this.mapAdapter.setLayerOpacity(layer.layer, value);\n        }\n      }\n    }\n  }\n\n  // requestGeomString(pixel: Pixel, pixelRadius: number) {\n  //   if (this.mapAdapter.requestGeomString) {\n  //     return this.mapAdapter.requestGeomString(pixel, pixelRadius);\n  //   }\n  // }\n\n  /**\n   * Mark the layer as selected.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be selected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.selectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   * @param layerDef\n   * @param findFeatureFun\n   */\n  selectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const adapter = layer as VectorLayerAdapter;\n      if (adapter && adapter.select) {\n        adapter.select(findFeatureFun);\n      }\n      const layerId = this.getLayerId(layer);\n      if (layerId) {\n        this._selectedLayers.push(layerId);\n      }\n    }\n  }\n\n  /**\n   * Unselect the given layer.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be unselected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.unSelectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   * @param layerDef\n   * @param findFeatureFun\n   */\n  unSelectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter) {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const adapter = layer && (layer as VectorLayerAdapter);\n      if (adapter.unselect) {\n        adapter.unselect(findFeatureFun);\n      }\n      const layerId = this.getLayerId(layer);\n      if (layerId) {\n        const index = this._selectedLayers.indexOf(layerId);\n        if (index !== -1) {\n          this._selectedLayers.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  /**\n   * Hide features from a vector layer using a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.filterLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   * @param layerDef\n   * @param filter\n   */\n  filterLayer(\n    layerDef: LayerDef,\n    filter: DataLayerFilter<Feature, L>\n  ): LayerDefinition<Feature, L>[] {\n    const layer = this.getLayer(layerDef);\n    const adapter = layer as VectorLayerAdapter;\n    if (adapter.filter) {\n      return adapter.filter(filter);\n    }\n    return [];\n  }\n\n  propertiesFilter(\n    layerDef: LayerDef,\n    filters: PropertiesFilter,\n    options?: FilterOptions\n  ) {\n    const layer = this.getLayer(layerDef);\n    const adapter = layer as VectorLayerAdapter;\n    if (adapter.propertiesFilter) {\n      adapter.propertiesFilter(filters, options);\n    } else if (adapter.filter) {\n      this.filterLayer(adapter, e => {\n        if (e.feature && e.feature.properties) {\n          return propertiesFilter(e.feature.properties, filters);\n        }\n        return true;\n      });\n    }\n  }\n\n  removeLayerFilter(layerDef: LayerDef) {\n    const layer = this.getLayer(layerDef);\n    const adapter = layer as VectorLayerAdapter;\n    if (adapter.removeFilter) {\n      adapter.removeFilter();\n    } else if (adapter.filter) {\n      adapter.filter(() => {\n        return true;\n      });\n    }\n  }\n\n  /**\n   * Sets the GeoJSON data for given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON').then((layer) => {\n   *   webMap.setLayerData(layer, geojson);\n   * });\n   * ```\n   */\n  setLayerData(layerDef: LayerDef, data: GeoJsonObject) {\n    const vectorAdapter = this.getLayer(layerDef);\n    const adapter = vectorAdapter as VectorLayerAdapter;\n    if (adapter) {\n      if (adapter.setData) {\n        adapter.setData(data);\n      } else if (adapter.clearLayer && adapter.addData) {\n        adapter.clearLayer();\n        adapter.addData(data);\n      }\n    }\n  }\n\n  /**\n   * Push new the GeoJSON features into given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson_features_5}).then((layer) => {\n   *   console.log(layer.getLayers().length) // > 5;\n   *   webMap.addLayerData(layer, geojson_features_3);\n   *   console.log(layer.getLayers().length) // > 8;\n   * });\n   * ```\n   */\n  addLayerData(layerDef: LayerDef, data: GeoJsonObject) {\n    const layerMem = this.getLayer(layerDef);\n    const adapter = layerMem as VectorLayerAdapter;\n    if (adapter.addData) {\n      adapter.addData(data);\n    }\n  }\n\n  /**\n   * Remove from vector layer all features.\n   * it is possible to remove only some objects if you specify a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.clearLayerData(layer, (feture) => feture.id === 42);\n   *   webMap.clearLayerData(layer);\n   * });\n   * ```\n   */\n  clearLayerData(layerDef: LayerDef, cb?: (feature: Feature) => boolean) {\n    const layerMem = this.getLayer(layerDef);\n    const adapter = layerMem as VectorLayerAdapter;\n    if (adapter && adapter.clearLayer) {\n      adapter.clearLayer(cb);\n    }\n  }\n\n  getAttributions(options: GetAttributionsOptions): string[] {\n    const attributions: string[] = [];\n    for (const l in this._layers) {\n      const layerMem = this._layers[l];\n      const onlyVisible =\n        options.onlyVisible !== undefined ? options.onlyVisible : true;\n      const useLayerAttr = onlyVisible ? layerMem.options.visibility : true;\n      if (useLayerAttr) {\n        const attr = layerMem.options && layerMem.options.attribution;\n        if (attr) {\n          attributions.push(attr);\n        }\n      }\n    }\n\n    return attributions;\n  }\n\n  getActiveBaseLayer() {\n    const visibleLayerBaseLayer = this.getBaseLayers().find(x => {\n      return this.isLayerVisible(x);\n    });\n    if (visibleLayerBaseLayer) {\n      return this.getLayer(visibleLayerBaseLayer);\n    }\n  }\n\n  private async _onLayerClick(options: OnLayerClickOptions) {\n    this.emitter.emit('layer:click', options);\n    return Promise.resolve(options);\n  }\n\n  private _updateGeoJsonOptions(options: GeoJsonAdapterOptions) {\n    const onLayerClickFromOpt = options.onLayerClick;\n    options.onLayerClick = e => {\n      if (onLayerClickFromOpt) {\n        onLayerClickFromOpt(e);\n      }\n      return this._onLayerClick(e);\n    };\n    if (!options.nativePaint) {\n      if (this.options.paint) {\n        options.paint = preparePaint(\n          options.paint || {},\n          this.options.paint,\n          this.getPaintFunctions\n        );\n      }\n      if (options.selectedPaint && this.options.selectedPaint) {\n        options.selectedPaint = preparePaint(\n          options.selectedPaint,\n          this.options.selectedPaint,\n          this.getPaintFunctions\n        );\n      }\n    }\n  }\n}\n","/**\n * @module webmap\n *\n * Since it was not possible to split the code through mixins, inheritance was used.\n * The `ts-mixin` plugin worked fine, but led to errors in IE.\n *\n * Now inheritance is as follow:\n * BaseWebMap > WebMapLayers > WebMap\n *\n * Will need to be done this way:\n * class WebMap extend mixin(WebMapLayers, WebMapControls) {}\n *\n * This approach can also be considered\n *\n * class WebMap {\n *   layers: WebMapLayers;\n *   controls  WebMapControls\n * }\n *\n * and then\n *\n * const webMap = new WebMap(...);\n * webMap.layers.addLayer(...)\n *\n * looks good, but will add difficulty in inheriting from WebMap\n *\n * old:\n *\n * class NgwMap extends WebMap {\n *   addLayer(...) {\n *      super.addLayer(...)\n *   }\n * }\n *\n * new:\n *\n * class NgwLayers extends WebMapLayers {\n *   addLayer(...) {\n *     super.addLayer(...)\n *   }\n * }\n *\n * class NgwMap extends WebMap {\n *   layersClass = NgwLayers\n * }\n *\n * ...and there will be compatibility issues\n *\n */\n\nimport { WebMapEvents } from './interfaces/Events';\n\nimport {\n  MapControl,\n  CreateControlOptions,\n  ButtonControlOptions,\n  ToggleControlOptions,\n  ToggleControl,\n  MapControls\n} from './interfaces/MapControl';\n\nimport { ControlPositions } from './interfaces/MapAdapter';\nimport { WebMapLayers } from './WebMapLayers';\n\nexport class WebMap<\n  M = any,\n  L = any,\n  C = any,\n  E extends WebMapEvents = WebMapEvents\n> extends WebMapLayers<M, L, C, E> {\n  static controls: {\n    [name: string]: (webMap: WebMap, options?: any) => any;\n  } = {\n    CONTROL: (\n      webMap: WebMap,\n      options: {\n        control: MapControl;\n        options?: CreateControlOptions;\n      }\n    ) => {\n      return webMap.createControl(options.control, options.options);\n    },\n    BUTTON: (webMap: WebMap, options: ButtonControlOptions) => {\n      return webMap.createButtonControl(options);\n    },\n    TOGGLE: (webMap: WebMap, options: ToggleControlOptions) => {\n      return webMap.createToggleControl(options);\n    }\n  };\n\n  async addControl<K extends keyof MapControls>(\n    controlDef: K | C,\n    position: ControlPositions,\n    options?: MapControls[K]\n  ): Promise<any> {\n    let control: C | undefined;\n    if (typeof controlDef === 'string') {\n      control = this.getControl(controlDef, options);\n    } else {\n      control = controlDef as C;\n    }\n    if (control) {\n      const _control = await control;\n      return this.mapAdapter.addControl(_control, position);\n    }\n  }\n\n  /**\n   * Creating a universal map layout control element. Can be used with any map adapter.\n   *\n   * @example\n   * const control = webMap.createControl({\n   *   onAdd() {\n   *     return document.createElement('div');\n   *   }\n   * });\n   */\n  async createControl(\n    control: MapControl,\n    options?: CreateControlOptions\n  ): Promise<C | undefined> {\n    await this.onLoad('build-map');\n    if (this.mapAdapter.createControl) {\n      return this.mapAdapter.createControl(control, options);\n    }\n  }\n\n  async createButtonControl(\n    options: ButtonControlOptions\n  ): Promise<C | undefined> {\n    await this.onLoad('build-map');\n    if (this.mapAdapter.createButtonControl) {\n      return this.mapAdapter.createButtonControl(options);\n    }\n  }\n\n  async createToggleControl(\n    options: ToggleControlOptions\n  ): Promise<(C & ToggleControl) | undefined> {\n    await this.onLoad('build-map');\n    if (this.mapAdapter.createToggleControl) {\n      return this.mapAdapter.createToggleControl(options);\n    } else {\n      if (this.mapAdapter.createButtonControl) {\n        return WebMap.utils.createToggleControl<C>(\n          this.mapAdapter.createButtonControl,\n          options\n        );\n      }\n    }\n  }\n\n  removeControl(control: any) {\n    if (control.remove) {\n      control.remove();\n    } else if (this.mapAdapter.removeControl) {\n      this.mapAdapter.removeControl(control);\n    }\n  }\n\n  getControl<K extends keyof MapControls>(\n    control: K,\n    options?: MapControls[K]\n  ): C | undefined {\n    const engine = this.mapAdapter.controlAdapters[control];\n    if (engine) {\n      return new engine(options);\n    } else {\n      const createFun = WebMap.controls[control];\n      if (createFun) {\n        return createFun(this, options);\n      }\n    }\n  }\n\n  protected async _addLayerProviders(): Promise<void> {\n    try {\n      for await (const kit of this._starterKits) {\n        if (kit.getLayerAdapters) {\n          const adapters = await kit.getLayerAdapters.call(kit);\n          if (adapters) {\n            for await (const adapter of adapters) {\n              const newAdapter = await adapter.createAdapter(this);\n              if (newAdapter) {\n                this.mapAdapter.layerAdapters[adapter.name] = newAdapter;\n              }\n            }\n          }\n        }\n      }\n    } catch (er) {\n      throw new Error(er);\n    }\n  }\n\n  protected async _onLoadSync(): Promise<void> {\n    for await (const kit of this._starterKits) {\n      if (kit.onLoadSync) {\n        try {\n          await kit.onLoadSync.call(kit, this);\n        } catch (er) {\n          console.error(er);\n        }\n      }\n    }\n  }\n}\n","/**\n * @module webmap\n * @preferred\n */\n\nimport { WebMap } from './WebMap';\n\nexport * from './WebMap';\nexport * from './WebMapLayers';\nexport * from './interfaces/BaseTypes';\nexport * from './interfaces/WebMapApp';\nexport * from './interfaces/MapAdapter';\nexport * from './interfaces/DialogAdapter';\nexport * from './interfaces/MapControl';\nexport * from './interfaces/LayerAdapter';\nexport * from './interfaces/StarterKit';\nexport * from './interfaces/RuntimeParams';\nexport * from './interfaces/Events';\n\nexport { WebMap };\nexport default WebMap;\n","import Vue from 'vue';\nimport VueNgwMap from './components/VueNgwMap';\n\nexport const capitalizeFirstLetter = (str: string) => {\n  if (!str || typeof str.charAt !== 'function') {\n    return str;\n  }\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\ninterface VueElement extends Vue {\n  [prop: string]: any;\n}\n\nexport function propsBinder(\n  vueElement: VueElement,\n  props: Record<string, any>\n) {\n  for (const key in props) {\n    const setMethodName = 'set' + capitalizeFirstLetter(key);\n    if (key in props && vueElement[setMethodName]) {\n      const prop = props[key];\n      const deepValue =\n        (prop && prop.type === Object) ||\n        prop.type === Array ||\n        Array.isArray(prop.type);\n      vueElement.$watch(\n        key,\n        (newVal, oldVal) => {\n          vueElement[setMethodName](newVal, oldVal);\n        },\n        {\n          deep: deepValue\n        }\n      );\n    }\n  }\n}\n\nexport const findNgwMapParent = (\n  firstVueParent: Vue | VueNgwMap\n): VueNgwMap => {\n  let found = false;\n  while (firstVueParent && !found) {\n    if (!('ngwMap' in firstVueParent)) {\n      firstVueParent = firstVueParent.$parent;\n    } else {\n      found = true;\n    }\n  }\n  return firstVueParent as VueNgwMap;\n};\n"],"sourceRoot":""}